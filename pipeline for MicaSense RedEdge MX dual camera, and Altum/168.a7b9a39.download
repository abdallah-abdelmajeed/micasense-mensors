"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[168],{64744:function(e,i,t){t.d(i,{Z:function(){return s}});let s=(0,t(7170).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},30168:function(e,i,t){t.r(i);var s=t(52676),r=t(43378),n=t(5588),a=t(25010),l=t(7717),o=t(90477),c=t(20311),d=t(75271),u=t(27565),m=t(64744),p=t(27934),f=t(68605),x=t(70017),v=t(22617),g=t(65819),_=t(39109);i.default=()=>{let e=(0,l.useTranslations)(),i=(0,_.Z)(),{copy:t}=(0,x.V)(),{enterpriseInfo:h,isOpenInviteModal:b,setIsOpenInviteModal:j,orgInvitationLink:N,setOrgInvitationLink:k}=(0,v.ZP)(),w=(0,g.ZP)(e=>e.userInfo),[y,E]=(0,d.useState)(!1),[C,S]=(0,d.useState)(!1),[I,O]=(0,d.useState)(N||{id:"",uuid:"",gmt_expired:"",status:""}),[T,A]=(0,d.useState)(""),[B,Z]=(0,d.useState)(!1),[D,L]=(0,d.useState)(0),[z,F]=(0,d.useState)([]),[M,R]=(0,d.useState)(!1),G=async e=>{let i=await (0,f.Ob)(e||1);F((null==i?void 0:i.records)||[]),L((null==i?void 0:i.pages)||0)},P=async()=>{var e,i;let t=null==w?void 0:null===(i=w.user_org_member)||void 0===i?void 0:null===(e=i.org)||void 0===e?void 0:e.org_id;if(!t||N)return;let s=await (0,f.JS)(t);O(s),S((null==s?void 0:s.status)==="ENABLE")};(0,d.useEffect)(()=>{b&&(A(""),G(1),P())},[b]),(0,d.useEffect)(()=>{if(N){O(N),S("ENABLE"===N.status);return}S(!1)},[N]),(0,d.useEffect)(()=>{b&&E(!1)},[b]);let V=async function(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(R(!0),e){let e=null;if(I&&(null==I?void 0:I.uuid)&&!i)e=await (0,f.s2)((null==I?void 0:I.id)||"","ENABLE");else{var t,s;e=await (0,f.y)((null==w?void 0:null===(s=w.user_org_member)||void 0===s?void 0:null===(t=s.org)||void 0===t?void 0:t.org_id)||"")}e&&(k(e),S(!0))}else{let e=await (0,f.s2)((null==I?void 0:I.id)||"","DISABLE");e&&(k(e),S(!1))}R(!1)},H=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),J=async()=>{if(!T.trim()||!H(T)){i.error(e("enterprise.input_email_tip"));return}Z(!0);let t=await (0,f.fA)(T);Z(!1),200===t.status?(i.success(e("enterprise.invite_success")),A(""),G(1)):"Your Email has already joined Organization"===t.message?i.error(e("enterprise.email_has_joined")):"NOT_ENOUGH_ORG_SEAT"===t.code||(null==t?void 0:t.code)==="NONE_ORG_SUBSCRIPTION"?i.error(e("enterprise.invite_failed_tip")):(null==t?void 0:t.code)==="ORG_REACH_JOIN_MAX_LIMIT"?i.error(e("enterprise.org_reach_join_max_limit_tip")):i.error(t.message||e("enterprise.invite_failed"))},U=(0,d.useMemo)(()=>{try{if(I){let e=new Date(null==I?void 0:I.gmt_expired),i=new Date,t=(e.getTime()-i.getTime())/864e5;if(t>=6.95)return 7;return t=Math.floor(t)}return 0}catch(e){return 0}},[I]);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(r.Vq,{open:b,onOpenChange:()=>j(!1),children:(0,s.jsxs)(r.cZ,{className:"max-w-xl w-full max-h-full dark:bg-[#454E5D]",children:[(0,s.jsx)(r.fK,{children:(0,s.jsx)(r.$N,{className:"p-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 mr-3",children:[y&&(0,s.jsx)(a.z,{className:"bg-transparent h-auto p-1 dark:text-gray-500 hover:bg-gray-300 dark:hover:bg-gray-500 focus:!ring-0 focus-visible:!ring-offset-0",size:"sm",variant:"secondary",onClick:()=>E(!1),children:(0,s.jsx)(m.Z,{className:"font-bold dark:text-white",size:20})}),(0,s.jsx)("span",{className:"text-lg font-bold",children:y?e("enterprise.invite_by_email"):e("enterprise.invite_member")})]})})}),(0,s.jsx)(r.a7,{className:"px-8 py-2",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[!y&&(0,s.jsx)("div",{className:"text-base font-bold",children:e("enterprise.invite_by_email")}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(n.I,{placeholder:e("enterprise.input_member_email"),onChange:e=>A(e.target.value),className:"text-base focus:!ring-0 focus-visible:!ring-offset-0 dark:bg-[#202531] dark:[&:-webkit-autofill]:!shadow-[0_0_0_30px_#202531_inset]",autoComplete:"off",spellCheck:"false",value:T,autoFocus:!1,tabIndex:-1,onFocus:()=>E(!0)}),(0,s.jsx)(a.z,{onClick:J,className:"p-3 text-base ".concat(!T.trim()&&"bg-[#EBEEF3] text-[#ACB9CD] dark:bg-[#454E5D] dark:text-[#B9BFCA]"),disabled:!T.trim(),children:B?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(p.Z,{className:"h-4 w-4 animate-spin"}),e("enterprise.send_invite")]}):e("enterprise.send_invite")})]}),!y&&(0,s.jsx)(c.O,{className:"mt-2 mb-2 dark:!bg-[#606B80]"}),!y&&(0,s.jsxs)("div",{className:"flex flex-col gap-4 mb-4",children:[(0,s.jsx)("div",{className:"text-base font-bold",children:e("enterprise.invite_by_link")}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-[-8px]",children:[(0,s.jsx)("div",{children:e("enterprise.invite_secret_link")}),(0,s.jsx)("div",{className:"ml-auto relative",children:M?(0,s.jsx)(p.Z,{className:"animate-spin ml-auto"}):(0,s.jsx)(o.r,{checked:C,onCheckedChange:e=>V(e),className:"ml-auto"})})]}),C&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(n.I,{placeholder:e("enterprise.input_member_email"),className:"focus:!ring-0 focus-visible:!ring-offset-0 dark:bg-[#202531]",autoComplete:"off",spellCheck:"false",readOnly:!0,value:"".concat(window.location.origin,"/enterprise/org/join/").concat(null==I?void 0:I.uuid)}),(0,s.jsx)(a.z,{onClick:()=>{t("".concat(window.location.origin,"/enterprise/org/join/").concat(null==I?void 0:I.uuid)),i.success(e("enterprise.link_copy_success",{count:U>=1?e("enterprise.day",{count:U}):e("enterprise.less_than_one_day")}))},children:e("invite.copy_link")})]}),(0,s.jsxs)("div",{className:"text-sm flex items-center mt-2 text-muted-foreground",children:[(0,s.jsx)("div",{className:"text-[#5F7698] dark:text-[#D0D4DC]",children:e("enterprise.link_validity")}),(0,s.jsxs)("div",{className:"".concat(U<=0?"text-red-500":"text-primary"," ml-1"),children:[U<=0&&e("enterprise.expired"),U<1&&U>0&&e("enterprise.less_than_one_day"),U>=1&&e("enterprise.day",{count:U})]}),(0,s.jsx)(a.z,{variant:"link",onClick:()=>{V(!0,!0),i.success(e("enterprise.invite_link_refresh"))},children:e("enterprise.regenerate")})]})]})]}),y&&(0,s.jsx)("div",{className:"flex flex-col gap-4 mb-4",children:(0,s.jsx)(u.Z,{memberList:z,enterpriseInfo:h,getMemberList:G,pageTotal:D,isModal:!0,isLoading:!1})})]})})]})})})}},5588:function(e,i,t){t.d(i,{I:function(){return a}});var s=t(52676),r=t(75271),n=t(37481);let a=r.forwardRef((e,i)=>{let{className:t,type:r,...a}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:i,...a})});a.displayName="Input"},70017:function(e,i,t){t.d(i,{V:function(){return r}});var s=t(75271);function r(){let{timeout:e=2e3}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[i,t]=(0,s.useState)(null),[r,n]=(0,s.useState)(!1),[a,l]=(0,s.useState)(null),o=i=>{window.clearTimeout(a),l(window.setTimeout(()=>n(!1),e)),n(i)};return{copy:e=>{"clipboard"in navigator?navigator.clipboard.writeText(e).then(()=>o(!0)).catch(e=>t(e)):t(Error("useClipboard: navigator.clipboard is not supported"))},copyItem:e=>{"clipboard"in navigator?navigator.clipboard.write([e]).then(()=>o(!0)).catch(e=>t(e)):t(Error("useClipboard: navigator.clipboard is not supported"))},reset:()=>{n(!1),t(null),window.clearTimeout(a)},error:i,copied:r}}}}]);