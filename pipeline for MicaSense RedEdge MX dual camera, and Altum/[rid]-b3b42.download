(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[463],{27185:function(e,t,s){var r=s(14224);function i(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=s(97991)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var s=this.useColors;if(e[0]=(s?"%c":"")+this.namespace+(s?" %c":" ")+e[0]+(s?"%c ":" ")+"+"+t.humanize(this.diff),s){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,n=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(n=i))}),e.splice(n,0,r)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){return"undefined"!=typeof window&&!!window.process&&"renderer"===window.process.type||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(i())},97991:function(e,t,s){var r;function i(e){function s(){if(s.enabled){var e=+new Date,i=e-(r||e);s.diff=i,s.prev=r,s.curr=e,r=e;for(var n=Array(arguments.length),a=0;a<n.length;a++)n[a]=arguments[a];n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var l=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,function(e,r){if("%%"===e)return e;l++;var i=t.formatters[r];if("function"==typeof i){var a=n[l];e=i.call(s,a),n.splice(l,1),l--}return e}),t.formatArgs.call(s,n),(s.log||t.log||console.log.bind(console)).apply(s,n)}}return s.namespace=e,s.enabled=t.enabled(e),s.useColors=t.useColors(),s.color=function(e){var s,r=0;for(s in e)r=(r<<5)-r+e.charCodeAt(s)|0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"==typeof t.init&&t.init(s),s}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var s=("string"==typeof e?e:"").split(/[\s,]+/),r=s.length,i=0;i<r;i++)s[i]&&("-"===(e=s[i].replace(/\*/g,".*?"))[0]?t.skips.push(RegExp("^"+e.substr(1)+"$")):t.names.push(RegExp("^"+e+"$")))},t.enabled=function(e){var s,r;for(s=0,r=t.skips.length;s<r;s++)if(t.skips[s].test(e))return!1;for(s=0,r=t.names.length;s<r;s++)if(t.names[s].test(e))return!0;return!1},t.humanize=s(9065),t.names=[],t.skips=[],t.formatters={}},3341:function(e){"use strict";e.exports=function e(t,s){if(t===s)return!0;if(t&&s&&"object"==typeof t&&"object"==typeof s){if(t.constructor!==s.constructor)return!1;if(Array.isArray(t)){if((r=t.length)!=s.length)return!1;for(i=r;0!=i--;)if(!e(t[i],s[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===s.toString();if((r=(n=Object.keys(t)).length)!==Object.keys(s).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(s,n[i]))return!1;for(i=r;0!=i--;){var r,i,n,a=n[i];if(!e(t[a],s[a]))return!1}return!0}return t!=t&&s!=s}},52596:function(e,t,s){"use strict";function r(e){return[].concat(e)}function i(e){return e.startsWith(":")}function n(e){return o(e)&&("*"===e||e.length>1&&":>~.+*".includes(e.slice(0,1))||d(e))}function a(e,t){return(o(t)||"number"==typeof t)&&"--"!==e&&!i(e)&&!l(e)}function l(e){return e.startsWith("@media")}function o(e){return e+""===e}function d(e){return o(e)&&(e.startsWith("&")||i(e))}function c(e,t=""){return e.filter(Boolean).join(t)}function u(e,t){let s=0;if(0===t.length)return s.toString();for(let e=0;e<t.length;e++)s=(s<<5)-s+t.charCodeAt(e),s&=s;return`${e??"cl"}_${s.toString(36)}`}s.d(t,{S:function(){return v},cx:function(){return function e(...t){return c(t.reduce((t,s)=>(s instanceof Set?t.push(...s):"string"==typeof s?t.push(s):Array.isArray(s)?t.push(e(...s)):"object"==typeof s&&Object.entries(s).forEach(([e,s])=>{s&&t.push(e)}),t),[])," ").trim()}}});var h=class e{constructor(e,t,s,r){this.sheet=e,this.property=t,this.value=s,this.selector=r,this.property=t,this.value=s,this.joined=`${t}:${s}`;let i=this.selector.preconditions.concat(this.selector.postconditions);this.hash=this.selector.hasConditions?this.selector.scopeClassName:u(this.sheet.name,this.joined),this.key=c([this.joined,i,this.hash])}toString(){let t=p(this.selector.preconditions,{right:this.hash});return t=p(this.selector.postconditions,{left:t}),`${t} {${e.genRule(this.property,this.value)}}`}static genRule(e,t){var s,r;return s=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r="content"===e?`"${t}"`:t,`${s}:${r};`}};function p(e,{left:t="",right:s=""}={}){let r=e.reduce((e,t)=>i(t)?e+t:d(t)?e+t.slice(1):c([e,t]," "),t);return c([r,s?`.${s}`:""]," ")}var m=class e{constructor(e,t=null,{preconditions:s,postconditions:i}={}){this.sheet=e,this.preconditions=[],this.scopeClassName=null,this.scopeName=null,this.postconditions=[],this.preconditions=s?r(s):[],this.postconditions=i?r(i):[],this.setScope(t)}setScope(e){return e&&(this.scopeClassName||(this.scopeName=e,this.scopeClassName=u(this.sheet.name,e+this.sheet.count))),this}get hasConditions(){return this.preconditions.length>0||this.postconditions.length>0}addScope(t){return new e(this.sheet,t,{preconditions:this.preconditions,postconditions:this.postconditions})}addPrecondition(t){return new e(this.sheet,this.scopeClassName,{postconditions:this.postconditions,preconditions:this.preconditions.concat(t)})}addPostcondition(t){return new e(this.sheet,this.scopeClassName,{preconditions:this.preconditions,postconditions:this.postconditions.concat(t)})}createRule(e,t){return new h(this.sheet,e,t,this)}},f=class{constructor(e,t){this.name=e,this.rootNode=t,this.storedStyles={},this.storedClasses={},this.style="",this.count=0,this.id=`flairup-${e}`,this.styleTag=this.createStyleTag()}getStyle(){return this.style}append(e){var t;this.style=(t=this.style)?`${t}
${e}`:e}apply(){this.count++,this.styleTag&&(this.styleTag.innerHTML=this.style)}isApplied(){return!!this.styleTag}createStyleTag(){if("undefined"==typeof document||this.isApplied()||null===this.rootNode)return this.styleTag;let e=document.createElement("style");return e.type="text/css",e.id=this.id,(this.rootNode??document.head).appendChild(e),e}addRule(e){let t=this.storedClasses[e.key];return o(t)?t:(this.storedClasses[e.key]=e.hash,this.storedStyles[e.hash]=[e.property,e.value],this.append(e.toString()),e.hash)}};function x(e,t){for(let s in e)t(s.trim(),e[s])}function v(e,t){let s=new f(e,t);return{create:function(e){let t={};return(function e(t,s,r){let i=[];return x(s,(a,l)=>{if(n(a))return e(t,l,r.addPrecondition(a)).forEach(e=>i.push(e));i.push([a,s[a],r.addScope(a)])}),i})(s,e,new m(s)).forEach(([e,i,o])=>{(function e(t,s,i){let o=new Set;return x(s,(s,d)=>{let c=[];if(n(s))c=e(t,d,i.addPostcondition(s));else if("."===s)c=r(d);else if(l(s))c=function(t,s,r,i){t.append(r+" {");let n=e(t,s,i);return t.append("}"),n}(t,d,s,i);else if("--"===s)c=function(t,s,r){let i=new Set,n=[];if(x(s,(s,l)=>{if(a(s,l)){n.push(h.genRule(s,l));return}g(e(t,l??{},r),i)}),!r.scopeClassName)return i;if(n.length){let e=n.join(" ");t.append(`${p(r.preconditions,{right:r.scopeClassName})} {${e}}`)}return i.add(r.scopeClassName),i}(t,d,i);else if(a(s,d)){let e=i.createRule(s,d);t.addRule(e),o.add(e.hash)}return g(c,o)}),o})(s,i,o).forEach(s=>{t[e]=t[e]??new Set,t[e].add(s)})}),s.apply(),t},getStyle:s.getStyle.bind(s),isApplied:s.isApplied.bind(s)}}function g(e,t){return e.forEach(e=>t.add(e)),t}},27499:function(e){function t(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(Error("Failed to load "+this.src),e)}}e.exports=function(e,s,r){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("script");"function"==typeof s&&(r=s,s={}),s=s||{},r=r||function(){},n.type=s.type||"text/javascript",n.charset=s.charset||"utf8",n.async=!("async"in s)||!!s.async,n.src=e,s.attrs&&function(e,t){for(var s in t)e.setAttribute(s,t[s])}(n,s.attrs),s.text&&(n.text=""+s.text),("onload"in n?t:function(e,t){e.onreadystatechange=function(){("complete"==this.readyState||"loaded"==this.readyState)&&(this.onreadystatechange=null,t(null,e))}})(n,r),n.onload||t(n,r),i.appendChild(n)}},93501:function(e){e.exports=function(e,t,s){switch(s.length){case 0:return e.call(t);case 1:return e.call(t,s[0]);case 2:return e.call(t,s[0],s[1]);case 3:return e.call(t,s[0],s[1],s[2])}return e.apply(t,s)}},72407:function(e){e.exports=function(e,t,s){if("function"!=typeof e)throw TypeError("Expected a function");return setTimeout(function(){e.apply(void 0,s)},t)}},5125:function(e,t,s){var r=s(48148),i=s(20323),n=s(71564);e.exports=function(e,t){return n(i(e,t,r),e+"")}},56447:function(e,t,s){var r=s(64806),i=s(34082),n=s(48148),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:n;e.exports=a},33124:function(e,t,s){var r=s(82996),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},20323:function(e,t,s){var r=s(93501),i=Math.max;e.exports=function(e,t,s){return t=i(void 0===t?e.length-1:t,0),function(){for(var n=arguments,a=-1,l=i(n.length-t,0),o=Array(l);++a<l;)o[a]=n[t+a];a=-1;for(var d=Array(t+1);++a<t;)d[a]=n[a];return d[t]=s(o),r(e,this,d)}}},71564:function(e,t,s){var r=s(56447),i=s(15509)(r);e.exports=i},15509:function(e){var t=Date.now;e.exports=function(e){var s=0,r=0;return function(){var i=t(),n=16-(i-r);if(r=i,n>0){if(++s>=800)return arguments[0]}else s=0;return e.apply(void 0,arguments)}}},82996:function(e){var t=/\s/;e.exports=function(e){for(var s=e.length;s--&&t.test(e.charAt(s)););return s}},64806:function(e){e.exports=function(e){return function(){return e}}},99178:function(e,t,s){var r=s(72407),i=s(5125),n=s(12448),a=i(function(e,t,s){return r(e,n(t)||0,s)});e.exports=a},12448:function(e,t,s){var r=s(33124),i=s(36838),n=s(16764),a=0/0,l=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,d=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(n(e))return a;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var s=o.test(e);return s||d.test(e)?c(e.slice(2),s?2:8):l.test(e)?a:+e}},9065:function(e){function t(e,t,s){return e<t?void 0:e<1.5*t?Math.floor(e/t)+" "+s:Math.ceil(e/t)+" "+s+"s"}e.exports=function(e,s){s=s||{};var r=typeof e;if("string"===r&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return 864e5*s;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*s;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*s;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===r&&!1===isNaN(e))return s.long?t(e,864e5,"day")||t(e,36e5,"hour")||t(e,6e4,"minute")||t(e,1e3,"second")||e+" ms":e>=864e5?Math.round(e/864e5)+"d":e>=36e5?Math.round(e/36e5)+"h":e>=6e4?Math.round(e/6e4)+"m":e>=1e3?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},17948:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search/[rid]",function(){return s(64418)}])},93586:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(7170).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},90281:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(7170).Z)("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]])},56734:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(7170).Z)("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]])},71887:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(7170).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},7642:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(7170).Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},58923:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(7170).Z)("FilePenLine",[["path",{d:"m18 5-3-3H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"h0fsxq"}],["path",{d:"M8 18h1",key:"13wk12"}],["path",{d:"M18.4 9.6a2 2 0 1 1 3 3L17 17l-4 1 1-4Z",key:"dyo8mm"}]])},17874:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(7170).Z)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]])},34095:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(7170).Z)("MessageCirclePlus",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},69863:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(7170).Z)("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]])},57937:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(7170).Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]])},6286:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(7170).Z)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]])},47841:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(7170).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},44417:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(7170).Z)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]])},62167:function(e,t,s){"use strict";var r=s(52676),i=s(26595),n=s(49759),a=s(56975),l=s(41031),o=s(74538),d=s(7717),c=s(67241),u=s(97247),h=s(29871),p=s(60701),m=s(46571);t.Z=e=>{let{className:t,hideIcon:s}=e,f=(0,d.useTranslations)(),{userAgent:x}=(0,p.q)(),{isMobile:v}=(0,h.Z)(),g=s?null:(0,u.s)(x)?(0,r.jsx)(c.nz,{className:"h-6 w-6"}):(0,r.jsx)(c.Ir,{className:"h-6 w-6"});return v&&!(0,u.Eg)()?(0,r.jsxs)(i.A,{color:"primary",size:"sm",className:t,onPress:()=>{(0,u.s)()?window.open("https://apps.apple.com/us/app/felo-search-the-world/id6598782546"):window.open("https://play.google.com/store/apps/details?id=ai.felo.search")},children:[g,f("get_app")]}):(0,u.Eg)()?null:(0,r.jsxs)(n.F,{children:[(0,r.jsx)(a.S,{children:(0,r.jsxs)(i.A,{color:"primary",variant:"light",className:(0,m.cn)("text-theme-blue-500 border-1 border-current",t),children:[(0,r.jsx)(c.bA,{}),f("get_app")]})}),(0,r.jsxs)(l.a,{"aria-label":"select theme",variant:"flat",onAction:e=>{"ios"===e&&window.open("https://apps.apple.com/us/app/felo-search-the-world/id6598782546"),"android"===e&&window.open("https://play.google.com/store/apps/details?id=ai.felo.search")},className:"p-2",children:[(0,r.jsx)(o.W,{startContent:(0,r.jsx)(c.nz,{className:"h-6 w-6"}),className:"text-[#1D3C6D] hover:!bg-blue-100 hover:!text-[#1D3C6D] dark:text-[#EDF3FC] hover:dark:!bg-[#2E3643] hover:dark:!text-[#EDF3FC]",children:f("download.ios_app")},"ios"),(0,r.jsx)(o.W,{startContent:(0,r.jsx)(c.Ir,{className:"h-6 w-6"}),className:"text-[#1D3C6D] hover:!bg-blue-100 hover:!text-[#1D3C6D] dark:text-[#EDF3FC] hover:dark:!bg-[#2E3643] hover:dark:!text-[#EDF3FC]",children:f("download.android_app")},"android")]})]})}},55039:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var r=s(52676);s(75271);var i=s(5311);function n(e){var t,s,n,a,l,o;let{messageId:d,content:c,query:u,index:h,showDispose:p=!0}=e,{mindmapList:m}=(0,i.Z)(),f=m.find(e=>e.message_id===d),x=(null==f?void 0:null===(n=f.images)||void 0===n?void 0:null===(s=n.covers)||void 0===s?void 0:null===(t=s.find(e=>"svg"===e.type))||void 0===t?void 0:t.path)||(null==f?void 0:null===(o=f.images)||void 0===o?void 0:null===(l=o.covers)||void 0===l?void 0:null===(a=l.find(e=>"png"===e.type))||void 0===a?void 0:a.path)||"";return x?(0,r.jsx)("img",{src:x,className:"w-full h-auto",alt:""}):(0,r.jsx)(r.Fragment,{})}},72153:function(e,t,s){"use strict";var r=s(52676),i=s(75271),n=s(48958),a=s(26595),l=s(38793),o=s(57207),d=s(43378),c=s(12266),u=s(53986),h=s(15699),p=s(7717),m=s(17436),f=s(31063),x=s(89335),v=s(60161),g=s(10328),b=s(97571),y=s(65819),w=s(4814);t.Z=e=>{var t,s,j;let{mode:k="create",topic:C,isOpen:_,parentPage:N,onClose:S,onCreateSuccess:E,onEditSuccess:T}=e,P=(0,p.useTranslations)(),{isDark:M}=(0,b.Z)(),{getList:F}=(0,m.Z)(),A=(0,y.gQ)(),L=(0,y.c0)(),I=(0,y.ZP)(e=>e.userInfo),[Z,D]=(0,i.useState)(""),[z,O]=(0,i.useState)(""),[R,B]=(0,i.useState)(""),[q,H]=(0,i.useState)(""),[V,W]=(0,i.useState)(!1),[U,G]=(0,i.useState)(null),[$,Y]=(0,i.useState)(!1),[J,X]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if("edit"===k&&C){var e;D(C.name),B(C.description||""),H(C.instruction||""),O(C.icon||""),Y(!!(null==C?void 0:null===(e=C.org_sharing)||void 0===e?void 0:e.org_id))}},[k,C]);let K=(0,i.useMemo)(()=>{var e,t,s;return L&&(null==I?void 0:null===(s=I.user_org_member)||void 0===s?void 0:null===(t=s.org_settings)||void 0===t?void 0:null===(e=t.share_permission_config)||void 0===e?void 0:e.space_content_add_role.includes(L))},[L,null==I?void 0:null===(j=I.user_org_member)||void 0===j?void 0:null===(s=j.org_settings)||void 0===s?void 0:null===(t=s.share_permission_config)||void 0===t?void 0:t.space_content_add_role]),Q=async()=>{if(!Z.trim()){G(P("topic.title_empty"));return}W(!0),G(null);let e={topicId:"",name:Z.trim(),description:R.trim(),instruction:q.trim(),icon:z,isSharedEnterprise:$};try{let r;if("create"===k)r=await (0,x.HV)(e),$&&(null==r?void 0:r.short_id)&&await (0,x.hS)({topic_short_id:null==r?void 0:r.short_id});else{var t,s;e.topicId=C.short_id||"",(r=await (0,x.Cn)(e)).isMove=!1,(null==e?void 0:e.isSharedEnterprise)?(null==C?void 0:null===(t=C.org_sharing)||void 0===t?void 0:t.org_id)||(await (0,x.hS)({topic_short_id:null==e?void 0:e.topicId}),r&&(r.org_sharing={org_id:"x"},r.isMove=!0)):(null==C?void 0:null===(s=C.org_sharing)||void 0===s?void 0:s.org_id)&&(await (0,x.au)({topic_short_id:null==e?void 0:e.topicId}),delete r.org_sharing,r.isMove=!0)}r?("create"===k?(null==E||E(r),D(""),B(""),H("")):null==T||T(r),S()):G(P("create"===k?"topic.failed_create":"topic.failed_update"))}catch(e){G(P("topic.error_theme"))}finally{W(!1),(0,f.fk)("create"===k?v.U.COLLECTION_CREATE:v.U.COLLECTION_UPDATE,e,!0)}};return(0,r.jsx)(d.Vq,{open:_,onOpenChange:S,children:(0,r.jsxs)(d.cZ,{className:"dark:bg-[#454E5D]","aria-describedby":void 0,children:[(0,r.jsx)(d.fK,{children:(0,r.jsx)(d.$N,{children:"create"===k?P("topic.create_theme"):P("topic.edit_theme")})}),(0,r.jsxs)(d.a7,{children:[(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)(n.Y,{label:P("topic.title"),labelPlacement:"outside",placeholder:P("topic.title_placeholder"),value:Z,onChange:e=>D(e.target.value),maxLength:50,isInvalid:!!U,errorMessage:U,endContent:(0,r.jsxs)("p",{className:"text-sm text-default-400",children:[null==Z?void 0:Z.length,"/50"]})}),(0,r.jsxs)("div",{className:"flex-none flex flex-col gap-2",children:[(0,r.jsx)("label",{className:"text-xs",htmlFor:"emoji",children:P("topic.emoji")}),(0,r.jsxs)(o.J2,{modal:!0,open:J,onOpenChange:X,children:[(0,r.jsx)(o.xo,{asChild:!0,children:(0,r.jsx)(a.A,{className:"border-dotted border-2 border-default-200",variant:"light",radius:"full",isIconOnly:!0,children:z?(0,r.jsx)("span",{className:"text-2xl",children:z}):(0,r.jsx)(g.Z,{size:16})})}),(0,r.jsx)(o.yk,{onOpenAutoFocus:e=>e.preventDefault(),align:"end",className:"p-0 w-[350px] box-content dark:bg-[#454E5D]",children:(0,r.jsx)(c.ZP,{className:"!border-none",theme:M?c.Q2.DARK:c.Q2.LIGHT,emojiStyle:c.Ye.NATIVE,onEmojiClick:(e,t)=>{O(e.emoji),X(!1)},searchPlaceholder:P("emoji.searchPlaceholder"),categories:[{name:P("emoji.categories.suggested"),category:c.Rj.SUGGESTED},{name:P("emoji.categories.custom"),category:c.Rj.CUSTOM},{name:P("emoji.categories.smileys"),category:c.Rj.SMILEYS_PEOPLE},{name:P("emoji.categories.animals"),category:c.Rj.ANIMALS_NATURE},{name:P("emoji.categories.foods"),category:c.Rj.FOOD_DRINK},{name:P("emoji.categories.travel"),category:c.Rj.TRAVEL_PLACES},{name:P("emoji.categories.activities"),category:c.Rj.ACTIVITIES},{name:P("emoji.categories.objects"),category:c.Rj.OBJECTS},{name:P("emoji.categories.symbols"),category:c.Rj.SYMBOLS},{name:P("emoji.categories.flags"),category:c.Rj.FLAGS}]})})]})]})]}),(0,r.jsx)(l.Y,{label:P("topic.description"),labelPlacement:"outside",value:R,placeholder:P("topic.description_placeholder"),onChange:e=>B(e.target.value),className:"mt-4",maxLength:100}),(0,r.jsx)(l.Y,{label:(0,r.jsxs)("div",{className:"flex flex-col gap-1 mb-1",children:[(0,r.jsx)("p",{children:P("topic.custom_prompt")}),(0,r.jsx)("p",{className:"text-sm text-default-400 dark:text-[#B9BFCA]",children:P("topic.custom_prompt_desc")})]}),labelPlacement:"outside",value:q,placeholder:P("topic.custom_prompt_placeholder"),onChange:e=>H(e.target.value),className:"mt-4",maxLength:4e3})]}),(0,r.jsxs)(d.cN,{className:"flex-col md:flex-row justify-between md:justify-between sm:justify-between items-center pt-2",children:[A?(0,r.jsx)(h.E,{value:$?"saveToEnterprise":"",className:(0,w.Z)("mb-2 md:mb-0 ",K?"":"pointer-events-none opacity-45"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-1 cursor-pointer",onClick:e=>{e.preventDefault(),e.stopPropagation(),Y(!$)},children:[(0,r.jsx)(h.m,{value:"saveToEnterprise",id:"saveToEnterprise",className:"border-gray-300",disabled:!K}),(0,r.jsx)(u._,{htmlFor:"saveToEnterprise",className:"cursor-pointer font-normal",children:P("topic.save_to_enterprise_share")})]})}):null,(0,r.jsx)(a.A,{color:"primary",onPress:Q,className:"ml-auto",isLoading:V,isDisabled:V||!(null==Z?void 0:Z.trim()),children:V?P("create"===k?"topic.creating":"topic.updating"):P("create"===k?"topic.create":"confirm")})]})]})})}},53986:function(e,t,s){"use strict";s.d(t,{_:function(){return d}});var r=s(52676),i=s(75271),n=s(20280),a=s(2808),l=s(37481);let o=(0,a.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)(n.f,{ref:t,className:(0,l.cn)(o(),s),...i})});d.displayName=n.f.displayName},20434:function(e,t,s){"use strict";s.d(t,{E:function(){return w}});var r=s(52676),i=s(75271),n=s(42478),a=s(64457),l="Progress",[o,d]=(0,n.b)(l),[c,u]=o(l),h=i.forwardRef((e,t)=>{var s,i;let{__scopeProgress:n,value:l=null,max:o,getValueLabel:d=f,...u}=e;(o||0===o)&&!g(o)&&console.error((s=`${o}`,`Invalid prop \`max\` of value \`${s}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let h=g(o)?o:100;null===l||b(l,h)||console.error((i=`${l}`,`Invalid prop \`value\` of value \`${i}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let p=b(l,h)?l:null,m=v(p)?d(p,h):void 0;return(0,r.jsx)(c,{scope:n,value:p,max:h,children:(0,r.jsx)(a.WV.div,{"aria-valuemax":h,"aria-valuemin":0,"aria-valuenow":v(p)?p:void 0,"aria-valuetext":m,role:"progressbar","data-state":x(p,h),"data-value":p??void 0,"data-max":h,...u,ref:t})})});h.displayName=l;var p="ProgressIndicator",m=i.forwardRef((e,t)=>{let{__scopeProgress:s,...i}=e,n=u(p,s);return(0,r.jsx)(a.WV.div,{"data-state":x(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...i,ref:t})});function f(e,t){return`${Math.round(e/t*100)}%`}function x(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function v(e){return"number"==typeof e}function g(e){return v(e)&&!isNaN(e)&&e>0}function b(e,t){return v(e)&&!isNaN(e)&&e<=t&&e>=0}m.displayName=p;var y=s(37481);let w=i.forwardRef((e,t)=>{let{className:s,value:i,...n}=e;return(0,r.jsx)(h,{ref:t,className:(0,y.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...n,children:(0,r.jsx)(m,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(i||0),"%)")}})})});w.displayName=h.displayName},15699:function(e,t,s){"use strict";s.d(t,{E:function(){return o},m:function(){return d}});var r=s(52676),i=s(75271),n=s(82788),a=s(58174),l=s(37481);let o=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)(n.fC,{className:(0,l.cn)("grid gap-2",s),...i,ref:t})});o.displayName=n.fC.displayName;let d=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)(n.ck,{ref:t,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...i,children:(0,r.jsx)(n.z$,{className:"flex items-center justify-center",children:(0,r.jsx)(a.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});d.displayName=n.ck.displayName},86811:function(e,t,s){"use strict";s.d(t,{Tu:function(){return m},bC:function(){return f},ue:function(){return p},yo:function(){return d}});var r=s(52676),i=s(75271),n=s(52090),a=s(2808),l=s(13005),o=s(37481);let d=n.fC;n.xz,n.x8;let c=n.h_,u=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)(n.aV,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...i,ref:t})});u.displayName=n.aV.displayName;let h=(0,a.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),p=i.forwardRef((e,t)=>{let{side:s="right",className:i,children:a,...d}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(n.VY,{ref:t,className:(0,o.cn)(h({side:s}),i),...d,children:[a,(0,r.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(l.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});p.displayName=n.VY.displayName;let m=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};m.displayName="SheetHeader";let f=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)(n.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold text-foreground",s),...i})});f.displayName=n.Dx.displayName,i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)(n.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",s),...i})}).displayName=n.dk.displayName},87582:function(e,t,s){"use strict";s.d(t,{VI:function(){return i},Y0:function(){return n},_X:function(){return a},cL:function(){return r}});let r="Felo Search, Free AI Search, AI Search Engine",i="https://static.felo.ai/felo-search/20250110-101851.webp",n="https://static.felo.ai/felo-search-ext/20250320-111125.webp",a="https://static.felo.ai/felo-search-ext/20250320-120036.webp"},25994:function(e,t,s){"use strict";s.d(t,{$8:function(){return i},Kp:function(){return a},PN:function(){return n},o2:function(){return r}});let r=10,i="sys_translate_language",n="sys_target_language",a="sys_fixed_model"},27519:function(e,t,s){"use strict";s.d(t,{Ts:function(){return r},yG:function(){return i}});let r=1,i=3},66302:function(e,t,s){"use strict";var r=s(75271);t.Z=()=>{let[e,t]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{t(!0)},[]),e}},64418:function(e,t,s){"use strict";let r;s.r(t),s.d(t,{__N_SSP:function(){return o1},default:function(){return o2}});var i,n,a,l=s(52676),o=s(75271),d=s.t(o,2),c=s(7717),u=s(92823),h=s(43378),p=s(26152),m=s(40176),f=s(14701),x=s.n(f),v=s(46571);s(16832);var g=s(81501),b=s(81555);let y=e=>{let{skeleton:t,markdown:s,sources:r,rid:i,loading:n,isVisible:a,messageId:d,isDocument:u,reflectionAnswer:h="",reflectionAnswerStart:p,template:f}=e;(0,c.useTranslations)();let[y,w]=(0,o.useState)(!1),[j,k]=(0,o.useState)(!0);(0,o.useEffect)(()=>{if(j&&s){let e=C(s.slice(0,30));w(e),(e||s.length>30)&&k(!1)}},[s,j]);let C=e=>/[\u0591-\u07FF\u200F\u202B\u202E\uFB1D-\uFDFD\uFE70-\uFEFC]/.test(e);return s?(0,l.jsx)("div",{className:(0,v.cn)("prose prose-md dark:prose-invert max-w-full",x().prose),dir:y?"rtl":"auto",children:(0,l.jsx)(g.Z,{sources:r,rid:i,loading:n,isVisible:a,isDocument:u,children:p?"".concat(s,"<div id='answer_reflection_start'></div>").concat(h):h?"".concat(s,"<div id='answer_reflection'></div>").concat(h):s})}):"single"===t?(null==f?void 0:f.template_type)===b.W.CUSTOM?null:(0,l.jsx)(m.O,{className:"max-w-sm h-8 bg-zinc-200 dark:bg-stone-900/30"}):(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(m.O,{className:"max-w-sm h-8 bg-zinc-200 dark:bg-stone-900/30"}),(0,l.jsx)(m.O,{className:"max-w-lg h-8 bg-zinc-200 dark:bg-stone-900/30"}),(0,l.jsx)(m.O,{className:"max-w-2xl h-8 bg-zinc-200 dark:bg-stone-900/30"}),(0,l.jsx)(m.O,{className:"max-w-lg h-8 bg-zinc-200 dark:bg-stone-900/30"}),(0,l.jsx)(m.O,{className:"max-w-xl h-8 bg-zinc-200 dark:bg-stone-900/30"})]})};var w=s(17224),j=s(37639),k=s(66302),C=s(88955),_=s(5311),N=s(10328),S=o.memo(e=>{let{disabled:t,shortId:s,isFollowUpNew:r,query:i,queryCategory:n}=e,a=(0,w.useRouter)(),o=(0,k.Z)(),{addThread:d}=(0,_.Z)();return o?(0,l.jsxs)("a",{className:(0,v.cn)("font-medium text-gray-700 dark:text-gray-300 transition-colors","group flex items-center justify-between gap-4 py-4",t?"cursor-not-allowed opacity-50":"hover:text-blue-500 dark:hover:text-blue-500"),href:"",onClick:e=>{e.preventDefault(),!t&&(s?r?a.push((0,j.M)({query:i,queryFrom:"related",fromShortId:s}),void 0,{scroll:!0}):(d({_local_id:(0,C.x0)(),query:i,short_id:s,query_from:"related"}),n&&"scholar"===n&&setTimeout(()=>{window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},600)):a.push((0,j.M)({query:i,queryFrom:"related"})))},children:[(0,l.jsx)("span",{children:i}),(0,l.jsx)(N.Z,{size:16,className:(0,v.cn)("flex-none text-gray-400",!t&&"group-hover:text-blue-500")})]}):null});let E=e=>{let{title:t,extra:s,content:r}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-4 w-full",children:[(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-primary",children:[(0,l.jsx)("span",{className:"text-lg flex items-center gap-2",children:t}),s]}),r]})};var T=s(7170);let P=(0,T.Z)("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]),M=e=>{let{disabled:t,shortId:s,relates:r,isFollowUpNew:i,queryCategory:n}=e,a=(0,c.useTranslations)();return(0,l.jsx)(E,{title:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(P,{})," ",a("related")]}),content:(0,l.jsx)("div",{className:"flex flex-col divide-y divide-gray-200 dark:divide-gray-700",children:null!==r?r.length>0?r.map((e,r)=>{let{question:a}=e;return(0,l.jsx)(o.Fragment,{children:(0,l.jsx)(S,{disabled:t,query:a,shortId:s,isFollowUpNew:i,queryCategory:n})},r)}):(0,l.jsx)("div",{className:"text-sm",children:a("no_related_list")}):(0,l.jsxs)("section",{className:"flex flex-col gap-4",children:[(0,l.jsx)(m.O,{className:"w-full h-8 bg-zinc-200 dark:bg-stone-900/30"}),(0,l.jsx)(m.O,{className:"w-full h-8 bg-zinc-200 dark:bg-stone-900/30"}),(0,l.jsx)(m.O,{className:"w-full h-8 bg-zinc-200 dark:bg-stone-900/30"})]})})})};var F=s(31022),A=s(47841);let L=(0,T.Z)("NotepadText",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"16",height:"18",x:"4",y:"4",rx:"2",key:"1u9h20"}],["path",{d:"M8 10h6",key:"3oa6kw"}],["path",{d:"M8 14h8",key:"1fgep2"}],["path",{d:"M8 18h5",key:"17enja"}]]);var I=s(82277),Z=s(31442),D=s(97571),z=s(93734),O=s(36551);let R=()=>(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"230",height:"117",viewBox:"0 0 230 117",fill:"none",children:[(0,l.jsx)("path",{d:"M17.5 116L217.5 116",stroke:"#101828",strokeWidth:"1.5",strokeLinecap:"round"}),(0,l.jsx)("path",{d:"M222.5 116L228.5 116",stroke:"#101828",strokeWidth:"1.5",strokeLinecap:"round"}),(0,l.jsx)("path",{d:"M1.5 116L13.5 116",stroke:"#101828",strokeWidth:"1.5",strokeLinecap:"round"}),(0,l.jsx)("path",{d:"M181.248 15.5134H51.7273C50.5918 15.5134 49.6714 16.4339 49.6714 17.5693V80.2739C49.6714 81.4094 50.5918 82.3298 51.7273 82.3298H181.248C182.384 82.3298 183.304 81.4094 183.304 80.2739V17.5693C183.304 16.4339 182.384 15.5134 181.248 15.5134Z",fill:"#0080FF",stroke:"#101828",strokeWidth:"1.02795"}),(0,l.jsx)("path",{d:"M169.632 26.9738L61.961 19.4447C60.8284 19.3655 59.8459 20.2195 59.7667 21.3522L55.4644 82.8786C55.3852 84.0113 56.2392 84.9937 57.3719 85.0729L165.043 92.602C166.176 92.6812 167.158 91.8272 167.238 90.6946L171.54 29.1681C171.619 28.0354 170.765 27.053 169.632 26.9738Z",fill:"#EDF0F3",stroke:"#101828",strokeWidth:"1.02795"}),(0,l.jsx)("path",{d:"M171.958 14.0698L64.6154 25.352C63.4862 25.4707 62.667 26.4823 62.7857 27.6115L69.2327 88.9504C69.3514 90.0796 70.363 90.8988 71.4922 90.7801L178.835 79.4979C179.964 79.3792 180.784 78.3676 180.665 77.2384L174.218 15.8995C174.099 14.7703 173.088 13.9511 171.958 14.0698Z",fill:"white",stroke:"#101828",strokeWidth:"1.02795"}),(0,l.jsx)("path",{d:"M180.319 25.698H49.7699C46.6475 25.698 44.1162 28.2292 44.1162 31.3517V110.503C44.1162 113.626 46.6475 116.157 49.7699 116.157H180.319C183.441 116.157 185.973 113.626 185.973 110.503V31.3517C185.973 28.2292 183.441 25.698 180.319 25.698Z",fill:"white",stroke:"#101828",strokeWidth:"1.02795"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M180.833 25.698C182.252 25.698 183.537 26.2733 184.467 27.2034C185.397 28.1335 185.973 29.4184 185.973 30.8377V34.6873H44.1162V30.8377C44.1162 29.4184 44.6915 28.1335 45.6216 27.2034C46.5517 26.2733 47.8366 25.698 49.2559 25.698H180.833Z",fill:"#EDF0F3",stroke:"#101828",strokeWidth:"1.02795"}),(0,l.jsx)("path",{d:"M52.8518 32.3801C53.9872 32.3801 54.9077 31.4596 54.9077 30.3242C54.9077 29.1888 53.9872 28.2683 52.8518 28.2683C51.7164 28.2683 50.7959 29.1888 50.7959 30.3242C50.7959 31.4596 51.7164 32.3801 52.8518 32.3801Z",fill:"#0080FF",stroke:"#101828",strokeWidth:"1.02795"}),(0,l.jsx)("path",{d:"M63.1306 32.3801C64.266 32.3801 65.1865 31.4596 65.1865 30.3242C65.1865 29.1888 64.266 28.2683 63.1306 28.2683C61.9952 28.2683 61.0747 29.1888 61.0747 30.3242C61.0747 31.4596 61.9952 32.3801 63.1306 32.3801Z",fill:"#0080FF",stroke:"#101828",strokeWidth:"1.02795"}),(0,l.jsx)("path",{d:"M73.4109 32.3801C74.5463 32.3801 75.4668 31.4596 75.4668 30.3242C75.4668 29.1888 74.5463 28.2683 73.4109 28.2683C72.2754 28.2683 71.355 29.1888 71.355 30.3242C71.355 31.4596 72.2754 32.3801 73.4109 32.3801Z",fill:"#0080FF",stroke:"#101828",strokeWidth:"1.02795"}),(0,l.jsx)("path",{d:"M204.888 103.274C204.91 103.165 205.066 103.165 205.089 103.274L205.559 105.517C205.567 105.553 205.593 105.583 205.628 105.594L207.773 106.295C207.867 106.325 207.867 106.459 207.773 106.49L205.628 107.19C205.593 107.202 205.567 107.231 205.559 107.267L205.089 109.51C205.066 109.619 204.91 109.619 204.888 109.51L204.417 107.267C204.409 107.231 204.383 107.202 204.348 107.19L202.203 106.49C202.109 106.459 202.109 106.325 202.204 106.295L204.348 105.594C204.383 105.583 204.409 105.553 204.417 105.517L204.888 103.274Z",fill:"#FF69B1",stroke:"#101828",strokeWidth:"0.513973"}),(0,l.jsx)("path",{d:"M148.866 44.6903C148.888 44.5809 149.045 44.5809 149.067 44.6903L149.732 47.918C149.74 47.954 149.766 47.9832 149.801 47.9948L152.785 48.9869C152.879 49.018 152.879 49.1508 152.785 49.1819L149.801 50.174C149.766 50.1856 149.74 50.2148 149.732 50.2508L149.067 53.4785C149.045 53.5879 148.888 53.5879 148.866 53.4785L148.201 50.2508C148.193 50.2148 148.167 50.1856 148.132 50.174L145.148 49.1819C145.054 49.1508 145.054 49.018 145.148 48.9869L148.132 47.9948C148.167 47.9832 148.193 47.954 148.201 47.918L148.866 44.6903Z",fill:"#FF7ABA",stroke:"#101828",strokeWidth:"0.513973"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M127.262 2.93709L125.972 2.61288C125.876 2.58859 125.817 2.49059 125.841 2.39399C125.858 2.32957 125.908 2.27926 125.972 2.26306L127.262 1.93885C127.326 1.92265 127.377 1.87235 127.393 1.80792L127.717 0.518496C127.741 0.421897 127.839 0.363278 127.936 0.387567C128 0.403766 128.051 0.454071 128.067 0.518496L128.391 1.80792C128.407 1.87235 128.457 1.92265 128.522 1.93885L129.811 2.26306C129.908 2.28735 129.967 2.38535 129.942 2.48195C129.926 2.54637 129.876 2.59668 129.811 2.61288L128.522 2.93709C128.457 2.95329 128.407 3.00359 128.391 3.06802L128.067 4.35744C128.042 4.45404 127.944 4.51266 127.848 4.48837C127.783 4.47217 127.733 4.42187 127.717 4.35744L127.393 3.06802C127.377 3.00359 127.326 2.95329 127.262 2.93709Z",fill:"#EDFF1B",stroke:"#101828",strokeWidth:"0.513973"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M76.065 100.778L74.1309 100.252C73.986 100.212 73.8981 100.053 73.9345 99.8958C73.9588 99.7911 74.0343 99.7094 74.1309 99.6831L76.065 99.1562C76.1617 99.1299 76.2371 99.0481 76.2614 98.9435L76.7477 96.8481C76.7842 96.6912 76.9312 96.5959 77.0761 96.6354C77.1727 96.6617 77.2482 96.7434 77.2725 96.8481L77.7588 98.9435C77.7831 99.0481 77.8585 99.1299 77.9552 99.1562L79.8893 99.6831C80.0342 99.7225 80.1221 99.8818 80.0857 100.039C80.0614 100.143 79.9859 100.225 79.8893 100.252L77.9552 100.778C77.8585 100.805 77.7831 100.886 77.7588 100.991L77.2725 103.086C77.236 103.243 77.089 103.339 76.9441 103.299C76.8475 103.273 76.772 103.191 76.7477 103.086L76.2614 100.991C76.2371 100.886 76.1617 100.805 76.065 100.778Z",fill:"#EDFF1B",stroke:"#101828",strokeWidth:"0.513973"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M165.516 104.369L163.099 103.761C162.917 103.716 162.808 103.532 162.853 103.351C162.883 103.23 162.978 103.136 163.099 103.105L165.516 102.497C165.637 102.467 165.731 102.373 165.762 102.252L166.37 99.8341C166.415 99.653 166.599 99.5431 166.78 99.5887C166.901 99.619 166.995 99.7133 167.026 99.8341L167.633 102.252C167.664 102.373 167.758 102.467 167.879 102.497L170.297 103.105C170.478 103.151 170.588 103.334 170.542 103.516C170.512 103.636 170.417 103.731 170.297 103.761L167.879 104.369C167.758 104.399 167.664 104.494 167.633 104.615L167.026 107.032C166.98 107.213 166.796 107.323 166.615 107.278C166.494 107.247 166.4 107.153 166.37 107.032L165.762 104.615C165.731 104.494 165.637 104.399 165.516 104.369Z",fill:"white"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.5689 89.321L21.796 88.8752C21.6631 88.8418 21.5825 88.7071 21.6159 88.5742C21.6382 88.4857 21.7074 88.4165 21.796 88.3942L23.5689 87.9484C23.6575 87.9261 23.7267 87.857 23.749 87.7684L24.1947 85.9954C24.2281 85.8626 24.3629 85.782 24.4957 85.8154C24.5843 85.8377 24.6535 85.9068 24.6757 85.9954L25.1215 87.7684C25.1438 87.857 25.213 87.9261 25.3016 87.9484L27.0745 88.3942C27.2073 88.4276 27.2879 88.5624 27.2545 88.6952C27.2323 88.7838 27.1631 88.8529 27.0745 88.8752L25.3016 89.321C25.213 89.3433 25.1438 89.4124 25.1215 89.501L24.6757 91.274C24.6423 91.4068 24.5076 91.4874 24.3748 91.454C24.2862 91.4317 24.217 91.3626 24.1947 91.274L23.749 89.501C23.7267 89.4124 23.6575 89.3433 23.5689 89.321Z",fill:"#FF8D3B",stroke:"#101828",strokeWidth:"0.513973"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M59.923 71.9008L57.3441 71.2524C57.1509 71.2038 57.0337 71.0078 57.0823 70.8146C57.1147 70.6857 57.2153 70.5851 57.3441 70.5527L59.923 69.9043C60.0518 69.8719 60.1524 69.7713 60.1848 69.6425L60.8333 67.0636C60.8818 66.8704 61.0778 66.7532 61.271 66.8017C61.3999 66.8341 61.5005 66.9348 61.5329 67.0636L62.1813 69.6425C62.2137 69.7713 62.3143 69.8719 62.4432 69.9043L65.022 70.5527C65.2152 70.6013 65.3324 70.7973 65.2839 70.9905C65.2515 71.1194 65.1509 71.22 65.022 71.2524L62.4432 71.9008C62.3143 71.9332 62.2137 72.0338 62.1813 72.1626L61.5329 74.7415C61.4843 74.9347 61.2883 75.0519 61.0951 75.0034C60.9663 74.971 60.8657 74.8703 60.8333 74.7415L60.1848 72.1626C60.1524 72.0338 60.0518 71.9332 59.923 71.9008Z",fill:"white"}),(0,l.jsx)("path",{d:"M45.3714 37.6252C48.8173 37.4446 51.8389 39.6346 52.8527 42.7692L52.9719 42.761C55.5232 42.6273 57.6997 44.5871 57.8335 47.1384C57.9672 49.6896 56.0074 51.8662 53.4561 51.9999C52.2681 52.0621 51.1613 51.6704 50.3042 50.9764C49.1479 51.867 47.719 52.4278 46.1515 52.51C43.7758 52.6345 41.6018 51.6323 40.1484 49.9706C39.1955 51.7014 37.396 52.915 35.2773 53.0261C32.9817 53.1464 30.9234 51.9401 29.847 50.0775C29.4316 50.2981 28.9622 50.4335 28.4612 50.4597C26.6186 50.5563 25.0467 49.1409 24.9501 47.2983C24.8535 45.4558 26.269 43.8838 28.1115 43.7872C28.7373 43.7544 29.3318 43.896 29.848 44.1695C30.8151 42.4958 32.5838 41.3296 34.6587 41.2209C36.2009 41.1401 37.636 41.658 38.7383 42.5714C39.7163 39.8199 42.2732 37.7876 45.3714 37.6252Z",fill:"#EDF0F3",stroke:"#101828",strokeWidth:"1.02795",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M193.547 48.3237C196.839 48.1512 199.743 50.1422 200.88 53.0535C201.133 52.996 201.394 52.9596 201.661 52.9456C204.212 52.8119 206.389 54.7716 206.523 57.3229C206.656 59.8741 204.697 62.0507 202.145 62.1844C200.979 62.2455 199.89 61.8687 199.04 61.1977C197.801 62.3629 196.158 63.1125 194.327 63.2085C191.972 63.3319 189.816 62.3484 188.362 60.713C187.306 62.1447 185.64 63.1098 183.723 63.2102C181.518 63.3258 179.522 62.2682 178.343 60.5831C177.854 60.9169 177.271 61.125 176.636 61.1582C174.794 61.2548 173.222 59.8394 173.125 57.9968C173.029 56.1542 174.444 54.5823 176.287 54.4857C176.782 54.4598 177.258 54.543 177.69 54.7144C178.567 52.5762 180.616 51.0208 183.077 50.8918C184.688 50.8074 186.186 51.3486 187.337 52.3028C188.519 50.0532 190.824 48.4664 193.547 48.3237Z",fill:"#EDF0F3",stroke:"#101828",strokeWidth:"1.02795",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M115.754 47.0842H111.761V53.1133H115.754V47.0842Z",fill:"#101828"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M111.019 49.094H116.496C117.141 49.094 117.695 49.555 117.811 50.1897L118.793 55.5558C118.926 56.2818 118.445 56.978 117.719 57.1109C117.64 57.1254 117.559 57.1328 117.478 57.1328H110.036C109.298 57.1328 108.7 56.5345 108.7 55.7964C108.7 55.7157 108.707 55.6352 108.722 55.5558L109.704 50.1897C109.82 49.555 110.373 49.094 111.019 49.094Z",fill:"#101828"}),(0,l.jsx)("path",{d:"M118.414 45.7444H109.102C108.732 45.7444 108.433 46.0435 108.433 46.4125V46.416C108.433 46.785 108.732 47.0842 109.102 47.0842H118.414C118.783 47.0842 119.082 46.785 119.082 46.416V46.4125C119.082 46.0435 118.783 45.7444 118.414 45.7444Z",fill:"#101828"}),(0,l.jsx)("path",{d:"M130.685 57.2583L127.336 55.0835L124.053 60.1399L127.402 62.3147L130.685 57.2583Z",fill:"#101828"}),(0,l.jsx)("path",{d:"M131.971 56.4959L127.511 53.599C127.201 53.398 126.787 53.486 126.586 53.7955L126.584 53.7984C126.383 54.1079 126.471 54.5217 126.781 54.7227L131.242 57.6196C131.551 57.8206 131.965 57.7326 132.166 57.4231L132.168 57.4202C132.369 57.1107 132.281 56.6969 131.971 56.4959Z",fill:"#101828"}),(0,l.jsx)("path",{d:"M113.759 105.031C127.909 105.031 139.38 93.4834 139.38 79.2389C139.38 64.9944 127.909 53.447 113.759 53.447C99.6081 53.447 88.137 64.9944 88.137 79.2389C88.137 93.4834 99.6081 105.031 113.759 105.031Z",fill:"white",stroke:"#101828",strokeWidth:"1.02795"}),(0,l.jsx)("mask",{id:"mask0_738_12069",maskUnits:"userSpaceOnUse",x:"91",y:"56",width:"46",height:"47",children:(0,l.jsx)("path",{d:"M113.759 102.016C126.256 102.016 136.387 91.8187 136.387 79.2396C136.387 66.6605 126.256 56.4631 113.759 56.4631C101.262 56.4631 91.1311 66.6605 91.1311 79.2396C91.1311 91.8187 101.262 102.016 113.759 102.016Z",fill:"#CBE5FF"})}),(0,l.jsxs)("g",{mask:"url(#mask0_738_12069)",children:[(0,l.jsx)("path",{d:"M113.759 102.016C126.256 102.016 136.387 91.8187 136.387 79.2396C136.387 66.6605 126.256 56.4631 113.759 56.4631C101.262 56.4631 91.1311 66.6605 91.1311 79.2396C91.1311 91.8187 101.262 102.016 113.759 102.016Z",fill:"#0080FF"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M114.229 56.4625C114.229 56.278 114.079 56.1284 113.895 56.1284C113.71 56.1284 113.561 56.278 113.561 56.4625V61.101C113.561 61.2855 113.71 61.4351 113.895 61.4351C114.079 61.4351 114.229 61.2855 114.229 61.101V56.4625ZM130.132 63.3692C130.262 63.2383 130.261 63.0268 130.13 62.8968C129.999 62.7667 129.788 62.7674 129.658 62.8983L126.399 66.1783C126.269 66.3091 126.27 66.5207 126.401 66.6507C126.532 66.7808 126.743 66.7801 126.873 66.6492L130.132 63.3692ZM136.856 79.2391C136.856 79.4236 136.706 79.5732 136.522 79.5732H131.913C131.729 79.5732 131.579 79.4236 131.579 79.2391C131.579 79.0546 131.729 78.905 131.913 78.905H136.522C136.706 78.905 136.856 79.0546 136.856 79.2391ZM129.657 95.5805C129.787 95.7114 129.999 95.7121 130.13 95.582C130.261 95.452 130.261 95.2405 130.131 95.1096L126.873 91.8296C126.743 91.6987 126.531 91.6981 126.4 91.8281C126.269 91.9581 126.269 92.1697 126.399 92.3006L129.657 95.5805ZM113.895 102.35C113.71 102.35 113.561 102.2 113.561 102.016V97.3772C113.561 97.1927 113.71 97.0431 113.895 97.0431C114.079 97.0431 114.229 97.1927 114.229 97.3772V102.016C114.229 102.2 114.079 102.35 113.895 102.35ZM97.6563 95.1091C97.5262 95.24 97.5269 95.4515 97.6578 95.5816C97.7887 95.7116 98.0002 95.7109 98.1303 95.58L101.389 92.3001C101.519 92.1692 101.518 91.9577 101.387 91.8277C101.256 91.6976 101.045 91.6983 100.915 91.8292L97.6563 95.1091ZM90.9307 79.2398C90.9307 79.0553 91.0802 78.9057 91.2647 78.9057H95.873C96.0575 78.9057 96.2071 79.0553 96.2071 79.2398C96.2071 79.4243 96.0575 79.5739 95.873 79.5739H91.2647C91.0802 79.5739 90.9307 79.4243 90.9307 79.2398ZM98.1307 62.8979C98.0006 62.767 97.7891 62.7663 97.6582 62.8963C97.5273 63.0264 97.5266 63.2379 97.6567 63.3688L100.915 66.6487C101.045 66.7796 101.257 66.7803 101.388 66.6503C101.519 66.5202 101.519 66.3087 101.389 66.1778L98.1307 62.8979Z",fill:"white"})]}),(0,l.jsx)("path",{d:"M113.758 84.598C116.698 84.598 119.082 82.1986 119.082 79.2388C119.082 76.279 116.698 73.8796 113.758 73.8796C110.817 73.8796 108.433 76.279 108.433 79.2388C108.433 82.1986 110.817 84.598 113.758 84.598Z",fill:"#101828"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M127.366 71.9046C127.463 72.0796 127.408 72.2992 127.242 72.4091L117.487 78.8359C116.917 79.2114 116.151 79.0538 115.775 78.4838C115.757 78.4566 115.74 78.4286 115.725 78.4001C115.392 77.7956 115.612 77.0356 116.217 76.7028C116.241 76.6891 116.267 76.6762 116.292 76.6642L126.875 71.7439C127.056 71.6599 127.27 71.7302 127.366 71.9046Z",fill:"#101828"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M116.419 79.2389C116.419 80.7188 115.227 81.9185 113.757 81.9185C113.475 81.9185 113.203 81.8743 112.948 81.7924L103.836 95.4024C103.734 95.5545 103.511 95.5836 103.338 95.4674L103.336 95.4662C103.162 95.3481 103.104 95.129 103.207 94.9757L112.259 81.4546C111.557 80.9722 111.095 80.1598 111.095 79.2389C111.095 77.759 112.287 76.5593 113.757 76.5593C115.227 76.5593 116.419 77.759 116.419 79.2389Z",fill:"white"}),(0,l.jsx)("path",{d:"M143.844 76.0686H130.958C130.4 76.0686 129.948 76.5206 129.948 77.0782C129.948 77.6358 130.4 78.0878 130.958 78.0878H143.844C144.401 78.0878 144.853 77.6358 144.853 77.0782C144.853 76.5206 144.401 76.0686 143.844 76.0686Z",fill:"#101828"}),(0,l.jsx)("path",{d:"M143.843 102.318H130.957C130.4 102.318 129.948 102.77 129.948 103.327C129.948 103.885 130.4 104.337 130.957 104.337H143.843C144.401 104.337 144.853 103.885 144.853 103.327C144.853 102.77 144.401 102.318 143.843 102.318Z",fill:"#101828"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M143.164 77.7488V82.9772C143.164 84.4701 142.499 85.8853 141.349 86.8373L139.099 88.6996V91.7284L140.92 92.9343C142.321 93.8625 143.164 95.4314 143.164 97.1124V102.657H131.637V97.1124C131.637 95.4314 132.48 93.8625 133.881 92.9343L135.702 91.7284V88.6996L133.453 86.8373C132.303 85.8853 131.637 84.4701 131.637 82.9772V77.7488H143.164Z",fill:"white",stroke:"#101828",strokeWidth:"0.668164"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M142.143 82.7991C142.143 84.078 141.573 85.2903 140.587 86.1059L138.078 88.1835V95.5872L139.749 96.6941C141.244 97.6841 142.143 99.3576 142.143 101.151V101.645H132.658V101.151C132.658 99.3576 133.557 97.6841 135.052 96.6941L136.723 95.5872V88.1835L134.213 86.1059C133.228 85.2903 132.658 84.078 132.658 82.7991H142.143Z",fill:"#0080FF"})]}),B=()=>(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"230",height:"117",viewBox:"0 0 230 117",fill:"none",children:[(0,l.jsx)("path",{d:"M17.5 116L217.5 116",stroke:"#F5F5F6",strokeWidth:"1.5",strokeLinecap:"round"}),(0,l.jsx)("path",{d:"M222.5 116L228.5 116",stroke:"#F5F5F6",strokeWidth:"1.5",strokeLinecap:"round"}),(0,l.jsx)("path",{d:"M1.5 116L13.5 116",stroke:"#F5F5F6",strokeWidth:"1.5",strokeLinecap:"round"}),(0,l.jsx)("path",{d:"M181.248 15.5137H51.7273C50.5918 15.5137 49.6714 16.4341 49.6714 17.5696V80.2742C49.6714 81.4096 50.5918 82.3301 51.7273 82.3301H181.248C182.384 82.3301 183.304 81.4096 183.304 80.2742V17.5696C183.304 16.4341 182.384 15.5137 181.248 15.5137Z",fill:"#0080FF",stroke:"#F5F5F6",strokeWidth:"1.02795"}),(0,l.jsx)("path",{d:"M169.632 26.9733L61.961 19.4442C60.8284 19.365 59.8459 20.219 59.7667 21.3517L55.4644 82.8781C55.3852 84.0108 56.2392 84.9932 57.3719 85.0724L165.043 92.6015C166.176 92.6807 167.158 91.8267 167.238 90.6941L171.54 29.1676C171.619 28.0349 170.765 27.0525 169.632 26.9733Z",fill:"#2F333C",stroke:"#F5F5F6",strokeWidth:"1.02795"}),(0,l.jsx)("path",{d:"M171.958 14.0693L64.6154 25.3515C63.4862 25.4702 62.667 26.4818 62.7857 27.611L69.2327 88.9499C69.3514 90.0791 70.363 90.8983 71.4922 90.7796L178.835 79.4974C179.964 79.3787 180.784 78.3671 180.665 77.2379L174.218 15.899C174.099 14.7698 173.088 13.9506 171.958 14.0693Z",fill:"#202329",stroke:"#F5F5F6",strokeWidth:"1.02795"}),(0,l.jsx)("path",{d:"M180.319 25.6973H49.7699C46.6475 25.6973 44.1162 28.2285 44.1162 31.351V110.503C44.1162 113.625 46.6475 116.156 49.7699 116.156H180.319C183.441 116.156 185.973 113.625 185.973 110.503V31.351C185.973 28.2285 183.441 25.6973 180.319 25.6973Z",fill:"#131316",stroke:"#F5F5F6",strokeWidth:"1.02795"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M180.833 25.6973C182.252 25.6973 183.537 26.2725 184.467 27.2027C185.397 28.1328 185.973 29.4177 185.973 30.837V34.6865H44.1162V30.837C44.1162 29.4177 44.6915 28.1328 45.6216 27.2027C46.5517 26.2725 47.8366 25.6973 49.2559 25.6973H180.833Z",fill:"#2F333C",stroke:"#F5F5F6",strokeWidth:"1.02795"}),(0,l.jsx)("path",{d:"M52.8518 32.3794C53.9872 32.3794 54.9077 31.4589 54.9077 30.3235C54.9077 29.188 53.9872 28.2676 52.8518 28.2676C51.7164 28.2676 50.7959 29.188 50.7959 30.3235C50.7959 31.4589 51.7164 32.3794 52.8518 32.3794Z",fill:"#0080FF",stroke:"#F5F5F6",strokeWidth:"1.02795"}),(0,l.jsx)("path",{d:"M63.1306 32.3794C64.266 32.3794 65.1865 31.4589 65.1865 30.3235C65.1865 29.188 64.266 28.2676 63.1306 28.2676C61.9952 28.2676 61.0747 29.188 61.0747 30.3235C61.0747 31.4589 61.9952 32.3794 63.1306 32.3794Z",fill:"#0080FF",stroke:"#F5F5F6",strokeWidth:"1.02795"}),(0,l.jsx)("path",{d:"M73.4109 32.3794C74.5463 32.3794 75.4668 31.4589 75.4668 30.3235C75.4668 29.188 74.5463 28.2676 73.4109 28.2676C72.2754 28.2676 71.355 29.188 71.355 30.3235C71.355 31.4589 72.2754 32.3794 73.4109 32.3794Z",fill:"#0080FF",stroke:"#F5F5F6",strokeWidth:"1.02795"}),(0,l.jsx)("path",{d:"M204.888 103.274C204.91 103.165 205.066 103.165 205.089 103.274L205.559 105.517C205.567 105.553 205.593 105.582 205.628 105.594L207.773 106.294C207.867 106.325 207.867 106.459 207.773 106.489L205.628 107.19C205.593 107.201 205.567 107.231 205.559 107.267L205.089 109.51C205.066 109.619 204.91 109.619 204.888 109.51L204.417 107.267C204.409 107.231 204.383 107.201 204.348 107.19L202.203 106.489C202.109 106.459 202.109 106.325 202.204 106.294L204.348 105.594C204.383 105.582 204.409 105.553 204.417 105.517L204.888 103.274Z",fill:"#FF69B1",stroke:"#F5F5F6",strokeWidth:"0.513973"}),(0,l.jsx)("path",{d:"M148.866 44.6898C148.888 44.5804 149.045 44.5804 149.067 44.6898L149.732 47.9175C149.74 47.9535 149.766 47.9828 149.801 47.9943L152.785 48.9864C152.879 49.0176 152.879 49.1503 152.785 49.1815L149.801 50.1735C149.766 50.1851 149.74 50.2143 149.732 50.2503L149.067 53.478C149.045 53.5874 148.888 53.5874 148.866 53.478L148.201 50.2503C148.193 50.2143 148.167 50.1851 148.132 50.1735L145.148 49.1815C145.054 49.1503 145.054 49.0176 145.148 48.9864L148.132 47.9943C148.167 47.9828 148.193 47.9535 148.201 47.9175L148.866 44.6898Z",fill:"#FF7ABA",stroke:"#F5F5F6",strokeWidth:"0.513973"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M127.262 2.93684L125.972 2.61263C125.876 2.58835 125.817 2.49035 125.841 2.39375C125.858 2.32932 125.908 2.27902 125.972 2.26282L127.262 1.93861C127.326 1.92241 127.377 1.8721 127.393 1.80768L127.717 0.518252C127.741 0.421653 127.839 0.363034 127.936 0.387323C128 0.403522 128.051 0.453827 128.067 0.518252L128.391 1.80768C128.407 1.8721 128.457 1.92241 128.522 1.93861L129.811 2.26282C129.908 2.28711 129.967 2.38511 129.942 2.4817C129.926 2.54613 129.876 2.59643 129.811 2.61263L128.522 2.93684C128.457 2.95304 128.407 3.00335 128.391 3.06777L128.067 4.3572C128.042 4.4538 127.944 4.51242 127.848 4.48813C127.783 4.47193 127.733 4.42163 127.717 4.3572L127.393 3.06777C127.377 3.00335 127.326 2.95304 127.262 2.93684Z",fill:"#EDFF1B",stroke:"#F5F5F6",strokeWidth:"0.513973"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M76.065 100.778L74.1309 100.251C73.986 100.212 73.8981 100.052 73.9345 99.8953C73.9588 99.7906 74.0343 99.7089 74.1309 99.6826L76.065 99.1557C76.1617 99.1294 76.2371 99.0477 76.2614 98.943L76.7477 96.8476C76.7842 96.6907 76.9312 96.5954 77.0761 96.6349C77.1727 96.6612 77.2482 96.743 77.2725 96.8476L77.7588 98.943C77.7831 99.0477 77.8585 99.1294 77.9552 99.1557L79.8893 99.6826C80.0342 99.722 80.1221 99.8813 80.0857 100.038C80.0614 100.143 79.9859 100.225 79.8893 100.251L77.9552 100.778C77.8585 100.804 77.7831 100.886 77.7588 100.991L77.2725 103.086C77.236 103.243 77.089 103.338 76.9441 103.299C76.8475 103.272 76.772 103.191 76.7477 103.086L76.2614 100.991C76.2371 100.886 76.1617 100.804 76.065 100.778Z",fill:"#EDFF1B",stroke:"#F5F5F6",strokeWidth:"0.513973"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M165.516 104.369L163.099 103.761C162.917 103.715 162.808 103.532 162.853 103.35C162.883 103.23 162.978 103.135 163.099 103.105L165.516 102.497C165.637 102.467 165.731 102.372 165.762 102.252L166.37 99.8339C166.415 99.6528 166.599 99.5429 166.78 99.5884C166.901 99.6188 166.995 99.7131 167.026 99.8339L167.633 102.252C167.664 102.372 167.758 102.467 167.879 102.497L170.297 103.105C170.478 103.151 170.588 103.334 170.542 103.515C170.512 103.636 170.417 103.73 170.297 103.761L167.879 104.369C167.758 104.399 167.664 104.493 167.633 104.614L167.026 107.032C166.98 107.213 166.796 107.323 166.615 107.277C166.494 107.247 166.4 107.153 166.37 107.032L165.762 104.614C165.731 104.493 165.637 104.399 165.516 104.369Z",fill:"#131316"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.5689 89.3207L21.796 88.875C21.6631 88.8416 21.5825 88.7068 21.6159 88.574C21.6382 88.4854 21.7074 88.4162 21.796 88.394L23.5689 87.9482C23.6575 87.9259 23.7267 87.8567 23.749 87.7681L24.1947 85.9952C24.2281 85.8624 24.3629 85.7818 24.4957 85.8152C24.5843 85.8374 24.6535 85.9066 24.6757 85.9952L25.1215 87.7681C25.1438 87.8567 25.213 87.9259 25.3016 87.9482L27.0745 88.394C27.2073 88.4274 27.2879 88.5621 27.2545 88.6949C27.2323 88.7835 27.1631 88.8527 27.0745 88.875L25.3016 89.3207C25.213 89.343 25.1438 89.4122 25.1215 89.5008L24.6757 91.2737C24.6423 91.4066 24.5076 91.4872 24.3748 91.4538C24.2862 91.4315 24.217 91.3623 24.1947 91.2737L23.749 89.5008C23.7267 89.4122 23.6575 89.343 23.5689 89.3207Z",fill:"#FF8D3B",stroke:"#F5F5F6",strokeWidth:"0.513973"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M59.923 71.901L57.3441 71.2526C57.1509 71.204 57.0337 71.008 57.0823 70.8148C57.1147 70.686 57.2153 70.5854 57.3441 70.553L59.923 69.9046C60.0518 69.8722 60.1524 69.7715 60.1848 69.6427L60.8333 67.0638C60.8818 66.8706 61.0778 66.7534 61.271 66.802C61.3999 66.8344 61.5005 66.935 61.5329 67.0638L62.1813 69.6427C62.2137 69.7715 62.3143 69.8722 62.4432 69.9046L65.022 70.553C65.2152 70.6016 65.3324 70.7976 65.2839 70.9908C65.2515 71.1196 65.1509 71.2202 65.022 71.2526L62.4432 71.901C62.3143 71.9334 62.2137 72.034 62.1813 72.1629L61.5329 74.7417C61.4843 74.9349 61.2883 75.0522 61.0951 75.0036C60.9663 74.9712 60.8657 74.8706 60.8333 74.7417L60.1848 72.1629C60.1524 72.034 60.0518 71.9334 59.923 71.901Z",fill:"#131316"}),(0,l.jsx)("path",{d:"M45.3714 37.625C48.8173 37.4444 51.8389 39.6343 52.8527 42.7689L52.9719 42.7608C55.5232 42.6271 57.6997 44.5869 57.8335 47.1381C57.9672 49.6893 56.0074 51.8659 53.4561 51.9996C52.2681 52.0619 51.1613 51.6702 50.3042 50.9762C49.1479 51.8667 47.719 52.4276 46.1515 52.5097C43.7758 52.6342 41.6018 51.632 40.1484 49.9703C39.1955 51.7012 37.396 52.9148 35.2773 53.0258C32.9817 53.1461 30.9234 51.9399 29.847 50.0773C29.4316 50.2979 28.9622 50.4332 28.4612 50.4595C26.6186 50.556 25.0467 49.1406 24.9501 47.2981C24.8535 45.4555 26.269 43.8835 28.1115 43.787C28.7373 43.7542 29.3318 43.8958 29.848 44.1693C30.8151 42.4956 32.5838 41.3294 34.6587 41.2206C36.2009 41.1398 37.636 41.6577 38.7383 42.5711C39.7163 39.8197 42.2732 37.7873 45.3714 37.625Z",fill:"#202329",stroke:"#F5F5F6",strokeWidth:"1.02795",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M193.547 48.3232C196.839 48.1507 199.743 50.1417 200.88 53.053C201.133 52.9956 201.394 52.9591 201.661 52.9451C204.212 52.8114 206.389 54.7712 206.523 57.3224C206.656 59.8736 204.697 62.0502 202.145 62.1839C200.979 62.245 199.89 61.8683 199.04 61.1972C197.801 62.3624 196.158 63.112 194.327 63.208C191.972 63.3314 189.816 62.3479 188.362 60.7125C187.306 62.1443 185.64 63.1093 183.723 63.2097C181.518 63.3253 179.522 62.2677 178.343 60.5826C177.854 60.9164 177.271 61.1245 176.636 61.1577C174.794 61.2543 173.222 59.8389 173.125 57.9963C173.029 56.1538 174.444 54.5818 176.287 54.4852C176.782 54.4593 177.258 54.5425 177.69 54.7139C178.567 52.5758 180.616 51.0203 183.077 50.8913C184.688 50.8069 186.186 51.3481 187.337 52.3023C188.519 50.0527 190.824 48.4659 193.547 48.3232Z",fill:"#202329",stroke:"#F5F5F6",strokeWidth:"1.02795",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M115.754 47.084H111.761V53.1131H115.754V47.084Z",fill:"#F5F5F6"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M111.019 49.0938H116.496C117.141 49.0938 117.695 49.5548 117.811 50.1895L118.793 55.5556C118.926 56.2815 118.445 56.9778 117.719 57.1107C117.64 57.1252 117.559 57.1325 117.478 57.1325H110.036C109.298 57.1325 108.7 56.5342 108.7 55.7962C108.7 55.7155 108.707 55.6349 108.722 55.5556L109.704 50.1895C109.82 49.5548 110.373 49.0938 111.019 49.0938Z",fill:"#F5F5F6"}),(0,l.jsx)("path",{d:"M118.414 45.7441H109.102C108.732 45.7441 108.433 46.0433 108.433 46.4123V46.4158C108.433 46.7848 108.732 47.0839 109.102 47.0839H118.414C118.783 47.0839 119.082 46.7848 119.082 46.4158V46.4123C119.082 46.0433 118.783 45.7441 118.414 45.7441Z",fill:"#F5F5F6"}),(0,l.jsx)("path",{d:"M130.685 57.2578L127.336 55.083L124.053 60.1394L127.402 62.3143L130.685 57.2578Z",fill:"#F5F5F6"}),(0,l.jsx)("path",{d:"M131.971 56.4952L127.511 53.5983C127.201 53.3973 126.787 53.4853 126.586 53.7947L126.584 53.7977C126.383 54.1071 126.471 54.5209 126.781 54.7219L131.242 57.6188C131.551 57.8198 131.965 57.7319 132.166 57.4224L132.168 57.4195C132.369 57.11 132.281 56.6962 131.971 56.4952Z",fill:"#F5F5F6"}),(0,l.jsx)("path",{d:"M113.759 105.031C127.909 105.031 139.38 93.4836 139.38 79.2392C139.38 64.9947 127.909 53.4473 113.759 53.4473C99.6081 53.4473 88.137 64.9947 88.137 79.2392C88.137 93.4836 99.6081 105.031 113.759 105.031Z",fill:"#202329",stroke:"#F5F5F6",strokeWidth:"1.02795"}),(0,l.jsx)("mask",{id:"mask0_738_12398",maskUnits:"userSpaceOnUse",x:"91",y:"56",width:"46",height:"47",children:(0,l.jsx)("path",{d:"M113.759 102.016C126.256 102.016 136.387 91.8185 136.387 79.2394C136.387 66.6603 126.256 56.4629 113.759 56.4629C101.262 56.4629 91.1311 66.6603 91.1311 79.2394C91.1311 91.8185 101.262 102.016 113.759 102.016Z",fill:"#CBE5FF"})}),(0,l.jsxs)("g",{mask:"url(#mask0_738_12398)",children:[(0,l.jsx)("path",{d:"M113.759 102.016C126.256 102.016 136.387 91.8185 136.387 79.2394C136.387 66.6603 126.256 56.4629 113.759 56.4629C101.262 56.4629 91.1311 66.6603 91.1311 79.2394C91.1311 91.8185 101.262 102.016 113.759 102.016Z",fill:"#0080FF"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M114.229 56.462C114.229 56.2775 114.079 56.1279 113.895 56.1279C113.71 56.1279 113.561 56.2775 113.561 56.462V61.1005C113.561 61.285 113.71 61.4346 113.895 61.4346C114.079 61.4346 114.229 61.285 114.229 61.1005V56.462ZM130.132 63.3688C130.262 63.2379 130.261 63.0263 130.13 62.8963C129.999 62.7663 129.788 62.7669 129.658 62.8978L126.399 66.1778C126.269 66.3087 126.27 66.5202 126.401 66.6502C126.532 66.7803 126.743 66.7796 126.873 66.6487L130.132 63.3688ZM136.856 79.2386C136.856 79.4231 136.706 79.5727 136.522 79.5727H131.913C131.729 79.5727 131.579 79.4231 131.579 79.2386C131.579 79.0541 131.729 78.9045 131.913 78.9045H136.522C136.706 78.9045 136.856 79.0541 136.856 79.2386ZM129.657 95.58C129.787 95.7109 129.999 95.7116 130.13 95.5815C130.261 95.4515 130.261 95.24 130.131 95.1091L126.873 91.8292C126.743 91.6983 126.531 91.6976 126.4 91.8276C126.269 91.9576 126.269 92.1692 126.399 92.3001L129.657 95.58ZM113.895 102.349C113.71 102.349 113.561 102.2 113.561 102.015V97.3767C113.561 97.1922 113.71 97.0426 113.895 97.0426C114.079 97.0426 114.229 97.1922 114.229 97.3767V102.015C114.229 102.2 114.079 102.349 113.895 102.349ZM97.6563 95.1086C97.5262 95.2395 97.5269 95.4511 97.6578 95.5811C97.7887 95.7111 98.0002 95.7104 98.1303 95.5796L101.389 92.2996C101.519 92.1687 101.518 91.9572 101.387 91.8272C101.256 91.6971 101.045 91.6978 100.915 91.8287L97.6563 95.1086ZM90.9307 79.2393C90.9307 79.0548 91.0802 78.9052 91.2647 78.9052H95.873C96.0575 78.9052 96.2071 79.0548 96.2071 79.2393C96.2071 79.4238 96.0575 79.5734 95.873 79.5734H91.2647C91.0802 79.5734 90.9307 79.4238 90.9307 79.2393ZM98.1307 62.8974C98.0006 62.7665 97.7891 62.7658 97.6582 62.8959C97.5273 63.0259 97.5266 63.2374 97.6567 63.3683L100.915 66.6482C101.045 66.7791 101.257 66.7798 101.388 66.6498C101.519 66.5197 101.519 66.3082 101.389 66.1773L98.1307 62.8974Z",fill:"#131316"})]}),(0,l.jsx)("path",{d:"M113.758 84.5982C116.698 84.5982 119.082 82.1988 119.082 79.2391C119.082 76.2793 116.698 73.8799 113.758 73.8799C110.817 73.8799 108.433 76.2793 108.433 79.2391C108.433 82.1988 110.817 84.5982 113.758 84.5982Z",fill:"#F5F5F6"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M127.366 71.9041C127.463 72.0791 127.408 72.2987 127.242 72.4086L117.487 78.8354C116.917 79.2109 116.151 79.0533 115.775 78.4833C115.757 78.4561 115.74 78.4282 115.725 78.3996C115.392 77.7951 115.612 77.0352 116.217 76.7023C116.241 76.6886 116.267 76.6757 116.292 76.6638L126.875 71.7434C127.056 71.6594 127.27 71.7297 127.366 71.9041Z",fill:"#F5F5F6"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M116.419 79.2382C116.419 80.7181 115.227 81.9178 113.757 81.9178C113.475 81.9178 113.203 81.8736 112.948 81.7917L103.836 95.4017C103.734 95.5538 103.511 95.5829 103.338 95.4667L103.336 95.4654C103.162 95.3474 103.104 95.1283 103.207 94.975L112.259 81.4538C111.557 80.9715 111.095 80.1591 111.095 79.2382C111.095 77.7583 112.287 76.5586 113.757 76.5586C115.227 76.5586 116.419 77.7583 116.419 79.2382Z",fill:"#131316"}),(0,l.jsx)("path",{d:"M143.844 76.0684H130.958C130.4 76.0684 129.948 76.5204 129.948 77.0779C129.948 77.6355 130.4 78.0875 130.958 78.0875H143.844C144.401 78.0875 144.853 77.6355 144.853 77.0779C144.853 76.5204 144.401 76.0684 143.844 76.0684Z",fill:"#F5F5F6"}),(0,l.jsx)("path",{d:"M143.843 102.317H130.957C130.4 102.317 129.948 102.769 129.948 103.327C129.948 103.885 130.4 104.337 130.957 104.337H143.843C144.401 104.337 144.853 103.885 144.853 103.327C144.853 102.769 144.401 102.317 143.843 102.317Z",fill:"#F5F5F6"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M143.164 77.749V82.9775C143.164 84.4704 142.499 85.8856 141.349 86.8376L139.099 88.6998V91.7286L140.92 92.9346C142.321 93.8627 143.164 95.4317 143.164 97.1126V102.657H131.637V97.1126C131.637 95.4317 132.48 93.8627 133.881 92.9346L135.702 91.7286V88.6998L133.453 86.8376C132.303 85.8856 131.637 84.4704 131.637 82.9775V77.749H143.164Z",fill:"#202329",stroke:"#F5F5F6",strokeWidth:"0.668164"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M142.143 82.7988C142.143 84.0777 141.573 85.2901 140.587 86.1056L138.078 88.1833V95.587L139.749 96.6938C141.244 97.6838 142.143 99.3574 142.143 101.15V101.644H132.658V101.15C132.658 99.3574 133.557 97.6838 135.052 96.6938L136.723 95.587V88.1833L134.213 86.1056C133.228 85.2901 132.658 84.0777 132.658 82.7988H142.143Z",fill:"#0080FF"})]});var q=s(60161),H=s(31063),V=s(65161),W=s(26595),U=s(13005),G=s(25010),$=s(84706),Y=s(65105),J=function(e){let{onClose:t,showClose:s=!0}=e,r=(0,c.useTranslations)(),i=(0,Y.ZP)(e=>e.isPro);return(0,l.jsxs)("div",{className:"relative p-5 bg-theme-bg-100 dark:bg-theme-bg-dark-100 rounded-xl mt-3",children:[s&&(0,l.jsx)(G.z,{variant:"ghost",className:"absolute top-3 right-3",onClick:t,children:(0,l.jsx)(U.Z,{})}),(0,l.jsx)("h4",{className:"text-primary font-semibold text-lg mb-3 mr-6",children:r(i?"pro_search_used_up_today_desc_2":"pro_search_used_up_today")}),(0,l.jsx)("p",{className:"text-sm text-theme-font-700 dark:text-theme-font-dark-700 mb-5",children:i?r("pro_search_used_up_today_desc_3"):r("pro_search_used_up_today_desc",{count:300})}),!i&&(0,l.jsx)("p",{className:"text-right",children:(0,l.jsx)(G.z,{onClick:()=>{$.$.publish("showSubscriptionPlan",void 0)},children:r("upgrade")})})]})},X=s(97247);let K=e=>{let{content:t,markdown:s,retryGenerate:r,isFirstRetry:i}=e,n=(0,c.useTranslations)(),a=(0,F.Z)(e=>e.extensionSelected),[d,u]=(0,o.useState)(void 0),h=(0,o.useRef)(d),{isDark:p}=(0,D.Z)(),{isChat:m}=(0,F.Z)(),f=(0,o.useRef)(!0),x=(0,o.useRef)(m),v=(0,o.useMemo)(()=>{let e=!1;return(Object.keys(Z.e).forEach(s=>{Z.e[s]==t&&(e=!0)}),e)?n(t,{source:n((0,z.Y)(a))}):t},[t]),g=e=>"Network Error"===e||"Failed to fetch"===e||"Internal Server Error"===e||"network error"===e||"Load failed"===e||"Failed to fetch"===e,b=e=>"You exceeded your current quota"===e,y=e=>"Service not responding"===e,w=e=>"Load failed"===e,j=e=>g(e)?"network":b(e)?"quota":y(e)?"responding":"default",k=n("extension.community_feedback",{community:'<a href="https://discord.com/invite/PsReJWbThX" target="_blank" class="inline cursor-pointer no-underline text-[#0080FF] font-medium dark:text-blue-500 hover:underline">'.concat(n("extension.community_link"),"</a>")}),C=[O.zA,O.xn,O.X7].includes(a);(0,o.useEffect)(()=>{if(!v)return;let e=j(v);"network"===e&&i&&!s&&((0,X.N0)()&&!f.current&&w(v)?u(!0):r()),"quota"===e&&Y.ZP.getState().refreshSubscriptionInfo(),v&&i&&((0,V.zr)("search answer error:"+v),(0,H.fk)(q.U.THREAD_ERROR,{error:v},!0))},[v,i]);let _=()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"text-red-600",children:(0,l.jsx)(I.Z,{text:n("error.network_error")})}),(0,l.jsx)(W.A,{size:"sm",radius:"full",color:"primary",className:"w-fit",startContent:(0,l.jsx)(A.Z,{size:14}),onClick:r,children:n("ppt.retry_generate")})]});return(0,o.useEffect)(()=>{let e=()=>{"hidden"===document.visibilityState?f.current=!1:(f.current=!0,!0===h.current&&u(!1))};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[]),(0,o.useEffect)(()=>{h.current=d,void 0===d||d||r()},[d]),(0,l.jsx)(E,{title:!s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(L,{})," ",n("answer")]}),content:C&&!x.current?(0,l.jsx)(()=>{let e=(0,z.Y)(a);return(0,l.jsxs)("div",{className:"flex flex-col items-center mt-12",children:[p?(0,l.jsx)(B,{}):(0,l.jsx)(R,{}),(0,l.jsx)("div",{className:"text-lg font-medium mb-4 text-[#0080FF] mt-8",children:n("extension.prompt_timeout",{source:n(e)})}),(0,l.jsx)("p",{className:"text-[#667085] dark:text-[#BABDC5]",dangerouslySetInnerHTML:{__html:k}})]})},{}):s?"Internal Server Error"===v?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"text-red-600",children:(0,l.jsx)(I.Z,{text:n("error.server_error")})}),(0,l.jsx)(W.A,{size:"sm",radius:"full",color:"primary",className:"w-fit",startContent:(0,l.jsx)(A.Z,{size:14}),onClick:()=>{location.reload()},children:n("error.refresh")})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"text-red-600",children:(0,l.jsx)(I.Z,{text:n("error.network_error")})}),(0,l.jsx)(W.A,{size:"sm",radius:"full",color:"primary",className:"w-fit",startContent:(0,l.jsx)(A.Z,{size:14}),onClick:()=>{location.reload()},children:n("error.refresh")})]}):(()=>{switch(j(v)){case"network":return _();case"quota":return(0,l.jsx)(J,{showClose:!1});case"responding":return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"text-red-600",children:(0,l.jsx)(I.Z,{text:n("error.service_is_not_responding")})}),(0,l.jsx)(W.A,{size:"sm",radius:"full",color:"primary",className:"w-fit",startContent:(0,l.jsx)(A.Z,{size:14}),onClick:r,children:n("ppt.retry_generate")})]});default:return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"text-red-600",children:(0,l.jsx)(I.Z,{text:v})}),(0,l.jsx)(W.A,{size:"sm",radius:"full",color:"primary",className:"w-fit",startContent:(0,l.jsx)(A.Z,{size:14}),onClick:r,children:n("ppt.retry_generate")})]})}})()})};var Q=s(1962),ee=s(69824),et=s(46344),es=s(76011),er=s(27976),ei=s(54259),en=s(25794),ea=s(75284),el=s(95174);let eo=async e=>{let{message:t,callbackMethod:s}=e,{onThreadHeaderInfo:r,onTools:i,onHideReply:n,onThreadType:a,onQuery:l,onFirstSources:o,onSenondSources:d,onExpandType:c,onRelevancyModelInfo:u,onQueryPlans:h,onQueryRewritersInfo:p,onMarkdown:m,onReasoningText:f,onReflectionInfo:x,onReflectionAnswer:v,onReflectionAgentAnswer:g,onTopicTools:b,onQrInfoUrlExpands:y,onRelates:w,onDone:j,onError:k,resetTimeout:C,onMessageSource:_,onPreTools:N,onToolCallResult:S}=s;try{var E,T,P,M,F,A,L;let e=JSON.parse(t),s=null==e?void 0:e.type;switch(C(),s){case"thread_header_info":{let t=(null==e?void 0:e.data)||{};r(t);break}case"tools":{let t=(null==e?void 0:e.data)||{};i(t.tools),N(t.pre_tools);break}case"topic_tools":{let t=(null==e?void 0:e.data)||{};b(t.tools);break}case"tool_call_result":{let t=(null==e?void 0:e.data)||{};S(t.tools||t);break}case"hide_reply":n();break;case"thread_type":{let t=(null==e?void 0:e.data)||{};a(t.category);break}case"contexts":{let t=(null==e?void 0:null===(E=e.data)||void 0===E?void 0:E.sources)||[];o(t);break}case"message_source":{let t=(null==e?void 0:e.data)||{};_(t);break}case"rc_info":{let t=(null==e?void 0:e.data)||{};u(t);break}case"query_plans":{let t=(null==e?void 0:e.data)||[];h(t.items);break}case"qr_info":{let t=(null==e?void 0:e.data)||{};p(t);break}case"qr_info_url_expands":{let t=(null==e?void 0:null===(T=e.data)||void 0===T?void 0:T.sources)||[];y(t);break}case"final_contexts":{let t=(null==e?void 0:null===(P=e.data)||void 0===P?void 0:P.sources)||[];d(t);break}case"expand_type":{let t=(null==e?void 0:e.data)||{};c(t);break}case"answer":{let t=(null==e?void 0:null===(M=e.data)||void 0===M?void 0:M.text)||"";m(t.replace(/\[\[(\d+)\]\]/g,"[$1]($1)"));break}case"reasoning":{let t=(null==e?void 0:e.data.text)||"";f(t);break}case"reflection_info":{let t=(null==e?void 0:null===(F=e.data)||void 0===F?void 0:F.items)||[];x(t);break}case"reflection_agent_answer":{let t=(null==e?void 0:null===(A=e.data)||void 0===A?void 0:A.text)||"";g(t);break}case"answer_reflection_begin":v(!0);break;case"answer_reflection_end":v(!1);break;case"message":{let t=(null==e?void 0:e.data)||{};l(t);break}case"related_questions":{let t=(null==e?void 0:null===(L=e.data)||void 0===L?void 0:L.questions)||[];w(t),j();break}case"failed":{let t=(null==e?void 0:e.data)||{};console.log("failed error",(null==t?void 0:t.message)||"Internal Server Error"),null==k||k((null==t?void 0:t.message)||"Internal Server Error")}}}catch(e){console.log("message error",e),null==k||k((null==e?void 0:e.message)||"Internal Server Error")}};var ed=s(27519),ec=s(37766);let eu=async e=>{let{mqttConnected:t,controller:s,query:r,category:i,thread_type:n,existing_uuid:a,search_uuid:l,originRid:o,contexts:d,query_from:c,topic_short_id:u,web_search:h,short_id:p,model:m,mode:f,documents:x,document_action:v,auto_routing:g,device_id:b,cf_token:y,onRequestBefore:w,onRequestStart:j,preset_contexts:k,agent_info:C,..._}=e,{onError:N,resetTimeout:S}=_,E=(0,en.a_)(),T={"Content-Type":"application/json",Accept:"*./*"};E&&(T.Authorization=(0,ei.a1)());let P={query:r,search_uuid:l,existing_uuid:a,lang:"",agent_lang:(0,ea.v0)(),search_options:{langcode:(0,ea.Gy)()[0]},search_video:!0,query_from:c||"default",category:i,model:m||"",auto_routing:g,mode:f,device_id:b,documents:x,thread_type:n,document_action:v,agent_info:C};d&&(P.contexts=d),a||delete P.existing_uuid,k&&k.length>0&&(P.preset_contexts=k);let M=localStorage.getItem(es.F);if(M){let e=JSON.parse(M);P.metadata=e}if(u&&(P.topic_short_id=u),null!=h&&(P.web_search=h),p&&(P.short_id=p),i===O.J5||i===O.Ys){let e="discovery"===f||(null==P?void 0:P.mode)==="discovery"?"verbose":f;P.mode=e}if(i===O.aI&&"discovery"===f&&(P.mode="verbose"),i===O.Ys){var F;(null===(F=ec.Z.getState())||void 0===F?void 0:F.isImageChat)||(P.category="")}i===O.V9&&(P.category=O.gl),i===O.RQ&&(P.category=O.gl,P.web_search=!1,P.thread_type=ed.yG),P.web_search&&(P.category=O.ti),S();let A="".concat(er.XJ,"/threads");if(o&&(A="".concat(er.XJ,"/threads/").concat(o,"/question")),!(t&&await (null==w?void 0:w(P)))){console.log("body",JSON.stringify(P));try{let e=await fetch(A,{method:"POST",headers:T,credentials:"include",signal:s.signal,body:JSON.stringify(P)});if(!e)return;if(200!==e.status){try{let t=await e.json();console.log("errorJsonMessage",t.message),t.detail?null==N||N(t.detail):t.message?null==N||N(t.message):null==N||N(JSON.stringify(t))}catch(e){null==N||N("Internal Server Error")}return}if(e.ok||null==N||N("Internal Server Error"),null==j||j(),e.ok)for await(let t of(0,el.U)(e,s.signal)){let e=(null==t?void 0:t.data)||"";eo({message:e,callbackMethod:_})}}catch(t){let e;if(console.log("errorMessage",t),t instanceof Error)e=t.message;else try{e=JSON.stringify(t)}catch(s){e=String(t)}null==N||N(e)}}};var eh=s(4590);let ep=e=>e.map(e=>({...e,link:e.url,snippet:e.desc})),em=e=>200===e,ef=async e=>{let{mqttConnected:t,controller:s,query:r,category:i,thread_type:n,contexts:a,existing_uuid:l,search_uuid:o,originRid:d,query_from:c,topic_short_id:u,web_search:h,short_id:p,model:m,mode:f,documents:x,document_action:v,auto_routing:g,cf_token:b,preset_contexts:y,agent_info:w,onThreadHeaderInfo:j,onTools:k,onHideReply:C,onThreadType:_,onQuery:N,onRequestBefore:S,onRequestStart:E,onFirstSources:T,onSenondSources:P,onExpandType:M,onRelevancyModelInfo:F,onQueryRewritersInfo:A,onMarkdown:L,onReasoningText:I,onReflectionInfo:D,onReflectionAnswer:z,onReflectionAgentAnswer:R,onTopicTools:B,onQrInfoUrlExpands:q,onRelates:H,onDone:V,onError:W,onSearchModeError:U,onMessageSource:G,resetTimeout:$,onPreTools:Y,onToolCallResult:J}=e,X=i===O.gl,K=i===O.zA,Q=i===O.X7,es=i===O.xn;if(!(K||Q||es)){eu(e);return}let er=(await (0,et.hM)()).some(e=>"relevancy_model"===e.name&&e.status),ei=[],en=[];if(er){let t={data:{ok:!1,status:500,results:[]}};if(await (0,ee.C)({type:"FELO_SEARCH_GET_SEARCH",data:{by:i,queries:[r]},timeout:1e4}).then(e=>{t=e}).catch(e=>{t.data.status=500}),!em(t.data.status)){let t=Z.e.Timeout;X&&(0,et.PC)({query:r}),K&&(0,et.PS)({query:r}),U&&t&&U(i,t),X?eu(e):t&&(null==W||W(t));return}let{data:s}=(en=t.data.results||[])[0];T(ep(s)),ei=s.map(e=>({link:e.url||"",title:e.title||"",snippet:e.desc||""}))}let ea={shortId:d,query:r,sources:ei,category:i,mode:f};l&&(ea.existing_uuid=l);let el=await (0,et.zC)(ea);if(!el){eu(e);return}let{complex_query:eo,metadata:ed,rewrite_queries:ec,category:ef}=el;if(["web_summary","document"].includes(ef)){eu(e);return}let{relevancy_model_use:ex}=ed,ev=[];if(F({relevancy_model_request:eo?"No":"Yes",relevancy_model_name:"",relevancy_model_use:ex}),A({query_rewriter_use:!!ec.length,rewriters:ec}),ev=en.map(e=>({query:r,contexts:e.data.map(e=>{let{url:t,title:s,desc:r,...i}=e;return{link:t||"",title:s||"",snippet:r||"",other_info:i}})})),eo){let t={data:{ok:!1,status:500,results:[]}},s=1e4,n=0;switch(i){case O.zA:s=13e3+4e3*ec.length,n=(0,eh.xT)(100,500);break;case O.xn:s=15e3;break;case O.X7:s=1e4+3e3*ec.length}if(await (0,ee.C)({type:"FELO_SEARCH_GET_SEARCH",data:{by:i,queries:[...ec],delayTime:n},timeout:s}).then(e=>{t=e}).catch(e=>{t.data.status=500}),!em(t.data.status)){let t=Z.e.Timeout;X&&(0,et.PC)({query:r}),K&&(0,et.PS)({query:r}),U&&t&&U(i,t),X?eu(e):t&&(null==W||W(t));return}let a=t.data.results||[],l=[];a.forEach(e=>{let{data:t}=e;l=l.concat(t)}),P(ep(l)),ev=a.map(e=>({query:e.query,contexts:e.data.map(e=>{let{url:t,title:s,desc:r,...i}=e;return{link:t||"",title:s||"",snippet:r||"",other_info:i}})}))}eu({mqttConnected:t,controller:s,query:r,category:i,thread_type:n,existing_uuid:l,search_uuid:o,contexts:a||ev,originRid:d,query_from:c,topic_short_id:u,web_search:h,short_id:p,model:m,mode:f,documents:x,document_action:v,auto_routing:g,cf_token:b,preset_contexts:y,agent_info:w,onThreadHeaderInfo:j,onTools:k,onHideReply:C,onThreadType:_,onQuery:N,onRequestBefore:S,onRequestStart:E,onFirstSources:T,onSenondSources:P,onExpandType:M,onRelevancyModelInfo:()=>{},onQueryPlans:()=>{},onQueryRewritersInfo:()=>{},onMarkdown:L,onRelates:H,onDone:V,onError:W,resetTimeout:$,onMessageSource:G,onReasoningText:I,onReflectionInfo:D,onReflectionAnswer:z,onReflectionAgentAnswer:R,onTopicTools:B,onQrInfoUrlExpands:q,onPreTools:Y,onToolCallResult:J})};var ex=s(41847);function ev(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function eg(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach(function(s){void 0===e[s]?e[s]=t[s]:ev(t[s])&&ev(e[s])&&Object.keys(t[s]).length>0&&eg(e[s],t[s])})}var eb={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function ey(){var e="undefined"!=typeof document?document:{};return eg(e,eb),e}var ew={document:eb,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function ej(){var e="undefined"!=typeof window?window:{};return eg(e,ew),e}function ek(e){return(ek=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eC(e,t){return(eC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function e_(e,t,s){return(e_=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?function(e,t,s){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return s&&eC(i,s.prototype),i}:Reflect.construct).apply(null,arguments)}function eN(e){var t="function"==typeof Map?new Map:void 0;return(eN=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,s)}function s(){return e_(e,arguments,ek(this).constructor)}return s.prototype=Object.create(e.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),eC(s,e)})(e)}var eS=function(e){function t(t){var s,r,i;return i=(r=function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(s=e.call.apply(e,[this].concat(t))||this)).__proto__,Object.defineProperty(r,"__proto__",{get:function(){return i},set:function(e){i.__proto__=e}}),s}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e,t}(eN(Array));function eE(e){void 0===e&&(e=[]);var t=[];return e.forEach(function(e){Array.isArray(e)?t.push.apply(t,eE(e)):t.push(e)}),t}function eT(e,t){return Array.prototype.filter.call(e,t)}function eP(e,t){var s=ej(),r=ey(),i=[];if(!t&&e instanceof eS)return e;if(!e)return new eS(i);if("string"==typeof e){var n=e.trim();if(n.indexOf("<")>=0&&n.indexOf(">")>=0){var a="div";0===n.indexOf("<li")&&(a="ul"),0===n.indexOf("<tr")&&(a="tbody"),(0===n.indexOf("<td")||0===n.indexOf("<th"))&&(a="tr"),0===n.indexOf("<tbody")&&(a="table"),0===n.indexOf("<option")&&(a="select");var l=r.createElement(a);l.innerHTML=n;for(var o=0;o<l.childNodes.length;o+=1)i.push(l.childNodes[o])}else i=function(e,t){if("string"!=typeof e)return[e];for(var s=[],r=t.querySelectorAll(e),i=0;i<r.length;i+=1)s.push(r[i]);return s}(e.trim(),t||r)}else if(e.nodeType||e===s||e===r)i.push(e);else if(Array.isArray(e)){if(e instanceof eS)return e;i=e}return new eS(function(e){for(var t=[],s=0;s<e.length;s+=1)-1===t.indexOf(e[s])&&t.push(e[s]);return t}(i))}eP.fn=eS.prototype;var eM="resize scroll".split(" ");function eF(e){return function(){for(var t=arguments.length,s=Array(t),r=0;r<t;r++)s[r]=arguments[r];if(void 0===s[0]){for(var i=0;i<this.length;i+=1)0>eM.indexOf(e)&&(e in this[i]?this[i][e]():eP(this[i]).trigger(e));return this}return this.on.apply(this,[e].concat(s))}}eF("click"),eF("blur"),eF("focus"),eF("focusin"),eF("focusout"),eF("keyup"),eF("keydown"),eF("keypress"),eF("submit"),eF("change"),eF("mousedown"),eF("mousemove"),eF("mouseup"),eF("mouseenter"),eF("mouseleave"),eF("mouseout"),eF("mouseover"),eF("touchstart"),eF("touchend"),eF("touchmove"),eF("resize"),eF("scroll");var eA={addClass:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];var r=eE(t.map(function(e){return e.split(" ")}));return this.forEach(function(e){var t;(t=e.classList).add.apply(t,r)}),this},removeClass:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];var r=eE(t.map(function(e){return e.split(" ")}));return this.forEach(function(e){var t;(t=e.classList).remove.apply(t,r)}),this},hasClass:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];var r=eE(t.map(function(e){return e.split(" ")}));return eT(this,function(e){return r.filter(function(t){return e.classList.contains(t)}).length>0}).length>0},toggleClass:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];var r=eE(t.map(function(e){return e.split(" ")}));this.forEach(function(e){r.forEach(function(t){e.classList.toggle(t)})})},attr:function(e,t){if(1==arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var s=0;s<this.length;s+=1)if(2==arguments.length)this[s].setAttribute(e,t);else for(var r in e)this[s][r]=e[r],this[s].setAttribute(r,e[r]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},transform:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transform=e;return this},transition:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!=typeof e?e+"ms":e;return this},on:function(){for(var e,t=arguments.length,s=Array(t),r=0;r<t;r++)s[r]=arguments[r];var i=s[0],n=s[1],a=s[2],l=s[3];function o(e){var t=e.target;if(t){var s=e.target.dom7EventData||[];if(0>s.indexOf(e)&&s.unshift(e),eP(t).is(n))a.apply(t,s);else for(var r=eP(t).parents(),i=0;i<r.length;i+=1)eP(r[i]).is(n)&&a.apply(r[i],s)}}function d(e){var t=e&&e.target&&e.target.dom7EventData||[];0>t.indexOf(e)&&t.unshift(e),a.apply(this,t)}"function"==typeof s[1]&&(i=s[0],a=s[1],l=s[2],n=void 0),l||(l=!1);for(var c=i.split(" "),u=0;u<this.length;u+=1){var h=this[u];if(n)for(e=0;e<c.length;e+=1){var p=c[e];h.dom7LiveListeners||(h.dom7LiveListeners={}),h.dom7LiveListeners[p]||(h.dom7LiveListeners[p]=[]),h.dom7LiveListeners[p].push({listener:a,proxyListener:o}),h.addEventListener(p,o,l)}else for(e=0;e<c.length;e+=1){var m=c[e];h.dom7Listeners||(h.dom7Listeners={}),h.dom7Listeners[m]||(h.dom7Listeners[m]=[]),h.dom7Listeners[m].push({listener:a,proxyListener:d}),h.addEventListener(m,d,l)}}return this},off:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];var r=t[0],i=t[1],n=t[2],a=t[3];"function"==typeof t[1]&&(r=t[0],n=t[1],a=t[2],i=void 0),a||(a=!1);for(var l=r.split(" "),o=0;o<l.length;o+=1)for(var d=l[o],c=0;c<this.length;c+=1){var u=this[c],h=void 0;if(!i&&u.dom7Listeners?h=u.dom7Listeners[d]:i&&u.dom7LiveListeners&&(h=u.dom7LiveListeners[d]),h&&h.length)for(var p=h.length-1;p>=0;p-=1){var m=h[p];n&&m.listener===n?(u.removeEventListener(d,m.proxyListener,a),h.splice(p,1)):n&&m.listener&&m.listener.dom7proxy&&m.listener.dom7proxy===n?(u.removeEventListener(d,m.proxyListener,a),h.splice(p,1)):n||(u.removeEventListener(d,m.proxyListener,a),h.splice(p,1))}}return this},trigger:function(){for(var e=ej(),t=arguments.length,s=Array(t),r=0;r<t;r++)s[r]=arguments[r];for(var i=s[0].split(" "),n=s[1],a=0;a<i.length;a+=1)for(var l=i[a],o=0;o<this.length;o+=1){var d=this[o];if(e.CustomEvent){var c=new e.CustomEvent(l,{detail:n,bubbles:!0,cancelable:!0});d.dom7EventData=s.filter(function(e,t){return t>0}),d.dispatchEvent(c),d.dom7EventData=[],delete d.dom7EventData}}return this},transitionEnd:function(e){var t=this;return e&&t.on("transitionend",function s(r){r.target===this&&(e.call(this,r),t.off("transitionend",s))}),this},outerWidth:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){var e=ej();return this[0]?e.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){var e=ej(),t=ey(),s=this[0],r=s.getBoundingClientRect(),i=t.body,n=s.clientTop||i.clientTop||0,a=s.clientLeft||i.clientLeft||0,l=s===e?e.scrollY:s.scrollTop,o=s===e?e.scrollX:s.scrollLeft;return{top:r.top+l-n,left:r.left+o-a}}return null},css:function(e,t){var s,r=ej();if(1==arguments.length){if("string"==typeof e){if(this[0])return r.getComputedStyle(this[0],null).getPropertyValue(e)}else{for(s=0;s<this.length;s+=1)for(var i in e)this[s].style[i]=e[i];return this}}if(2==arguments.length&&"string"==typeof e)for(s=0;s<this.length;s+=1)this[s].style[e]=t;return this},each:function(e){return e&&this.forEach(function(t,s){e.apply(t,[t,s])}),this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:null;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){var t,s,r=ej(),i=ey(),n=this[0];if(!n||void 0===e)return!1;if("string"==typeof e){if(n.matches)return n.matches(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);for(s=0,t=eP(e);s<t.length;s+=1)if(t[s]===n)return!0;return!1}if(e===i)return n===i;if(e===r)return n===r;if(e.nodeType||e instanceof eS){for(s=0,t=e.nodeType?[e]:e;s<t.length;s+=1)if(t[s]===n)return!0}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;var t=this.length;if(e>t-1)return eP([]);if(e<0){var s=t+e;return s<0?eP([]):eP([this[s]])}return eP([this[e]])},append:function(){for(var e,t=ey(),s=0;s<arguments.length;s+=1){e=s<0||arguments.length<=s?void 0:arguments[s];for(var r=0;r<this.length;r+=1)if("string"==typeof e){var i=t.createElement("div");for(i.innerHTML=e;i.firstChild;)this[r].appendChild(i.firstChild)}else if(e instanceof eS)for(var n=0;n<e.length;n+=1)this[r].appendChild(e[n]);else this[r].appendChild(e)}return this},prepend:function(e){var t,s,r=ey();for(t=0;t<this.length;t+=1)if("string"==typeof e){var i=r.createElement("div");for(i.innerHTML=e,s=i.childNodes.length-1;s>=0;s-=1)this[t].insertBefore(i.childNodes[s],this[t].childNodes[0])}else if(e instanceof eS)for(s=0;s<e.length;s+=1)this[t].insertBefore(e[s],this[t].childNodes[0]);else this[t].insertBefore(e,this[t].childNodes[0]);return this},next:function(e){if(this.length>0){if(e)return this[0].nextElementSibling&&eP(this[0].nextElementSibling).is(e)?eP([this[0].nextElementSibling]):eP([]);if(this[0].nextElementSibling)return eP([this[0].nextElementSibling])}return eP([])},nextAll:function(e){var t=[],s=this[0];if(!s)return eP([]);for(;s.nextElementSibling;){var r=s.nextElementSibling;e?eP(r).is(e)&&t.push(r):t.push(r),s=r}return eP(t)},prev:function(e){if(this.length>0){var t=this[0];if(e)return t.previousElementSibling&&eP(t.previousElementSibling).is(e)?eP([t.previousElementSibling]):eP([]);if(t.previousElementSibling)return eP([t.previousElementSibling])}return eP([])},prevAll:function(e){var t=[],s=this[0];if(!s)return eP([]);for(;s.previousElementSibling;){var r=s.previousElementSibling;e?eP(r).is(e)&&t.push(r):t.push(r),s=r}return eP(t)},parent:function(e){for(var t=[],s=0;s<this.length;s+=1)null!==this[s].parentNode&&(e?eP(this[s].parentNode).is(e)&&t.push(this[s].parentNode):t.push(this[s].parentNode));return eP(t)},parents:function(e){for(var t=[],s=0;s<this.length;s+=1)for(var r=this[s].parentNode;r;)e?eP(r).is(e)&&t.push(r):t.push(r),r=r.parentNode;return eP(t)},closest:function(e){var t=this;return void 0===e?eP([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],s=0;s<this.length;s+=1)for(var r=this[s].querySelectorAll(e),i=0;i<r.length;i+=1)t.push(r[i]);return eP(t)},children:function(e){for(var t=[],s=0;s<this.length;s+=1)for(var r=this[s].children,i=0;i<r.length;i+=1)(!e||eP(r[i]).is(e))&&t.push(r[i]);return eP(t)},filter:function(e){return eP(eT(this,e))},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}};function eL(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function eI(){return Date.now()}function eZ(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function eD(){for(var e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"],s=1;s<arguments.length;s+=1){var r=s<0||arguments.length<=s?void 0:arguments[s];if(null!=r&&("undefined"!=typeof window&&void 0!==window.HTMLElement?!(r instanceof HTMLElement):!r||1!==r.nodeType&&11!==r.nodeType))for(var i=Object.keys(Object(r)).filter(function(e){return 0>t.indexOf(e)}),n=0,a=i.length;n<a;n+=1){var l=i[n],o=Object.getOwnPropertyDescriptor(r,l);void 0!==o&&o.enumerable&&(eZ(e[l])&&eZ(r[l])?r[l].__swiper__?e[l]=r[l]:eD(e[l],r[l]):!eZ(e[l])&&eZ(r[l])?(e[l]={},r[l].__swiper__?e[l]=r[l]:eD(e[l],r[l])):e[l]=r[l])}}return e}function ez(e,t){Object.keys(t).forEach(function(s){eZ(t[s])&&Object.keys(t[s]).forEach(function(r){"function"==typeof t[s][r]&&(t[s][r]=t[s][r].bind(e))}),e[s]=t[s]})}function eO(e){return void 0===e&&(e=""),"."+e.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}function eR(e,t,s,r){var i=ey();return s&&Object.keys(r).forEach(function(s){if(!t[s]&&!0===t.auto){var n=i.createElement("div");n.className=r[s],e.append(n),t[s]=n}}),t}function eB(){if(!i){var e,t;e=ej(),t=ey(),i={touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),pointerEvents:!!e.PointerEvent&&"maxTouchPoints"in e.navigator&&e.navigator.maxTouchPoints>=0,observer:"MutationObserver"in e||"WebkitMutationObserver"in e,passiveListener:function(){var t=!1;try{var s=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,s)}catch(e){}return t}(),gestures:"ongesturestart"in e}}return i}function eq(){return(eq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}Object.keys(eA).forEach(function(e){Object.defineProperty(eP.fn,e,{value:eA[e],writable:!0})});var eH={attach:function(e,t){void 0===t&&(t={});var s=ej(),r=this,i=new(s.MutationObserver||s.WebkitMutationObserver)(function(e){if(1===e.length){r.emit("observerUpdate",e[0]);return}var t=function(){r.emit("observerUpdate",e[0])};s.requestAnimationFrame?s.requestAnimationFrame(t):s.setTimeout(t,0)});i.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),r.observer.observers.push(i)},init:function(){if(this.support.observer&&this.params.observer){if(this.params.observeParents)for(var e=this.$el.parents(),t=0;t<e.length;t+=1)this.observer.attach(e[t]);this.observer.attach(this.$el[0],{childList:this.params.observeSlideChildren}),this.observer.attach(this.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach(function(e){e.disconnect()}),this.observer.observers=[]}};function eV(e){var t=ey(),s=ej(),r=this.touchEventsData,i=this.params,n=this.touches;if(this.enabled&&(!this.animating||!i.preventInteractionOnTransition)){var a=e;a.originalEvent&&(a=a.originalEvent);var l=eP(a.target);if(("wrapper"!==i.touchEventsTarget||l.closest(this.wrapperEl).length)&&(r.isTouchEvent="touchstart"===a.type,(r.isTouchEvent||!("which"in a)||3!==a.which)&&(r.isTouchEvent||!("button"in a)||!(a.button>0))&&(!r.isTouched||!r.isMoved))){i.noSwipingClass&&""!==i.noSwipingClass&&a.target&&a.target.shadowRoot&&e.path&&e.path[0]&&(l=eP(e.path[0]));var o=i.noSwipingSelector?i.noSwipingSelector:"."+i.noSwipingClass,d=!!(a.target&&a.target.shadowRoot);if(i.noSwiping&&(d?function(e,t){return void 0===t&&(t=this),function t(s){return s&&s!==ey()&&s!==ej()?(s.assignedSlot&&(s=s.assignedSlot),s.closest(e)||t(s.getRootNode().host)):null}(t)}(o,a.target):l.closest(o)[0])){this.allowClick=!0;return}if(i.swipeHandler&&!l.closest(i.swipeHandler)[0])return;n.currentX="touchstart"===a.type?a.targetTouches[0].pageX:a.pageX,n.currentY="touchstart"===a.type?a.targetTouches[0].pageY:a.pageY;var c=n.currentX,u=n.currentY,h=i.edgeSwipeDetection||i.iOSEdgeSwipeDetection,p=i.edgeSwipeThreshold||i.iOSEdgeSwipeThreshold;if(h&&(c<=p||c>=s.innerWidth-p)){if("prevent"!==h)return;e.preventDefault()}if(eD(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),n.startX=c,n.startY=u,r.touchStartTime=eI(),this.allowClick=!0,this.updateSize(),this.swipeDirection=void 0,i.threshold>0&&(r.allowThresholdMove=!1),"touchstart"!==a.type){var m=!0;l.is(r.focusableElements)&&(m=!1),t.activeElement&&eP(t.activeElement).is(r.focusableElements)&&t.activeElement!==l[0]&&t.activeElement.blur();var f=m&&this.allowTouchMove&&i.touchStartPreventDefault;(i.touchStartForcePreventDefault||f)&&!l[0].isContentEditable&&a.preventDefault()}this.emit("touchStart",a)}}}function eW(e){var t,s=ey(),r=this.touchEventsData,i=this.params,n=this.touches,a=this.rtlTranslate;if(!!this.enabled){var l=e;if(l.originalEvent&&(l=l.originalEvent),!r.isTouched){r.startMoving&&r.isScrolling&&this.emit("touchMoveOpposite",l);return}if(!r.isTouchEvent||"touchmove"===l.type){var o="touchmove"===l.type&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),d="touchmove"===l.type?o.pageX:l.pageX,c="touchmove"===l.type?o.pageY:l.pageY;if(l.preventedByNestedSwiper){n.startX=d,n.startY=c;return}if(!this.allowTouchMove){this.allowClick=!1,r.isTouched&&(eD(n,{startX:d,startY:c,currentX:d,currentY:c}),r.touchStartTime=eI());return}if(r.isTouchEvent&&i.touchReleaseOnEdges&&!i.loop){if(this.isVertical()){if(c<n.startY&&this.translate<=this.maxTranslate()||c>n.startY&&this.translate>=this.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else if(d<n.startX&&this.translate<=this.maxTranslate()||d>n.startX&&this.translate>=this.minTranslate())return}if(r.isTouchEvent&&s.activeElement&&l.target===s.activeElement&&eP(l.target).is(r.focusableElements)){r.isMoved=!0,this.allowClick=!1;return}if(r.allowTouchCallbacks&&this.emit("touchMove",l),!l.targetTouches||!(l.targetTouches.length>1)){n.currentX=d,n.currentY=c;var u=n.currentX-n.startX,h=n.currentY-n.startY;if(!(this.params.threshold&&Math.sqrt(Math.pow(u,2)+Math.pow(h,2))<this.params.threshold)){if(void 0===r.isScrolling&&(this.isHorizontal()&&n.currentY===n.startY||this.isVertical()&&n.currentX===n.startX?r.isScrolling=!1:u*u+h*h>=25&&(t=180*Math.atan2(Math.abs(h),Math.abs(u))/Math.PI,r.isScrolling=this.isHorizontal()?t>i.touchAngle:90-t>i.touchAngle)),r.isScrolling&&this.emit("touchMoveOpposite",l),void 0===r.startMoving&&(n.currentX!==n.startX||n.currentY!==n.startY)&&(r.startMoving=!0),r.isScrolling){r.isTouched=!1;return}if(r.startMoving){this.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation(),r.isMoved||(i.loop&&this.loopFix(),r.startTranslate=this.getTranslate(),this.setTransition(0),this.animating&&this.$wrapperEl.trigger("webkitTransitionEnd transitionend"),r.allowMomentumBounce=!1,i.grabCursor&&(!0===this.allowSlideNext||!0===this.allowSlidePrev)&&this.setGrabCursor(!0),this.emit("sliderFirstMove",l)),this.emit("sliderMove",l),r.isMoved=!0;var p=this.isHorizontal()?u:h;n.diff=p,p*=i.touchRatio,a&&(p=-p),this.swipeDirection=p>0?"prev":"next",r.currentTranslate=p+r.startTranslate;var m=!0,f=i.resistanceRatio;if(i.touchReleaseOnEdges&&(f=0),p>0&&r.currentTranslate>this.minTranslate()?(m=!1,i.resistance&&(r.currentTranslate=this.minTranslate()-1+Math.pow(-this.minTranslate()+r.startTranslate+p,f))):p<0&&r.currentTranslate<this.maxTranslate()&&(m=!1,i.resistance&&(r.currentTranslate=this.maxTranslate()+1-Math.pow(this.maxTranslate()-r.startTranslate-p,f))),m&&(l.preventedByNestedSwiper=!0),!this.allowSlideNext&&"next"===this.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!this.allowSlidePrev&&"prev"===this.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),this.allowSlidePrev||this.allowSlideNext||(r.currentTranslate=r.startTranslate),i.threshold>0){if(Math.abs(p)>i.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,n.startX=n.currentX,n.startY=n.currentY,r.currentTranslate=r.startTranslate,n.diff=this.isHorizontal()?n.currentX-n.startX:n.currentY-n.startY;return}}else{r.currentTranslate=r.startTranslate;return}}i.followFinger&&!i.cssMode&&((i.freeMode||i.watchSlidesProgress||i.watchSlidesVisibility)&&(this.updateActiveIndex(),this.updateSlidesClasses()),i.freeMode&&(0===r.velocities.length&&r.velocities.push({position:n[this.isHorizontal()?"startX":"startY"],time:r.touchStartTime}),r.velocities.push({position:n[this.isHorizontal()?"currentX":"currentY"],time:eI()})),this.updateProgress(r.currentTranslate),this.setTranslate(r.currentTranslate))}}}}}}function eU(e){var t=this,s=t.touchEventsData,r=t.params,i=t.touches,n=t.rtlTranslate,a=t.$wrapperEl,l=t.slidesGrid,o=t.snapGrid;if(t.enabled){var d=e;if(d.originalEvent&&(d=d.originalEvent),s.allowTouchCallbacks&&t.emit("touchEnd",d),s.allowTouchCallbacks=!1,!s.isTouched){s.isMoved&&r.grabCursor&&t.setGrabCursor(!1),s.isMoved=!1,s.startMoving=!1;return}r.grabCursor&&s.isMoved&&s.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var c=eI(),u=c-s.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(d),t.emit("tap click",d),u<300&&c-s.lastClickTime<300&&t.emit("doubleTap doubleClick",d)),s.lastClickTime=eI(),eL(function(){t.destroyed||(t.allowClick=!0)}),!s.isTouched||!s.isMoved||!t.swipeDirection||0===i.diff||s.currentTranslate===s.startTranslate){s.isTouched=!1,s.isMoved=!1,s.startMoving=!1;return}if(s.isTouched=!1,s.isMoved=!1,s.startMoving=!1,h=r.followFinger?n?t.translate:-t.translate:-s.currentTranslate,r.cssMode)return;if(r.freeMode){if(h<-t.minTranslate()){t.slideTo(t.activeIndex);return}if(h>-t.maxTranslate()){t.slides.length<o.length?t.slideTo(o.length-1):t.slideTo(t.slides.length-1);return}if(r.freeModeMomentum){if(s.velocities.length>1){var h,p,m,f,x=s.velocities.pop(),v=s.velocities.pop(),g=x.position-v.position,b=x.time-v.time;t.velocity=g/b,t.velocity/=2,Math.abs(t.velocity)<r.freeModeMinimumVelocity&&(t.velocity=0),(b>150||eI()-x.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=r.freeModeMomentumVelocityRatio,s.velocities.length=0;var y=1e3*r.freeModeMomentumRatio,w=t.velocity*y,j=t.translate+w;n&&(j=-j);var k=!1,C=20*Math.abs(t.velocity)*r.freeModeMomentumBounceRatio;if(j<t.maxTranslate())r.freeModeMomentumBounce?(j+t.maxTranslate()<-C&&(j=t.maxTranslate()-C),p=t.maxTranslate(),k=!0,s.allowMomentumBounce=!0):j=t.maxTranslate(),r.loop&&r.centeredSlides&&(m=!0);else if(j>t.minTranslate())r.freeModeMomentumBounce?(j-t.minTranslate()>C&&(j=t.minTranslate()+C),p=t.minTranslate(),k=!0,s.allowMomentumBounce=!0):j=t.minTranslate(),r.loop&&r.centeredSlides&&(m=!0);else if(r.freeModeSticky){for(var _=0;_<o.length;_+=1)if(o[_]>-j){f=_;break}j=-(j=Math.abs(o[f]-j)<Math.abs(o[f-1]-j)||"next"===t.swipeDirection?o[f]:o[f-1])}if(m&&t.once("transitionEnd",function(){t.loopFix()}),0!==t.velocity){if(y=n?Math.abs((-j-t.translate)/t.velocity):Math.abs((j-t.translate)/t.velocity),r.freeModeSticky){var N=Math.abs((n?-j:j)-t.translate),S=t.slidesSizesGrid[t.activeIndex];y=N<S?r.speed:N<2*S?1.5*r.speed:2.5*r.speed}}else if(r.freeModeSticky){t.slideToClosest();return}r.freeModeMomentumBounce&&k?(t.updateProgress(p),t.setTransition(y),t.setTranslate(j),t.transitionStart(!0,t.swipeDirection),t.animating=!0,a.transitionEnd(function(){t&&!t.destroyed&&s.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(r.speed),setTimeout(function(){t.setTranslate(p),a.transitionEnd(function(){t&&!t.destroyed&&t.transitionEnd()})},0))})):t.velocity?(t.updateProgress(j),t.setTransition(y),t.setTranslate(j),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,a.transitionEnd(function(){t&&!t.destroyed&&t.transitionEnd()}))):(t.emit("_freeModeNoMomentumRelease"),t.updateProgress(j)),t.updateActiveIndex(),t.updateSlidesClasses()}else if(r.freeModeSticky){t.slideToClosest();return}else r.freeMode&&t.emit("_freeModeNoMomentumRelease");(!r.freeModeMomentum||u>=r.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses());return}for(var E=0,T=t.slidesSizesGrid[0],P=0;P<l.length;P+=P<r.slidesPerGroupSkip?1:r.slidesPerGroup){var M=P<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;void 0!==l[P+M]?h>=l[P]&&h<l[P+M]&&(E=P,T=l[P+M]-l[P]):h>=l[P]&&(E=P,T=l[l.length-1]-l[l.length-2])}var F=(h-l[E])/T,A=E<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(u>r.longSwipesMs){if(!r.longSwipes){t.slideTo(t.activeIndex);return}"next"===t.swipeDirection&&(F>=r.longSwipesRatio?t.slideTo(E+A):t.slideTo(E)),"prev"===t.swipeDirection&&(F>1-r.longSwipesRatio?t.slideTo(E+A):t.slideTo(E))}else{if(!r.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(d.target===t.navigation.nextEl||d.target===t.navigation.prevEl)?d.target===t.navigation.nextEl?t.slideTo(E+A):t.slideTo(E):("next"===t.swipeDirection&&t.slideTo(E+A),"prev"===t.swipeDirection&&t.slideTo(E))}}}function eG(){var e=this.params,t=this.el;if(!t||0!==t.offsetWidth){e.breakpoints&&this.setBreakpoint();var s=this.allowSlideNext,r=this.allowSlidePrev,i=this.snapGrid;this.allowSlideNext=!0,this.allowSlidePrev=!0,this.updateSize(),this.updateSlides(),this.updateSlidesClasses(),("auto"===e.slidesPerView||e.slidesPerView>1)&&this.isEnd&&!this.isBeginning&&!this.params.centeredSlides?this.slideTo(this.slides.length-1,0,!1,!0):this.slideTo(this.activeIndex,0,!1,!0),this.autoplay&&this.autoplay.running&&this.autoplay.paused&&this.autoplay.run(),this.allowSlidePrev=r,this.allowSlideNext=s,this.params.watchOverflow&&i!==this.snapGrid&&this.checkOverflow()}}function e$(e){this.enabled&&!this.allowClick&&(this.params.preventClicks&&e.preventDefault(),this.params.preventClicksPropagation&&this.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}function eY(){var e=this.wrapperEl,t=this.rtlTranslate;if(this.enabled){this.previousTranslate=this.translate,this.isHorizontal()?t?this.translate=e.scrollWidth-e.offsetWidth-e.scrollLeft:this.translate=-e.scrollLeft:this.translate=-e.scrollTop,-0===this.translate&&(this.translate=0),this.updateActiveIndex(),this.updateSlidesClasses();var s=this.maxTranslate()-this.minTranslate();(0===s?0:(this.translate-this.minTranslate())/s)!==this.progress&&this.updateProgress(t?-this.translate:this.translate),this.emit("setTranslate",this.translate,!1)}}var eJ=!1;function eX(){}var eK={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!1,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1},eQ={modular:{useParams:function(e){var t=this;t.modules&&Object.keys(t.modules).forEach(function(s){var r=t.modules[s];r.params&&eD(e,r.params)})},useModules:function(e){void 0===e&&(e={});var t=this;t.modules&&Object.keys(t.modules).forEach(function(s){var r=t.modules[s],i=e[s]||{};r.on&&t.on&&Object.keys(r.on).forEach(function(e){t.on(e,r.on[e])}),r.create&&r.create.bind(t)(i)})}},eventsEmitter:{on:function(e,t,s){var r=this;if("function"!=typeof t)return r;var i=s?"unshift":"push";return e.split(" ").forEach(function(e){r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][i](t)}),r},once:function(e,t,s){var r=this;if("function"!=typeof t)return r;function i(){r.off(e,i),i.__emitterProxy&&delete i.__emitterProxy;for(var s=arguments.length,n=Array(s),a=0;a<s;a++)n[a]=arguments[a];t.apply(r,n)}return i.__emitterProxy=t,r.on(e,i,s)},onAny:function(e,t){return"function"!=typeof e||0>this.eventsAnyListeners.indexOf(e)&&this.eventsAnyListeners[t?"unshift":"push"](e),this},offAny:function(e){if(!this.eventsAnyListeners)return this;var t=this.eventsAnyListeners.indexOf(e);return t>=0&&this.eventsAnyListeners.splice(t,1),this},off:function(e,t){var s=this;return s.eventsListeners&&e.split(" ").forEach(function(e){void 0===t?s.eventsListeners[e]=[]:s.eventsListeners[e]&&s.eventsListeners[e].forEach(function(r,i){(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&s.eventsListeners[e].splice(i,1)})}),s},emit:function(){var e,t,s,r=this;if(!r.eventsListeners)return r;for(var i=arguments.length,n=Array(i),a=0;a<i;a++)n[a]=arguments[a];return"string"==typeof n[0]||Array.isArray(n[0])?(e=n[0],t=n.slice(1,n.length),s=r):(e=n[0].events,t=n[0].data,s=n[0].context||r),t.unshift(s),(Array.isArray(e)?e:e.split(" ")).forEach(function(e){r.eventsAnyListeners&&r.eventsAnyListeners.length&&r.eventsAnyListeners.forEach(function(r){r.apply(s,[e].concat(t))}),r.eventsListeners&&r.eventsListeners[e]&&r.eventsListeners[e].forEach(function(e){e.apply(s,t)})}),r}},update:{updateSize:function(){var e,t,s=this.$el;e=void 0!==this.params.width&&null!==this.params.width?this.params.width:s[0].clientWidth,t=void 0!==this.params.height&&null!==this.params.height?this.params.height:s[0].clientHeight,0===e&&this.isHorizontal()||0===t&&this.isVertical()||(e=e-parseInt(s.css("padding-left")||0,10)-parseInt(s.css("padding-right")||0,10),t=t-parseInt(s.css("padding-top")||0,10)-parseInt(s.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),eD(this,{width:e,height:t,size:this.isHorizontal()?e:t}))},updateSlides:function(){var e=this;function t(t){return e.isHorizontal()?t:({width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"})[t]}function s(e,s){return parseFloat(e.getPropertyValue(t(s))||0)}var r=e.params,i=e.$wrapperEl,n=e.size,a=e.rtlTranslate,l=e.wrongRTL,o=e.virtual&&r.virtual.enabled,d=o?e.virtual.slides.length:e.slides.length,c=i.children("."+e.params.slideClass),u=o?e.virtual.slides.length:c.length,h=[],p=[],m=[],f=r.slidesOffsetBefore;"function"==typeof f&&(f=r.slidesOffsetBefore.call(e));var x=r.slidesOffsetAfter;"function"==typeof x&&(x=r.slidesOffsetAfter.call(e));var v=e.snapGrid.length,g=e.slidesGrid.length,b=r.spaceBetween,y=-f,w=0,j=0;if(void 0!==n){"string"==typeof b&&b.indexOf("%")>=0&&(b=parseFloat(b.replace("%",""))/100*n),e.virtualSize=-b,a?c.css({marginLeft:"",marginBottom:"",marginTop:""}):c.css({marginRight:"",marginBottom:"",marginTop:""}),r.slidesPerColumn>1&&(Y=Math.floor(u/r.slidesPerColumn)===u/e.params.slidesPerColumn?u:Math.ceil(u/r.slidesPerColumn)*r.slidesPerColumn,"auto"!==r.slidesPerView&&"row"===r.slidesPerColumnFill&&(Y=Math.max(Y,r.slidesPerView*r.slidesPerColumn)));for(var k=r.slidesPerColumn,C=Y/k,_=Math.floor(u/r.slidesPerColumn),N=0;N<u;N+=1){J=0;var S=c.eq(N);if(r.slidesPerColumn>1){var E=void 0,T=void 0,P=void 0;if("row"===r.slidesPerColumnFill&&r.slidesPerGroup>1){var M=Math.floor(N/(r.slidesPerGroup*r.slidesPerColumn)),F=N-r.slidesPerColumn*r.slidesPerGroup*M,A=0===M?r.slidesPerGroup:Math.min(Math.ceil((u-M*k*r.slidesPerGroup)/k),r.slidesPerGroup);P=Math.floor(F/A),E=(T=F-P*A+M*r.slidesPerGroup)+P*Y/k,S.css({"-webkit-box-ordinal-group":E,"-moz-box-ordinal-group":E,"-ms-flex-order":E,"-webkit-order":E,order:E})}else"column"===r.slidesPerColumnFill?(T=Math.floor(N/k),P=N-T*k,(T>_||T===_&&P===k-1)&&(P+=1)>=k&&(P=0,T+=1)):(P=Math.floor(N/C),T=N-P*C);S.css(t("margin-top"),0!==P?r.spaceBetween&&r.spaceBetween+"px":"")}if("none"!==S.css("display")){if("auto"===r.slidesPerView){var L=getComputedStyle(S[0]),I=S[0].style.transform,Z=S[0].style.webkitTransform;if(I&&(S[0].style.transform="none"),Z&&(S[0].style.webkitTransform="none"),r.roundLengths)J=e.isHorizontal()?S.outerWidth(!0):S.outerHeight(!0);else{var D=s(L,"width"),z=s(L,"padding-left"),O=s(L,"padding-right"),R=s(L,"margin-left"),B=s(L,"margin-right"),q=L.getPropertyValue("box-sizing");if(q&&"border-box"===q)J=D+R+B;else{var H=S[0],V=H.clientWidth;J=D+z+O+R+B+(H.offsetWidth-V)}}I&&(S[0].style.transform=I),Z&&(S[0].style.webkitTransform=Z),r.roundLengths&&(J=Math.floor(J))}else J=(n-(r.slidesPerView-1)*b)/r.slidesPerView,r.roundLengths&&(J=Math.floor(J)),c[N]&&(c[N].style[t("width")]=J+"px");c[N]&&(c[N].swiperSlideSize=J),m.push(J),r.centeredSlides?(y=y+J/2+w/2+b,0===w&&0!==N&&(y=y-n/2-b),0===N&&(y=y-n/2-b),.001>Math.abs(y)&&(y=0),r.roundLengths&&(y=Math.floor(y)),j%r.slidesPerGroup==0&&h.push(y),p.push(y)):(r.roundLengths&&(y=Math.floor(y)),(j-Math.min(e.params.slidesPerGroupSkip,j))%e.params.slidesPerGroup==0&&h.push(y),p.push(y),y=y+J+b),e.virtualSize+=J+b,w=J,j+=1}}if(e.virtualSize=Math.max(e.virtualSize,n)+x,a&&l&&("slide"===r.effect||"coverflow"===r.effect)&&i.css({width:e.virtualSize+r.spaceBetween+"px"}),r.setWrapperSize&&i.css(((K={})[t("width")]=e.virtualSize+r.spaceBetween+"px",K)),r.slidesPerColumn>1&&(e.virtualSize=(J+r.spaceBetween)*Y,e.virtualSize=Math.ceil(e.virtualSize/r.slidesPerColumn)-r.spaceBetween,i.css(((Q={})[t("width")]=e.virtualSize+r.spaceBetween+"px",Q)),r.centeredSlides)){X=[];for(var W=0;W<h.length;W+=1){var U=h[W];r.roundLengths&&(U=Math.floor(U)),h[W]<e.virtualSize+h[0]&&X.push(U)}h=X}if(!r.centeredSlides){X=[];for(var G=0;G<h.length;G+=1){var $=h[G];r.roundLengths&&($=Math.floor($)),h[G]<=e.virtualSize-n&&X.push($)}h=X,Math.floor(e.virtualSize-n)-Math.floor(h[h.length-1])>1&&h.push(e.virtualSize-n)}if(0===h.length&&(h=[0]),0!==r.spaceBetween){var Y,J,X,K,Q,ee,et=e.isHorizontal()&&a?"marginLeft":t("marginRight");c.filter(function(e,t){return!r.cssMode||t!==c.length-1}).css(((ee={})[et]=b+"px",ee))}if(r.centeredSlides&&r.centeredSlidesBounds){var es=0;m.forEach(function(e){es+=e+(r.spaceBetween?r.spaceBetween:0)});var er=(es-=r.spaceBetween)-n;h=h.map(function(e){return e<0?-f:e>er?er+x:e})}if(r.centerInsufficientSlides){var ei=0;if(m.forEach(function(e){ei+=e+(r.spaceBetween?r.spaceBetween:0)}),(ei-=r.spaceBetween)<n){var en=(n-ei)/2;h.forEach(function(e,t){h[t]=e-en}),p.forEach(function(e,t){p[t]=e+en})}}eD(e,{slides:c,snapGrid:h,slidesGrid:p,slidesSizesGrid:m}),u!==d&&e.emit("slidesLengthChange"),h.length!==v&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),p.length!==g&&e.emit("slidesGridLengthChange"),(r.watchSlidesProgress||r.watchSlidesVisibility)&&e.updateSlidesOffset()}},updateAutoHeight:function(e){var t,s=this,r=[],i=s.virtual&&s.params.virtual.enabled,n=0;"number"==typeof e?s.setTransition(e):!0===e&&s.setTransition(s.params.speed);var a=function(e){return i?s.slides.filter(function(t){return parseInt(t.getAttribute("data-swiper-slide-index"),10)===e})[0]:s.slides.eq(e)[0]};if("auto"!==s.params.slidesPerView&&s.params.slidesPerView>1){if(s.params.centeredSlides)s.visibleSlides.each(function(e){r.push(e)});else for(t=0;t<Math.ceil(s.params.slidesPerView);t+=1){var l=s.activeIndex+t;if(l>s.slides.length&&!i)break;r.push(a(l))}}else r.push(a(s.activeIndex));for(t=0;t<r.length;t+=1)if(void 0!==r[t]){var o=r[t].offsetHeight;n=o>n?o:n}n&&s.$wrapperEl.css("height",n+"px")},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this.params,s=this.slides,r=this.rtlTranslate;if(0!==s.length){void 0===s[0].swiperSlideOffset&&this.updateSlidesOffset();var i=-e;r&&(i=e),s.removeClass(t.slideVisibleClass),this.visibleSlidesIndexes=[],this.visibleSlides=[];for(var n=0;n<s.length;n+=1){var a=s[n],l=(i+(t.centeredSlides?this.minTranslate():0)-a.swiperSlideOffset)/(a.swiperSlideSize+t.spaceBetween);if(t.watchSlidesVisibility||t.centeredSlides&&t.autoHeight){var o=-(i-a.swiperSlideOffset),d=o+this.slidesSizesGrid[n];(o>=0&&o<this.size-1||d>1&&d<=this.size||o<=0&&d>=this.size)&&(this.visibleSlides.push(a),this.visibleSlidesIndexes.push(n),s.eq(n).addClass(t.slideVisibleClass))}a.progress=r?-l:l}this.visibleSlides=eP(this.visibleSlides)}},updateProgress:function(e){if(void 0===e){var t=this.rtlTranslate?-1:1;e=this&&this.translate&&this.translate*t||0}var s=this.params,r=this.maxTranslate()-this.minTranslate(),i=this.progress,n=this.isBeginning,a=this.isEnd,l=n,o=a;0===r?(i=0,n=!0,a=!0):(n=(i=(e-this.minTranslate())/r)<=0,a=i>=1),eD(this,{progress:i,isBeginning:n,isEnd:a}),(s.watchSlidesProgress||s.watchSlidesVisibility||s.centeredSlides&&s.autoHeight)&&this.updateSlidesProgress(e),n&&!l&&this.emit("reachBeginning toEdge"),a&&!o&&this.emit("reachEnd toEdge"),(l&&!n||o&&!a)&&this.emit("fromEdge"),this.emit("progress",i)},updateSlidesClasses:function(){var e,t=this.slides,s=this.params,r=this.$wrapperEl,i=this.activeIndex,n=this.realIndex,a=this.virtual&&s.virtual.enabled;t.removeClass(s.slideActiveClass+" "+s.slideNextClass+" "+s.slidePrevClass+" "+s.slideDuplicateActiveClass+" "+s.slideDuplicateNextClass+" "+s.slideDuplicatePrevClass),(e=a?this.$wrapperEl.find("."+s.slideClass+'[data-swiper-slide-index="'+i+'"]'):t.eq(i)).addClass(s.slideActiveClass),s.loop&&(e.hasClass(s.slideDuplicateClass)?r.children("."+s.slideClass+":not(."+s.slideDuplicateClass+')[data-swiper-slide-index="'+n+'"]').addClass(s.slideDuplicateActiveClass):r.children("."+s.slideClass+"."+s.slideDuplicateClass+'[data-swiper-slide-index="'+n+'"]').addClass(s.slideDuplicateActiveClass));var l=e.nextAll("."+s.slideClass).eq(0).addClass(s.slideNextClass);s.loop&&0===l.length&&(l=t.eq(0)).addClass(s.slideNextClass);var o=e.prevAll("."+s.slideClass).eq(0).addClass(s.slidePrevClass);s.loop&&0===o.length&&(o=t.eq(-1)).addClass(s.slidePrevClass),s.loop&&(l.hasClass(s.slideDuplicateClass)?r.children("."+s.slideClass+":not(."+s.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(s.slideDuplicateNextClass):r.children("."+s.slideClass+"."+s.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(s.slideDuplicateNextClass),o.hasClass(s.slideDuplicateClass)?r.children("."+s.slideClass+":not(."+s.slideDuplicateClass+')[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(s.slideDuplicatePrevClass):r.children("."+s.slideClass+"."+s.slideDuplicateClass+'[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(s.slideDuplicatePrevClass)),this.emitSlidesClasses()},updateActiveIndex:function(e){var t,s=this.rtlTranslate?this.translate:-this.translate,r=this.slidesGrid,i=this.snapGrid,n=this.params,a=this.activeIndex,l=this.realIndex,o=this.snapIndex,d=e;if(void 0===d){for(var c=0;c<r.length;c+=1)void 0!==r[c+1]?s>=r[c]&&s<r[c+1]-(r[c+1]-r[c])/2?d=c:s>=r[c]&&s<r[c+1]&&(d=c+1):s>=r[c]&&(d=c);n.normalizeSlideIndex&&(d<0||void 0===d)&&(d=0)}if(i.indexOf(s)>=0)t=i.indexOf(s);else{var u=Math.min(n.slidesPerGroupSkip,d);t=u+Math.floor((d-u)/n.slidesPerGroup)}if(t>=i.length&&(t=i.length-1),d===a){t!==o&&(this.snapIndex=t,this.emit("snapIndexChange"));return}var h=parseInt(this.slides.eq(d).attr("data-swiper-slide-index")||d,10);eD(this,{snapIndex:t,realIndex:h,previousIndex:a,activeIndex:d}),this.emit("activeIndexChange"),this.emit("snapIndexChange"),l!==h&&this.emit("realIndexChange"),(this.initialized||this.params.runCallbacksOnInit)&&this.emit("slideChange")},updateClickedSlide:function(e){var t,s=this.params,r=eP(e.target).closest("."+s.slideClass)[0],i=!1;if(r){for(var n=0;n<this.slides.length;n+=1)if(this.slides[n]===r){i=!0,t=n;break}}if(r&&i)this.clickedSlide=r,this.virtual&&this.params.virtual.enabled?this.clickedIndex=parseInt(eP(r).attr("data-swiper-slide-index"),10):this.clickedIndex=t;else{this.clickedSlide=void 0,this.clickedIndex=void 0;return}s.slideToClickedSlide&&void 0!==this.clickedIndex&&this.clickedIndex!==this.activeIndex&&this.slideToClickedSlide()}},translate:{getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t,s,r,i,n,a,l,o,d,c=this.params,u=this.rtlTranslate,h=this.translate,p=this.$wrapperEl;if(c.virtualTranslate)return u?-h:h;if(c.cssMode)return h;var m=(t=p[0],void 0===(s=e)&&(s="x"),a=ej(),(o=ej()).getComputedStyle&&(l=o.getComputedStyle(t,null)),!l&&t.currentStyle&&(l=t.currentStyle),l||(l=t.style),d=l,a.WebKitCSSMatrix?((i=d.transform||d.webkitTransform).split(",").length>6&&(i=i.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),n=new a.WebKitCSSMatrix("none"===i?"":i)):r=(n=d.MozTransform||d.OTransform||d.MsTransform||d.msTransform||d.transform||d.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===s&&(i=a.WebKitCSSMatrix?n.m41:16===r.length?parseFloat(r[12]):parseFloat(r[4])),"y"===s&&(i=a.WebKitCSSMatrix?n.m42:16===r.length?parseFloat(r[13]):parseFloat(r[5])),i||0);return u&&(m=-m),m||0},setTranslate:function(e,t){var s=this.rtlTranslate,r=this.params,i=this.$wrapperEl,n=this.wrapperEl,a=this.progress,l=0,o=0;this.isHorizontal()?l=s?-e:e:o=e,r.roundLengths&&(l=Math.floor(l),o=Math.floor(o)),r.cssMode?n[this.isHorizontal()?"scrollLeft":"scrollTop"]=this.isHorizontal()?-l:-o:r.virtualTranslate||i.transform("translate3d("+l+"px, "+o+"px, 0px)"),this.previousTranslate=this.translate,this.translate=this.isHorizontal()?l:o;var d=this.maxTranslate()-this.minTranslate();(0===d?0:(e-this.minTranslate())/d)!==a&&this.updateProgress(e),this.emit("setTranslate",this.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,s,r,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===s&&(s=!0),void 0===r&&(r=!0);var n=this,a=n.params,l=n.wrapperEl;if(n.animating&&a.preventInteractionOnTransition)return!1;var o=n.minTranslate(),d=n.maxTranslate();if(c=r&&e>o?o:r&&e<d?d:e,n.updateProgress(c),a.cssMode){var c,u,h=n.isHorizontal();return 0===t?l[h?"scrollLeft":"scrollTop"]=-c:l.scrollTo?l.scrollTo(((u={})[h?"left":"top"]=-c,u.behavior="smooth",u)):l[h?"scrollLeft":"scrollTop"]=-c,!0}return 0===t?(n.setTransition(0),n.setTranslate(c),s&&(n.emit("beforeTransitionStart",t,i),n.emit("transitionEnd"))):(n.setTransition(t),n.setTranslate(c),s&&(n.emit("beforeTransitionStart",t,i),n.emit("transitionStart")),n.animating||(n.animating=!0,n.onTranslateToWrapperTransitionEnd||(n.onTranslateToWrapperTransitionEnd=function(e){n&&!n.destroyed&&e.target===this&&(n.$wrapperEl[0].removeEventListener("transitionend",n.onTranslateToWrapperTransitionEnd),n.$wrapperEl[0].removeEventListener("webkitTransitionEnd",n.onTranslateToWrapperTransitionEnd),n.onTranslateToWrapperTransitionEnd=null,delete n.onTranslateToWrapperTransitionEnd,s&&n.emit("transitionEnd"))}),n.$wrapperEl[0].addEventListener("transitionend",n.onTranslateToWrapperTransitionEnd),n.$wrapperEl[0].addEventListener("webkitTransitionEnd",n.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(e,t){this.params.cssMode||this.$wrapperEl.transition(e),this.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var s=this.activeIndex,r=this.params,i=this.previousIndex;if(!r.cssMode){r.autoHeight&&this.updateAutoHeight();var n=t;if(n||(n=s>i?"next":s<i?"prev":"reset"),this.emit("transitionStart"),e&&s!==i){if("reset"===n){this.emit("slideResetTransitionStart");return}this.emit("slideChangeTransitionStart"),"next"===n?this.emit("slideNextTransitionStart"):this.emit("slidePrevTransitionStart")}}},transitionEnd:function(e,t){void 0===e&&(e=!0);var s=this.activeIndex,r=this.previousIndex,i=this.params;if(this.animating=!1,!i.cssMode){this.setTransition(0);var n=t;if(n||(n=s>r?"next":s<r?"prev":"reset"),this.emit("transitionEnd"),e&&s!==r){if("reset"===n){this.emit("slideResetTransitionEnd");return}this.emit("slideChangeTransitionEnd"),"next"===n?this.emit("slideNextTransitionEnd"):this.emit("slidePrevTransitionEnd")}}}},slide:{slideTo:function(e,t,s,r,i){if(void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===s&&(s=!0),"number"!=typeof e&&"string"!=typeof e)throw Error("The 'index' argument cannot have type other than 'number' or 'string'. ["+typeof e+"] given.");if("string"==typeof e){var n=parseInt(e,10);if(!isFinite(n))throw Error("The passed-in 'index' (string) couldn't be converted to 'number'. ["+e+"] given.");e=n}var a=this,l=e;l<0&&(l=0);var o=a.params,d=a.snapGrid,c=a.slidesGrid,u=a.previousIndex,h=a.activeIndex,p=a.rtlTranslate,m=a.wrapperEl,f=a.enabled;if(a.animating&&o.preventInteractionOnTransition||!f&&!r&&!i)return!1;var x=Math.min(a.params.slidesPerGroupSkip,l),v=x+Math.floor((l-x)/a.params.slidesPerGroup);v>=d.length&&(v=d.length-1),(h||o.initialSlide||0)===(u||0)&&s&&a.emit("beforeSlideChangeStart");var g=-d[v];if(a.updateProgress(g),o.normalizeSlideIndex)for(var b=0;b<c.length;b+=1){var y=-Math.floor(100*g),w=Math.floor(100*c[b]),j=Math.floor(100*c[b+1]);void 0!==c[b+1]?y>=w&&y<j-(j-w)/2?l=b:y>=w&&y<j&&(l=b+1):y>=w&&(l=b)}if(a.initialized&&l!==h&&(!a.allowSlideNext&&g<a.translate&&g<a.minTranslate()||!a.allowSlidePrev&&g>a.translate&&g>a.maxTranslate()&&(h||0)!==l))return!1;if(k=l>h?"next":l<h?"prev":"reset",p&&-g===a.translate||!p&&g===a.translate)return a.updateActiveIndex(l),o.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),"slide"!==o.effect&&a.setTranslate(g),"reset"!==k&&(a.transitionStart(s,k),a.transitionEnd(s,k)),!1;if(o.cssMode){var k,C,_=a.isHorizontal(),N=-g;return p&&(N=m.scrollWidth-m.offsetWidth-N),0===t?m[_?"scrollLeft":"scrollTop"]=N:m.scrollTo?m.scrollTo(((C={})[_?"left":"top"]=N,C.behavior="smooth",C)):m[_?"scrollLeft":"scrollTop"]=N,!0}return 0===t?(a.setTransition(0),a.setTranslate(g),a.updateActiveIndex(l),a.updateSlidesClasses(),a.emit("beforeTransitionStart",t,r),a.transitionStart(s,k),a.transitionEnd(s,k)):(a.setTransition(t),a.setTranslate(g),a.updateActiveIndex(l),a.updateSlidesClasses(),a.emit("beforeTransitionStart",t,r),a.transitionStart(s,k),a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(e){a&&!a.destroyed&&e.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(s,k))}),a.$wrapperEl[0].addEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(e,t,s,r){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===s&&(s=!0);var i=e;return this.params.loop&&(i+=this.loopedSlides),this.slideTo(i,t,s,r)},slideNext:function(e,t,s){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var r=this.params,i=this.animating;if(!this.enabled)return this;var n=this.activeIndex<r.slidesPerGroupSkip?1:r.slidesPerGroup;if(r.loop){if(i&&r.loopPreventsSlide)return!1;this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft}return this.slideTo(this.activeIndex+n,e,t,s)},slidePrev:function(e,t,s){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var r,i=this.params,n=this.animating,a=this.snapGrid,l=this.slidesGrid,o=this.rtlTranslate;if(!this.enabled)return this;if(i.loop){if(n&&i.loopPreventsSlide)return!1;this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft}function d(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var c=d(o?this.translate:-this.translate),u=a.map(function(e){return d(e)}),h=a[u.indexOf(c)-1];return void 0===h&&i.cssMode&&a.forEach(function(e){!h&&c>=e&&(h=e)}),void 0!==h&&(r=l.indexOf(h))<0&&(r=this.activeIndex-1),this.slideTo(r,e,t,s)},slideReset:function(e,t,s){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,s)},slideToClosest:function(e,t,s,r){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===r&&(r=.5);var i=this.activeIndex,n=Math.min(this.params.slidesPerGroupSkip,i),a=n+Math.floor((i-n)/this.params.slidesPerGroup),l=this.rtlTranslate?this.translate:-this.translate;if(l>=this.snapGrid[a]){var o=this.snapGrid[a];l-o>(this.snapGrid[a+1]-o)*r&&(i+=this.params.slidesPerGroup)}else{var d=this.snapGrid[a-1];l-d<=(this.snapGrid[a]-d)*r&&(i-=this.params.slidesPerGroup)}return i=Math.min(i=Math.max(i,0),this.slidesGrid.length-1),this.slideTo(i,e,t,s)},slideToClickedSlide:function(){var e,t=this,s=t.params,r=t.$wrapperEl,i="auto"===s.slidesPerView?t.slidesPerViewDynamic():s.slidesPerView,n=t.clickedIndex;if(s.loop){if(t.animating)return;e=parseInt(eP(t.clickedSlide).attr("data-swiper-slide-index"),10),s.centeredSlides?n<t.loopedSlides-i/2||n>t.slides.length-t.loopedSlides+i/2?(t.loopFix(),n=r.children("."+s.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+s.slideDuplicateClass+")").eq(0).index(),eL(function(){t.slideTo(n)})):t.slideTo(n):n>t.slides.length-i?(t.loopFix(),n=r.children("."+s.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+s.slideDuplicateClass+")").eq(0).index(),eL(function(){t.slideTo(n)})):t.slideTo(n)}else t.slideTo(n)}},loop:{loopCreate:function(){var e=this,t=ey(),s=e.params,r=e.$wrapperEl;r.children("."+s.slideClass+"."+s.slideDuplicateClass).remove();var i=r.children("."+s.slideClass);if(s.loopFillGroupWithBlank){var n=s.slidesPerGroup-i.length%s.slidesPerGroup;if(n!==s.slidesPerGroup){for(var a=0;a<n;a+=1){var l=eP(t.createElement("div")).addClass(s.slideClass+" "+s.slideBlankClass);r.append(l)}i=r.children("."+s.slideClass)}}"auto"!==s.slidesPerView||s.loopedSlides||(s.loopedSlides=i.length),e.loopedSlides=Math.ceil(parseFloat(s.loopedSlides||s.slidesPerView,10)),e.loopedSlides+=s.loopAdditionalSlides,e.loopedSlides>i.length&&(e.loopedSlides=i.length);var o=[],d=[];i.each(function(t,s){var r=eP(t);s<e.loopedSlides&&d.push(t),s<i.length&&s>=i.length-e.loopedSlides&&o.push(t),r.attr("data-swiper-slide-index",s)});for(var c=0;c<d.length;c+=1)r.append(eP(d[c].cloneNode(!0)).addClass(s.slideDuplicateClass));for(var u=o.length-1;u>=0;u-=1)r.prepend(eP(o[u].cloneNode(!0)).addClass(s.slideDuplicateClass))},loopFix:function(){this.emit("beforeLoopFix");var e,t=this.activeIndex,s=this.slides,r=this.loopedSlides,i=this.allowSlidePrev,n=this.allowSlideNext,a=this.snapGrid,l=this.rtlTranslate;this.allowSlidePrev=!0,this.allowSlideNext=!0;var o=-a[t]-this.getTranslate();t<r?(e=s.length-3*r+t+r,this.slideTo(e,0,!1,!0)&&0!==o&&this.setTranslate((l?-this.translate:this.translate)-o)):t>=s.length-r&&(e=-s.length+t+r+r,this.slideTo(e,0,!1,!0)&&0!==o&&this.setTranslate((l?-this.translate:this.translate)-o)),this.allowSlidePrev=i,this.allowSlideNext=n,this.emit("loopFix")},loopDestroy:function(){var e=this.$wrapperEl,t=this.params,s=this.slides;e.children("."+t.slideClass+"."+t.slideDuplicateClass+",."+t.slideClass+"."+t.slideBlankClass).remove(),s.removeAttr("data-swiper-slide-index")}},grabCursor:{setGrabCursor:function(e){if(!this.support.touch&&this.params.simulateTouch&&(!this.params.watchOverflow||!this.isLocked)&&!this.params.cssMode){var t=this.el;t.style.cursor="move",t.style.cursor=e?"-webkit-grabbing":"-webkit-grab",t.style.cursor=e?"-moz-grabbin":"-moz-grab",t.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){this.support.touch||this.params.watchOverflow&&this.isLocked||this.params.cssMode||(this.el.style.cursor="")}},manipulation:{appendSlide:function(e){var t=this.$wrapperEl,s=this.params;if(s.loop&&this.loopDestroy(),"object"==typeof e&&"length"in e)for(var r=0;r<e.length;r+=1)e[r]&&t.append(e[r]);else t.append(e);s.loop&&this.loopCreate(),s.observer&&this.support.observer||this.update()},prependSlide:function(e){var t=this.params,s=this.$wrapperEl,r=this.activeIndex;t.loop&&this.loopDestroy();var i=r+1;if("object"==typeof e&&"length"in e){for(var n=0;n<e.length;n+=1)e[n]&&s.prepend(e[n]);i=r+e.length}else s.prepend(e);t.loop&&this.loopCreate(),t.observer&&this.support.observer||this.update(),this.slideTo(i,0,!1)},addSlide:function(e,t){var s=this.$wrapperEl,r=this.params,i=this.activeIndex;r.loop&&(i-=this.loopedSlides,this.loopDestroy(),this.slides=s.children("."+r.slideClass));var n=this.slides.length;if(e<=0){this.prependSlide(t);return}if(e>=n){this.appendSlide(t);return}for(var a=i>e?i+1:i,l=[],o=n-1;o>=e;o-=1){var d=this.slides.eq(o);d.remove(),l.unshift(d)}if("object"==typeof t&&"length"in t){for(var c=0;c<t.length;c+=1)t[c]&&s.append(t[c]);a=i>e?i+t.length:i}else s.append(t);for(var u=0;u<l.length;u+=1)s.append(l[u]);r.loop&&this.loopCreate(),r.observer&&this.support.observer||this.update(),r.loop?this.slideTo(a+this.loopedSlides,0,!1):this.slideTo(a,0,!1)},removeSlide:function(e){var t,s=this.params,r=this.$wrapperEl,i=this.activeIndex;s.loop&&(i-=this.loopedSlides,this.loopDestroy(),this.slides=r.children("."+s.slideClass));var n=i;if("object"==typeof e&&"length"in e){for(var a=0;a<e.length;a+=1)t=e[a],this.slides[t]&&this.slides.eq(t).remove(),t<n&&(n-=1);n=Math.max(n,0)}else t=e,this.slides[t]&&this.slides.eq(t).remove(),t<n&&(n-=1),n=Math.max(n,0);s.loop&&this.loopCreate(),s.observer&&this.support.observer||this.update(),s.loop?this.slideTo(n+this.loopedSlides,0,!1):this.slideTo(n,0,!1)},removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}},events:{attachEvents:function(){var e=ey(),t=this.params,s=this.touchEvents,r=this.el,i=this.wrapperEl,n=this.device,a=this.support;this.onTouchStart=eV.bind(this),this.onTouchMove=eW.bind(this),this.onTouchEnd=eU.bind(this),t.cssMode&&(this.onScroll=eY.bind(this)),this.onClick=e$.bind(this);var l=!!t.nested;if(!a.touch&&a.pointerEvents)r.addEventListener(s.start,this.onTouchStart,!1),e.addEventListener(s.move,this.onTouchMove,l),e.addEventListener(s.end,this.onTouchEnd,!1);else{if(a.touch){var o="touchstart"===s.start&&!!a.passiveListener&&!!t.passiveListeners&&{passive:!0,capture:!1};r.addEventListener(s.start,this.onTouchStart,o),r.addEventListener(s.move,this.onTouchMove,a.passiveListener?{passive:!1,capture:l}:l),r.addEventListener(s.end,this.onTouchEnd,o),s.cancel&&r.addEventListener(s.cancel,this.onTouchEnd,o),eJ||(e.addEventListener("touchstart",eX),eJ=!0)}(t.simulateTouch&&!n.ios&&!n.android||t.simulateTouch&&!a.touch&&n.ios)&&(r.addEventListener("mousedown",this.onTouchStart,!1),e.addEventListener("mousemove",this.onTouchMove,l),e.addEventListener("mouseup",this.onTouchEnd,!1))}(t.preventClicks||t.preventClicksPropagation)&&r.addEventListener("click",this.onClick,!0),t.cssMode&&i.addEventListener("scroll",this.onScroll),t.updateOnWindowResize?this.on(n.ios||n.android?"resize orientationchange observerUpdate":"resize observerUpdate",eG,!0):this.on("observerUpdate",eG,!0)},detachEvents:function(){var e=ey(),t=this.params,s=this.touchEvents,r=this.el,i=this.wrapperEl,n=this.device,a=this.support,l=!!t.nested;if(!a.touch&&a.pointerEvents)r.removeEventListener(s.start,this.onTouchStart,!1),e.removeEventListener(s.move,this.onTouchMove,l),e.removeEventListener(s.end,this.onTouchEnd,!1);else{if(a.touch){var o="onTouchStart"===s.start&&!!a.passiveListener&&!!t.passiveListeners&&{passive:!0,capture:!1};r.removeEventListener(s.start,this.onTouchStart,o),r.removeEventListener(s.move,this.onTouchMove,l),r.removeEventListener(s.end,this.onTouchEnd,o),s.cancel&&r.removeEventListener(s.cancel,this.onTouchEnd,o)}(t.simulateTouch&&!n.ios&&!n.android||t.simulateTouch&&!a.touch&&n.ios)&&(r.removeEventListener("mousedown",this.onTouchStart,!1),e.removeEventListener("mousemove",this.onTouchMove,l),e.removeEventListener("mouseup",this.onTouchEnd,!1))}(t.preventClicks||t.preventClicksPropagation)&&r.removeEventListener("click",this.onClick,!0),t.cssMode&&i.removeEventListener("scroll",this.onScroll),this.off(n.ios||n.android?"resize orientationchange observerUpdate":"resize observerUpdate",eG)}},breakpoints:{setBreakpoint:function(){var e=this.activeIndex,t=this.initialized,s=this.loopedSlides,r=this.params,i=this.$el,n=r.breakpoints;if(n&&(!n||0!==Object.keys(n).length)){var a=this.getBreakpoint(n,this.params.breakpointsBase,this.el);if(a&&this.currentBreakpoint!==a){var l=a in n?n[a]:void 0;l&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach(function(e){var t=l[e];void 0!==t&&("slidesPerView"===e&&("AUTO"===t||"auto"===t)?l[e]="auto":"slidesPerView"===e?l[e]=parseFloat(t):l[e]=parseInt(t,10))});var o=l||this.originalParams,d=r.slidesPerColumn>1,c=o.slidesPerColumn>1,u=r.enabled;d&&!c?(i.removeClass(r.containerModifierClass+"multirow "+r.containerModifierClass+"multirow-column"),this.emitContainerClasses()):!d&&c&&(i.addClass(r.containerModifierClass+"multirow"),(o.slidesPerColumnFill&&"column"===o.slidesPerColumnFill||!o.slidesPerColumnFill&&"column"===r.slidesPerColumnFill)&&i.addClass(r.containerModifierClass+"multirow-column"),this.emitContainerClasses());var h=o.direction&&o.direction!==r.direction,p=r.loop&&(o.slidesPerView!==r.slidesPerView||h);h&&t&&this.changeDirection(),eD(this.params,o);var m=this.params.enabled;eD(this,{allowTouchMove:this.params.allowTouchMove,allowSlideNext:this.params.allowSlideNext,allowSlidePrev:this.params.allowSlidePrev}),u&&!m?this.disable():!u&&m&&this.enable(),this.currentBreakpoint=a,this.emit("_beforeBreakpoint",o),p&&t&&(this.loopDestroy(),this.loopCreate(),this.updateSlides(),this.slideTo(e-(void 0===s?0:s)+this.loopedSlides,0,!1)),this.emit("breakpoint",o)}}},getBreakpoint:function(e,t,s){if(void 0===t&&(t="window"),e&&("container"!==t||s)){var r=!1,i=ej(),n="window"===t?i.innerHeight:s.clientHeight,a=Object.keys(e).map(function(e){return"string"==typeof e&&0===e.indexOf("@")?{value:n*parseFloat(e.substr(1)),point:e}:{value:e,point:e}});a.sort(function(e,t){return parseInt(e.value,10)-parseInt(t.value,10)});for(var l=0;l<a.length;l+=1){var o=a[l],d=o.point,c=o.value;"window"===t?i.matchMedia("(min-width: "+c+"px)").matches&&(r=d):c<=s.clientWidth&&(r=d)}return r||"max"}}},checkOverflow:{checkOverflow:function(){var e=this.params,t=this.isLocked,s=this.slides.length>0&&e.slidesOffsetBefore+e.spaceBetween*(this.slides.length-1)+this.slides[0].offsetWidth*this.slides.length;e.slidesOffsetBefore&&e.slidesOffsetAfter&&s?this.isLocked=s<=this.size:this.isLocked=1===this.snapGrid.length,this.allowSlideNext=!this.isLocked,this.allowSlidePrev=!this.isLocked,t!==this.isLocked&&this.emit(this.isLocked?"lock":"unlock"),t&&t!==this.isLocked&&(this.isEnd=!1,this.navigation&&this.navigation.update())}},classes:{addClasses:function(){var e,t,s,r=this.classNames,i=this.params,n=this.rtl,a=this.$el,l=this.device,o=this.support,d=(e=["initialized",i.direction,{"pointer-events":o.pointerEvents&&!o.touch},{"free-mode":i.freeMode},{autoheight:i.autoHeight},{rtl:n},{multirow:i.slidesPerColumn>1},{"multirow-column":i.slidesPerColumn>1&&"column"===i.slidesPerColumnFill},{android:l.android},{ios:l.ios},{"css-mode":i.cssMode}],t=i.containerModifierClass,s=[],e.forEach(function(e){"object"==typeof e?Object.keys(e).forEach(function(r){e[r]&&s.push(t+r)}):"string"==typeof e&&s.push(t+e)}),s);r.push.apply(r,d),a.addClass([].concat(r).join(" ")),this.emitContainerClasses()},removeClasses:function(){var e=this.$el,t=this.classNames;e.removeClass(t.join(" ")),this.emitContainerClasses()}},images:{loadImage:function(e,t,s,r,i,n){var a,l=ej();function o(){n&&n()}eP(e).parent("picture")[0]||e.complete&&i?o():t?((a=new l.Image).onload=o,a.onerror=o,r&&(a.sizes=r),s&&(a.srcset=s),t&&(a.src=t)):o()},preloadImages:function(){var e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var s=0;s<e.imagesToLoad.length;s+=1){var r=e.imagesToLoad[s];e.loadImage(r,r.currentSrc||r.getAttribute("src"),r.srcset||r.getAttribute("srcset"),r.sizes||r.getAttribute("sizes"),!0,t)}}}},e0={},e1=function(){function e(){for(var t,s,r,i=arguments.length,l=Array(i),o=0;o<i;o++)l[o]=arguments[o];if(1===l.length&&l[0].constructor&&"Object"===Object.prototype.toString.call(l[0]).slice(8,-1)?r=l[0]:(s=l[0],r=l[1]),r||(r={}),r=eD({},r),s&&!r.el&&(r.el=s),r.el&&eP(r.el).length>1){var d=[];return eP(r.el).each(function(t){var s=eD({},r,{el:t});d.push(new e(s))}),d}var c=this;c.__swiper__=!0,c.support=eB(),c.device=function(e){if(void 0===e&&(e={}),!n){var t,s,r,i,a,l,o,d,c,u,h,p,m,f;s=(void 0===(t=e)?{}:t).userAgent,r=eB(),a=(i=ej()).navigator.platform,l=s||i.navigator.userAgent,o={ios:!1,android:!1},d=i.screen.width,c=i.screen.height,u=l.match(/(Android);?[\s\/]+([\d.]+)?/),h=l.match(/(iPad).*OS\s([\d_]+)/),p=l.match(/(iPod)(.*OS\s([\d_]+))?/),m=!h&&l.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f="MacIntel"===a,!h&&f&&r.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(d+"x"+c)>=0&&((h=l.match(/(Version)\/([\d.]+)/))||(h=[0,1,"13_0_0"]),f=!1),u&&"Win32"!==a&&(o.os="android",o.android=!0),(h||m||p)&&(o.os="ios",o.ios=!0),n=o}return n}({userAgent:r.userAgent}),c.browser=function(){if(!a){var e,t;a={isEdge:!!(e=ej()).navigator.userAgent.match(/Edge/g),isSafari:(t=e.navigator.userAgent.toLowerCase()).indexOf("safari")>=0&&0>t.indexOf("chrome")&&0>t.indexOf("android"),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}return a}(),c.eventsListeners={},c.eventsAnyListeners=[],void 0===c.modules&&(c.modules={}),Object.keys(c.modules).forEach(function(e){var t=c.modules[e];if(t.params){var s=Object.keys(t.params)[0],i=t.params[s];if("object"!=typeof i||null===i||(["navigation","pagination","scrollbar"].indexOf(s)>=0&&!0===r[s]&&(r[s]={auto:!0}),!(s in r&&"enabled"in i)))return;!0===r[s]&&(r[s]={enabled:!0}),"object"!=typeof r[s]||"enabled"in r[s]||(r[s].enabled=!0),r[s]||(r[s]={enabled:!1})}});var u=eD({},eK);return c.useParams(u),c.params=eD({},u,e0,r),c.originalParams=eD({},c.params),c.passedParams=eD({},r),c.params&&c.params.on&&Object.keys(c.params.on).forEach(function(e){c.on(e,c.params.on[e])}),c.params&&c.params.onAny&&c.onAny(c.params.onAny),c.$=eP,eD(c,{enabled:c.params.enabled,el:s,classNames:[],slides:eP(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===c.params.direction},isVertical:function(){return"vertical"===c.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:c.params.allowSlideNext,allowSlidePrev:c.params.allowSlidePrev,touchEvents:(t=["mousedown","mousemove","mouseup"],c.support.pointerEvents&&(t=["pointerdown","pointermove","pointerup"]),c.touchEventsTouch={start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},c.touchEventsDesktop={start:t[0],move:t[1],end:t[2]},c.support.touch||!c.params.simulateTouch?c.touchEventsTouch:c.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:c.params.focusableElements,lastClickTime:eI(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:c.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),c.useModules(),c.emit("_swiper"),c.params.init&&c.init(),c}var t=e.prototype;return t.enable=function(){this.enabled||(this.enabled=!0,this.params.grabCursor&&this.setGrabCursor(),this.emit("enable"))},t.disable=function(){this.enabled&&(this.enabled=!1,this.params.grabCursor&&this.unsetGrabCursor(),this.emit("disable"))},t.setProgress=function(e,t){e=Math.min(Math.max(e,0),1);var s=this.minTranslate(),r=(this.maxTranslate()-s)*e+s;this.translateTo(r,void 0===t?0:t),this.updateActiveIndex(),this.updateSlidesClasses()},t.emitContainerClasses=function(){var e=this;if(e.params._emitClasses&&e.el){var t=e.el.className.split(" ").filter(function(t){return 0===t.indexOf("swiper-container")||0===t.indexOf(e.params.containerModifierClass)});e.emit("_containerClasses",t.join(" "))}},t.getSlideClasses=function(e){var t=this;return e.className.split(" ").filter(function(e){return 0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)}).join(" ")},t.emitSlidesClasses=function(){var e=this;if(e.params._emitClasses&&e.el){var t=[];e.slides.each(function(s){var r=e.getSlideClasses(s);t.push({slideEl:s,classNames:r}),e.emit("_slideClass",s,r)}),e.emit("_slideClasses",t)}},t.slidesPerViewDynamic=function(){var e=this.params,t=this.slides,s=this.slidesGrid,r=this.size,i=this.activeIndex,n=1;if(e.centeredSlides){for(var a,l=t[i].swiperSlideSize,o=i+1;o<t.length;o+=1)t[o]&&!a&&(l+=t[o].swiperSlideSize,n+=1,l>r&&(a=!0));for(var d=i-1;d>=0;d-=1)t[d]&&!a&&(l+=t[d].swiperSlideSize,n+=1,l>r&&(a=!0))}else for(var c=i+1;c<t.length;c+=1)s[c]-s[i]<r&&(n+=1);return n},t.update=function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,s=e.params;s.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode?(r(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||r(),s.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function r(){var t=Math.min(Math.max(e.rtlTranslate?-1*e.translate:e.translate,e.maxTranslate()),e.minTranslate());e.setTranslate(t),e.updateActiveIndex(),e.updateSlidesClasses()}},t.changeDirection=function(e,t){void 0===t&&(t=!0);var s=this.params.direction;return e||(e="horizontal"===s?"vertical":"horizontal"),e===s||"horizontal"!==e&&"vertical"!==e||(this.$el.removeClass(""+this.params.containerModifierClass+s).addClass(""+this.params.containerModifierClass+e),this.emitContainerClasses(),this.params.direction=e,this.slides.each(function(t){"vertical"===e?t.style.width="":t.style.height=""}),this.emit("changeDirection"),t&&this.update()),this},t.mount=function(e){var t=this;if(t.mounted)return!0;var s=eP(e||t.params.el);if(!(e=s[0]))return!1;e.swiper=t;var r=function(){return"."+(t.params.wrapperClass||"").trim().split(" ").join(".")},i=function(){if(e&&e.shadowRoot&&e.shadowRoot.querySelector){var t=eP(e.shadowRoot.querySelector(r()));return t.children=function(e){return s.children(e)},t}return s.children(r())}();if(0===i.length&&t.params.createElements){var n=ey().createElement("div");i=eP(n),n.className=t.params.wrapperClass,s.append(n),s.children("."+t.params.slideClass).each(function(e){i.append(e)})}return eD(t,{$el:s,el:e,$wrapperEl:i,wrapperEl:i[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===s.css("direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===s.css("direction")),wrongRTL:"-webkit-box"===i.css("display")}),!0},t.init=function(e){return this.initialized||!1===this.mount(e)||(this.emit("beforeInit"),this.params.breakpoints&&this.setBreakpoint(),this.addClasses(),this.params.loop&&this.loopCreate(),this.updateSize(),this.updateSlides(),this.params.watchOverflow&&this.checkOverflow(),this.params.grabCursor&&this.enabled&&this.setGrabCursor(),this.params.preloadImages&&this.preloadImages(),this.params.loop?this.slideTo(this.params.initialSlide+this.loopedSlides,0,this.params.runCallbacksOnInit,!1,!0):this.slideTo(this.params.initialSlide,0,this.params.runCallbacksOnInit,!1,!0),this.attachEvents(),this.initialized=!0,this.emit("init"),this.emit("afterInit")),this},t.destroy=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var s=this,r=s.params,i=s.$el,n=s.$wrapperEl,a=s.slides;return void 0===s.params||s.destroyed||(s.emit("beforeDestroy"),s.initialized=!1,s.detachEvents(),r.loop&&s.loopDestroy(),t&&(s.removeClasses(),i.removeAttr("style"),n.removeAttr("style"),a&&a.length&&a.removeClass([r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),s.emit("destroy"),Object.keys(s.eventsListeners).forEach(function(e){s.off(e)}),!1!==e&&(s.$el[0].swiper=null,function(e){Object.keys(e).forEach(function(t){try{e[t]=null}catch(e){}try{delete e[t]}catch(e){}})}(s)),s.destroyed=!0),null},e.extendDefaults=function(e){eD(e0,e)},e.installModule=function(t){e.prototype.modules||(e.prototype.modules={});var s=t.name||Object.keys(e.prototype.modules).length+"_"+eI();e.prototype.modules[s]=t},e.use=function(t){return Array.isArray(t)?t.forEach(function(t){return e.installModule(t)}):e.installModule(t),e},function(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e,[{key:"extendedDefaults",get:function(){return e0}},{key:"defaults",get:function(){return eK}}]),e}();function e2(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function e3(e,t){var s=["__proto__","constructor","prototype"];Object.keys(t).filter(function(e){return 0>s.indexOf(e)}).forEach(function(s){void 0===e[s]?e[s]=t[s]:e2(t[s])&&e2(e[s])&&Object.keys(t[s]).length>0?t[s].__swiper__?e[s]=t[s]:e3(e[s],t[s]):e[s]=t[s]})}function e5(e){return void 0===e&&(e={}),e.navigation&&void 0===e.navigation.nextEl&&void 0===e.navigation.prevEl}function e7(e){return void 0===e&&(e={}),e.pagination&&void 0===e.pagination.el}function e6(e){return void 0===e&&(e={}),e.scrollbar&&void 0===e.scrollbar.el}function e4(e){void 0===e&&(e="");var t=e.split(" ").map(function(e){return e.trim()}).filter(function(e){return!!e}),s=[];return t.forEach(function(e){0>s.indexOf(e)&&s.push(e)}),s.join(" ")}Object.keys(eQ).forEach(function(e){Object.keys(eQ[e]).forEach(function(t){e1.prototype[t]=eQ[e][t]})}),e1.use([{name:"resize",create:function(){var e=this;eD(e,{resize:{observer:null,createObserver:function(){e&&!e.destroyed&&e.initialized&&(e.resize.observer=new ResizeObserver(function(t){var s=e.width,r=e.height,i=s,n=r;t.forEach(function(t){var s=t.contentBoxSize,r=t.contentRect,a=t.target;a&&a!==e.el||(i=r?r.width:(s[0]||s).inlineSize,n=r?r.height:(s[0]||s).blockSize)}),(i!==s||n!==r)&&e.resize.resizeHandler()}),e.resize.observer.observe(e.el))},removeObserver:function(){e.resize.observer&&e.resize.observer.unobserve&&e.el&&(e.resize.observer.unobserve(e.el),e.resize.observer=null)},resizeHandler:function(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init:function(e){var t=ej();if(e.params.resizeObserver&&void 0!==ej().ResizeObserver){e.resize.createObserver();return}t.addEventListener("resize",e.resize.resizeHandler),t.addEventListener("orientationchange",e.resize.orientationChangeHandler)},destroy:function(e){var t=ej();e.resize.removeObserver(),t.removeEventListener("resize",e.resize.resizeHandler),t.removeEventListener("orientationchange",e.resize.orientationChangeHandler)}}},{name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){ez(this,{observer:eq({},eH,{observers:[]})})},on:{init:function(e){e.observer.init()},destroy:function(e){e.observer.destroy()}}}]);var e8=["init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_freeModeMomentum","_freeModeMomentumRatio","_freeModeMomentumBounce","_freeModeMomentumBounceRatio","_freeModeMomentumVelocityRatio","_freeModeSticky","_freeModeMinimumVelocity","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","_slidesPerColumn","_slidesPerColumnFill","_slidesPerGroup","_slidesPerGroupSkip","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_watchSlidesVisibility","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopFillGroupWithBlank","loopPreventsSlide","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function e9(e,t){var s=t.slidesPerView;if(t.breakpoints){var r=e1.prototype.getBreakpoint(t.breakpoints),i=r in t.breakpoints?t.breakpoints[r]:void 0;i&&i.slidesPerView&&(s=i.slidesPerView)}var n=Math.ceil(parseFloat(t.loopedSlides||s,10));return(n+=t.loopAdditionalSlides)>e.length&&(n=e.length),n}function te(e,t){return"undefined"==typeof window?(0,o.useEffect)(e,t):(0,o.useLayoutEffect)(e,t)}var tt=["className","tag","wrapperTag","children","onSwiper"];function ts(){return(ts=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}var tr=(0,o.forwardRef)(function(e,t){var s,r,i,n,a,l,d,c,u=void 0===e?{}:e,h=u.className,p=u.tag,m=u.wrapperTag,f=u.children,x=u.onSwiper,v=function(e,t){if(null==e)return{};var s,r,i={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(i[s]=e[s]);return i}(u,tt),g=!1,b=(0,o.useState)("swiper-container"),y=b[0],w=b[1],j=(0,o.useState)(null),k=j[0],C=j[1],_=(0,o.useState)(!1),N=_[0],S=_[1],E=(0,o.useRef)(!1),T=(0,o.useRef)(null),P=(0,o.useRef)(null),M=(0,o.useRef)(null),F=(0,o.useRef)(null),A=(0,o.useRef)(null),L=(0,o.useRef)(null),I=(0,o.useRef)(null),Z=(0,o.useRef)(null),D=(void 0===(s=v)&&(s={}),i={},n={},e3(r={on:{}},e1.defaults),e3(r,e1.extendedDefaults),r._emitClasses=!0,r.init=!1,a={},l=e8.map(function(e){return e.replace(/_/,"")}),Object.keys(s).forEach(function(e){l.indexOf(e)>=0?e2(s[e])?(r[e]={},n[e]={},e3(r[e],s[e]),e3(n[e],s[e])):(r[e]=s[e],n[e]=s[e]):0===e.search(/on[A-Z]/)&&"function"==typeof s[e]?i[""+e[2].toLowerCase()+e.substr(3)]=s[e]:a[e]=s[e]}),["navigation","pagination","scrollbar"].forEach(function(e){!0===r[e]&&(r[e]={}),!1===r[e]&&delete r[e]}),{params:r,passedParams:n,rest:a,events:i}),z=D.params,O=D.passedParams,R=D.rest,B=D.events,q=(d=[],c={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},o.Children.toArray(f).forEach(function(e){if(e.type&&"SwiperSlide"===e.type.displayName)d.push(e);else if(e.props&&e.props.slot&&c[e.props.slot])c[e.props.slot].push(e);else if(e.props&&e.props.children){var t=function e(t){var s=[];return o.Children.toArray(t).forEach(function(t){t.type&&"SwiperSlide"===t.type.displayName?s.push(t):t.props&&t.props.children&&e(t.props.children).forEach(function(e){return s.push(e)})}),s}(e.props.children);t.length>0?t.forEach(function(e){return d.push(e)}):c["container-end"].push(e)}else c["container-end"].push(e)}),{slides:d,slots:c}),H=q.slides,V=q.slots,W=function(){S(!N)};if(Object.assign(z.on,{_containerClasses:function(e,t){w(t)}}),!T.current&&(Object.assign(z.on,B),g=!0,P.current=new e1(z),P.current.loopCreate=function(){},P.current.loopDestroy=function(){},z.loop&&(P.current.loopedSlides=e9(H,z)),P.current.virtual&&P.current.params.virtual.enabled)){P.current.virtual.slides=H;var U={cache:!1,renderExternal:C,renderExternalUpdate:!1};e3(P.current.params.virtual,U),e3(P.current.originalParams.virtual,U)}P.current&&P.current.on("_beforeBreakpoint",W);var G=function(){!g&&B&&P.current&&Object.keys(B).forEach(function(e){P.current.on(e,B[e])})},$=function(){B&&P.current&&Object.keys(B).forEach(function(e){P.current.off(e,B[e])})};return(0,o.useEffect)(function(){return function(){P.current&&P.current.off("_beforeBreakpoint",W)}}),(0,o.useEffect)(function(){!E.current&&P.current&&(P.current.emitSlidesClasses(),E.current=!0)}),te(function(){if(t&&(t.current=T.current),T.current){var e,s,r,i,n,a,l;return s=(e={el:T.current,nextEl:A.current,prevEl:L.current,paginationEl:I.current,scrollbarEl:Z.current,swiper:P.current}).el,r=e.nextEl,i=e.prevEl,n=e.paginationEl,a=e.scrollbarEl,l=e.swiper,e5(z)&&r&&i&&(l.params.navigation.nextEl=r,l.originalParams.navigation.nextEl=r,l.params.navigation.prevEl=i,l.originalParams.navigation.prevEl=i),e7(z)&&n&&(l.params.pagination.el=n,l.originalParams.pagination.el=n),e6(z)&&a&&(l.params.scrollbar.el=a,l.originalParams.scrollbar.el=a),l.init(s),x&&x(P.current),function(){P.current&&!P.current.destroyed&&P.current.destroy(!0,!1)}}},[]),te(function(){G();var e,t,s,r,i,n,a,l,o,d,c,u,h,p,m,f,x,v,g,b,y,w,j=function(e,t,s,r){var i=[];if(!t)return i;var n=function(e){0>i.indexOf(e)&&i.push(e)},a=r.map(function(e){return e.key}),l=s.map(function(e){return e.key});return a.join("")!==l.join("")&&n("children"),r.length!==s.length&&n("children"),e8.filter(function(e){return"_"===e[0]}).map(function(e){return e.replace(/_/,"")}).forEach(function(s){if(s in e&&s in t){if(e2(e[s])&&e2(t[s])){var r=Object.keys(e[s]),i=Object.keys(t[s]);r.length!==i.length?n(s):(r.forEach(function(r){e[s][r]!==t[s][r]&&n(s)}),i.forEach(function(r){e[s][r]!==t[s][r]&&n(s)}))}else e[s]!==t[s]&&n(s)}}),i}(O,M.current,H,F.current);return M.current=O,F.current=H,j.length&&P.current&&!P.current.destroyed&&(a=(e={swiper:P.current,slides:H,passedParams:O,changedParams:j,nextEl:A.current,prevEl:L.current,scrollbarEl:Z.current,paginationEl:I.current}).swiper,l=e.slides,o=e.passedParams,d=e.changedParams,c=e.nextEl,u=e.prevEl,h=e.scrollbarEl,p=e.paginationEl,m=d.filter(function(e){return"children"!==e&&"direction"!==e}),f=a.params,x=a.pagination,v=a.navigation,g=a.scrollbar,b=a.virtual,y=a.thumbs,d.includes("thumbs")&&o.thumbs&&o.thumbs.swiper&&f.thumbs&&!f.thumbs.swiper&&(t=!0),d.includes("controller")&&o.controller&&o.controller.control&&f.controller&&!f.controller.control&&(s=!0),d.includes("pagination")&&o.pagination&&(o.pagination.el||p)&&(f.pagination||!1===f.pagination)&&x&&!x.el&&(r=!0),d.includes("scrollbar")&&o.scrollbar&&(o.scrollbar.el||h)&&(f.scrollbar||!1===f.scrollbar)&&g&&!g.el&&(i=!0),d.includes("navigation")&&o.navigation&&(o.navigation.prevEl||u)&&(o.navigation.nextEl||c)&&(f.navigation||!1===f.navigation)&&v&&!v.prevEl&&!v.nextEl&&(n=!0),w=function(e){a[e]&&(a[e].destroy(),"navigation"===e?(f[e].prevEl=void 0,f[e].nextEl=void 0,a[e].prevEl=void 0,a[e].nextEl=void 0):(f[e].el=void 0,a[e].el=void 0))},m.forEach(function(e){if(e2(f[e])&&e2(o[e]))e3(f[e],o[e]);else{var t=o[e];(!0===t||!1===t)&&("navigation"===e||"pagination"===e||"scrollbar"===e)?!1===t&&w(e):f[e]=o[e]}}),d.includes("children")&&b&&f.virtual.enabled?(b.slides=l,b.update(!0)):d.includes("children")&&a.lazy&&a.params.lazy.enabled&&a.lazy.load(),t&&y.init()&&y.update(!0),s&&(a.controller.control=f.controller.control),r&&(p&&(f.pagination.el=p),x.init(),x.render(),x.update()),i&&(h&&(f.scrollbar.el=h),g.init(),g.updateSize(),g.setTranslate()),n&&(c&&(f.navigation.nextEl=c),u&&(f.navigation.prevEl=u),v.init(),v.update()),d.includes("allowSlideNext")&&(a.allowSlideNext=o.allowSlideNext),d.includes("allowSlidePrev")&&(a.allowSlidePrev=o.allowSlidePrev),d.includes("direction")&&a.changeDirection(o.direction,!1),a.update()),function(){$()}}),te(function(){var e;!(e=P.current)||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())},[k]),o.createElement(void 0===p?"div":p,ts({ref:T,className:e4(""+y+(h?" "+h:""))},R),V["container-start"],e5(z)&&o.createElement(o.Fragment,null,o.createElement("div",{ref:L,className:"swiper-button-prev"}),o.createElement("div",{ref:A,className:"swiper-button-next"})),e6(z)&&o.createElement("div",{ref:Z,className:"swiper-scrollbar"}),e7(z)&&o.createElement("div",{ref:I,className:"swiper-pagination"}),o.createElement(void 0===m?"div":m,{className:"swiper-wrapper"},V["wrapper-start"],z.virtual?function(e,t,s){if(!s)return null;var r,i=e.isHorizontal()?((r={})[e.rtlTranslate?"right":"left"]=s.offset+"px",r):{top:s.offset+"px"};return t.filter(function(e,t){return t>=s.from&&t<=s.to}).map(function(t){return o.cloneElement(t,{swiper:e,style:i})})}(P.current,H,k):!z.loop||P.current&&P.current.destroyed?H.map(function(e){return o.cloneElement(e,{swiper:P.current})}):function(e,t,s){var r=t.map(function(t,s){return o.cloneElement(t,{swiper:e,"data-swiper-slide-index":s})});function i(e,t,r){return o.cloneElement(e,{key:e.key+"-duplicate-"+t+"-"+r,className:(e.props.className||"")+" "+s.slideDuplicateClass})}if(s.loopFillGroupWithBlank){var n=s.slidesPerGroup-r.length%s.slidesPerGroup;if(n!==s.slidesPerGroup)for(var a=0;a<n;a+=1){var l=o.createElement("div",{className:s.slideClass+" "+s.slideBlankClass});r.push(l)}}"auto"!==s.slidesPerView||s.loopedSlides||(s.loopedSlides=r.length);var d=e9(r,s),c=[],u=[];return r.forEach(function(e,t){t<d&&u.push(i(e,t,"prepend")),t<r.length&&t>=r.length-d&&c.push(i(e,t,"append"))}),e&&(e.loopedSlides=d),[].concat(c,r,u)}(P.current,H,z),V["wrapper-end"]),V["container-end"])});tr.displayName="Swiper";var ti=["tag","children","className","swiper","zoom","virtualIndex"];function tn(){return(tn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}var ta=(0,o.forwardRef)(function(e,t){var s,r=void 0===e?{}:e,i=r.tag,n=r.children,a=r.className,l=void 0===a?"":a,d=r.swiper,c=r.zoom,u=r.virtualIndex,h=function(e,t){if(null==e)return{};var s,r,i={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(i[s]=e[s]);return i}(r,ti),p=(0,o.useRef)(null),m=(0,o.useState)("swiper-slide"),f=m[0],x=m[1];function v(e,t,s){t===p.current&&x(s)}te(function(){if(t&&(t.current=p.current),p.current&&d){if(d.destroyed){"swiper-slide"!==f&&x("swiper-slide");return}return d.on("_slideClass",v),function(){d&&d.off("_slideClass",v)}}}),te(function(){d&&p.current&&x(d.getSlideClasses(p.current))},[d]),"function"==typeof n&&(s={isActive:f.indexOf("swiper-slide-active")>=0||f.indexOf("swiper-slide-duplicate-active")>=0,isVisible:f.indexOf("swiper-slide-visible")>=0,isDuplicate:f.indexOf("swiper-slide-duplicate")>=0,isPrev:f.indexOf("swiper-slide-prev")>=0||f.indexOf("swiper-slide-duplicate-prev")>=0,isNext:f.indexOf("swiper-slide-next")>=0||f.indexOf("swiper-slide-duplicate-next")>=0});var g=function(){return"function"==typeof n?n(s):n};return o.createElement(void 0===i?"div":i,tn({ref:p,className:e4(""+f+(l?" "+l:"")),"data-swiper-slide-index":u},h),c?o.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"==typeof c?c:void 0},g()):g())});function tl(){return(tl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}ta.displayName="SwiperSlide",s(36512),s(41282),s(12767);var to={update:function(){var e=this.rtl,t=this.params.pagination;if(t.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var s=this.virtual&&this.params.virtual.enabled?this.virtual.slides.length:this.slides.length,r=this.pagination.$el,i=this.params.loop?Math.ceil((s-2*this.loopedSlides)/this.params.slidesPerGroup):this.snapGrid.length;if(this.params.loop?((n=Math.ceil((this.activeIndex-this.loopedSlides)/this.params.slidesPerGroup))>s-1-2*this.loopedSlides&&(n-=s-2*this.loopedSlides),n>i-1&&(n-=i),n<0&&"bullets"!==this.params.paginationType&&(n=i+n)):n=void 0!==this.snapIndex?this.snapIndex:this.activeIndex||0,"bullets"===t.type&&this.pagination.bullets&&this.pagination.bullets.length>0){var n,a,l,o,d=this.pagination.bullets;if(t.dynamicBullets&&(this.pagination.bulletSize=d.eq(0)[this.isHorizontal()?"outerWidth":"outerHeight"](!0),r.css(this.isHorizontal()?"width":"height",this.pagination.bulletSize*(t.dynamicMainBullets+4)+"px"),t.dynamicMainBullets>1&&void 0!==this.previousIndex&&(this.pagination.dynamicBulletIndex+=n-this.previousIndex,this.pagination.dynamicBulletIndex>t.dynamicMainBullets-1?this.pagination.dynamicBulletIndex=t.dynamicMainBullets-1:this.pagination.dynamicBulletIndex<0&&(this.pagination.dynamicBulletIndex=0)),o=((l=(a=n-this.pagination.dynamicBulletIndex)+(Math.min(d.length,t.dynamicMainBullets)-1))+a)/2),d.removeClass(t.bulletActiveClass+" "+t.bulletActiveClass+"-next "+t.bulletActiveClass+"-next-next "+t.bulletActiveClass+"-prev "+t.bulletActiveClass+"-prev-prev "+t.bulletActiveClass+"-main"),r.length>1)d.each(function(e){var s=eP(e),r=s.index();r===n&&s.addClass(t.bulletActiveClass),t.dynamicBullets&&(r>=a&&r<=l&&s.addClass(t.bulletActiveClass+"-main"),r===a&&s.prev().addClass(t.bulletActiveClass+"-prev").prev().addClass(t.bulletActiveClass+"-prev-prev"),r===l&&s.next().addClass(t.bulletActiveClass+"-next").next().addClass(t.bulletActiveClass+"-next-next"))});else{var c=d.eq(n),u=c.index();if(c.addClass(t.bulletActiveClass),t.dynamicBullets){for(var h=d.eq(a),p=d.eq(l),m=a;m<=l;m+=1)d.eq(m).addClass(t.bulletActiveClass+"-main");if(this.params.loop){if(u>=d.length-t.dynamicMainBullets){for(var f=t.dynamicMainBullets;f>=0;f-=1)d.eq(d.length-f).addClass(t.bulletActiveClass+"-main");d.eq(d.length-t.dynamicMainBullets-1).addClass(t.bulletActiveClass+"-prev")}else h.prev().addClass(t.bulletActiveClass+"-prev").prev().addClass(t.bulletActiveClass+"-prev-prev"),p.next().addClass(t.bulletActiveClass+"-next").next().addClass(t.bulletActiveClass+"-next-next")}else h.prev().addClass(t.bulletActiveClass+"-prev").prev().addClass(t.bulletActiveClass+"-prev-prev"),p.next().addClass(t.bulletActiveClass+"-next").next().addClass(t.bulletActiveClass+"-next-next")}}if(t.dynamicBullets){var x=Math.min(d.length,t.dynamicMainBullets+4),v=(this.pagination.bulletSize*x-this.pagination.bulletSize)/2-o*this.pagination.bulletSize;d.css(this.isHorizontal()?e?"right":"left":"top",v+"px")}}if("fraction"===t.type&&(r.find(eO(t.currentClass)).text(t.formatFractionCurrent(n+1)),r.find(eO(t.totalClass)).text(t.formatFractionTotal(i))),"progressbar"===t.type){g=t.progressbarOpposite?this.isHorizontal()?"vertical":"horizontal":this.isHorizontal()?"horizontal":"vertical";var g,b=(n+1)/i,y=1,w=1;"horizontal"===g?y=b:w=b,r.find(eO(t.progressbarFillClass)).transform("translate3d(0,0,0) scaleX("+y+") scaleY("+w+")").transition(this.params.speed)}"custom"===t.type&&t.renderCustom?(r.html(t.renderCustom(this,n+1,i)),this.emit("paginationRender",r[0])):this.emit("paginationUpdate",r[0]),this.params.watchOverflow&&this.enabled&&r[this.isLocked?"addClass":"removeClass"](t.lockClass)}},render:function(){var e=this.params.pagination;if(e.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var t=this.virtual&&this.params.virtual.enabled?this.virtual.slides.length:this.slides.length,s=this.pagination.$el,r="";if("bullets"===e.type){var i=this.params.loop?Math.ceil((t-2*this.loopedSlides)/this.params.slidesPerGroup):this.snapGrid.length;this.params.freeMode&&!this.params.loop&&i>t&&(i=t);for(var n=0;n<i;n+=1)e.renderBullet?r+=e.renderBullet.call(this,n,e.bulletClass):r+="<"+e.bulletElement+' class="'+e.bulletClass+'"></'+e.bulletElement+">";s.html(r),this.pagination.bullets=s.find(eO(e.bulletClass))}"fraction"===e.type&&(r=e.renderFraction?e.renderFraction.call(this,e.currentClass,e.totalClass):'<span class="'+e.currentClass+'"></span> / <span class="'+e.totalClass+'"></span>',s.html(r)),"progressbar"===e.type&&(r=e.renderProgressbar?e.renderProgressbar.call(this,e.progressbarFillClass):'<span class="'+e.progressbarFillClass+'"></span>',s.html(r)),"custom"!==e.type&&this.emit("paginationRender",this.pagination.$el[0])}},init:function(){var e=this;e.params.pagination=eR(e.$el,e.params.pagination,e.params.createElements,{el:"swiper-pagination"});var t=e.params.pagination;if(t.el){var s=eP(t.el);0===s.length||(e.params.uniqueNavElements&&"string"==typeof t.el&&s.length>1&&(s=e.$el.find(t.el)),"bullets"===t.type&&t.clickable&&s.addClass(t.clickableClass),s.addClass(t.modifierClass+t.type),"bullets"===t.type&&t.dynamicBullets&&(s.addClass(""+t.modifierClass+t.type+"-dynamic"),e.pagination.dynamicBulletIndex=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&s.addClass(t.progressbarOppositeClass),t.clickable&&s.on("click",eO(t.bulletClass),function(t){t.preventDefault();var s=eP(this).index()*e.params.slidesPerGroup;e.params.loop&&(s+=e.loopedSlides),e.slideTo(s)}),eD(e.pagination,{$el:s,el:s[0]}),e.enabled||s.addClass(t.lockClass))}},destroy:function(){var e=this.params.pagination;if(e.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var t=this.pagination.$el;t.removeClass(e.hiddenClass),t.removeClass(e.modifierClass+e.type),this.pagination.bullets&&this.pagination.bullets.removeClass(e.bulletActiveClass),e.clickable&&t.off("click",eO(e.bulletClass))}}};function td(){return(td=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}var tc={run:function(){var e=this,t=e.slides.eq(e.activeIndex),s=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(s=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(e.autoplay.timeout),e.autoplay.timeout=eL(function(){var t;e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),t=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(t=e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(t=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),t=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(t=e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(t=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")),e.params.cssMode&&e.autoplay.running?e.autoplay.run():!1===t&&e.autoplay.run()},s)},start:function(){return void 0===this.autoplay.timeout&&!this.autoplay.running&&(this.autoplay.running=!0,this.emit("autoplayStart"),this.autoplay.run(),!0)},stop:function(){return!!this.autoplay.running&&void 0!==this.autoplay.timeout&&(this.autoplay.timeout&&(clearTimeout(this.autoplay.timeout),this.autoplay.timeout=void 0),this.autoplay.running=!1,this.emit("autoplayStop"),!0)},pause:function(e){var t=this;t.autoplay.running&&(t.autoplay.paused||(t.autoplay.timeout&&clearTimeout(t.autoplay.timeout),t.autoplay.paused=!0,0!==e&&t.params.autoplay.waitForTransition?["transitionend","webkitTransitionEnd"].forEach(function(e){t.$wrapperEl[0].addEventListener(e,t.autoplay.onTransitionEnd)}):(t.autoplay.paused=!1,t.autoplay.run())))},onVisibilityChange:function(){var e=ey();"hidden"===e.visibilityState&&this.autoplay.running&&this.autoplay.pause(),"visible"===e.visibilityState&&this.autoplay.paused&&(this.autoplay.run(),this.autoplay.paused=!1)},onTransitionEnd:function(e){var t=this;t&&!t.destroyed&&t.$wrapperEl&&e.target===t.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(function(e){t.$wrapperEl[0].removeEventListener(e,t.autoplay.onTransitionEnd)}),t.autoplay.paused=!1,t.autoplay.running?t.autoplay.run():t.autoplay.stop())},onMouseEnter:function(){var e=this;e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause(),["transitionend","webkitTransitionEnd"].forEach(function(t){e.$wrapperEl[0].removeEventListener(t,e.autoplay.onTransitionEnd)})},onMouseLeave:function(){this.params.autoplay.disableOnInteraction||(this.autoplay.paused=!1,this.autoplay.run())},attachMouseEvents:function(){this.params.autoplay.pauseOnMouseEnter&&(this.$el.on("mouseenter",this.autoplay.onMouseEnter),this.$el.on("mouseleave",this.autoplay.onMouseLeave))},detachMouseEvents:function(){this.$el.off("mouseenter",this.autoplay.onMouseEnter),this.$el.off("mouseleave",this.autoplay.onMouseLeave)}},tu={lastScrollTime:eI(),lastEventBeforeSnap:void 0,recentWheelEvents:[],event:function(){return ej().navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":!function(){var e=ey(),t="onwheel",s=t in e;if(!s){var r=e.createElement("div");r.setAttribute(t,"return;"),s="function"==typeof r[t]}return!s&&e.implementation&&e.implementation.hasFeature&&!0!==e.implementation.hasFeature("","")&&(s=e.implementation.hasFeature("Events.wheel","3.0")),s}()?"mousewheel":"wheel"},normalize:function(e){var t=0,s=0,r=0,i=0;return"detail"in e&&(s=e.detail),"wheelDelta"in e&&(s=-e.wheelDelta/120),"wheelDeltaY"in e&&(s=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=s,s=0),r=10*t,i=10*s,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(r=e.deltaX),e.shiftKey&&!r&&(r=i,i=0),(r||i)&&e.deltaMode&&(1===e.deltaMode?(r*=40,i*=40):(r*=800,i*=800)),r&&!t&&(t=r<1?-1:1),i&&!s&&(s=i<1?-1:1),{spinX:t,spinY:s,pixelX:r,pixelY:i}},handleMouseEnter:function(){this.enabled&&(this.mouseEntered=!0)},handleMouseLeave:function(){this.enabled&&(this.mouseEntered=!1)},handle:function(e){var t=e,s=this;if(s.enabled){var r=s.params.mousewheel;s.params.cssMode&&t.preventDefault();var i=s.$el;if("container"!==s.params.mousewheel.eventsTarget&&(i=eP(s.params.mousewheel.eventsTarget)),!s.mouseEntered&&!i[0].contains(t.target)&&!r.releaseOnEdges)return!0;t.originalEvent&&(t=t.originalEvent);var n=0,a=s.rtlTranslate?-1:1,l=tu.normalize(t);if(r.forceToAxis){if(s.isHorizontal()){if(!(Math.abs(l.pixelX)>Math.abs(l.pixelY)))return!0;n=-l.pixelX*a}else{if(!(Math.abs(l.pixelY)>Math.abs(l.pixelX)))return!0;n=-l.pixelY}}else n=Math.abs(l.pixelX)>Math.abs(l.pixelY)?-l.pixelX*a:-l.pixelY;if(0===n)return!0;r.invert&&(n=-n);var o=s.getTranslate()+n*r.sensitivity;if(o>=s.minTranslate()&&(o=s.minTranslate()),o<=s.maxTranslate()&&(o=s.maxTranslate()),(s.params.loop||o!==s.minTranslate()&&o!==s.maxTranslate())&&s.params.nested&&t.stopPropagation(),s.params.freeMode){var d={time:eI(),delta:Math.abs(n),direction:Math.sign(n)},c=s.mousewheel.lastEventBeforeSnap,u=c&&d.time<c.time+500&&d.delta<=c.delta&&d.direction===c.direction;if(!u){s.mousewheel.lastEventBeforeSnap=void 0,s.params.loop&&s.loopFix();var h=s.getTranslate()+n*r.sensitivity,p=s.isBeginning,m=s.isEnd;if(h>=s.minTranslate()&&(h=s.minTranslate()),h<=s.maxTranslate()&&(h=s.maxTranslate()),s.setTransition(0),s.setTranslate(h),s.updateProgress(),s.updateActiveIndex(),s.updateSlidesClasses(),(!p&&s.isBeginning||!m&&s.isEnd)&&s.updateSlidesClasses(),s.params.freeModeSticky){clearTimeout(s.mousewheel.timeout),s.mousewheel.timeout=void 0;var f=s.mousewheel.recentWheelEvents;f.length>=15&&f.shift();var x=f.length?f[f.length-1]:void 0,v=f[0];if(f.push(d),x&&(d.delta>x.delta||d.direction!==x.direction))f.splice(0);else if(f.length>=15&&d.time-v.time<500&&v.delta-d.delta>=1&&d.delta<=6){var g=n>0?.8:.2;s.mousewheel.lastEventBeforeSnap=d,f.splice(0),s.mousewheel.timeout=eL(function(){s.slideToClosest(s.params.speed,!0,void 0,g)},0)}s.mousewheel.timeout||(s.mousewheel.timeout=eL(function(){s.mousewheel.lastEventBeforeSnap=d,f.splice(0),s.slideToClosest(s.params.speed,!0,void 0,.5)},500))}if(u||s.emit("scroll",t),s.params.autoplay&&s.params.autoplayDisableOnInteraction&&s.autoplay.stop(),h===s.minTranslate()||h===s.maxTranslate())return!0}}else{var b={time:eI(),delta:Math.abs(n),direction:Math.sign(n),raw:e},y=s.mousewheel.recentWheelEvents;y.length>=2&&y.shift();var w=y.length?y[y.length-1]:void 0;if(y.push(b),w?(b.direction!==w.direction||b.delta>w.delta||b.time>w.time+150)&&s.mousewheel.animateSlider(b):s.mousewheel.animateSlider(b),s.mousewheel.releaseScroll(b))return!0}return t.preventDefault?t.preventDefault():t.returnValue=!1,!1}},animateSlider:function(e){var t=ej();return!(this.params.mousewheel.thresholdDelta&&e.delta<this.params.mousewheel.thresholdDelta||this.params.mousewheel.thresholdTime&&eI()-this.mousewheel.lastScrollTime<this.params.mousewheel.thresholdTime)&&(!!(e.delta>=6&&eI()-this.mousewheel.lastScrollTime<60)||(e.direction<0?this.isEnd&&!this.params.loop||this.animating||(this.slideNext(),this.emit("scroll",e.raw)):this.isBeginning&&!this.params.loop||this.animating||(this.slidePrev(),this.emit("scroll",e.raw)),this.mousewheel.lastScrollTime=new t.Date().getTime(),!1))},releaseScroll:function(e){var t=this.params.mousewheel;if(e.direction<0){if(this.isEnd&&!this.params.loop&&t.releaseOnEdges)return!0}else if(this.isBeginning&&!this.params.loop&&t.releaseOnEdges)return!0;return!1},enable:function(){var e=tu.event();if(this.params.cssMode)return this.wrapperEl.removeEventListener(e,this.mousewheel.handle),!0;if(!e||this.mousewheel.enabled)return!1;var t=this.$el;return"container"!==this.params.mousewheel.eventsTarget&&(t=eP(this.params.mousewheel.eventsTarget)),t.on("mouseenter",this.mousewheel.handleMouseEnter),t.on("mouseleave",this.mousewheel.handleMouseLeave),t.on(e,this.mousewheel.handle),this.mousewheel.enabled=!0,!0},disable:function(){var e=tu.event();if(this.params.cssMode)return this.wrapperEl.addEventListener(e,this.mousewheel.handle),!0;if(!e||!this.mousewheel.enabled)return!1;var t=this.$el;return"container"!==this.params.mousewheel.eventsTarget&&(t=eP(this.params.mousewheel.eventsTarget)),t.off(e,this.mousewheel.handle),this.mousewheel.enabled=!1,!0}};function th(){return(th=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}var tp={handle:function(e){if(this.enabled){var t=ej(),s=ey(),r=this.rtlTranslate,i=e;i.originalEvent&&(i=i.originalEvent);var n=i.keyCode||i.charCode,a=this.params.keyboard.pageUpDown,l=a&&33===n,o=a&&34===n,d=37===n,c=39===n,u=38===n,h=40===n;if(!this.allowSlideNext&&(this.isHorizontal()&&c||this.isVertical()&&h||o)||!this.allowSlidePrev&&(this.isHorizontal()&&d||this.isVertical()&&u||l))return!1;if(!i.shiftKey&&!i.altKey&&!i.ctrlKey&&!i.metaKey&&(!s.activeElement||!s.activeElement.nodeName||"input"!==s.activeElement.nodeName.toLowerCase()&&"textarea"!==s.activeElement.nodeName.toLowerCase())){if(this.params.keyboard.onlyInViewport&&(l||o||d||c||u||h)){var p=!1;if(this.$el.parents("."+this.params.slideClass).length>0&&0===this.$el.parents("."+this.params.slideActiveClass).length)return;var m=this.$el,f=m[0].clientWidth,x=m[0].clientHeight,v=t.innerWidth,g=t.innerHeight,b=this.$el.offset();r&&(b.left-=this.$el[0].scrollLeft);for(var y=[[b.left,b.top],[b.left+f,b.top],[b.left,b.top+x],[b.left+f,b.top+x]],w=0;w<y.length;w+=1){var j=y[w];if(j[0]>=0&&j[0]<=v&&j[1]>=0&&j[1]<=g){if(0===j[0]&&0===j[1])continue;p=!0}}if(!p)return}this.isHorizontal()?((l||o||d||c)&&(i.preventDefault?i.preventDefault():i.returnValue=!1),((o||c)&&!r||(l||d)&&r)&&this.slideNext(),((l||d)&&!r||(o||c)&&r)&&this.slidePrev()):((l||o||u||h)&&(i.preventDefault?i.preventDefault():i.returnValue=!1),(o||h)&&this.slideNext(),(l||u)&&this.slidePrev()),this.emit("keyPress",n)}}},enable:function(){var e=ey();this.keyboard.enabled||(eP(e).on("keydown",this.keyboard.handle),this.keyboard.enabled=!0)},disable:function(){var e=ey();this.keyboard.enabled&&(eP(e).off("keydown",this.keyboard.handle),this.keyboard.enabled=!1)}};function tm(){return(tm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}var tf={toggleEl:function(e,t){e[t?"addClass":"removeClass"](this.params.navigation.disabledClass),e[0]&&"BUTTON"===e[0].tagName&&(e[0].disabled=t)},update:function(){var e=this.params.navigation,t=this.navigation.toggleEl;if(!this.params.loop){var s=this.navigation,r=s.$nextEl,i=s.$prevEl;i&&i.length>0&&(t(i,!!this.isBeginning),this.params.watchOverflow&&this.enabled&&i[this.isLocked?"addClass":"removeClass"](e.lockClass)),r&&r.length>0&&(t(r,!!this.isEnd),this.params.watchOverflow&&this.enabled&&r[this.isLocked?"addClass":"removeClass"](e.lockClass))}},onPrevClick:function(e){e.preventDefault(),(!this.isBeginning||this.params.loop)&&this.slidePrev()},onNextClick:function(e){e.preventDefault(),(!this.isEnd||this.params.loop)&&this.slideNext()},init:function(){var e,t,s=this.params.navigation;this.params.navigation=eR(this.$el,this.params.navigation,this.params.createElements,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),(s.nextEl||s.prevEl)&&(s.nextEl&&(e=eP(s.nextEl),this.params.uniqueNavElements&&"string"==typeof s.nextEl&&e.length>1&&1===this.$el.find(s.nextEl).length&&(e=this.$el.find(s.nextEl))),s.prevEl&&(t=eP(s.prevEl),this.params.uniqueNavElements&&"string"==typeof s.prevEl&&t.length>1&&1===this.$el.find(s.prevEl).length&&(t=this.$el.find(s.prevEl))),e&&e.length>0&&e.on("click",this.navigation.onNextClick),t&&t.length>0&&t.on("click",this.navigation.onPrevClick),eD(this.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:t,prevEl:t&&t[0]}),!this.enabled&&(e&&e.addClass(s.lockClass),t&&t.addClass(s.lockClass)))},destroy:function(){var e=this.navigation,t=e.$nextEl,s=e.$prevEl;t&&t.length&&(t.off("click",this.navigation.onNextClick),t.removeClass(this.params.navigation.disabledClass)),s&&s.length&&(s.off("click",this.navigation.onPrevClick),s.removeClass(this.params.navigation.disabledClass))}},tx=s(64744),tv=s(41426);let tg=(0,T.Z)("Expand",[["path",{d:"m21 21-6-6m6 6v-4.8m0 4.8h-4.8",key:"1c15vz"}],["path",{d:"M3 16.2V21m0 0h4.8M3 21l6-6",key:"1fsnz2"}],["path",{d:"M21 7.8V3m0 0h-4.8M21 3l-6 6",key:"hawz9i"}],["path",{d:"M3 7.8V3m0 0h4.8M3 3l6 6",key:"u9ee12"}]]);var tb=s(99979),ty=s(11122),tw=s(40598),tj=s(17859),tk=s(29871);e1.use([{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){ez(this,{pagination:tl({dynamicBulletIndex:0},to)})},on:{init:function(e){e.pagination.init(),e.pagination.render(),e.pagination.update()},activeIndexChange:function(e){e.params.loop?e.pagination.update():void 0===e.snapIndex&&e.pagination.update()},snapIndexChange:function(e){e.params.loop||e.pagination.update()},slidesLengthChange:function(e){e.params.loop&&(e.pagination.render(),e.pagination.update())},snapGridLengthChange:function(e){e.params.loop||(e.pagination.render(),e.pagination.update())},destroy:function(e){e.pagination.destroy()},"enable disable":function(e){var t=e.pagination.$el;t&&t[e.enabled?"removeClass":"addClass"](e.params.pagination.lockClass)},click:function(e,t){var s=t.target;if(e.params.pagination.el&&e.params.pagination.hideOnClick&&e.pagination.$el.length>0&&!eP(s).hasClass(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&s===e.navigation.nextEl||e.navigation.prevEl&&s===e.navigation.prevEl))return;!0===e.pagination.$el.hasClass(e.params.pagination.hiddenClass)?e.emit("paginationShow"):e.emit("paginationHide"),e.pagination.$el.toggleClass(e.params.pagination.hiddenClass)}}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}},create:function(){ez(this,{autoplay:td({},tc,{running:!1,paused:!1})})},on:{init:function(e){e.params.autoplay.enabled&&(e.autoplay.start(),ey().addEventListener("visibilitychange",e.autoplay.onVisibilityChange),e.autoplay.attachMouseEvents())},beforeTransitionStart:function(e,t,s){e.autoplay.running&&(s||!e.params.autoplay.disableOnInteraction?e.autoplay.pause(t):e.autoplay.stop())},sliderFirstMove:function(e){e.autoplay.running&&(e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause())},touchEnd:function(e){e.params.cssMode&&e.autoplay.paused&&!e.params.autoplay.disableOnInteraction&&e.autoplay.run()},destroy:function(e){e.autoplay.detachMouseEvents(),e.autoplay.running&&e.autoplay.stop(),ey().removeEventListener("visibilitychange",e.autoplay.onVisibilityChange)}}},{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null}},create:function(){ez(this,{mousewheel:{enabled:!1,lastScrollTime:eI(),lastEventBeforeSnap:void 0,recentWheelEvents:[],enable:tu.enable,disable:tu.disable,handle:tu.handle,handleMouseEnter:tu.handleMouseEnter,handleMouseLeave:tu.handleMouseLeave,animateSlider:tu.animateSlider,releaseScroll:tu.releaseScroll}})},on:{init:function(e){!e.params.mousewheel.enabled&&e.params.cssMode&&e.mousewheel.disable(),e.params.mousewheel.enabled&&e.mousewheel.enable()},destroy:function(e){e.params.cssMode&&e.mousewheel.enable(),e.mousewheel.enabled&&e.mousewheel.disable()}}},{name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}},create:function(){ez(this,{keyboard:th({enabled:!1},tp)})},on:{init:function(e){e.params.keyboard.enabled&&e.keyboard.enable()},destroy:function(e){e.keyboard.enabled&&e.keyboard.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){ez(this,{navigation:tm({},tf)})},on:{init:function(e){e.navigation.init(),e.navigation.update()},toEdge:function(e){e.navigation.update()},fromEdge:function(e){e.navigation.update()},destroy:function(e){e.navigation.destroy()},"enable disable":function(e){var t=e.navigation,s=t.$nextEl,r=t.$prevEl;s&&s[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass),r&&r[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass)},click:function(e,t){var s,r=e.navigation,i=r.$nextEl,n=r.$prevEl,a=t.target;if(e.params.navigation.hideOnClick&&!eP(a).is(n)&&!eP(a).is(i)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===a||e.pagination.el.contains(a)))return;i?s=i.hasClass(e.params.navigation.hiddenClass):n&&(s=n.hasClass(e.params.navigation.hiddenClass)),!0===s?e.emit("navigationShow"):e.emit("navigationHide"),i&&i.toggleClass(e.params.navigation.hiddenClass),n&&n.toggleClass(e.params.navigation.hiddenClass)}}}}]);var tC=e=>{let{sources:t}=e,{isMobile:s,isReady:r}=(0,tk.Z)(),i=(0,o.useRef)(null);return(0,l.jsxs)(tr,{slidesPerView:s&&r?1:3,spaceBetween:12,onSwiper:e=>{i.current=e},autoplay:!0,mousewheel:!0,navigation:{nextEl:"#SvgFeloSearch"},cssMode:!0,keyboard:!0,pagination:{clickable:!0},className:"grid gap-6 !px-14 !pb-8 md:!pb-4",children:[(0,l.jsx)(W.A,{id:"preSvgFeloSearch",className:"prevEl group !h-[40px] bg-gray-100 hover:bg-blue-100 dark:bg-gray-800 dark:hover:bg-blue-950",radius:"full",onClick:e=>{if(i.current){i.current.autoplay.stop();let e=i.current.activeIndex;i.current.slideTo(Math.max(e-1,0))}},isIconOnly:!0,children:(0,l.jsx)(tx.Z,{className:"text-gray-400 group-hover:text-blue-500"})}),(0,l.jsx)(W.A,{id:"SvgFeloSearch",className:"nextEl group !h-[40px] bg-gray-100 hover:bg-blue-100 dark:bg-gray-800 dark:hover:bg-blue-950",radius:"full",onClick:()=>{i.current&&(i.current.autoplay.stop(),i.current.slideNext())},isIconOnly:!0,children:(0,l.jsx)(tv.Z,{className:"text-gray-400 group-hover:text-blue-500"})}),t.map((e,s)=>{let{title:r,url:i,link:n,onClick:a}=e,{other_info:o}=e;o||(o=e);let d=o;return a?(0,l.jsx)(ta,{children:(0,l.jsx)("section",{className:(0,v.cn)("flex justify-center",t.length>2&&"aspect-[4/5]"),children:(0,l.jsxs)("div",{className:(0,v.cn)("flex flex-col","border border-gray-200 dark:border-gray-800 rounded-lg mx-1","transition-all duration-300 hover:border-blue-300 dark:hover:border-blue-800"),children:[(0,l.jsxs)("div",{className:"flex-none flex items-center justify-between p-4",children:[(0,l.jsx)("div",{className:"text-lg font-medium",children:r}),(0,l.jsx)(W.A,{size:"sm",className:"bg-gray-100 dark:bg-gray-900 text-gray-500 dark:text-gray-400",onClick:a,isIconOnly:!0,children:(0,l.jsx)(tg,{size:16})})]}),(0,l.jsx)("div",{className:"flex-1 overflow-hidden flex items-center justify-center px-4 pb-4",children:(0,l.jsx)(u.J,{src:d.imageUrl,alt:r,className:(0,v.cn)("flex-1 object-cover max-h-full max-w-full rounded-lg cursor-pointer dark:brightness-75"),onClick:a})})]})})},s):(0,l.jsx)(ta,{children:(0,l.jsxs)("section",{className:"pb-3",children:[(0,l.jsx)(ty.w,{className:"aspect-[4/5] overflow-hidden",children:(0,l.jsxs)("div",{className:"relative h-full group cursor-pointer",children:[(0,l.jsx)("img",{src:(0,tj.V)(d.imageUrl),alt:e.title,className:"w-full h-full object-cover"}),(0,l.jsx)("div",{className:"absolute inset-0 bg-black opacity-0 group-hover:opacity-40 transition-opacity duration-300 ease-in-out",onClick:()=>{window.open(n||i,"_blank")}})]})}),(0,l.jsxs)("div",{className:"pt-2 pb-4",children:[(0,l.jsx)("h3",{className:"text-sm mb-2",children:r}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-gray-400",children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(tw.h,{className:"w-4 h-4 mr-2",src:d.avatar}),(0,l.jsx)("span",{children:d.nickname})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(tb.Z,{size:14}),(0,l.jsx)("span",{children:isNaN(Number(d.liked_count))?0:d.liked_count})]})]})]})]})},s)})]})},t_=e=>{let{sources:t,isAgentMindmap:s}=e,r=(0,c.useTranslations)(),{isMobile:i}=(0,tk.Z)();return(0,l.jsx)("div",{className:"flex flex-wrap gap-4 py-1 md:py-4 w-full",children:t.map((e,n)=>{let{title:a,other_info:o,imageClassName:d,onClick:c}=e,{imageUrl:h}=o,p=t.length<2&&!i;return h?(0,l.jsxs)("div",{className:(0,v.cn)("flex-1 flex flex-col","border border-gray-200 dark:border-gray-800 rounded-lg","transition-all duration-300 hover:border-blue-300 dark:hover:border-blue-800",s?"mb-0":"mb-8"),children:[(0,l.jsxs)("div",{className:"flex-none flex items-center justify-between p-4",children:[(0,l.jsx)("div",{className:"text-xl font-medium",children:a}),(0,l.jsx)(W.A,{size:"sm",className:"bg-gray-100 dark:bg-gray-900 text-gray-500 dark:text-gray-400",onClick:c,startContent:p?(0,l.jsx)(tg,{size:16}):null,isIconOnly:!p,children:p?r("preview_full_version"):(0,l.jsx)(tg,{size:16})})]}),(0,l.jsx)("div",{className:"flex-1 overflow-hidden flex items-center justify-center px-4 pb-4",children:(0,l.jsx)(u.J,{src:h,alt:a,className:(0,v.cn)("flex-1 object-cover max-w-full rounded-lg cursor-pointer dark:brightness-75",d),onClick:c})})]},h):null})})},tN=s(18881),tS=s(19583),tE=s(35063),tT=s(77998),tP=s(94572),tM=s(39109),tF=s(50802),tA=e=>{let{index:t,thread:s,threadId:r,messageId:i,pptCover:n,sources:a,threadTypeFrom:d,isAgentMindmap:u}=e,h=(0,c.useTranslations)(),{isMobile:p}=(0,tk.Z)(),{setIsRegenerate:m,setIsShowPptModal:f,setBesinessId:x,setUiModalType:v,setBusinessType:g,setPreviewPPTData:b}=(0,tN.Z)(),y=(0,tM.Z)(),{setPptStatus:w,pptStatus:j,pptDetail:k}=(0,tT.Z)(),{mindmapList:C}=(0,_.Z)(),{threadPPTCacheData:N}=(0,tF.Z)(),S=d===O.zA,E=(0,o.useMemo)(()=>{var e,n,l,o,d,c;let u=S?[...a]:[],j=C.find(e=>e.message_id===i),_=(null==j?void 0:null===(l=j.images)||void 0===l?void 0:null===(n=l.covers)||void 0===n?void 0:null===(e=n.find(e=>"svg"===e.type))||void 0===e?void 0:e.path)||"",E=(null==j?void 0:null===(c=j.images)||void 0===c?void 0:null===(d=c.covers)||void 0===d?void 0:null===(o=d.find(e=>"png"===e.type))||void 0===o?void 0:o.path)||"";(_||E)&&u.push({url:"",title:h("mindmap"),snippet:"",imageClassName:"max-h-[200px] md:max-h-[300px]",other_info:{nickname:"",avatar:"",imageUrl:_||E},onClick:()=>{tS.Z.getState().setCurrentData({query:s.query,threadId:r,messageId:i})}});let T=p?k:N,P=(null==T?void 0:T.cover_url)||"";return 0===t&&P&&u.push({url:"",title:h("ppt.title"),snippet:"",imageClassName:"drop-shadow-lg",other_info:{nickname:"",avatar:"",imageUrl:P,type:"PPT"},onClick:()=>{if(p&&(null==k?void 0:k.status)===tP.nV.TIMEOUT){y.default(h("ppt.generate_failure_tip"));return}if(p&&(null==k?void 0:k.status)!==tP.nV.SUCCESS||(null==k?void 0:k.status)===tP.nV.TIMEOUT){y.default(h("ppt.generating_ppt_tip"));return}g(tP.LB.THREAD),w("preview"),v("preview"),b(p?k:N),m(!1),x(r),f(!0)}}),u},[C,n,a,null==N?void 0:N.cover_url,k,p,r,i]);return((0,o.useEffect)(()=>{tE.Z.getState().setMergedSources(E)},[E]),0===E.length)?null:E.length>(p?1:2)?(0,l.jsx)(tC,{sources:E}):(0,l.jsx)(t_,{sources:E,isAgentMindmap:u})},tL=s(40548),tI=s.n(tL),tZ=s(67241),tD=s(13003),tz=e=>{let{sources:t,processValue:s,messageId:r,thread:i}=e,n=(0,c.useTranslations)(),{setScholarReferences:a}=(0,tE.Z)(),[d,u]=(0,o.useState)([]),[h,p]=(0,o.useState)([]);return(0,o.useEffect)(()=>{if(100===s){let e=document.querySelector(".thread-container-".concat(r));if(e){let s=Array.from(new Set(Array.from(e.querySelectorAll("[class^='markdown_']")).flatMap(e=>Array.from(e.querySelectorAll("a")).map(e=>e.textContent)).join(" ").match(/\d+/g)));if(s.sort((e,t)=>Number(e)-Number(t)),u(s),s.length>0){let e=s.filter(e=>t[Number(e)-1]).map(e=>{let s=t[Number(e)-1],{title:r}=s,{other_info:i}=s;i||(i=s);let n=i,a=n.publication_date?n.publication_date.slice(0,10)+".":"";return{number:e,title:r,infoSource:n.source,link:n.source_url,formattedDate:a,source:s}});p(e),a(e)}}}},[r,s]),(0,l.jsx)("section",{children:(0,l.jsxs)("div",{className:"grid gap-4",children:[d.length>0&&(0,l.jsx)("div",{className:"text-xl font-medium text-[#344054] dark:text-[#CECFD2]",children:n("scholar.references")}),h.length>0&&h.map(e=>(0,l.jsx)("section",{children:e.title&&e.link&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(tI(),{href:e.link,target:"_blank",className:"hover:underline hover:text-[#0080FF] text-sm dark:text-[#CECFD2]",children:[(0,l.jsxs)("span",{className:"font-semibold",children:["[",e.number,"]"]})," ",(0,l.jsx)("span",{children:e.title&&e.title.endsWith(".")?e.title+" ":e.title+". "}),(0,l.jsx)("span",{children:e.infoSource&&e.infoSource.endsWith(".")?e.infoSource+" ":e.infoSource+". "}),(0,l.jsx)("span",{children:e.formattedDate})]}),(0,l.jsx)("span",{className:"w-5 h-5 p-0.5 inline-block align-sub  text-[#344054] dark:text-[#CECFD2] hover:text-[#0080FF] dark:hover:text-[#0080FF] hover:bg-[#E7F3FF] dark:hover:bg-[#2E3848] hover:rounded-[4px] transition duration-200",children:(0,l.jsx)(tD.Z,{source:e.source,rid:i.rid,children:(0,l.jsx)(tI(),{href:e.link,target:"_blank",children:(0,l.jsx)(tZ.Zm,{})})})})]})},e.number))]})})},tO=s(34778),tR=s(65819),tB=s(17436),tq=s(46988),tH=s(52502),tV=e=>{let{initialQuery:t,onSave:s,onCancel:r}=e,i=(0,c.useTranslations)(),[n,a]=(0,o.useState)(t),[d,u]=(0,o.useState)(!1),h=(0,o.useRef)(null);(0,o.useEffect)(()=>{let e=setTimeout(()=>{if(h.current){h.current.focus();let e=h.current.value.length;h.current.setSelectionRange(e,e),h.current.scrollIntoView({behavior:"smooth",block:"center"})}},500);return()=>clearTimeout(e)},[]),(0,o.useEffect)(()=>{(0,H.fk)(q.U.THREAD_EDIT,{query:t},!0)},[]);let p=(e,t)=>{let{query:r}=t;13===e.keyCode&&!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey&&n.trim()&&(e.preventDefault(),s(r))};return(0,l.jsx)(tH.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.1,delay:.1},children:(0,l.jsxs)("div",{className:"py-2",children:[(0,l.jsx)(tq.Z,{className:(0,v.cn)("border bg-white dark:border-[#6D7276] dark:bg-[#35363880]","p-3 w-full bg-inherit outline-none resize-none",d?"rounded-xl":"rounded-full"),ref:h,value:n,maxLength:O.N2,placeholder:i("search_placeholder"),spellCheck:!1,onChange:e=>a(e.target.value),onKeyDown:e=>{p(e,{query:n})},onKeyUpCapture:e=>{e.stopPropagation()},onHeightChange:(e,t)=>{setTimeout(()=>{e>50?u(!0):u(!1)},100)}}),(0,l.jsxs)("div",{className:"flex justify-end pt-2 gap-2",children:[(0,l.jsx)(W.A,{size:"sm",radius:"full",variant:"bordered",onPress:r,children:i("cancel")}),(0,l.jsx)(W.A,{size:"sm",color:n.trim()?"primary":"default",radius:"full",isDisabled:!n.trim(),onPress:()=>{s(n)},children:i("send")})]})]})})},tW=s(70017),tU=s(96164),tG=s(58923),t$=s(40736),tY=s(35362),tJ=e=>{let{query:t,canEdit:s,onEditClick:r}=e,i=(0,c.useTranslations)(),{copy:n,copied:a}=(0,tW.V)(),[d,u]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!1),m=(0,o.useRef)(null),[f,x]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let e=()=>{if(m.current){let e=parseFloat(getComputedStyle(m.current).lineHeight);m.current.scrollHeight/e>5?x(!0):x(!1)}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),(0,o.useEffect)(()=>{let e=()=>{m.current&&p(m.current.scrollHeight>205)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t,f]),(0,l.jsx)("div",{className:"w-full relative group",children:(0,l.jsxs)("h1",{className:"flex items-center gap-2 text-2xl font-bold pr-4 dark:text-white",children:[(0,l.jsxs)("div",{className:"overflow-hidden",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("pre",{ref:m,className:(0,v.cn)("whitespace-pre-wrap break-words text-inherit",f&&"text-lg",!d&&"max-h-[196px] overflow-hidden"),children:t}),h&&!d&&(0,l.jsx)("div",{className:"absolute bottom-[0px] left-0 w-full h-[80px] bg-gradient-to-t from-white/60 to-transparent dark:from-black/60 dark:to-transparent pointer-events-none"})]}),h&&(0,l.jsx)("div",{className:"py-3",children:(0,l.jsx)("div",{onClick:()=>u(!d),className:"w-full cursor-pointer text-left text-sm text-[#0080FF] dark:text-[#0694FF] transition-colors flex items-center gap-1",children:i(d?"show_less":"show_more")})})]}),s&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(tU.e,{placement:"bottom",content:i("rewrite_query_desc"),children:(0,l.jsx)(W.A,{size:"sm",isIconOnly:!0,radius:"full","aria-label":"Edit",tabIndex:-1,className:"opacity-0 mr-1 group-hover:opacity-100 transition-opacity duration-300",onPress:r,children:(0,l.jsx)(tG.Z,{size:16})})})}),(0,l.jsx)(tU.e,{placement:"bottom",content:i("copy"),children:(0,l.jsx)(W.A,{size:"sm",isIconOnly:!0,radius:"full","aria-label":"Edit",tabIndex:-1,className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",onPress:()=>{n(t)},children:a?(0,l.jsx)(t$.Z,{size:16,color:"#4ba570"}):(0,l.jsx)(tY.Z,{size:16})})})]})})},tX=function(e){let t=(0,o.useRef)(e);return(0,o.useEffect)(()=>{t.current=e},[e]),t},tK=s(51131),tQ=s(30674);let t0=async(e,t,s,r,i)=>{let n=new TextDecoder,a=await fetch("https://quality.gptbase.ai/api/evaluate/datas",{method:"POST",headers:{"Content-Type":"application/json",Accept:"*./*"},signal:e.signal,body:JSON.stringify({datas:[{question:t,answer_from_robot_source:"https://search.glarity.ai/",keywords:[],answer_from_file_source:[],answer_from_page_source:[],ground_truths:[],contexts:s}],stream:!0,llm_type:"gpt-4-0125-preview",run_type:"ragas",service_type:"local",service_params:{glarity_search_key:"",glarity_search_url:"",search_engine:"",rerank:!0,multi_search:!0,query_rewriter:!0,use_description_for_ref:!0},metric_types:["reference_relevancy"]})}).catch(e=>{null==i||i(e||"Internal Server Error")});if(!a)return;if(!a.body){null==i||i("Internal Server Error");return}if(200!==a.status){if(400===a.status){null==i||i("Sorry, the link you tried to access appears to have an issue.");return}let e=a.body.getReader(),t=(await e.read()).value,s=JSON.parse(n.decode(t,{stream:!0})),r=s.detail?s.detail[0].msg:s.message;null==i||i(r);return}let l=a.body.getReader(),o="";for(;;){let{done:e,value:t}=await l.read();if(e){o.split("\n").forEach(e=>{let t=e.trim();if(t.startsWith("data:"))try{let e=JSON.parse(t.slice(5).trim()).logs.reference_relevancy_logs[0].prompt;r(e)}catch(e){console.warn(e)}});break}o+=n.decode(t,{stream:!0})}},t1=e=>{let{info:t}=e,{isDark:s}=(0,D.Z)(),[r,i]=(0,o.useState)(null),[n,a]=(0,o.useState)(!1),[d,c]=(0,o.useState)(""),u=()=>{if(!t||n)return;a(!0);let e=t.sources.map(e=>({link:e.link,title:e.title,description:e.snippet,meta_description:""}));t0(new AbortController,t.question,e,c,i)};return(0,o.useEffect)(()=>{t&&t.question&&u()},[t]),(0,l.jsxs)("section",{className:"".concat(d&&"mb-10"),children:[n&&!d&&!r&&(0,l.jsx)(tQ.c,{className:"my-10",color:s?"white":"default",labelColor:"foreground"}),!!d&&(0,l.jsx)(tK.j,{className:"my-10"}),(0,l.jsx)("pre",{className:"prose whitespace-pre-wrap break-words contents pb-10",children:d||r})]})};var t2=s(49759),t3=s(56975),t5=s(41031),t7=s(74538);let t6=(0,T.Z)("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);var t4=s(90281),t8=s(56734),t9=e=>{let{className:t}=e,s=(0,tR.ZP)(e=>e.isLogin),r=(0,Y.ZP)(e=>e.subscriptionInfo),i=(0,o.useMemo)(()=>{if(!r)return 0;let{used:{balance:e,total:t}}=r;return"".concat(e," / ").concat(t)},[r]);return s?(0,l.jsx)("span",{className:t,children:i}):null},se=s(39344),st=s(41223),ss=s(16427);let sr=(0,s(75910).Ue)(e=>({videos:[],setVideos:t=>e({videos:t})}));var si=s(73522),sn=s(64657),sa=s(5687),sl=s(55383),so=s(93650),sd=s(49983),sc=s(95611),su=s(1937),sh=e=>{let{isShowNotionList:t,setIsShowNotionList:s,saveToNotionPage:r}=e,i=(0,c.useTranslations)(),{notionDirectories:n,setNotionTemplateId:a}=(0,si.Z)(),[d,u]=(0,o.useState)(""),h=()=>{a(d),s(!1),r({templateId:d}),(0,ss.Ye)({templateId:d})};return(0,l.jsx)(sn.R,{isOpen:t,onClose:()=>{s(!1)},classNames:{body:"pb-6 max-h-[500px] overflow-y-auto",footer:"flex justify-center"},children:(0,l.jsx)(sa.A,{children:()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(sl.k,{className:"flex flex-col gap-1",children:i("notion.select_notion_directory")}),(0,l.jsx)(so.I,{children:(0,l.jsx)("div",{className:"flex flex-col gap-2",children:(0,l.jsx)(sc.X,{value:d,onValueChange:u,children:n.map(e=>(0,l.jsx)(su.J,{value:e.id,description:e.description,children:e.title},e.id))})})}),(0,l.jsx)(sd.R,{children:(0,l.jsx)(W.A,{onPress:h,isDisabled:!d,color:"primary",children:i("notion.save_to_notion")})})]})})})},sp=e=>{let{shortId:t,query:s,answer:r,sources:i,relates:n,thread:a,pptCover:d,images:u}=e,h=(0,c.useTranslations)(),p=(0,w.useRouter)(),{coverUrl:m}=(0,tN.Z)(),f=(0,tM.Z)(),{videos:x}=sr(),{mergedSources:v}=(0,tE.Z)(),{setNotionDirectories:g,isSaveLoading:b,setIsSaveLoading:y}=(0,si.Z)(),[j,k]=(0,o.useState)(!1),{scholarReferences:C}=(0,tE.Z)(),[_,N]=(0,o.useState)(!1),S=(null==d?void 0:d.cover_url)&&(null==d?void 0:d.ppt_url)?d.cover_url:m,E=async e=>{let{templateId:t}=e,{isExist:s,notionDirectories:r}=await (0,st.Do)({templateId:t,setNotionDirectories:g});if(!s){(null==r?void 0:r.length)?k(!0):M();return}await T({templateId:t})},T=async e=>{let{templateId:l}=e;if(y(!0),console.log("\uD83D\uDE80 ~ saveToNotionPage ~ mergedSources:",v),console.log("\uD83D\uDE80 ~ saveToNotionPage ~ videos:",x),console.log("\uD83D\uDE80 ~ saveToNotionPage ~ scholarReferences:",C),console.log("\uD83D\uDE80 ~ saveToNotionPage ~ images:",u),!l){await M();return}let o=await (0,ss.MJ)({shortId:t,databaseId:l,title:s,url:location.href,summary:r,content:r,sources:i,relates:n,thread:a,pptCoverUrl:S,images:u,videos:x,mergedSources:v,scholarReferences:C});console.log("\uD83D\uDE80 ~ handleSaveToNotion ~ postPageResult:",o),(null==o?void 0:o.code)==="OK"?(f.default(h("notion.save_success")),N(!0),setTimeout(()=>{N(!1)},2e3)):f.default(h("notion.save_failed")),y(!1)},P=async()=>{(0,H.fk)(q.U.SAVE_TO_NOTION,{value:"generate"},!0),y(!0);try{let i=await (0,ss.Zl)();if(console.log("\uD83D\uDE80 ~ handleSaveToNotion ~ isAuthorized:",i),null==i?void 0:i.isAuthorized){var e,t,s,r;if(null==i?void 0:i.templateId){await E({templateId:i.templateId});return}let n=await (0,ss.ey)({}),a=(null===(e=n.find(e=>{var t,s,r,i;return(null==e?void 0:e.object)==="database"&&(null==e?void 0:null===(t=e.parent)||void 0===t?void 0:t.type)==="workspace"&&(null==e?void 0:null===(i=e.title)||void 0===i?void 0:null===(r=i.find(e=>(null==e?void 0:e.type)==="text"))||void 0===r?void 0:null===(s=r.text)||void 0===s?void 0:s.content)==="Felo.ai"}))||void 0===e?void 0:e.id)||(null===(t=n.find(e=>{var t,s,r;return(null==e?void 0:e.object)==="database"&&(null==e?void 0:null===(r=e.title)||void 0===r?void 0:null===(s=r.find(e=>(null==e?void 0:e.type)==="text"))||void 0===s?void 0:null===(t=s.text)||void 0===t?void 0:t.content)==="Felo.ai"}))||void 0===t?void 0:t.id);if(!a){let e=(null===(s=n.find(e=>{var t;return(null==e?void 0:e.object)==="page"&&(null==e?void 0:null===(t=e.parent)||void 0===t?void 0:t.type)==="workspace"}))||void 0===s?void 0:s.id)||(null===(r=n.find(e=>(null==e?void 0:e.object)==="page"))||void 0===r?void 0:r.id);e&&(a=await (0,ss.C8)({pageId:e}),y(!0),await (0,tP.gw)(3e3))}if(!a){M();return}await T({templateId:a});return}await M()}catch(e){if((null==e?void 0:e.message)==="403"){M();return}f.default(h("notion.save_failed"))}finally{y(!1)}},M=async()=>{y(!0);try{(0,st.iL)(),await (0,st.N6)();let i=await (0,st.EY)();if(!i){var e,t,s,r;y(!0);let i=await (0,ss.ey)({}),n=(null===(e=i.find(e=>{var t,s,r,i;return(null==e?void 0:e.object)==="database"&&(null==e?void 0:null===(t=e.parent)||void 0===t?void 0:t.type)==="workspace"&&(null==e?void 0:null===(i=e.title)||void 0===i?void 0:null===(r=i.find(e=>(null==e?void 0:e.type)==="text"))||void 0===r?void 0:null===(s=r.text)||void 0===s?void 0:s.content)==="Felo.ai"}))||void 0===e?void 0:e.id)||(null===(t=i.find(e=>{var t,s,r;return(null==e?void 0:e.object)==="database"&&(null==e?void 0:null===(r=e.title)||void 0===r?void 0:null===(s=r.find(e=>(null==e?void 0:e.type)==="text"))||void 0===s?void 0:null===(t=s.text)||void 0===t?void 0:t.content)==="Felo.ai"}))||void 0===t?void 0:t.id);if(!n){let e=(null===(s=i.find(e=>{var t;return(null==e?void 0:e.object)==="page"&&(null==e?void 0:null===(t=e.parent)||void 0===t?void 0:t.type)==="workspace"}))||void 0===s?void 0:s.id)||(null===(r=i.find(e=>(null==e?void 0:e.object)==="page"))||void 0===r?void 0:r.id);e&&(n=await (0,ss.C8)({pageId:e}))}if(!n){M();return}await T({templateId:n});return}y(!0),await (0,tP.gw)(st.xI),await T({templateId:i})}catch(e){if((null==e?void 0:e.message)==="403"){M();return}f.default(h("notion.save_failed"))}finally{y(!1)}};return(0,o.useEffect)(()=>{let e=e=>{console.log("handleRouteChange: ",e),sr.setState({videos:[]}),tE.Z.setState({mergedSources:[],scholarReferences:[]})};return p.events.on("routeChangeStart",e),()=>{p.events.off("routeChangeStart",e)}},[p.events]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(W.A,{size:"sm",radius:"full",className:"bg-transparent hover:bg-[#e9e9e9] dark:hover:bg-neutral-700 text-gray-500 dark:text-gray-400",startContent:b?null:_?(0,l.jsx)(t$.Z,{size:20,color:"#4ba570"}):(0,l.jsx)(se.oDT,{}),onPress:P,isLoading:b,isDisabled:b,children:h("notion.save_to_notion")}),(0,l.jsx)(sh,{isShowNotionList:j,setIsShowNotionList:k,saveToNotionPage:T})]})},sm=s(32700),sf=s(27378),sx=s(31510),sv=s(84563),sg=s(38946),sb=(0,sg.tv)({slots:{base:["relative","inline-flex","shrink-0"],badge:["flex","z-10","flex-wrap","absolute","box-border","rounded-full","whitespace-nowrap","place-content-center","origin-center","items-center","text-inherit","select-none","font-regular","scale-100","opacity-100","subpixel-antialiased","data-[invisible=true]:scale-0","data-[invisible=true]:opacity-0"]},variants:{variant:{solid:{},flat:{},faded:{badge:"border-medium"},shadow:{}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},size:{sm:{badge:"px-1 text-tiny"},md:{badge:"px-1 text-small"},lg:{badge:"px-1 text-small"}},placement:{"top-right":{},"top-left":{},"bottom-right":{},"bottom-left":{}},shape:{circle:{},rectangle:{}},isInvisible:{true:{}},isOneChar:{true:{badge:"px-0"}},isDot:{true:{}},disableAnimation:{true:{badge:"transition-none"},false:{badge:"transition-transform-opacity !ease-soft-spring !duration-300"}},showOutline:{true:{badge:"border-2 border-background"},false:{badge:"border-transparent border-0"}}},defaultVariants:{variant:"solid",color:"default",size:"md",shape:"rectangle",placement:"top-right",showOutline:!0,isInvisible:!1},compoundVariants:[{variant:"solid",color:"default",class:{badge:sv.J.solid.default}},{variant:"solid",color:"primary",class:{badge:sv.J.solid.primary}},{variant:"solid",color:"secondary",class:{badge:sv.J.solid.secondary}},{variant:"solid",color:"success",class:{badge:sv.J.solid.success}},{variant:"solid",color:"warning",class:{badge:sv.J.solid.warning}},{variant:"solid",color:"danger",class:{badge:sv.J.solid.danger}},{variant:"shadow",color:"default",class:{badge:sv.J.shadow.default}},{variant:"shadow",color:"primary",class:{badge:sv.J.shadow.primary}},{variant:"shadow",color:"secondary",class:{badge:sv.J.shadow.secondary}},{variant:"shadow",color:"success",class:{badge:sv.J.shadow.success}},{variant:"shadow",color:"warning",class:{badge:sv.J.shadow.warning}},{variant:"shadow",color:"danger",class:{badge:sv.J.shadow.danger}},{variant:"flat",color:"default",class:{badge:sv.J.flat.default}},{variant:"flat",color:"primary",class:{badge:sv.J.flat.primary}},{variant:"flat",color:"secondary",class:{badge:sv.J.flat.secondary}},{variant:"flat",color:"success",class:{badge:sv.J.flat.success}},{variant:"flat",color:"warning",class:{badge:sv.J.flat.warning}},{variant:"flat",color:"danger",class:{badge:sv.J.flat.danger}},{variant:"faded",color:"default",class:{badge:sv.J.faded.default}},{variant:"faded",color:"primary",class:{badge:sv.J.faded.primary}},{variant:"faded",color:"secondary",class:{badge:sv.J.faded.secondary}},{variant:"faded",color:"success",class:{badge:sv.J.faded.success}},{variant:"faded",color:"warning",class:{badge:sv.J.faded.warning}},{variant:"faded",color:"danger",class:{badge:sv.J.faded.danger}},{isOneChar:!0,size:"sm",class:{badge:"w-4 h-4 min-w-4 min-h-4"}},{isOneChar:!0,size:"md",class:{badge:"w-5 h-5 min-w-5 min-h-5"}},{isOneChar:!0,size:"lg",class:{badge:"w-6 h-6 min-w-6 min-h-6"}},{isDot:!0,size:"sm",class:{badge:"w-3 h-3 min-w-3 min-h-3"}},{isDot:!0,size:"md",class:{badge:"w-3.5 h-3.5 min-w-3.5 min-h-3.5"}},{isDot:!0,size:"lg",class:{badge:"w-4 h-4 min-w-4 min-h-4"}},{placement:"top-right",shape:"rectangle",class:{badge:"top-[5%] right-[5%] translate-x-1/2 -translate-y-1/2"}},{placement:"top-left",shape:"rectangle",class:{badge:"top-[5%] left-[5%] -translate-x-1/2 -translate-y-1/2"}},{placement:"bottom-right",shape:"rectangle",class:{badge:"bottom-[5%] right-[5%] translate-x-1/2 translate-y-1/2"}},{placement:"bottom-left",shape:"rectangle",class:{badge:"bottom-[5%] left-[5%] -translate-x-1/2 translate-y-1/2"}},{placement:"top-right",shape:"circle",class:{badge:"top-[10%] right-[10%] translate-x-1/2 -translate-y-1/2"}},{placement:"top-left",shape:"circle",class:{badge:"top-[10%] left-[10%] -translate-x-1/2 -translate-y-1/2"}},{placement:"bottom-right",shape:"circle",class:{badge:"bottom-[10%] right-[10%] translate-x-1/2 translate-y-1/2"}},{placement:"bottom-left",shape:"circle",class:{badge:"bottom-[10%] left-[10%] -translate-x-1/2 translate-y-1/2"}}]}),sy=s(15832),sw=s(82664),sj=s(85151),sk=s(65052),sC=(0,sw.Gp)((e,t)=>{let{Component:s,children:r,content:i,slots:n,classNames:a,getBadgeProps:d}=function(e){var t,s;let r=(0,sy.w)(),i=null!=(s=null!=(t=null==e?void 0:e.disableAnimation)?t:null==r?void 0:r.disableAnimation)&&s,[n,a]=(0,sw.oe)(e,sb.variantKeys),{as:l,children:d,className:c,content:u,classNames:h,...p}=n,m=(0,o.useMemo)(()=>{var t;return(null==(t=String(u))?void 0:t.length)===1||(null==e?void 0:e.isOneChar)},[u,null==e?void 0:e.isOneChar]),f=(0,o.useMemo)(()=>{var e;return(null==(e=String(u))?void 0:e.length)===0},[u]),x=(0,sj.W)(null==h?void 0:h.badge,c),v=(0,o.useMemo)(()=>sb({...a,showOutline:(null==e?void 0:e.disableOutline)?!(null==e?void 0:e.disableOutline):null==e?void 0:e.showOutline,isOneChar:m,isDot:f}),[(0,sk.Xx)(a),m,f]);return{Component:l||"span",children:d,content:u,slots:v,classNames:h,disableAnimation:i,isInvisible:null==e?void 0:e.isInvisible,getBadgeProps:()=>({className:v.badge({class:x}),"data-invisible":e.isInvisible,...p})}}({...e});return(0,l.jsxs)("div",{className:n.base({class:null==a?void 0:a.base}),children:[r,(0,l.jsx)(s,{ref:t,...d(),children:i})]})});sC.displayName="NextUI.Badge";var s_=s(93071),sN=s(25568),sS=e=>{let{thread:t}=e,s=(0,c.useTranslations)(),{isMyThread:r}=(0,_.Z)();return(null==t?void 0:t.mode)==="discovery"&&r?(0,l.jsx)(sC,{content:"New",size:"sm",className:"bg-[#F5CCB3] text-[#D14625] text-xs",children:(0,l.jsx)(W.A,{as:s_.O,size:"sm",radius:"full",className:"bg-transparent hover:bg-[#e9e9e9] dark:hover:bg-neutral-700 text-gray-500 dark:text-gray-400",startContent:(0,l.jsx)(sN.fb,{}),onPress:()=>{(0,H.fk)(q.U.CREATE_WEBPAGE,{value:"create_webpage"},!0)},href:"/page/".concat(t.id),target:"_blank",children:s("generateWebpage.generate_webpage_btn")})}):null};let sE=(0,T.Z)("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]),sT=e=>{let{rid:t,type:s}=e,r=(0,ei.a1)();return fetch("".concat(er.XJ,"/query/").concat(t,"/reaction"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(r)},body:JSON.stringify({search_uuid:t,reaction_type:s})})},sP=e=>{let t=(0,ei.a1)();return fetch("".concat(er.XJ,"/query/").concat(e,"/reaction"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"".concat(t)}}).then(async e=>200!==e.status?[]:await e.json()).catch(()=>null)},sM=e=>{let t=(0,ei.a1)();return fetch("".concat(er.XJ,"/query/").concat(e,"/reaction"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"".concat(t)}})};var sF=s(38188),sA=e=>{let{rid:t,onFirstClick:s}=e,r=(0,c.useTranslations)(),[i,n]=(0,o.useState)("none"),a=e=>{if(e===i||"none"===e){n("none"),sM(t);return}n(e),sT({rid:t,type:e})},d=()=>{sP(t).then(e=>{e&&e.reaction_type&&n(e.reaction_type)})};return(0,o.useEffect)(()=>{t&&d()},[]),(0,l.jsxs)("div",{className:(0,v.cn)("flex items-center gap-2 p-0 bg-transparent","text-[#1D3C6D] hover:!text-[#1D3C6D] dark:text-[#EDF3FC] hover:dark:!text-[#EDF3FC]"),onClick:()=>{a("dislike"),"true"===localStorage.getItem(sF.J.FEEDBACK_FIRST_CLICK)||(0,X.N0)()||s()},children:[(0,l.jsx)(sE,{size:16,className:(0,v.cn)("dislike"===i&&"text-red-500"),fill:"dislike"===i?"currentColor":"none"}),r("dislike"===i?"feedback_clicked":"feedback_btn")]})},sL=s(9455);let sI=(0,T.Z)("ListTree",[["path",{d:"M21 12h-8",key:"1bmf0i"}],["path",{d:"M21 6H8",key:"1pqkrb"}],["path",{d:"M21 18h-8",key:"1tm79t"}],["path",{d:"M3 6v4c0 1.1.9 2 2 2h3",key:"1ywdgy"}],["path",{d:"M3 10v6c0 1.1.9 2 2 2h3",key:"2wc746"}]]);var sZ=s(84997),sD=s(7642),sz=s(57862),sO=s(16023);let sR=e=>{let{isOpen:t,onClose:s}=e,r=(0,c.useTranslations)(),i=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(t){var e;null===(e=i.current)||void 0===e||e.focus()}},[t]),(0,o.useEffect)(()=>{!localStorage.getItem(sF.J.FEEDBACK_FIRST_CLICK)&&t&&localStorage.setItem(sF.J.FEEDBACK_FIRST_CLICK,"true")},[t]),(0,l.jsx)(sn.R,{isOpen:t,onClose:s,hideCloseButton:!0,children:(0,l.jsxs)(sa.A,{children:[(0,l.jsx)(so.I,{className:"mt-6",children:(0,l.jsxs)("div",{className:"flex gap-2 my-4",children:[(0,l.jsx)(tZ.vZ,{className:"h-6 w-6"}),(0,l.jsx)("p",{children:r("feedback_join_discord")})]})}),(0,l.jsxs)(sd.R,{children:[(0,l.jsx)(W.A,{onPress:s,children:r("cancel")}),(0,l.jsx)(W.A,{autoFocus:!0,color:"primary",onPress:()=>{s(),window.open(sO.es,"_blank")},ref:i,children:r("confirm")})]})]})})};var sB=s(77844),sq=s(19527),sH=s(99421),sV=e=>{let{shortId:t,rid:s,answer:r,sources:i,canEdit:n,isFirst:a,isLast:o,onDelete:d,relates:u,isShowRelates:h,setIsShowRelates:p}=e,m=(0,c.useTranslations)(),f=(0,tW.V)(),x=(0,tW.V)(),g=(0,tW.V)(),b=(0,tR.gQ)(),{isOpen:y,onOpen:w,onClose:j}=(0,sL.q)(),k=async()=>{g.copy(await (0,sH.h_)(r))};return(0,l.jsxs)(l.Fragment,{children:[!o&&u&&u.length>0&&(0,l.jsx)(tU.e,{delay:0,content:m(h?"hide_related":"show_related"),children:(0,l.jsx)(W.A,{size:"sm",radius:"full",className:"bg-transparent hover:bg-[#e9e9e9] dark:hover:bg-neutral-700 text-gray-500 dark:text-gray-400",onPress:()=>p(!h),isIconOnly:!0,children:(0,l.jsx)(sI,{size:16,className:(0,v.cn)(h&&"text-theme-blue-500 cursor-pointer")})})}),(0,l.jsxs)(t2.F,{placement:"top",offset:-2,children:[(0,l.jsx)(tU.e,{delay:0,content:m("copy_answer"),children:(0,l.jsx)("div",{className:"max-w-fit",children:(0,l.jsx)(t3.S,{children:(0,l.jsx)(W.A,{size:"sm",radius:"full",className:"bg-transparent hover:bg-[#e9e9e9] dark:hover:bg-neutral-700 text-gray-500 dark:text-gray-400",isIconOnly:!0,children:g.copied||x.copied?(0,l.jsx)(t$.Z,{size:20,color:"#4ba570"}):(0,l.jsx)(tY.Z,{size:14})})})})}),(0,l.jsxs)(t5.a,{"aria-label":"Topic actions",variant:"flat",children:[(0,l.jsx)(t7.W,{className:"text-[#1D3C6D] hover:!bg-blue-100 hover:!text-[#1D3C6D] dark:text-[#EDF3FC] hover:dark:!bg-[#2E3643] hover:dark:!text-[#EDF3FC]",onPress:k,startContent:(0,l.jsx)(tZ.eC,{className:"h-5 w-5"}),children:m("textFormat")},"copyText"),(0,l.jsx)(t7.W,{className:"text-[#1D3C6D] hover:!bg-blue-100 hover:!text-[#1D3C6D] dark:text-[#EDF3FC] hover:dark:!bg-[#2E3643] hover:dark:!text-[#EDF3FC]",onPress:()=>{let e=r.replace(/^\n\n/,"");x.copy(e+"\n".concat(i.map((e,t)=>"[".concat(t+1,"] ").concat(e.link)).join("\n")))},startContent:(0,l.jsx)(tZ.WO,{className:"h-5 w-5"}),children:m("MarkdownFormat")},"copyMarkdown")]})]}),(0,l.jsx)(tU.e,{delay:0,content:m("share_link"),children:(0,l.jsx)(W.A,{size:"sm",radius:"full",className:"bg-transparent hover:bg-[#e9e9e9] dark:hover:bg-neutral-700 text-gray-500 dark:text-gray-400",onPress:()=>{let e=sB.Z.getState().current,s=new URL("".concat(location.origin,"/search/").concat(t));e&&s.searchParams.append("invite",e),f.copy(s.toString()),b?sq.Z.getState().setShareStatus("PARTIAL_PUBLIC"):sq.Z.getState().setShareStatus("PUBLIC"),(0,H.fk)(q.U.THREAD_QUERY_SHARE,{id:t},!0)},isIconOnly:!0,children:f.copied?(0,l.jsx)(t$.Z,{size:16,color:"#4ba570"}):(0,l.jsx)(sZ.Z,{size:14})})}),(0,l.jsxs)(t2.F,{children:[(0,l.jsx)(t3.S,{children:(0,l.jsx)(W.A,{size:"sm",radius:"full",className:"bg-transparent hover:bg-[#e9e9e9] dark:hover:bg-neutral-700 text-gray-500 dark:text-gray-400",isIconOnly:!0,children:(0,l.jsx)(sD.Z,{size:20})})}),(0,l.jsxs)(t5.a,{"aria-label":"More actions",variant:"flat",children:[(0,l.jsx)(t7.W,{children:(0,l.jsx)(sA,{rid:s,onFirstClick:w})},"dislike"),(0,l.jsx)(t7.W,{className:(0,v.cn)("text-[#a52e2e] hover:!bg-red-100 hover:!text-[#6d1d1d] dark:text-[#ee5757] hover:dark:!bg-[#432e2e] hover:dark:!text-[#ee5757]",!(!a&&n)&&"hidden"),onPress:d,startContent:(0,l.jsx)(sz.Z,{size:16}),children:m("delete")},"delete")]})]}),(0,l.jsx)(sR,{isOpen:y,onClose:j})]})},sW=e=>{var t;let{index:s,thread:r,messageId:i,shortId:n,rid:a,query:d,answer:u,sources:h,canEdit:p,onEditQueryClick:m,onReanswer:f,isFirst:x,isLast:g,onDelete:b,hideRewriteModel:y,hideChat:j,relates:k,pptCover:C,images:N,id:S,mode:E,category:T,isShowRelates:P,setIsShowRelates:M}=e,A=(0,c.useTranslations)(),{features:L}=(0,sf.Z)(),I=(0,w.useRouter)(),Z=(0,F.Z)(e=>e.loading),{threads:D}=(0,_.Z)(),{proUsageQuota:z}=(0,sm.I)(),{selectModelValueList:R}=(0,sx.Z)(),[B,q]=(0,o.useState)([]),V=(0,Y.ZP)(e=>e.isPro),{isTopicReply:U,allModelList:G}=(0,F.Z)(),[$,J]=(0,o.useState)(void 0),X=(0,o.useMemo)(()=>{var e,t,s,i;return(null===(e=(null==r?void 0:null===(i=r.template)||void 0===i?void 0:null===(s=i.sub_topics)||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.tools)||[])||void 0===e?void 0:e.findIndex(e=>["mindmap","ppt_render"].includes(null==e?void 0:e.name)))!==-1},[null==r?void 0:null===(t=r.template)||void 0===t?void 0:t.sub_topics]),K=()=>{let e=tP.OA.includes(T)?null==h?void 0:h.map(e=>(null==e?void 0:e.snippet)||"").join(""):"";console.log("ActionButtons",e,T,d);let t=e||d;tS.Z.getState().setCurrentData({query:t,threadId:n,messageId:i}),n&&(0,H.zS)(d,n)};(0,o.useEffect)(()=>{I.query.showMindmap===i&&K()},[I.isReady]),(0,o.useEffect)(()=>{if(R&&0!==R.length){let e=R.map(e=>G.find(t=>t.value===e)).filter(e=>void 0!==e);!V&&e.some(e=>!e.is_default)&&(e=G.filter(e=>e.is_default)),q(e&&e.length>0?e:[])}else q(G.filter(e=>e.is_default))},[R]);let Q=e=>{f(e)};return(0,l.jsxs)(l.Fragment,{children:[er.r8&&(0,l.jsx)(t1,{info:$}),(0,l.jsxs)("section",{className:"flex flex-wrap justify-between mt-3 gap-5",children:[(0,l.jsxs)("section",{className:"flex flex-wrap",children:[X?(0,l.jsx)(W.A,{size:"sm",radius:"full",className:(0,v.cn)(!(p&&!Z)&&"hidden","bg-transparent hover:bg-[#e9e9e9] dark:hover:bg-neutral-700 text-gray-500 dark:text-gray-400"),startContent:(0,l.jsx)(t6,{size:16}),onPress:()=>f("pro"),children:A("rewrite")}):(0,l.jsxs)(t2.F,{children:[(0,l.jsx)(t3.S,{className:(0,v.cn)(!(p&&!Z)&&"hidden"),children:(0,l.jsx)(W.A,{size:"sm",radius:"full",className:"bg-transparent hover:bg-[#e9e9e9] dark:hover:bg-neutral-700 text-gray-500 dark:text-gray-400",startContent:(0,l.jsx)(t6,{size:16}),children:A("rewrite")})}),(0,l.jsxs)(t5.a,{"aria-label":"More actions",variant:"flat",children:[(0,l.jsx)(t7.W,{onPress:()=>m(!0),description:A("rewrite_query_desc"),children:A("edit_query")},"edit"),E!==O.iV&&(0,l.jsx)(t7.W,{onPress:()=>f("pro"),endContent:(0,l.jsx)(t9,{className:"rounded bg-theme-bg-300 dark:bg-theme-bg-dark-300 px-2 py-0.5 text-xs text-nowrap"}),description:A("pro_search_description"),children:"Pro Search"},"pro"),D[s].category===O.gl&&E!==O.iV&&!U&&(0,l.jsx)(t7.W,{isReadOnly:!z,className:(0,v.cn)(!z&&"cursor-default opacity-50 pointer-events-none"),onPress:()=>f("discovery"),endContent:z!==1/0&&(0,l.jsx)(t9,{className:"rounded bg-theme-bg-300 dark:bg-theme-bg-dark-300 px-2 py-0.5 text-xs text-nowrap"}),description:A("deep_research_desc_two"),children:A("deep_research")},"discovery"),E!==O.iV&&B.map(e=>(0,l.jsx)(t7.W,{className:(0,v.cn)(y&&"hidden",!er.r8&&e.is_dev&&"hidden",!L.includes("subscriptionPlan")&&"hidden"),endContent:e.is_pro&&z!==1/0&&(0,l.jsx)(t9,{className:"rounded bg-theme-bg-300 dark:bg-theme-bg-dark-300 px-2 py-0.5 text-xs text-nowrap"}),onPress:()=>Q(e.value),description:"google"===e.provider?A("gemini-pro_desc"):A(e.value.split(".").join("")+"_desc"),children:e.label},e.value)),(0,l.jsx)(t7.W,{className:(0,v.cn)(j&&"hidden"),onPress:()=>f("chat"),description:A("rewrite_chat_desc"),children:A("rewrite_chat")},"chat"),E!==O.iV&&(0,l.jsx)(t7.W,{className:(0,v.cn)(j&&"hidden","!bg-transparent mt-2 border-t rounded-none border-gray-200 dark:border-theme-border-dark-300"),onPress:()=>I.push("/settings"),children:(0,l.jsx)("div",{className:"text-[#1790ff]",children:A("set_advanced_model")})},"set_advanced_model")]})]}),(0,l.jsx)(W.A,{id:"mindmap",size:"sm",radius:"full",className:(0,v.cn)("bg-transparent hover:bg-[#e9e9e9] dark:hover:bg-neutral-700 text-gray-500 dark:text-gray-400",!p&&"hidden"),startContent:(0,l.jsx)(t4.Z,{size:14}),onPress:K,children:A("mindmap")}),(0,l.jsx)(sS,{thread:r}),(0,l.jsx)(sp,{shortId:n||"",query:d,answer:u,sources:h,relates:k,thread:r,pptCover:C,images:N}),er.r8&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(W.A,{size:"sm",radius:"full",className:"bg-transparent hover:bg-[#e9e9e9] dark:hover:bg-neutral-700 text-gray-500 dark:text-gray-400",startContent:(0,l.jsx)(t8.Z,{size:14}),onPress:()=>{J({question:d,sources:h})},children:"Debug"})})]}),(0,l.jsx)("section",{className:"flex",children:(0,l.jsx)(sV,{shortId:n,rid:a,answer:u,sources:h,canEdit:p,isFirst:x,isLast:g,relates:k,onDelete:b,isShowRelates:P,setIsShowRelates:M})})]})]})},sU=s(38363),sG=s(29864),s$=s(97682),sY=s(2605),sJ=s(27585),sX=s(13263),sK=s(90488),sQ=s(48958),s0=s(56650),s1=s(35279),s2=s(72070),s3=s.n(s2),s5=s(72881);let s7=e=>{let{source:t,index:s}=e,{isOpen:r,onOpen:i,onClose:n,onOpenChange:a}=(0,sL.q)(),{snippet:o,url:d,link:u,title:h}=t,p=(0,sJ.lx)(d||u||"").hostname,m=(0,c.useTranslations)(),f=()=>{window.open(t.link,"_blank","noopener,noreferrer")},{other_info:x}=t;x||(x=t);let v=x,g=v.file_type||"",b=(0,s5.b)(g),{isDark:y}=(0,D.Z)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"relative rounded-lg flex flex-col gap-2",children:(0,l.jsx)("div",{className:"flex gap-3 w-full cursor-pointer rounded-lg pb-8",onClick:()=>i(),children:(0,l.jsxs)("section",{children:[(0,l.jsxs)("section",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"flex-none inline-block w-[16px] h-[16px]",children:(0,l.jsx)(sK.Z,{src:"https://www.google.com/s2/favicons?domain=".concat(p,"&sz=",16)})}),(0,l.jsx)("p",{className:"text-xs line-clamp-1 leading-normal break-all text-[#7A90B1] dark:text-[#94A2B8]",children:(0,sJ.CN)({url:u||""})})]}),(0,l.jsx)("section",{className:"mt-3 leading-4",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("span",{className:"mr-2 inline-flex items-center min-w-6",children:g&&(0,l.jsx)(s3(),{src:b,alt:g,width:24,height:24})}),(0,l.jsx)("span",{className:"text-sm font-semibold text-[#0A1C38] dark:text-white overflow-hidden",children:(0,l.jsx)("span",{className:"inline-block max-w-full overflow-hidden text-ellipsis whitespace-normal break-words",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:h})})]})}),(0,l.jsxs)("section",{className:"mt-2 text-xs leading-normal text-[#4C6DA1] dark:text-[#CBD4E1] flex relative",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"flex-1 line-clamp-2 ".concat(v.thumbnail?"max-h-9":""),children:o}),(0,l.jsx)("p",{className:"mt-2 dark:text-[#94A2B8] ".concat(v.thumbnail?"min-h-4":"")})]}),v.thumbnail&&(0,l.jsx)("div",{className:"flex-shrink-0 flex items-end ml-2 rounded-lg overflow-hidden w-16 h-16  border-1 border-[#EAEFF4] dark:border-[#242A38]",children:(0,l.jsx)(s3(),{width:64,height:64,src:v.thumbnail,alt:t.title})}),v.thumbnail&&(0,l.jsx)("div",{className:"absolute top-0 right-0  ".concat(y?"bg-[#262626]":"bg-white"),children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",children:(0,l.jsx)("path",{d:"M0.200012 0L13 12.8H3.40002C1.6327 12.8 0.200012 11.3673 0.200012 9.6V0Z",fill:y?"#242A38":"#EAEFF4"})})})]})]})})},s),(0,l.jsx)(sn.R,{backdrop:"blur",size:"5xl",isOpen:r,onOpenChange:a,hideCloseButton:!0,children:(0,l.jsx)(sa.A,{children:e=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(sl.k,{className:"flex flex-col gap-1",children:(0,l.jsxs)("div",{className:"flex justify-between items-center bg-gray-10 min-h-[40px] ",children:[(0,l.jsx)("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:(0,l.jsx)(sQ.Y,{value:t.link,radius:"full",readOnly:!0,endContent:(0,l.jsx)("button",{className:"focus:outline-none",type:"button",onClick:f,"aria-label":"toggle password visibility",children:(0,l.jsx)(s0.Z,{className:"w-4 h-4 text-[#7A90B1]"})})})}),(0,l.jsx)("button",{className:"focus:outline-none w-5 h-5 flex items-center justify-center rounded-full bg-[#F6465D] ml-2",onClick:e,children:(0,l.jsx)(U.Z,{size:16,className:"text-white"})})]})}),(0,l.jsx)(so.I,{className:"flex flex-col flex-grow overflow-auto",children:(0,l.jsx)(s1.Z,{fileUrl:t.link||"",fileType:v.file_type||"",fileName:t.title})}),(0,l.jsx)(sd.R,{children:(0,l.jsx)("section",{className:"flex w-full items-center justify-center pb-8",children:(0,l.jsx)("section",{className:"flex gap-2",children:(0,l.jsx)("div",{className:"flex justify-center items-center  bg-gray-10",children:(0,l.jsx)("a",{href:t.link||"#",target:"_self",download:!0,rel:"noopener noreferrer",className:"text-blue-500 underline",children:(0,l.jsx)(W.A,{color:"primary",children:m("download.label")})})})})})})]})})})]})},s6=e=>{let{sources:t,isDone:s,query:r}=e,i=(0,c.useTranslations)(),[n,a]=(0,o.useState)(!0),d=(0,o.useMemo)(()=>t.length<=3?t:t.slice(0,3),[t]),u=(0,o.useMemo)(()=>t.length<=3?[]:t.slice(3,t.length).map(e=>{let{url:t,link:s}=e,r=(0,sJ.lx)(t||s||"").hostname;return"https://www.google.com/s2/favicons?domain=".concat(r,"&sz=",16)}),[t]);return(0,l.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[t.length>0?(n?d:t).map((e,t)=>(0,l.jsx)(tH.E.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{type:"spring",bounce:.4,duration:.8,delay:.4*(n?t:t-3)},children:(0,l.jsx)(s7,{index:t,source:e})},t)):s?(0,l.jsx)("section",{className:"text-center my-10",children:i("search_result_notification",{query:r})}):(0,l.jsx)("section",{className:"flex flex-col gap-5",children:[,,,].fill("").map((e,t)=>(0,l.jsx)(m.O,{className:"max-w-sm h-28 bg-zinc-200 dark:bg-stone-900/30 mx-3"},t))}),n&&(0,l.jsxs)("section",{children:[(0,l.jsx)("section",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-gray-50 to-white"}),(0,l.jsxs)("section",{className:"relative z-[1] flex justify-end items-center pb-3",children:[(0,l.jsx)("section",{className:"flex flex-wrap gap-2",children:Array.from(new Set(u)).slice(0,3).map((e,t)=>(0,l.jsx)(sK.Z,{src:e},t))}),!!u.length&&(0,l.jsx)("button",{className:(0,v.cn)("flex-none px-3 py-1.5 rounded-lg","bg-transparent hover:bg-default-100","transition-colors duration-150"),"aria-label":"Collapse",onClick:()=>a(!1),children:(0,l.jsxs)("section",{className:"flex items-center gap-1.5 text-sm text-gray-500 dark:text-gray-400",children:[(0,l.jsx)("span",{children:i("view_more_num",{number:u.length})}),(0,l.jsx)(tv.Z,{size:18})]})})]})]})]})};var s4=s(87748);let s8=e=>{let{id:t,query:s}=e,r=(0,ei.a1)();return fetch("".concat(er.XJ,"/query/images"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(r)},body:JSON.stringify({search_uuid:t,query:s})}).then(async e=>200!==e.status?[]:await e.json()).catch(()=>[])};var s9=s(60635),re=e=>{let{id:t,query:s,imageList:r,isAllDisabled:i}=e,n=(0,c.useTranslations)(),{isDark:a}=(0,D.Z)(),[d,h]=(0,o.useState)(!0),[p,m]=(0,o.useState)([]),{isOpen:f,onOpen:x,onClose:g}=(0,sL.q)(),[b,y]=(0,o.useState)([]),[w,j]=(0,o.useState)([]),[k,C]=(0,o.useState)(0),_=(0,o.useRef)(""),N=b.length>=p.length&&p.length>0;(0,o.useEffect)(()=>{!t||r&&r.length||_.current===t||(y([]),s8({id:t,query:s}).then(e=>{m(e),_.current=t}).finally(()=>h(!1)))},[t]),(0,o.useEffect)(()=>{if(r&&r.length>0){y([]),m(r),h(!1);return}},[r]);let S=()=>{let e=p[k].image.contextLink;(0,X.N0)()&&(0,s9.oh)({url:e}),window.open(e,"_blank")},E=(e,t)=>{let s=e;do s=(s+t+p.length)%p.length;while(w.includes(s)&&s!==e);return s},T=e=>{if(f)switch(e.key){case"ArrowLeft":case"ArrowUp":C(e=>E(e,-1));break;case"ArrowRight":case"ArrowDown":C(e=>E(e,1))}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("section",{children:[d?(0,l.jsx)(tQ.c,{className:"my-10 w-full",color:a?"white":"default"}):!p.length&&(0,l.jsx)("section",{className:"text-center my-10",children:n("no_images")}),N?(0,l.jsx)("section",{className:"text-center my-10",children:n("no_images")}):(0,l.jsx)("section",{className:"grid grid-cols-2 gap-2 mt-1.5",children:p.slice(0,5+b.length).map((e,t)=>b.includes(t)?null:(0,l.jsx)("section",{className:"bg-offset group relative h-full w-full overflow-hidden rounded-2xl border-1 border-slate-100 transition-all duration-200 ease-in-out ".concat(t?"max-h-[100px]":"col-span-2 max-h-[240px]"," dark:border-transparent"),children:(0,l.jsx)(u.J,{className:"cursor-zoom-in w-full object-cover object-top min-h-[100px] h-full max-h-[inherit] transition-all ease-in-out hover:scale-[1.1] dark:brightness-75",classNames:{wrapper:"overflow-hidden hover:shadow-lg rounded-2xl"},src:e.link,width:"100%",height:"100%",shadow:"none",alt:e.title,onClick:()=>{j(b),C(t),x()},onError:()=>{b.includes(t)||y(e=>[...e,t])}})},t))}),p.length-b.length>5&&p.length-w.length>5&&(0,l.jsx)("section",{className:"flex justify-end mt-4",children:(0,l.jsxs)("button",{className:(0,v.cn)("flex items-center gap-1.5 text-sm px-3 py-1.5 rounded-lg","text-theme-font-600 dark:text-theme-font-dark-600","bg-transparent hover:bg-default-100","transition-colors duration-150"),disabled:i,onClick:()=>{let e=b.includes(0)?p.findIndex((e,t)=>!b.includes(t)):0;j(b),C(e),x()},children:[n("view_more"),(0,l.jsx)(s4.Z,{size:16,className:"text-gray-500"})]})})]}),(0,l.jsx)(sn.R,{size:"full",backdrop:"blur",isOpen:f,onClose:g,closeButton:(0,l.jsx)(l.Fragment,{}),onKeyDown:e=>T(e),classNames:{base:"h-full",backdrop:"bg-zinc-900/80"},children:(0,l.jsx)(sa.A,{className:"flex bg-transparent",children:e=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(sl.k,{className:"flex flex-col gap-1",children:(0,l.jsxs)("section",{className:"flex flex-col md:flex-row gap-4 border-b border-theme-border-100 dark:border-theme-border-dark-100 pb-5",children:[(0,l.jsx)("span",{className:"text-white text-base md:text-2xl truncate md:mr-auto",children:p[k].title}),(0,l.jsxs)("section",{className:"flex items-center gap-4",children:[(0,l.jsxs)(W.A,{className:"mr-auto",variant:"ghost",radius:"full",onPress:S,children:[(0,l.jsx)(sK.Z,{classNames:{wrapper:"w-4 flex-initial flex-shrink-0"},src:"https://www.google.com/s2/favicons?domain=".concat(p[k].displayLink,"&sz=",16)}),(0,l.jsx)("span",{className:"text-white",children:p[k].displayLink})]}),(0,l.jsx)(W.A,{variant:"ghost",isIconOnly:!0,radius:"full",onPress:e,children:(0,l.jsx)(U.Z,{color:"white"})})]})]})}),(0,l.jsxs)(so.I,{className:"flex flex-auto flex-col md:flex-row gap-10 min-h-0",onClick:e,children:[(0,l.jsx)("section",{className:"flex w-full select-none py-md pl-lg min-h-0 flex-1",children:(0,l.jsx)("img",{className:"m-auto max-h-full rounded-md transition-all ease-in-out cursor-pointer dark:brightness-75",src:p[k].link,alt:k.toString(),onClick:e=>{e.stopPropagation(),window.open(p[k].link,"_blank")}},k)}),(0,l.jsx)("section",{className:"w-full md:w-32 overflow-auto",children:(0,l.jsx)("div",{className:"flex gap-4 flex-row md:flex-col",children:p.map((e,t)=>{if(!w.includes(t))return(0,l.jsx)("section",{className:"flex-shrink-0 break-inside-avoid",children:(0,l.jsx)("img",{className:(0,v.cn)("h-32 w-32 bg-zinc-600 rounded-md object-cover cursor-pointer dark:brightness-75",k===t?"border-2 border-blue-500":"border-2 border-transparent"),src:e.link,width:"100%",height:"100%",alt:e.title,onClick:e=>{e.stopPropagation(),C(t)},onError:()=>{w.includes(t)||j(e=>[...e,t])}})},t)})})})]})]})})})]})},rt=s(49992);s(96594);let rs=e=>{var t;let{source:s,index:r,rid:i}=e,n=(0,c.useTranslations)(),a=(0,F.Z)(e=>e.extensionEnable),o=(0,F.Z)(e=>e.legacyExtensionEnable),{title:d,articleData:u,other_info:h,snippet:p}=s;return(0,l.jsx)("div",{className:"relative rounded-lg flex flex-col gap-2",children:(0,l.jsx)(tD.Z,{source:s,placement:"left",rid:i,children:(0,l.jsx)("div",{className:"flex gap-3 w-full cursor-pointer p-3 hover:bg-gray-100 dark:hover:bg-[#444549] border-b dark:border-[#242A38] mb-3",onClick:()=>{if(null==h?void 0:h.source_url){if((0,X.N0)()){(0,s9.oh)({url:h.source_url});return}a?window.open((0,eh.m1)(h.source_url),"_blank"):o?window.open((0,eh.m1)(h.source_url,!0),"_blank"):window.open(h.source_url,"_blank")}},children:(0,l.jsxs)("section",{children:[(0,l.jsx)("span",{className:"text-xs text-[#667085] dark:text-[#9295A0]",children:u.topic}),(0,l.jsx)("section",{className:"mt-1 leading-4 mb-4",children:(0,l.jsxs)("span",{className:"text-sm text-bold text-md",children:[d&&(0,l.jsxs)("div",{className:"text-[#667085] font-semibold leading-5 dark:text-[#9295A0]",children:[(0,l.jsxs)("span",{className:"text-sm",children:["[",r+1,"]"]})," ",(0,l.jsx)("span",{children:u.title})]}),(0,l.jsx)("div",{className:"text-[#98A2B3] dark:text-[#797E8D] text-xs leading-4 my-2",children:(0,l.jsx)("span",{children:u.source})}),(0,l.jsx)("div",{className:"text-[#667085] dark:text-[#9295A0] text-sm leading-5 box-border mb-3 max-h-[80px] line-clamp-3 overflow-hidden",children:(0,l.jsx)("span",{children:u.abstracts})}),(0,l.jsxs)("div",{className:"flex text-xs leading-5 text-[#667085] gap-2 flex-wrap dark:text-[#94A2B8]",children:[(null==h?void 0:h.authors)&&(null==h?void 0:null===(t=h.authors)||void 0===t?void 0:t.length)!==0&&(0,l.jsx)("span",{className:"py-0.5 px-1.5 bg-[#F5F7F9] rounded whitespace-nowrap dark:bg-[#2D323C]",children:(0,rt.$)((null==u?void 0:u.authors)||[])}),(null==h?void 0:h.publication_date)&&(0,l.jsx)("span",{className:"py-0.5 px-1.5 bg-[#EDF0F3] rounded whitespace-nowrap dark:bg-[#2D323C]",children:h.publication_date.slice(0,10)}),(null==h?void 0:h.type)&&(0,l.jsx)("span",{className:"py-0.5 px-1.5 bg-[#EDF0F3] rounded whitespace-nowrap dark:bg-[#2D323C]",children:u.type}),(null==h?void 0:h.cited_by_count)!==void 0&&(0,l.jsxs)("span",{className:"py-0.5 px-1.5 bg-[#EDF0F3] rounded whitespace-nowrap dark:bg-[#2D323C]",children:[h.cited_by_count," ",n("scholar.citations")]})]})]})}),(null==h?void 0:h.relevance)>0&&(0,l.jsx)("div",{className:"w-fit py-2 px-3 bg-[#E7F3FF] rounded-lg border border-[#A4D1FD] dark:border-[#6F9ECD] text-[#0080FF] text-xs font-medium dark:bg-[#2E3643]",children:"".concat((100*h.relevance).toFixed(0),"% ").concat(n("scholar.relevant"))})]})})})},r)},rr=e=>{let{sources:t,onOpen:s,isAll:r,isAllDisabled:i,articles:n,loadingMessage:a,rid:d}=e,u=(0,c.useTranslations)(),[h,p]=(0,o.useState)(!0),{isMobile:f}=(0,tk.Z)(),x=(0,o.useMemo)(()=>n.length<=3?n:n.slice(0,3),[n]);(0,o.useEffect)(()=>{r&&p(!1)},[r]);let g=(0,o.useMemo)(()=>t.length<=3?[]:t.slice(3,t.length).map(e=>{let{url:t,link:s}=e,r=(0,sJ.lx)(t||s||"").hostname;return"https://www.google.com/s2/favicons?domain=".concat(r,"&sz=",16)}),[t]);return(0,l.jsxs)("div",{className:"flex flex-col",children:[a&&(0,l.jsxs)("div",{className:"flex items-center justify-center min-h-10",children:[a!==u("no_sources")&&(0,l.jsx)("div",{className:"loader ball-rotate mr-8",children:(0,l.jsx)("div",{})}),(0,l.jsx)("span",{children:a})]}),n.length>0?(0,l.jsxs)(l.Fragment,{children:[(h?x:n).map((e,t)=>(0,l.jsx)("div",{children:r?(0,l.jsx)(rs,{index:t,source:e,rid:d}):(0,l.jsx)(tH.E.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{type:"spring",bounce:.4,duration:.8,delay:.4*(h?t:t-3)},children:(0,l.jsx)(rs,{index:t,source:e,rid:d})})},t)),r&&n.length>=3&&n.length!==t.length&&(0,l.jsx)("div",{className:"loader ball-rotate m-auto",children:(0,l.jsx)("div",{})})]}):0!==t.length&&t[0]&&t[0].title&&(0,l.jsx)("section",{className:"flex flex-col gap-5 mt-2.5",children:[,,,].fill("").map((e,t)=>(0,l.jsx)(m.O,{className:"max-w-sm h-28 bg-zinc-200 dark:bg-stone-900/30 mx-3"},t))}),h&&(0,l.jsx)("section",{children:(0,l.jsx)("section",{className:"relative z-[1] flex justify-end items-center",children:!!g.length&&(0,l.jsxs)("button",{className:(0,v.cn)("flex items-center gap-1.5 text-sm","rounded-full py-1.5 pr-1.5 pl-3 my-1","text-[#0080FF] dark:text-[#0080FF]","bg-transparent hover:bg-default-100","transition-colors duration-150"),disabled:i,onClick:()=>{f?p(!1):s&&s()},children:[u("scholar.view_more_num",{number:g.length}),(0,l.jsx)(tv.Z,{size:18,className:"text-[#0080FF]"})]})})})]})};var ri=s(31049),rn=s(84915),ra=s(94032),rl=s(40507),ro=s.n(rl),rd=s(3341),rc=s.n(rd),ru=s(70905),rh=s.n(ru),rp=Object.defineProperty,rm=Object.defineProperties,rf=Object.getOwnPropertyDescriptors,rx=Object.getOwnPropertySymbols,rv=Object.prototype.hasOwnProperty,rg=Object.prototype.propertyIsEnumerable,rb=(e,t,s)=>t in e?rp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,ry=(e,t)=>{for(var s in t||(t={}))rv.call(t,s)&&rb(e,s,t[s]);if(rx)for(var s of rx(t))rg.call(t,s)&&rb(e,s,t[s]);return e},rw=(e,t)=>rm(e,rf(t)),rj=(e,t,s)=>new Promise((r,i)=>{var n=e=>{try{l(s.next(e))}catch(e){i(e)}},a=e=>{try{l(s.throw(e))}catch(e){i(e)}},l=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,a);l((s=s.apply(e,t)).next())});function rk(e={}){return rw(ry({},e),{height:0,width:0,playerVars:rw(ry({},e.playerVars),{autoplay:0,start:0,end:0})})}var rC={videoId:ro().string,id:ro().string,className:ro().string,iframeClassName:ro().string,style:ro().object,title:ro().string,loading:ro().oneOf(["lazy","eager"]),opts:ro().objectOf(ro().any),onReady:ro().func,onError:ro().func,onPlay:ro().func,onPause:ro().func,onEnd:ro().func,onStateChange:ro().func,onPlaybackRateChange:ro().func,onPlaybackQualityChange:ro().func},r_=class extends o.Component{constructor(e){super(e),this.destroyPlayerPromise=void 0,this.onPlayerReady=e=>{var t,s;return null==(s=(t=this.props).onReady)?void 0:s.call(t,e)},this.onPlayerError=e=>{var t,s;return null==(s=(t=this.props).onError)?void 0:s.call(t,e)},this.onPlayerStateChange=e=>{var t,s,r,i,n,a,l,o;switch(null==(s=(t=this.props).onStateChange)||s.call(t,e),e.data){case r_.PlayerState.ENDED:null==(i=(r=this.props).onEnd)||i.call(r,e);break;case r_.PlayerState.PLAYING:null==(a=(n=this.props).onPlay)||a.call(n,e);break;case r_.PlayerState.PAUSED:null==(o=(l=this.props).onPause)||o.call(l,e)}},this.onPlayerPlaybackRateChange=e=>{var t,s;return null==(s=(t=this.props).onPlaybackRateChange)?void 0:s.call(t,e)},this.onPlayerPlaybackQualityChange=e=>{var t,s;return null==(s=(t=this.props).onPlaybackQualityChange)?void 0:s.call(t,e)},this.destroyPlayer=()=>this.internalPlayer?(this.destroyPlayerPromise=this.internalPlayer.destroy().then(()=>this.destroyPlayerPromise=void 0),this.destroyPlayerPromise):Promise.resolve(),this.createPlayer=()=>{if("undefined"==typeof document)return;if(this.destroyPlayerPromise){this.destroyPlayerPromise.then(this.createPlayer);return}let e=rw(ry({},this.props.opts),{videoId:this.props.videoId});this.internalPlayer=rh()(this.container,e),this.internalPlayer.on("ready",this.onPlayerReady),this.internalPlayer.on("error",this.onPlayerError),this.internalPlayer.on("stateChange",this.onPlayerStateChange),this.internalPlayer.on("playbackRateChange",this.onPlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.onPlayerPlaybackQualityChange),(this.props.title||this.props.loading)&&this.internalPlayer.getIframe().then(e=>{this.props.title&&e.setAttribute("title",this.props.title),this.props.loading&&e.setAttribute("loading",this.props.loading)})},this.resetPlayer=()=>this.destroyPlayer().then(this.createPlayer),this.updatePlayer=()=>{var e;null==(e=this.internalPlayer)||e.getIframe().then(e=>{this.props.id?e.setAttribute("id",this.props.id):e.removeAttribute("id"),this.props.iframeClassName?e.setAttribute("class",this.props.iframeClassName):e.removeAttribute("class"),this.props.opts&&this.props.opts.width?e.setAttribute("width",this.props.opts.width.toString()):e.removeAttribute("width"),this.props.opts&&this.props.opts.height?e.setAttribute("height",this.props.opts.height.toString()):e.removeAttribute("height"),this.props.title?e.setAttribute("title",this.props.title):e.setAttribute("title","YouTube video player"),this.props.loading?e.setAttribute("loading",this.props.loading):e.removeAttribute("loading")})},this.getInternalPlayer=()=>this.internalPlayer,this.updateVideo=()=>{var e,t,s,r;if(void 0===this.props.videoId||null===this.props.videoId){null==(e=this.internalPlayer)||e.stopVideo();return}let i=!1,n={videoId:this.props.videoId};if((null==(t=this.props.opts)?void 0:t.playerVars)&&(i=1===this.props.opts.playerVars.autoplay,"start"in this.props.opts.playerVars&&(n.startSeconds=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(n.endSeconds=this.props.opts.playerVars.end)),i){null==(s=this.internalPlayer)||s.loadVideoById(n);return}null==(r=this.internalPlayer)||r.cueVideoById(n)},this.refContainer=e=>{this.container=e},this.container=null,this.internalPlayer=null}componentDidMount(){this.createPlayer()}componentDidUpdate(e){return rj(this,null,function*(){var t,s,r,i,n,a;t=this.props,(e.id!==t.id||e.className!==t.className||(null==(s=e.opts)?void 0:s.width)!==(null==(r=t.opts)?void 0:r.width)||(null==(i=e.opts)?void 0:i.height)!==(null==(n=t.opts)?void 0:n.height)||e.iframeClassName!==t.iframeClassName||e.title!==t.title)&&this.updatePlayer(),a=this.props,e.videoId===a.videoId&&rc()(rk(e.opts),rk(a.opts))||(yield this.resetPlayer()),function(e,t){var s,r;if(e.videoId!==t.videoId)return!0;let i=(null==(s=e.opts)?void 0:s.playerVars)||{},n=(null==(r=t.opts)?void 0:r.playerVars)||{};return i.start!==n.start||i.end!==n.end}(e,this.props)&&this.updateVideo()})}componentWillUnmount(){this.destroyPlayer()}render(){return o.createElement("div",{className:this.props.className,style:this.props.style},o.createElement("div",{id:this.props.id,className:this.props.iframeClassName,ref:this.refContainer}))}};r_.propTypes=rC,r_.defaultProps={videoId:"",id:"",className:"",iframeClassName:"",style:{},title:"",loading:void 0,opts:{},onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}},r_.PlayerState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};let rN=er.r8?"https://api-v2-dev.glarity.app":"https://api-v2.glarity.app",rS=e=>fetch("".concat(rN,"/video/video?video_summary_code=").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}).then(async e=>{if(200!==e.status)return"";let t=await e.json();return"OK"!==t.code?"":t.data}),rE=(0,T.Z)("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]),rT=(0,T.Z)("Sparkle",[["path",{d:"m12 3-1.9 5.8a2 2 0 0 1-1.287 1.288L3 12l5.8 1.9a2 2 0 0 1 1.288 1.287L12 21l1.9-5.8a2 2 0 0 1 1.287-1.288L21 12l-5.8-1.9a2 2 0 0 1-1.288-1.287Z",key:"nraa5p"}]]),rP=(0,T.Z)("SendHorizontal",[["path",{d:"m3 3 3 9-3 9 19-9Z",key:"1aobqy"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]);var rM=s(20724);let rF=(0,T.Z)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var rA=s(82313);let rL=e=>{var t;let{isOpen:s,onOpenChange:r,videoInfo:i}=e,n=(0,c.useTranslations)(),{isDark:a}=(0,D.Z)(),{isMobile:d}=(0,tk.Z)(),[h,p]=(0,o.useState)(!1),[m,f]=(0,o.useState)(!1),[x,v]=(0,o.useState)(),g=(0,o.useRef)(null),b=(0,o.useRef)(null),y=(0,o.useMemo)(()=>(null==i?void 0:i.video_code)?i.video_code:i&&(0,sJ.lx)(i.url).searchParams.get("v")||"",[i]),w=()=>{if(!i)return;let e="".concat(i.random,"_").concat(i.summary_id);f(!0),rS(e).then(e=>{let t="";if(e.content){let s=JSON.parse(e.content),r="### keyword\n";s.total_summary&&-1!==s.total_summary.indexOf(r)&&(t=s.total_summary.split(r).at(-1)||"")}v({title:e.title,summary:e.summary,highlights:JSON.parse(e.video_highlights),keyMoments:JSON.parse(e.key_moments||"[]"),qa:e.qand_a||"",keyword:t})}).finally(()=>{f(!1)})},j=e=>{g.current&&g.current.seekTo(e,!0)};return(0,o.useEffect)(()=>{s||(p(!1),v(void 0)),s&&i&&i.summary_id&&w()},[s]),(0,l.jsx)(sn.R,{isOpen:s,onOpenChange:r,closeButton:d?void 0:(0,l.jsx)(l.Fragment,{}),size:d?"full":void 0,classNames:{base:"bg-transparent max-w-7xl",body:"p-0",backdrop:"bg-zinc-900/80 backdrop-opacity-20"},children:(0,l.jsx)(sa.A,{children:(0,l.jsx)(so.I,{className:"flex items-center justify-center overflow-hidden",children:(0,l.jsxs)("section",{className:"flex flex-col md:flex-row w-full",children:[(0,l.jsxs)("section",{className:"flex-1 relative rounded-large overflow-hidden bg-gray-900",ref:b,children:[!h&&(0,l.jsx)(u.J,{width:"100%",height:"100%",src:er.XJ+(null==i?void 0:i.cover_image_url),alt:null==i?void 0:i.summary,classNames:{wrapper:"absolute w-full h-full",img:"-top-[96px]"}}),(0,l.jsx)("section",{className:"w-full aspect-video",children:(0,l.jsx)(r_,{videoId:y,opts:{width:"100%",height:"100%",playerVars:{autoplay:1}},onReady:e=>{let{width:t,height:s}=e.target.getSize();e.target.setSize(t,t/16*9),p(!0),g.current=e.target}})})]}),(null==i?void 0:i.summary_id)&&(0,l.jsx)(tH.E.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{type:"spring",bounce:.4,duration:.8,delay:.2},children:(0,l.jsx)("section",{className:"flex-none w-full md:w-80 h-full mt-5 md:mt-0 md:ml-5 rounded-large overflow-hidden bg-gray-50",style:{maxHeight:null==b?void 0:null===(t=b.current)||void 0===t?void 0:t.clientHeight},children:(0,l.jsx)("section",{className:"flex flex-col gap-5 py-3 px-5 h-full break-words overflow-y-auto scrollbar",children:m?(0,l.jsx)("section",{className:"h-full flex items-center justify-center",children:(0,l.jsx)(tQ.c,{color:a?"white":"default"})}):(0,l.jsx)(l.Fragment,{children:x?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("section",{className:"text-lg text-gray-900 font-medium",children:x.title}),x.summary&&(0,l.jsxs)("section",{className:"text-sm/relaxed",children:[(0,l.jsxs)("p",{className:"font-medium text-gray-900 flex items-center gap-2 pb-2 mb-2 border-b border-gray-200",children:[(0,l.jsx)(rE,{size:18}),n("summary")]}),(0,l.jsx)("p",{className:"text-gray-500",children:x.summary})]}),!!x.highlights.filter(e=>!!e).length&&(0,l.jsxs)("section",{className:"text-sm/relaxed",children:[(0,l.jsxs)("p",{className:"font-medium text-gray-900 flex items-center gap-2 pb-2 mb-2 border-b border-gray-200",children:[(0,l.jsx)(rT,{size:18}),n("highlights")]}),(0,l.jsx)("ul",{className:"list-disc list-inside text-gray-500",children:x.highlights.map((e,t)=>(0,l.jsx)("li",{children:e},t))})]}),!!x.keyMoments.filter(e=>!!e).length&&(0,l.jsxs)("section",{className:"text-sm/relaxed",children:[(0,l.jsxs)("p",{className:"font-medium text-gray-900 flex items-center gap-2 pb-2 mb-2 border-b border-gray-200",children:[(0,l.jsx)(rP,{size:18}),n("key_moments")]}),(0,l.jsx)("section",{className:"mt-4 text-gray-500 flex flex-wrap gap-2",children:x.keyMoments.map((e,t)=>(0,l.jsx)(tU.e,{closeDelay:0,content:(0,l.jsx)("section",{children:(0,l.jsx)("ul",{className:"list-disc list-inside py-2 px-3",children:e.highlights.map((e,t)=>(0,l.jsx)("li",{children:e},t))})}),children:(0,l.jsx)(W.A,{radius:"full",size:"sm",onPress:()=>{j(e.timestamp)},children:e.title})},t))})]}),x.qa&&(0,l.jsxs)("section",{className:"text-sm/relaxed",children:[(0,l.jsxs)("p",{className:"font-medium text-gray-900 flex items-center gap-2 pb-2 mb-2 border-b border-gray-200",children:[(0,l.jsx)(rM.Z,{size:18}),n("qa")]}),(0,l.jsx)("section",{className:"text-gray-500 prose prose-md text-sm",children:(0,l.jsx)(rA.U,{children:x.qa})})]}),x.keyword&&(0,l.jsxs)("section",{className:"text-sm/relaxed",children:[(0,l.jsxs)("p",{className:"font-medium text-gray-900 flex items-center gap-2 pb-2 mb-2 border-b border-gray-200",children:[(0,l.jsx)(rF,{size:18}),n("keyword")]}),(0,l.jsx)("p",{className:"text-gray-500",children:x.keyword})]})]}):(0,l.jsx)("section",{className:"h-full flex items-center justify-center ",children:(0,l.jsx)("h1",{className:"uppercase tracking-widest text-gray-500",children:n("error.request")})})})})})})]})})})})},rI=e=>{let{videoInfo:t}=e,{isOpen:s,onOpen:r,onOpenChange:i}=(0,sL.q)(),n=(0,o.useMemo)(()=>{if(!t||!t.url)return!0;let e=(0,sJ.lx)(t.url);return console.log(e),!(null==e?void 0:e.host.includes("youtube"))},[t]),a=(null==t?void 0:t.cover_image_url.startsWith("http"))||(null==t?void 0:t.cover_image_url.startsWith("data:image"))?null==t?void 0:t.cover_image_url:er.XJ+(null==t?void 0:t.cover_image_url);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(ty.w,{className:"relative cursor-pointer overflow-hidden group/video",children:[(0,l.jsx)(u.J,{className:"aspect-video",classNames:{wrapper:"mx-auto",img:"object-cover"},src:a,alt:null==t?void 0:t.summary}),(0,l.jsx)("section",{className:"absolute z-[11] inset-0 flex items-center justify-center transition-all duration-300 ease-in-out opacity-0 group-hover/video:opacity-100",onClick:()=>{n&&t?((0,X.N0)()&&(0,s9.oh)({url:t.url}),window.open(null==t?void 0:t.url,"_blank")):r()},children:(0,l.jsx)(u.J,{classNames:{wrapper:"w-[50%]"},src:"/logo/youtube.svg",alt:""})}),(0,l.jsxs)("section",{className:"absolute z-10 bottom-0 w-full py-[3%] px-2 transition-all duration-300 ease-in-out opacity-0 group-hover/video:opacity-100",children:[(0,l.jsx)("div",{className:"bg-black bg-bg-100 absolute left-0 right-0 bottom-0 h-[300%] pointer-events-none [-webkit-mask-image:linear-gradient(to_top,_black_10%,_transparent)]"}),(0,l.jsx)("span",{className:"relative z-[1] text-sm font-medium text-white line-clamp-1",children:null==t?void 0:t.title})]})]}),(0,l.jsx)(rL,{isOpen:s,onOpenChange:i,videoInfo:t})]})},rZ=e=>{let{list:t}=e;return(0,l.jsx)("section",{className:"columns-2 gap-8 py-8",children:t.map((e,t)=>(0,l.jsx)("section",{className:"break-inside-avoid p-2 mb-5",children:(0,l.jsxs)("section",{className:"flex flex-col gap-2",children:[(0,l.jsx)("p",{className:"text-base md:text-lg font-medium text-gray-900 dark:text-gray-200",children:e.title}),e.video_content.video_author&&(0,l.jsx)("p",{className:"text-sm/relaxed",children:e.video_content.video_author}),(0,l.jsx)("p",{className:"line-clamp-3 text-sm/relaxed text-gray-500 dark:text-gray-400",children:e.summary}),(0,l.jsx)(rI,{videoInfo:e})]})},t))})},rD=e=>{let t=(0,ei.a1)();return fetch("".concat(er.XJ,"/query/videos"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(t)},body:JSON.stringify({search_uuid:e})}).then(async e=>200!==e.status?[]:await e.json()).catch(()=>[])};var rz=e=>{let{id:t}=e,{isMobile:s}=(0,tk.Z)(),r=(0,c.useTranslations)(),{isDark:i}=(0,D.Z)(),{isOpen:n,onOpen:a,onOpenChange:d}=(0,sL.q)(),[u,h]=(0,o.useState)(!0),{videos:p,setVideos:m}=sr();return(0,o.useEffect)(()=>{m([]),t&&rD(t).then(e=>m([...e])).finally(()=>h(!1))},[t,m]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("section",{children:[u?(0,l.jsx)(tQ.c,{className:"my-10 w-full",color:i?"white":"default"}):!p.length&&(0,l.jsx)("section",{className:"text-center my-10",children:r("no_videos")}),(0,l.jsx)("section",{className:"grid grid-cols-2 gap-2",children:p.slice(0,5).map((e,t)=>(0,l.jsx)("section",{className:"".concat(t?"":"col-span-2"),children:(0,l.jsx)(rI,{videoInfo:e})},t))}),p.length>5&&(0,l.jsx)("section",{className:"flex justify-end mt-4",children:(0,l.jsxs)("button",{className:(0,v.cn)("flex items-center gap-1.5 text-sm px-3 py-1.5 rounded-lg","text-theme-font-600 dark:text-theme-font-dark-600","bg-transparent hover:bg-default-100","transition-colors duration-150"),onClick:()=>{a()},children:[r("view_more"),(0,l.jsx)(s4.Z,{size:16,className:"text-gray-500"})]})})]}),(0,l.jsx)(sn.R,{isOpen:n,onOpenChange:d,scrollBehavior:"inside",size:"full",backdrop:s?"transparent":"blur",classNames:{base:"absolute top-0 right-0 overflow-auto max-h-lvh bg-opacity-94 ".concat(s?"":"w-[60vw] max-w-[800px]"),backdrop:"bg-zinc-900/80",header:"border-b border-slate-200 dark:border-[#6D7276]",body:"p-0"},motionProps:{variants:{enter:{x:0,opacity:1,transition:{duration:.3,ease:"easeOut"}},exit:{x:100,opacity:0,transition:{duration:.2,ease:"easeIn"}}}},children:(0,l.jsxs)(sa.A,{children:[(0,l.jsx)(sl.k,{className:"flex flex-col gap-1",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(ra.Z,{})," ",r("recommended_video")]})}),(0,l.jsx)(so.I,{children:(0,l.jsx)(rZ,{list:p})})]})})]})},rO=s(36064),rR=s(91988),rB=(0,sg.tv)({base:"px-2",variants:{variant:{light:"",shadow:"px-4 shadow-medium rounded-medium bg-content1",bordered:"px-4 border-medium border-divider rounded-medium",splitted:"flex flex-col gap-2"},fullWidth:{true:"w-full"}},defaultVariants:{variant:"light",fullWidth:!0}}),rq=(0,sg.tv)({slots:{base:"",heading:"",trigger:["flex py-4 w-full h-full gap-3 outline-none items-center tap-highlight-transparent",...rR.Dh],startContent:"flex-shrink-0",indicator:"text-default-400",titleWrapper:"flex-1 flex flex-col text-start",title:"text-foreground text-large",subtitle:"text-small text-foreground-500 font-normal",content:"py-2"},variants:{variant:{splitted:{base:"px-4 bg-content1 shadow-medium rounded-medium"}},isCompact:{true:{trigger:"py-2",title:"text-medium",subtitle:"text-small",indicator:"text-medium",content:"py-1"}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},hideIndicator:{true:{indicator:"hidden"}},disableAnimation:{true:{content:"hidden data-[open=true]:block"},false:{indicator:"transition-transform",trigger:"transition-opacity"}},disableIndicatorAnimation:{true:{indicator:"transition-none"},false:{indicator:"rotate-0 data-[open=true]:-rotate-90 rtl:-rotate-180 rtl:data-[open=true]:-rotate-90"}}},defaultVariants:{size:"md",radius:"lg",isDisabled:!1,hideIndicator:!1,disableIndicatorAnimation:!1}}),rH=s(49975),rV=s(48824),rW=s(7909),rU=s(66552),rG=s(79868),r$=s(41146),rY=s(59630),rJ=s(55244),rX=s(49336),rK=s(20805),rQ=s(41721),r0=s(9013),r1=s(72404),r2=s(83405),r3=s(51901),r5=s(87),r7=s(58297);class r6 extends r3.Hg{constructor(){super(...arguments),this.values=[]}add(e){let t=(0,r5.p)(e);t&&((0,r7.y4)(this.values,t),this.update())}update(){this.set(this.values.length?this.values.join(", "):"auto")}}var r4=s(22464),r8=s(25689),r9=s(79680),ie=s(79736),it=s(9340),is=(0,sw.Gp)((e,t)=>{let{Component:s,HeadingComponent:r,classNames:i,slots:n,indicator:a,children:d,title:c,subtitle:u,startContent:h,isOpen:p,isDisabled:m,hideIndicator:f,keepContentMounted:x,disableAnimation:v,motionProps:g,getBaseProps:b,getHeadingProps:y,getButtonProps:w,getTitleProps:j,getSubtitleProps:k,getContentProps:C,getIndicatorProps:_}=function(e){var t,s;let r=(0,sy.w)(),{ref:i,as:n,item:a,onFocusChange:l}=e,{state:d,className:c,indicator:u,children:h,title:p,subtitle:m,startContent:f,motionProps:x,focusedKey:v,variant:g,isCompact:b=!1,classNames:y={},isDisabled:w=!1,hideIndicator:j=!1,disableAnimation:k=null!=(t=null==r?void 0:r.disableAnimation)&&t,keepContentMounted:C=!1,disableIndicatorAnimation:_=!1,HeadingComponent:N=n||"h2",onPress:S,onPressStart:E,onPressEnd:T,onPressChange:P,onPressUp:M,onClick:F,...A}=e,L=n||"div",I="string"==typeof L,Z=(0,rV.gy)(i),D=d.disabledKeys.has(a.key)||w,z=d.selectionManager.isSelected(a.key),{buttonProps:O,regionProps:R}=function(e,t,s){let{item:r,isDisabled:i}=e,n=r.key,a=t.selectionManager,l=(0,o.useId)(),d=(0,o.useId)(),c=t.disabledKeys.has(r.key)||i;(0,o.useEffect)(()=>{n===t.focusedKey&&document.activeElement!==s.current&&s.current&&(0,rU.e)(s.current)},[s,n,t.focusedKey]);let u=(0,o.useCallback)(e=>{a.canSelectItem(n)&&(a.select(n,e),t.toggleKey(n))},[n,a]),h=(0,o.useCallback)(e=>{"replace"===a.selectionBehavior&&a.extendSelection(e),a.setFocusedKey(e)},[a]),{buttonProps:p}=function(e,t){let s,{elementType:r="button",isDisabled:i,onPress:n,onPressStart:a,onPressEnd:l,onPressUp:o,onPressChange:d,preventFocusOnPress:c,allowFocusWhenDisabled:u,onClick:h,href:p,target:m,rel:f,type:x="button"}=e;s="button"===r?{type:x,disabled:i}:{role:"button",tabIndex:i?void 0:0,href:"a"===r&&i?void 0:p,target:"a"===r?m:void 0,type:"input"===r?x:void 0,disabled:"input"===r?i:void 0,"aria-disabled":i&&"input"!==r?i:void 0,rel:"a"===r?f:void 0};let{pressProps:v,isPressed:g}=(0,rJ.r)({onPressStart:a,onPressEnd:l,onPressChange:d,onPress:n,onPressUp:o,isDisabled:i,preventFocusOnPress:c,ref:t}),{focusableProps:b}=(0,rY.k)(e,t);u&&(b.tabIndex=i?-1:b.tabIndex);let y=(0,rG.d)(b,v,(0,r$.z)(e,{labelable:!0}));return{isPressed:g,buttonProps:(0,rG.d)(s,y,{"aria-haspopup":e["aria-haspopup"],"aria-expanded":e["aria-expanded"],"aria-controls":e["aria-controls"],"aria-pressed":e["aria-pressed"],onClick:e=>{h&&(h(e),console.warn("onClick is deprecated, please use onPress"))}})}}({id:l,elementType:"button",isDisabled:c,onKeyDown:(0,o.useCallback)(e=>{let s={ArrowDown:()=>{let e=t.collection.getKeyAfter(n);if(e&&t.disabledKeys.has(e)){let s=t.collection.getKeyAfter(e);s&&h(s)}else e&&h(e)},ArrowUp:()=>{let e=t.collection.getKeyBefore(n);if(e&&t.disabledKeys.has(e)){let s=t.collection.getKeyBefore(e);s&&h(s)}else e&&h(e)},Home:()=>{let e=t.collection.getFirstKey();e&&h(e)},End:()=>{let e=t.collection.getLastKey();e&&h(e)}}[e.key];s&&(e.preventDefault(),a.canSelectItem(n)&&s(e))},[n,a]),onPress:u},s),m=t.selectionManager.isSelected(r.key);return{buttonProps:{...p,"aria-expanded":m,"aria-controls":m?d:void 0},regionProps:{id:d,role:"region","aria-labelledby":l}}}({item:a,isDisabled:D},{...d,focusedKey:v},Z),{onFocus:B,onBlur:q,...H}=O,{isFocused:V,isFocusVisible:W,focusProps:U}=(0,rO.F)({autoFocus:null==(s=a.props)?void 0:s.autoFocus}),{isHovered:G,hoverProps:$}=(0,rQ.X)({isDisabled:D}),{pressProps:Y,isPressed:J}=(0,r0.r)({ref:Z,isDisabled:D,onPress:S,onPressStart:E,onPressEnd:T,onPressChange:P,onPressUp:M}),X=(0,o.useCallback)(()=>{null==l||l(!0,a.key)},[]),K=(0,o.useCallback)(()=>{null==l||l(!1,a.key)},[]),Q=(0,o.useMemo)(()=>({...y}),[(0,sk.Xx)(y)]),ee=(0,o.useMemo)(()=>rq({isCompact:b,isDisabled:D,hideIndicator:j,disableAnimation:k,disableIndicatorAnimation:_,variant:g}),[b,D,j,k,_,g]),et=(0,sj.W)(null==Q?void 0:Q.base,c),es=(0,o.useCallback)((e={})=>({"data-open":(0,rH.PB)(z),"data-disabled":(0,rH.PB)(D),className:ee.base({class:et}),...(0,rX.d)((0,rW.z)(A,{enabled:I}),e)}),[et,I,A,ee,a.props,z,D]),er=(0,o.useCallback)((e={})=>({"data-open":(0,rH.PB)(z),"data-disabled":(0,rH.PB)(D),className:ee.content({class:null==Q?void 0:Q.content}),...(0,rX.d)(R,e)}),[ee,Q,R,z,D,null==Q?void 0:Q.content]),ei=(0,o.useCallback)((e={})=>({"aria-hidden":(0,rH.PB)(!0),"data-open":(0,rH.PB)(z),"data-disabled":(0,rH.PB)(D),className:ee.indicator({class:null==Q?void 0:Q.indicator}),...e}),[ee,null==Q?void 0:Q.indicator,z,D,null==Q?void 0:Q.indicator]),en=(0,o.useCallback)((e={})=>({"data-open":(0,rH.PB)(z),"data-disabled":(0,rH.PB)(D),className:ee.heading({class:null==Q?void 0:Q.heading}),...e}),[ee,null==Q?void 0:Q.heading,z,D,null==Q?void 0:Q.heading]),ea=(0,o.useCallback)((e={})=>({"data-open":(0,rH.PB)(z),"data-disabled":(0,rH.PB)(D),className:ee.title({class:null==Q?void 0:Q.title}),...e}),[ee,null==Q?void 0:Q.title,z,D,null==Q?void 0:Q.title]),el=(0,o.useCallback)((e={})=>({"data-open":(0,rH.PB)(z),"data-disabled":(0,rH.PB)(D),className:ee.subtitle({class:null==Q?void 0:Q.subtitle}),...e}),[ee,Q,z,D,null==Q?void 0:Q.subtitle]);return{Component:L,HeadingComponent:N,item:a,slots:ee,classNames:Q,domRef:Z,indicator:u,children:h,title:p,subtitle:m,startContent:f,isOpen:z,isDisabled:D,hideIndicator:j,keepContentMounted:C,disableAnimation:k,motionProps:x,getBaseProps:es,getHeadingProps:en,getButtonProps:(e={})=>{var t,s;return{ref:Z,"data-open":(0,rH.PB)(z),"data-focus":(0,rH.PB)(V),"data-focus-visible":(0,rH.PB)(W),"data-disabled":(0,rH.PB)(D),"data-hover":(0,rH.PB)(G),"data-pressed":(0,rH.PB)(J),className:ee.trigger({class:null==Q?void 0:Q.trigger}),onFocus:(0,sk.v0)(X,B,U.onFocus,A.onFocus,null==(t=a.props)?void 0:t.onFocus),onBlur:(0,sk.v0)(K,q,U.onBlur,A.onBlur,null==(s=a.props)?void 0:s.onBlur),...(0,rX.d)(H,$,Y,e,{onClick:(0,rK.t)(Y.onClick,F)})}},getContentProps:er,getIndicatorProps:ei,getTitleProps:ea,getSubtitleProps:el}}({...e,ref:t}),N=(0,r2.h)(()=>new r6("auto")),S=(0,o.useMemo)(()=>"function"==typeof a?a({indicator:(0,l.jsx)(r1.D,{}),isOpen:p,isDisabled:m}):a||null,[a,p,m])||(0,l.jsx)(r1.D,{}),E=(0,o.useMemo)(()=>{if(v)return(0,l.jsx)("div",{...C(),children:d});let e={exit:{...it.y7.collapse.exit,overflowY:"hidden"},enter:{...it.y7.collapse.enter,overflowY:"unset"}};return x?(0,l.jsx)(r4.X,{features:r8.H,children:(0,l.jsx)(r9.m.section,{animate:p?"enter":"exit",exit:"exit",initial:"exit",style:{willChange:N},variants:e,onKeyDown:e=>{e.stopPropagation()},...g,children:(0,l.jsx)("div",{...C(),children:d})},"accordion-content")}):(0,l.jsx)(ie.M,{initial:!1,children:p&&(0,l.jsx)(r4.X,{features:r8.H,children:(0,l.jsx)(r9.m.section,{animate:"enter",exit:"exit",initial:"exit",style:{willChange:N},variants:e,onKeyDown:e=>{e.stopPropagation()},...g,children:(0,l.jsx)("div",{...C(),children:d})},"accordion-content")})})},[p,v,x,d,g]);return(0,l.jsxs)(s,{...b(),children:[(0,l.jsx)(r,{...y(),children:(0,l.jsxs)("button",{...w(),children:[h&&(0,l.jsx)("div",{className:n.startContent({class:null==i?void 0:i.startContent}),children:h}),(0,l.jsxs)("div",{className:n.titleWrapper({class:null==i?void 0:i.titleWrapper}),children:[c&&(0,l.jsx)("span",{...j(),children:c}),u&&(0,l.jsx)("span",{...k(),children:u})]}),!f&&S&&(0,l.jsx)("span",{..._(),children:S})]})}),E]})});is.displayName="NextUI.AccordionItem";var ir=s(27971),ii=s(83653),ia=s(53321),il=(0,sw.Gp)((e,t)=>{let{Component:s,values:r,state:i,isSplitted:n,showDivider:a,getBaseProps:d,disableAnimation:c,handleFocusChanged:u,itemClasses:h,dividerProps:p}=function(e){var t;let s=(0,sy.w)(),{ref:r,as:i,className:n,items:a,variant:l,motionProps:d,expandedKeys:c,disabledKeys:u,selectedKeys:h,children:p,defaultExpandedKeys:m,selectionMode:f="single",selectionBehavior:x="toggle",keepContentMounted:v=!1,disallowEmptySelection:g,defaultSelectedKeys:b,onExpandedChange:y,onSelectionChange:w,dividerProps:j={},isCompact:k=!1,isDisabled:C=!1,showDivider:_=!0,hideIndicator:N=!1,disableAnimation:S=null!=(t=null==s?void 0:s.disableAnimation)&&t,disableIndicatorAnimation:E=!1,itemClasses:T,...P}=e,[M,F]=(0,o.useState)(null),A=i||"div",L="string"==typeof A,I=(0,rV.gy)(r),Z=(0,o.useMemo)(()=>rB({variant:l,className:n}),[l,n]),D={children:(0,o.useMemo)(()=>{let e=[];return o.Children.map(p,t=>{var s;if(o.isValidElement(t)&&"string"!=typeof(null==(s=t.props)?void 0:s.children)){let s=o.cloneElement(t,{hasChildItems:!1});e.push(s)}else e.push(t)}),e},[p]),items:a},z={expandedKeys:c,defaultExpandedKeys:m,onExpandedChange:y},O={disabledKeys:u,selectedKeys:h,selectionMode:f,selectionBehavior:x,disallowEmptySelection:g,defaultSelectedKeys:null!=b?b:m,onSelectionChange:w,...D,...z},R=(0,ir.D)(O);R.selectionManager.setFocusedKey=e=>{F(e)};let{accordionProps:B}=function(e,t,s){let{listProps:r}=(0,ii._)({...e,...t,allowsTabNavigation:!0,disallowSelectAll:!0,ref:s});return delete r.onKeyDownCapture,{accordionProps:{...r,tabIndex:void 0}}}({...D,...z},R,I);return{Component:A,values:(0,o.useMemo)(()=>({state:R,focusedKey:M,motionProps:d,isCompact:k,isDisabled:C,hideIndicator:N,disableAnimation:S,keepContentMounted:v,disableIndicatorAnimation:E}),[M,k,C,N,h,S,v,null==R?void 0:R.expandedKeys.values,E,R.expandedKeys.size,R.disabledKeys.size,d]),state:R,focusedKey:M,getBaseProps:(0,o.useCallback)((e={})=>({ref:I,className:Z,"data-orientation":"vertical",...(0,rX.d)(B,(0,rW.z)(P,{enabled:L}),e)}),[]),isSplitted:"splitted"===l,classNames:Z,showDivider:_,dividerProps:j,disableAnimation:S,handleFocusChanged:(0,o.useCallback)((e,t)=>{e&&F(t)},[]),itemClasses:T}}({...e,ref:t}),m=(0,o.useCallback)((e,t)=>u(e,t),[u]),f=(0,o.useMemo)(()=>[...i.collection].map((t,s)=>{let d={...h,...t.props.classNames||{}};return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(is,{item:t,variant:e.variant,onFocusChange:m,...r,...t.props,classNames:d}),!t.props.hidden&&!n&&a&&s<i.collection.size-1&&(0,l.jsx)(tK.j,{...p})]},t.key)}),[r,h,m,n,a,i.collection]);return(0,l.jsx)(s,{...d(),children:c?f:(0,l.jsx)(ia.S,{children:f})})});il.displayName="NextUI.Accordion";var io=s(23855).c,id=s(39676),ic=s(72932),iu=s(17874),ih=s(2488),ip=s(27571),im=s(3295),ix=s(46024),iv=s(57606),ig=s(4389),ib=s(49905),iy=e=>{let{query:t,category:s,canEdit:r,threadRid:i,processValue:n,sources:a=null,images:d,defaultExpandKeys:u,isDisabled:h,isVisible:p,onImagesClick:m,onVideosClick:f,onDeleteAndRewrite:x}=e,g=(0,c.useTranslations)(),{selectedSources:b}=(0,iv.Z)(),{isOpen:y,onOpen:w,onOpenChange:j}=(0,sL.q)(),[k,C]=(0,o.useState)(new Set(u)),[_,N]=(0,o.useState)(Array.from(k)),S=(0,o.useMemo)(()=>_.includes("2")?i:"",[_,i]),E=(0,o.useMemo)(()=>_.includes("3")?i:"",[_,i]),T=(0,o.useMemo)(()=>"document"===s,[s]),P=(0,o.useMemo)(()=>"scholar"===s,[s]),M=(0,o.useMemo)(()=>s===O.J5||s===O.Ys||"file"===s,[s]),[F,A]=(0,o.useState)([]),[L,I]=(0,o.useState)(g("scholar.searching_databases")),Z=(0,o.useRef)([]);(0,o.useEffect)(()=>{C(new Set(u))},[u]);let D=(0,o.useRef)(0);(0,o.useEffect)(()=>{let e=async()=>{if(!(null==a?void 0:a.length)||!a[0]||"{}"===JSON.stringify(a[0])||!a[0].title){I(g("no_sources"));return}try{I(g("scholar.reading_articles",{count:a.length}));let e=await (0,ip.q)({sources:a.slice(0,3)});A(e),I("");let t=await (0,ip.q)({sources:a.slice(3)});A(e=>[...e,...t]);let s=[...e,...t],r=iv.Z.getState().sourceAllMatchList,n=(0,ib.w0)(),l=r.map(e=>{var t;let r=s.find(t=>t.title===e.title),a=(null==r?void 0:r.url)||e.link||"",l="".concat(i,"-").concat(a,"-").concat(n),o=e.snippet.split("\n"),d=(0,ig.ND)((null==r?void 0:null===(t=r.articleData)||void 0===t?void 0:t.abstracts)||e.snippet||"").split("\n");return iv.Z.getState().addSourceOriginalList({id:l,rid:i,link:e.link||"",original:o,translated:d,title:e.title,translatedTitle:(null==r?void 0:r.articleData.title)||e.title}),{...e,snippet:r?(0,ig.ND)(r.articleData.abstracts):(0,ig.ND)(e.snippet),title:(null==r?void 0:r.articleData.title)||e.title}});for(let e=0;e<l.length;e+=6){let t=l.slice(e,e+6),s=await (0,ig.UA)(t,!0);if(!s)return;s.forEach(e=>{iv.Z.getState().addHighlightItem(e)})}}catch(e){console.error(":",e)}};a&&P&&a.length>0&&(Z.current=a,e()),0===Z.current.length&&(null==a?void 0:a.length)==0&&P?D.current=setTimeout(()=>{e(),console.log("sources222",a)},1e4):a&&((null==a?void 0:a.length)>0||Z.current.length>0)&&clearTimeout(D.current)},[a,g,P]);let z=(0,im.Z)(e=>e.autoTranslateSources),R=e=>{e.preventDefault(),e.stopPropagation(),im.Z.getState().setAutoTranslateSources(!z)},B=()=>{j();let{setSelectedSources:e,setLastSelectedIndex:t}=iv.Z.getState();e([]),t(null)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(il,{className:"sticky top-20 px-0",variant:"splitted",selectionMode:"multiple",selectedKeys:k,onSelectionChange:e=>{C(e),N(Array.from(e))},itemClasses:{base:"dark:bg-[#131316] !shadow-none border-1 border-theme-border-200 dark:border-theme-border-dark-200 ",title:"text-theme-font-700 dark:text-theme-font-dark-700 dark:text-[#babdc5]",indicator:"text-theme-font-500 dark:text-theme-font-dark-500",content:"py-0 pb-4"},keepContentMounted:!0,children:[(0,l.jsx)(io,{"aria-label":g("sources"),indicator:k instanceof Set&&k.has("1")?(0,l.jsx)(ic.Z,{}):(0,l.jsx)(tv.Z,{}),disableIndicatorAnimation:!0,title:(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-base",children:[(0,l.jsx)(iu.Z,{}),(0,l.jsx)("span",{children:g("sources")})]}),!T&&!P&&(0,l.jsx)(tU.e,{delay:0,content:g("translate_sources"),children:(0,l.jsx)("span",{className:(0,v.cn)("cursor-pointer","border p-[3px] rounded-md hover:text-theme-blue-500 hover:border-theme-blue-500",z&&"text-theme-blue-600 border-theme-blue-600"),children:(0,l.jsx)(ix.vN,{className:"w-4 h-4",onPointerDown:R,tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),R(e))}})})})]}),children:T?(0,l.jsx)(s6,{sources:a||[],isDone:n>80,query:t}):P?(0,l.jsx)(rr,{sources:a||[],articles:F,onOpen:w,isAllDisabled:h,loadingMessage:L,rid:i}):(0,l.jsx)(rn.F,{sources:a||[],isDone:n>80,onOpen:w,isAllDisabled:h,isVisible:!!p,rid:i})},"1"),(0,l.jsx)(io,{"aria-label":"Images",indicator:k instanceof Set&&k.has("2")?(0,l.jsx)(ic.Z,{}):(0,l.jsx)(tv.Z,{}),disableIndicatorAnimation:!0,isDisabled:h&&"all"!==k&&!k.has("2")&&!d.length,title:(0,l.jsxs)("div",{className:"flex items-center gap-2 text-base",children:[(0,l.jsx)(ix.om,{})," ",g("recommended_image")]}),onClick:m,hidden:P||M,children:(0,l.jsx)(re,{id:S,query:t,imageList:d,isAllDisabled:h})},"2"),(0,l.jsx)(io,{indicator:k instanceof Set&&k.has("3")?(0,l.jsx)(ic.Z,{}):(0,l.jsx)(tv.Z,{}),disableIndicatorAnimation:!0,"aria-label":g("recommended_video"),isDisabled:h,title:(0,l.jsxs)("div",{className:"flex items-center gap-2 text-base",children:[(0,l.jsx)(ix.Hf,{})," ",g("recommended_video")]}),onClick:f,hidden:P||M,children:(0,l.jsx)(rz,{id:E})},"3")]}),(0,l.jsx)(ri.Z,{visible:y,closeDrawer:B,children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"py-4 px-6 flex-initial font-semibold border-b border-slate-200 dark:border-[#6D7276] flex flex-col gap-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(iu.Z,{})," ",g("sources")]}),(0,l.jsx)("div",{className:"text-sm font-normal",children:t})]}),(0,l.jsx)(id.o,{className:"p-6",children:P?(0,l.jsx)(rr,{sources:a||[],articles:F,isAll:!0,rid:i}):(0,l.jsx)(rn.F,{sources:a||[],canEdit:r,isDone:n>80,isAll:!0,isVisible:!0,rid:i})}),b.length>0&&(0,l.jsxs)("div",{className:"flex justify-end p-6 gap-4",children:[b.length===(null==a?void 0:a.length)&&(0,l.jsxs)("p",{className:"flex items-center gap-2 text-sm text-theme-font-500 dark:text-theme-font-dark-500",children:[(0,l.jsx)(ih.Z,{size:16}),(0,l.jsx)("span",{children:g("min_source_required")})]}),(0,l.jsx)(W.A,{color:"primary",isDisabled:b.length===(null==a?void 0:a.length),onPress:()=>{x(),B()},children:g("delete_and_rewrite")})]})]})})]})},iw=s(57591);let ij=(0,T.Z)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);var ik=s(69205),iC=e=>{let{shouldUseDiscovery:t,onSearch:s,onDiscoverySearch:r}=e,i=(0,c.useTranslations)(),[n,a]=(0,o.useState)(!0),{proUsageQuota:d}=(0,sm.I)(),u=(0,o.useMemo)(()=>t&&d>0,[t,d]);return n?(0,l.jsxs)("div",{className:"relative flex items-center border-y border-gray-200 dark:border-gray-700 py-4 my-4",children:[(0,l.jsxs)("div",{className:"flex-1 flex items-center justify-center text-sm text-gray-500 dark:text-gray-400",children:[(0,l.jsx)(ij,{className:"flex-none w-4 h-4 mr-2"}),(0,l.jsx)("span",{children:i(u?"answer_discovery_tip":"answer_tip")}),u?(0,l.jsx)(W.A,{className:"ml-2",size:"sm",color:"primary",variant:"flat",radius:"full",onPress:r,startContent:(0,l.jsx)(ik.Z,{size:14}),children:i("deep_reasoning")}):(0,l.jsx)(W.A,{className:"ml-2",size:"sm",color:"primary",variant:"flat",radius:"full",onPress:s,startContent:(0,l.jsx)(ik.Z,{size:14}),children:i("search")})]}),(0,l.jsx)(W.A,{isIconOnly:!0,size:"sm",variant:"light",className:"ml-2",onPress:()=>a(!1),children:(0,l.jsx)(U.Z,{className:"w-4 h-4"})})]}):null},i_=s(17112),iN=s(55994),iS=s(14059);let iE=(0,T.Z)("ScanBarcode",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]]),iT=(0,T.Z)("MessageSquareMore",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M16 10h.01",key:"1m94wz"}]]);var iP=e=>{let{label:t,labelClassName:s,rewriters:r,className:i}=e,[n,a]=(0,o.useState)([]),d=(0,o.useRef)(0);(0,o.useEffect)(()=>{if(!r)return;let e=()=>{setTimeout(()=>{d.current+=1,a(r.slice(0,d.current)),r[d.current]&&e()},500)};e()},[r]);let c=(0,o.useMemo)(()=>n.slice(-1)[0],[n]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:(0,v.cn)("mr-2",s),children:t}),(0,l.jsx)(ie.M,{mode:"wait",children:(0,l.jsx)(tH.E.span,{initial:{y:10,opacity:0},animate:{y:0,opacity:1},exit:{y:-10,opacity:0},transition:{duration:.2},className:i,children:c},c)})]})},iM=s(28930),iF=s(37481);function iA(e){let{color:t="default",className:s}=e,r={default:"bg-blue-500",success:"bg-green-500",warning:"bg-yellow-500",error:"bg-red-500"};return(0,l.jsx)("div",{className:(0,iF.cn)("inline-flex items-center justify-center w-4 h-4",s),children:(0,l.jsxs)("div",{className:"relative inline-flex h-3 w-3",children:[(0,l.jsx)("span",{className:(0,iF.cn)("animate-ping absolute inline-flex h-full w-full rounded-full opacity-75",r[t])}),(0,l.jsx)("span",{className:(0,iF.cn)("relative inline-flex rounded-full h-3 w-3",r[t])})]})})}var iL=e=>{let{reasoningText:t,reasoningEnd:s,value:r,sources:i}=e,n=(0,c.useTranslations)(),[a,d]=(0,o.useState)([]),u=(0,o.useMemo)(()=>t.split("\n").filter(Boolean),[t]),h=e=>{d(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},p=e=>{if((0,X.N0)()){(0,s9.oh)({url:e});return}window.open(e,"_blank")},m=e=>e.split(/(\[\d+\])/g).map((e,t)=>{let s=e.match(/\[(\d+)\]/);if(s){let r=s[1],n=i[Number(r)-1];return n?(0,l.jsx)("span",{className:"footnote-ref inline-block mx-[2px] my-0 select-none",children:(0,l.jsx)(tD.Z,{source:n,rid:n.url,children:(0,l.jsx)("a",{className:"inline-block leading-normal !text-inherit cursor-pointer no-underline font-medium bg-theme-bg-400  dark:bg-[#3F4961] min-w-4 h-4 text-center rounded-full align-top text-xs",href:n.url,target:"_blank",onClick:e=>{e.preventDefault(),e.stopPropagation(),p(n.url)},children:r})})},t):(0,l.jsx)("span",{children:e},t)}return(0,l.jsx)("span",{children:e},t)});return(0,l.jsxs)("div",{className:"mt-3",children:[(0,l.jsxs)("div",{className:"relative pr-16 text-[#4C6DA1] dark:text-[#CBD4E1] rounded-md hover:bg-theme-bg-300 dark:hover:bg-theme-bg-dark-300 p-2 cursor-pointer",children:[(0,l.jsx)(ix.e,{className:(0,v.cn)("text-[#02B66F] absolute left-2 top-[10px]")}),(0,l.jsx)("p",{className:"text-sm origin-top ml-6",children:n("step.start_analysis")})]}),u.map((e,t)=>(0,l.jsxs)("div",{onClick:()=>h(t),className:"relative pr-16 text-[#4C6DA1] dark:text-[#CBD4E1] rounded-md hover:bg-theme-bg-300 dark:hover:bg-theme-bg-dark-300 p-2 cursor-pointer",children:[s||t!==u.length-1?(0,l.jsx)(ix.e,{className:(0,v.cn)("text-[#02B66F] absolute left-2 top-[10px]")}):(0,l.jsx)("div",{className:"absolute left-2 top-[6px]",children:(0,l.jsx)(iA,{})}),(0,l.jsx)("p",{className:(0,v.cn)("text-sm origin-top ml-6",a.includes(t)&&"line-clamp-1",!s&&t===u.length-1&&"text-[#283a3d] dark:text-white"),children:m(e)}),(0,l.jsx)("button",{className:"absolute right-2 top-[10px] text-xs text-theme-font-500 dark:text-theme-font-dark-500",children:a.includes(t)?(0,l.jsx)(iM.Z,{size:16}):(0,l.jsx)(ic.Z,{size:16})})]},t)),s&&(0,l.jsxs)("div",{className:"relative pr-16 rounded-md text-[#4C6DA1] dark:text-[#CBD4E1] hover:bg-theme-bg-300 dark:hover:bg-theme-bg-dark-300 p-2 cursor-pointer",children:[(0,l.jsx)(ix.e,{className:(0,v.cn)("text-[#02B66F] absolute left-2 top-[10px]")}),(0,l.jsx)("p",{className:"text-sm ml-6 origin-top",children:n("step.end_analysis")})]})]})},iI=e=>{let{query:t,method:s,step:r,toolsInfo:i,rewriters:n,firstSourcesCount:a,secondSourcesCount:d,onExpand:u,reasoningText:h,tools:p}=e,m=(0,c.useTranslations)(),f=null==i?void 0:i.some(e=>!!e),x=n.map(e=>e.rewriters).flat(),g=(0,o.useMemo)(()=>{if(0===r||10===r){if(f)return null==i?void 0:i[i.length-1];let e=s&&(0,z.h)(s);return e?"".concat(m(e),' "').concat(t,'"'):""}if(30===r&&s!==O.aI&&s!==O.J5&&s!==O.Ys)return m("step.search_sources",{count:a});if(50===r)return x&&(0,l.jsx)(iP,{label:m("step.deep_search"),rewriters:x});if(55===r)return x.length>0?m("step.search_sources_rewriters",{count2:x.length,count:d}):m("step.search_sources",{count:d});if(80===r){var e;let t=h.split("\n").filter(Boolean);return null===(e=t[t.length-1])||void 0===e?void 0:e.trim()}return null},[r,x,s,t,iL,p,i]);return(0,l.jsxs)("div",{className:(0,v.cn)("cursor-pointer inline-flex max-w-full items-center gap-3 bg-theme-bg-100 dark:bg-theme-bg-dark-100 p-3 rounded-lg"),onClick:u,children:[(0,l.jsx)("div",{className:"text-theme-font-900 dark:text-theme-font-dark-900 font-medium flex items-center gap-3 whitespace-nowrap",children:r<30?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(rM.Z,{className:"flex-shrink-0 text-theme-blue-500"}),m("step.understand_problem")]}):r<65?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ix.fX,{className:"flex-shrink-0 text-theme-blue-500"}),m("step.deep_search")]}):r<71?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(iE,{className:"flex-shrink-0 text-theme-blue-500"}),m("step.introspection")]}):r<81?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(iE,{className:"flex-shrink-0 text-theme-blue-500"}),m("step.reasoning")]}):r<100?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(iT,{className:"flex-shrink-0 text-theme-blue-500"}),m("step.answer_question")]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ix.pi,{className:"flex-shrink-0 text-theme-blue-500"}),m("step.answer_done")]})}),r<100&&(0,l.jsx)(ie.M,{mode:"wait",children:(0,l.jsx)(tH.E.div,{className:"min-w-0 line-clamp-1",initial:{y:10,opacity:0},animate:{y:0,opacity:1},exit:{y:-10,opacity:0},transition:{duration:.2},children:(0,l.jsxs)("span",{className:"text-sm opacity-60",children:["".concat(r,"% "),g]})},r)}),(0,l.jsx)("button",{className:"text-theme-font-500 dark:text-theme-font-dark-500",children:(0,l.jsx)(ic.Z,{size:20})})]})},iZ=s(33935);let iD=(0,T.Z)("AppWindowMac",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M14 8h.01",key:"1primd"}]]),iz=(0,T.Z)("Combine",[["rect",{width:"8",height:"8",x:"2",y:"2",rx:"2",key:"z1hh3n"}],["path",{d:"M14 2c1.1 0 2 .9 2 2v4c0 1.1-.9 2-2 2",key:"83orz6"}],["path",{d:"M20 2c1.1 0 2 .9 2 2v4c0 1.1-.9 2-2 2",key:"k86dmt"}],["path",{d:"M10 18H5c-1.7 0-3-1.3-3-3v-1",key:"6vokjl"}],["polyline",{points:"7 21 10 18 7 15",key:"1k02g0"}],["rect",{width:"8",height:"8",x:"14",y:"14",rx:"2",key:"1fa9i4"}]]),iO=e=>{let{activeIndex:t,disabled:s,children:r}=e,i=o.Children.toArray(r);return(0,l.jsx)("section",{className:"flex flex-col gap-y-2",children:i.map((e,r)=>{let n=r===i.length-1;return(0,l.jsxs)("div",{className:"flex gap-x-3",children:[!s&&(0,l.jsxs)("div",{className:"flex-none flex flex-col items-center relative overflow-hidden",children:[(0,l.jsx)(ix.e,{className:(0,v.cn)("text-theme-font-400",t>r&&"text-[#02B66F]")}),!n&&(0,l.jsx)("span",{className:"absolute top-6 bottom-1 w-0.5 bg-gray-200 dark:bg-gray-600 rounded-full"})]}),(0,l.jsx)("div",{className:"flex-1",children:e})]},r)})})};iO.Step=e=>{let{label:t,content:s}=e;return(0,l.jsxs)("section",{className:"flex flex-col",children:[(0,l.jsx)("div",{className:"flex-none",children:t}),(0,l.jsx)("div",{className:"flex-1",children:s})]})};var iR=s(93726),iB=e=>{let{items:t,threshold:s=3,renderItem:r,className:i,itemClassName:n}=e,[a,d]=(0,o.useState)(!1);return t.length<=s?(0,l.jsx)("div",{className:(0,v.cn)("flex flex-wrap items-center gap-2",i),children:t.map((e,t)=>(0,l.jsx)("div",{className:n,children:r(e,t)},t))}):(0,l.jsxs)("div",{className:(0,v.cn)("flex flex-wrap items-center gap-2 [&>*]:my-1",i),children:[t.slice(0,s).map((e,t)=>(0,l.jsx)("div",{className:n,children:r(e,t)},t)),a?t.slice(s).map((e,t)=>(0,l.jsx)("div",{className:n,children:r(e,t+s)},t+s)):(0,l.jsxs)("button",{onClick:e=>{e.stopPropagation(),d(!0)},className:"px-3 py-2 flex cursor-pointer items-center rounded-lg bg-theme-bg-300 dark:bg-theme-bg-dark-300 text-theme-font-600 dark:text-theme-font-dark-600 text-xs hover:bg-theme-bg-400 dark:hover:bg-theme-bg-dark-200",children:["+",t.length-s]})]})},iq=e=>{let{reflectionInfo:t,value:s}=e,r=(0,c.useTranslations)(),[i,n]=(0,o.useState)([]),{isMobile:a}=(0,tk.Z)(),d=e=>{n(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},u=e=>{if((0,X.N0)()){(0,s9.oh)({url:e});return}window.open(e,"_blank")},h=e=>{if(!e)return"";try{return new URL(e).hostname}catch(t){return e}};return(0,l.jsx)("div",{className:"mt-0 text-sm",children:t.map((e,n)=>{var o,c,p,m;return(0,l.jsxs)("div",{className:"flex p-2 rounded-lg mt-3 bg-theme-bg-100 dark:bg-theme-bg-dark-100",children:[(0,l.jsxs)("div",{className:"relative flex flex-col items-center",children:[s>70||t.length>n+1?(0,l.jsx)(ix.e,{className:(0,v.cn)("text-theme-font-400 mt-[2px] mr-2",!1)}):(0,l.jsx)("span",{className:"inline-flex w-4 h-4 items-center justify-center mt-[2px] mr-2",children:(0,l.jsx)(iA,{})}),n<t.length-1&&(0,l.jsx)("div",{className:"w-[2px] absolute h-[calc(100%+12px)] top-[18px] left-[7px] -bottom-[15px] bg-[#D9D9D9] dark:bg-gray-600"})]}),(0,l.jsxs)("div",{className:(0,v.cn)("flex flex-col gap-3 flex-1 mr-4",i.includes(n)&&"h-5 line-clamp-1"),children:[(0,l.jsx)("div",{onClick:()=>d(n),className:"flex cursor-pointer text-theme-font-600 dark:text-theme-font-dark-600",children:e.info.reasoning_content}),e.info.query_rewrites&&(null===(o=e.info.query_rewrites)||void 0===o?void 0:o.length)>0&&(0,l.jsx)("div",{className:"flex items-center mt-1 text-sm text-[#9EA7B8]",children:e.final_contexts&&(null===(c=e.final_contexts)||void 0===c?void 0:c.length)>0||s>70||t.length>n+1?r("step.search"):(0,l.jsx)("section",{className:"text-sm",children:(0,l.jsx)(iP,{label:r("step.searching"),labelClassName:"text-sm animate-[shimmer_2s_infinite_linear] bg-clip-text text-transparent bg-gradient-to-r from-theme-font-500 via-theme-font-900 to-theme-font-500 dark:from-theme-font-dark-500 dark:via-theme-font-dark-900 dark:to-theme-font-dark-500 bg-[length:200%_100%]",rewriters:[]})})}),e.info.query_rewrites&&(null===(p=e.info.query_rewrites)||void 0===p?void 0:p.length)>0&&(0,l.jsx)(iB,{items:e.info.query_rewrites,renderItem:e=>(0,l.jsx)("div",{className:"px-3 py-2 rounded-lg bg-theme-bg-300 dark:bg-theme-bg-dark-300 text-theme-font-600 dark:text-theme-font-dark-600 text-xs",children:e}),threshold:a?1:2}),e.final_contexts&&(null===(m=e.final_contexts)||void 0===m?void 0:m.length)>0&&(0,l.jsx)("div",{className:"flex items-center mt-1 text-sm text-[#9EA7B8]",children:s>70||t.length>n+1?r("step.read"):(0,l.jsx)("section",{className:"text-sm",children:(0,l.jsx)(iP,{label:r("step.reading"),labelClassName:"animate-[shimmer_2s_infinite_linear] text-sm bg-clip-text text-transparent bg-gradient-to-r from-theme-font-500 via-theme-font-900 to-theme-font-500 dark:from-theme-font-dark-500 dark:via-theme-font-dark-900 dark:to-theme-font-dark-500 bg-[length:200%_100%]",rewriters:e.final_contexts.map(e=>h(e.link)).filter(Boolean)})})}),e.final_contexts&&e.final_contexts.length>0&&(0,l.jsx)(iB,{items:e.final_contexts,renderItem:e=>(0,l.jsx)(tD.Z,{source:e,rid:e.url,children:(0,l.jsxs)("div",{onClick:()=>"document"!==e.source_type&&e.link&&u(e.link),className:(0,v.cn)("px-3 py-2 flex items-center rounded-lg bg-theme-bg-300 dark:bg-theme-bg-dark-300 text-theme-font-600 dark:text-theme-font-dark-600 text-xs","document"!==e.source_type&&e.link&&"cursor-pointer"),children:[(0,l.jsx)(sK.Z,{src:"https://www.google.com/s2/favicons?domain=".concat(h(e.link),"&sz=",16),title:e.title}),(0,l.jsx)("div",{className:"ml-2",children:"document"===e.source_type?e.title:h(e.link)})]})}),threshold:a?1:2,className:"flex-wrap items-center gap-2"})]}),(0,l.jsx)("button",{onClick:()=>d(n),className:"ml-auto cursor-pointer h-min mt-[4px] text-sm text-theme-font-500 dark:text-theme-font-dark-500",children:i.includes(n)?(0,l.jsx)(iM.Z,{size:16}):(0,l.jsx)(ic.Z,{size:16})})]},n)})})};let iH=(0,T.Z)("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);var iV=o.memo(e=>{let t,{sourcesHtml:s,children:r,sourceItem:i}=e,{isMobile:n}=(0,tk.Z)(),{isOpen:a,onOpen:d,onClose:u}=(0,sL.q)(),h=(0,c.useTranslations)(),[p,m]=(0,o.useState)("top"),f=(0,o.useRef)(null),b=e=>{if(e){var t;let e=null===(t=f.current)||void 0===t?void 0:t.getBoundingClientRect();if(e){let t=window.innerHeight,s=e.top;t-e.bottom>s?m("bottom"):m("top")}}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(tU.e,{delay:0,closeDelay:100,shouldFlip:!0,offset:-2,showArrow:!0,onOpenChange:e=>{b(e)},placement:p,style:{zIndex:10},className:"notranslate p-0 shadow-xl rounded-xl overflow-hidden bg-white dark:bg-theme-bg-dark-300",classNames:{base:"notranslate"},content:(0,l.jsxs)("div",{className:"py-4 pl-4 h-[40vh] w-[400px] border border-gray-200 dark:border-gray-700 rounded-md flex flex-col",children:[s&&"Page not found"!==s&&(0,l.jsx)("div",{className:"absolute p-1 bottom-2 right-2 cursor-pointer hover:bg-gray-100 rounded-md dark:hover:bg-gray-800",onClick:()=>{d()},children:(0,l.jsx)(iH,{className:"w-4 h-4 text-[#667085] dark:text-[#B9BFCA]"})}),(0,l.jsx)("div",{className:"text-base font-bold mb-2",children:null==i?void 0:i.title}),(0,l.jsx)("div",{className:(0,v.cn)("flex-1 custom-scrollbar mr-1 overflow-x-hidden mb-2"),children:s&&"Page not found"!==s?(0,l.jsx)(g.Z,{sources:[],rid:"",loading:!1,isVisible:!0,className:"break-all mr-3",children:s}):h("step.tool.page_not_found")})]}),children:(0,l.jsx)("span",{ref:f,children:r})}),(0,l.jsx)(sn.R,{isOpen:a,onClose:u,size:"3xl",hideCloseButton:!0,children:(0,l.jsxs)(sa.A,{children:[(0,l.jsx)(sl.k,{className:"flex p-0",children:(0,l.jsx)(W.A,{className:"rounded-full ml-auto",isIconOnly:!0,variant:"light",onPress:u,children:(0,l.jsx)(U.Z,{})})}),(0,l.jsxs)(so.I,{className:"py-0 flex flex-col justify-center",children:[(0,l.jsx)("div",{className:"text-lg font-bold mb-1 mt-[-16px]",children:null==i?void 0:i.title}),(0,l.jsx)(tK.j,{className:"h-[2px] bg-gray-200 dark:bg-gray-700"}),(0,l.jsx)("section",{className:"",children:(0,l.jsx)("div",{className:(0,v.cn)("custom-scrollbar overflow-x-hidden",t?"relative":"h-[60vh]"),children:(0,l.jsx)("div",{className:(0,v.cn)("prose prose-md dark:prose-invert max-w-full flex justify-center",x().prose),children:(0,l.jsx)(g.Z,{sources:[],rid:"",loading:!1,isVisible:!0,className:"break-all",children:s})})})})]})]})})]})}),iW=e=>{let{url:t,sourceItem:s}=e;return(0,l.jsx)(iV,{sourcesHtml:(null==s?void 0:s.snippet)||"",sourceItem:s,children:(0,l.jsxs)("div",{onClick:()=>(0,eh.nG)(t||""),className:(0,v.cn)("flex items-center px-3 py-2 rounded-lg bg-theme-bg-300 dark:bg-theme-bg-dark-300 text-theme-font-600 dark:text-theme-font-dark-600 text-xs","cursor-pointer"),children:[(0,l.jsx)(sK.Z,{src:"https://www.google.com/s2/favicons?domain=".concat((0,ib.ge)(null==s?void 0:s.link),"&sz=",16),title:null==s?void 0:s.title,className:"w-5 h-5",hasHtml:null!=s&&!!s.snippet}),(0,l.jsx)("div",{className:"ml-2",children:(0,ib.ge)(t)})]})},t)},iU=e=>{let{tools:t,value:s,sources:r,reflectionAgentAnswer:i}=e,n=(0,c.useTranslations)(),{isMobile:a}=(0,tk.Z)(),[d,u]=(0,o.useState)(()=>t.map((e,t)=>t)),[h,p]=(0,o.useState)(s>70);(0,o.useEffect)(()=>{if(s>70)return;let e=t.length-1;e>0&&u(t=>t.includes(e-1)?[...t]:[...t,e-1])},[t]),(0,o.useEffect)(()=>{if(s>70){p(!0);return}if(!i)return;let e=t.length-1;e>=0&&u(t=>t.includes(e)?[...t]:[...t,e])},[s,i]);let m=(e,t)=>t&&Array.isArray(t)&&t.find(t=>t.link===e)||{url:"",title:"",snippet:""},f=e=>{u(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},x=e=>{if((0,X.N0)()){(0,s9.oh)({url:e});return}window.open(e,"_blank")},g=e=>e.split(/(\[\d+\])/g).map((e,t)=>{let s=e.match(/\[(\d+)\]/);if(s){let i=s[1],n=r[Number(i)-1];return n?(0,l.jsx)("span",{className:"footnote-ref inline-block mx-[2px] my-0 select-none",children:(0,l.jsx)(tD.Z,{source:n,rid:n.url,children:(0,l.jsx)("a",{className:"inline-block leading-normal !text-inherit cursor-pointer no-underline font-medium bg-theme-bg-400  dark:bg-[#3F4961] min-w-4 h-4 text-center rounded-full align-top text-xs",href:n.url,target:"_blank",onClick:e=>{e.preventDefault(),e.stopPropagation(),x(n.url)},children:i})})},t):(0,l.jsx)("span",{children:e},t)}return(0,l.jsx)("span",{children:e},t)});return(0,l.jsxs)("div",{children:[t.filter(e=>e.params).map((e,r)=>{var o,c,u,h,p,x,b,y,w,j;return(0,l.jsxs)("div",{className:(0,v.cn)("mt-2 px-3 py-2 flex bg-theme-bg-100 dark:bg-theme-bg-dark-100 rounded-lg"),children:[(0,l.jsxs)("div",{className:"relative items-center mt-[3px]",children:[s>70||t.length>r+1||i?(0,l.jsx)(ix.e,{className:(0,v.cn)("text-theme-font-400 mt-[2px] mr-3",!1)}):(0,l.jsx)("span",{className:"inline-flex w-4 h-4 items-center justify-center mt-[2px] mr-3",children:(0,l.jsx)(iA,{})}),(r<t.length-1||i)&&(0,l.jsx)("div",{className:"w-[2px] absolute h-[calc(100%+12px)] top-[18px] left-[7px] -bottom-[15px] bg-[#D9D9D9] dark:bg-gray-600"})]}),(0,l.jsxs)("div",{className:(0,v.cn)("flex flex-col rounded-lg mr-8",d.includes(r)?"h-6 overflow-hidden":"rounded-lg"),children:[e.content&&(0,l.jsx)("div",{className:"mb-2",children:(0,l.jsx)("span",{className:(0,v.cn)("text-[#7F94B1] dark:text-[#B9BFCA] whitespace-pre-line text-sm"),children:g(e.content.trim().replace(/\n{2,}/g,"\n"))})}),"web_scraper"===e.name&&(null===(o=e.params)||void 0===o?void 0:o.urls)&&e.params.urls.length>=0&&(0,l.jsx)("span",{className:"text-[#7F94B1] dark:text-[#B9BFCA] text-sm",children:s>70||t.length>r+1||i?n("step.tool.reading_done"):(0,l.jsx)(iP,{label:n("step.reading"),labelClassName:"animate-[shimmer_2s_infinite_linear] text-sm bg-clip-text text-transparent bg-gradient-to-r from-theme-font-500 via-theme-font-900 to-theme-font-500 dark:from-theme-font-dark-500 dark:via-theme-font-dark-900 dark:to-theme-font-dark-500 bg-[length:200%_100%]",rewriters:null===(c=e.params)||void 0===c?void 0:c.urls.map(e=>(0,ib.ge)(e.url)).filter(Boolean)})}),"web_search"===e.name&&(null===(u=e.params)||void 0===u?void 0:u.search_queries)&&e.params.search_queries.length>=0&&(0,l.jsx)("span",{className:"text-[#7F94B1] dark:text-[#B9BFCA] text-sm",children:s>70||t.length>r+1||i?n("step.search"):(0,l.jsx)(iP,{label:n("step.searching"),labelClassName:"animate-[shimmer_2s_infinite_linear] text-sm bg-clip-text text-transparent bg-gradient-to-r from-theme-font-500 via-theme-font-900 to-theme-font-500 dark:from-theme-font-dark-500 dark:via-theme-font-dark-900 dark:to-theme-font-dark-500 bg-[length:200%_100%]",rewriters:null===(h=e.params)||void 0===h?void 0:h.search_queries.filter(Boolean)})}),(0,l.jsx)("div",{className:"flex my-2 overflow-hidden w-full",children:(0,l.jsxs)("div",{className:"text-sm flex flex-wrap gap-2",children:[(null===(p=e.params)||void 0===p?void 0:p.search_queries)&&(null===(x=e.params)||void 0===x?void 0:x.search_queries.length)>0&&(0,l.jsx)(iB,{items:null===(b=e.params)||void 0===b?void 0:b.search_queries,renderItem:(e,t)=>(0,l.jsx)("div",{className:(0,v.cn)("px-3 py-2 rounded-lg bg-theme-bg-300 dark:bg-theme-bg-dark-300 text-theme-font-600 dark:text-theme-font-dark-600 text-xs"),children:(0,l.jsx)("div",{className:"ml-2",children:e})},t),threshold:a?1:2}),(null===(y=e.params)||void 0===y?void 0:y.urls)&&(null===(w=e.params)||void 0===w?void 0:w.urls.length)>0&&(0,l.jsx)(iB,{items:null===(j=e.params)||void 0===j?void 0:j.urls,renderItem:t=>(0,l.jsx)("div",{children:(0,l.jsx)(iW,{url:t.url,sourceItem:m(t.url,e.call_result)})},t.url),threshold:a?1:2})]})},r)]}),(0,l.jsx)("button",{onClick:()=>f(r),className:"text-xs mt-[4px] ml-auto h-max text-theme-font-500 dark:text-theme-font-dark-500",children:d.includes(r)?(0,l.jsx)(iM.Z,{size:16}):(0,l.jsx)(ic.Z,{size:16})})]},r)}),i&&(0,l.jsxs)("div",{className:"mt-2 px-3 py-2 flex bg-theme-bg-100 dark:bg-theme-bg-dark-100 rounded-lg",children:[(0,l.jsx)("div",{className:"relative items-center mt-[3px]",children:s>70?(0,l.jsx)(ix.e,{className:(0,v.cn)("text-theme-font-400 mt-[2px] mr-3","text-[#02B66F]")}):(0,l.jsx)("span",{className:"inline-flex w-4 h-4 items-center justify-center mt-[2px] mr-3",children:(0,l.jsx)(iA,{})})}),(0,l.jsx)("div",{className:(0,v.cn)("flex flex-col rounded-lg mr-8",h?"h-6 overflow-hidden":"rounded-lg"),children:(0,l.jsx)("div",{className:"mb-2",children:(0,l.jsx)("span",{className:(0,v.cn)("text-[#7F94B1] dark:text-[#B9BFCA] whitespace-pre-line text-sm"),children:g(i.trim().replace(/\n{2,}/g,"\n"))})})}),(0,l.jsx)("button",{onClick:()=>p(!h),className:"mt-[4px] ml-auto h-max text-xs text-theme-font-500 dark:text-theme-font-dark-500 ".concat(s>70?"":"invisible"),children:h?(0,l.jsx)(iM.Z,{size:16}):(0,l.jsx)(ic.Z,{size:16})})]})]})};let iG=e=>{let{textArr:t,initStatus:s=!1,errorStatus:r=!1}=e,[i,n]=(0,o.useState)(Array(t.length).fill(s));return(0,o.useEffect)(()=>{let e=[],s=Math.floor(1e3/t.length);return t.forEach((t,r)=>{let i=setTimeout(()=>{n(e=>{let t=[...e];return t[r]=!0,t})},s*r);e.push(i)}),()=>{e.forEach(e=>clearTimeout(e))}},[t.length]),(0,l.jsx)("section",{className:"flex gap-2",children:t.map((e,t)=>(0,l.jsxs)("section",{className:"flex items-center justify-center gap-1",children:[(0,l.jsx)("span",{className:"text-sm text-gray-400 dark:text-gray-300",children:e}),(0,l.jsx)("span",{className:"w-[16px] h-[16px] ".concat(r?"text-red-600":"text-green-600"),children:r?(0,l.jsx)(U.Z,{size:16}):(0,l.jsx)(i$,{initial:!1,isVisible:i[t]})})]},t))})},i$=e=>{let{initial:t=!0,isVisible:s=!1}=e;return(0,l.jsx)(ie.M,{initial:t,children:s&&(0,l.jsx)("svg",{width:"16",height:"16",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:3,stroke:"currentColor",children:(0,l.jsx)(tH.E.path,{initial:{pathLength:0},animate:{pathLength:1},exit:{pathLength:0},transition:{type:"tween",duration:.3,ease:s?"easeOut":"easeIn"},strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})})})};var iY=e=>{let{method:t,query:s,toolsInfo:r,tools:i,languageCount:n,value:a,relevancyInfo:d,rewritersInfo:u,firstSources:h,secondSources:p,queryRewriters:m,onCollapse:f,reasoningText:x,reasoningEnd:g,sources:b,reflectionInfo:y,reflectionAgentAnswer:w,qrInfoUrlExpands:j}=e,k=(0,c.useTranslations)(),{isDark:C}=(0,D.Z)(),_=(0,o.useRef)(null),{isMobile:N}=(0,tk.Z)(),S=(0,o.useRef)(0),[E,T]=(0,o.useState)(!(a>=90)),P=null==r?void 0:r.some(e=>!!e),M=(0,o.useMemo)(()=>!!d&&d.relevancy_model_use,[d]),F=(0,o.useMemo)(()=>!!d&&"Yes"===d.relevancy_model_request,[d]),A=(0,o.useMemo)(()=>!!u&&0!==u.length&&u.some(e=>e.query_rewriter_use),[u]),L=(0,o.useMemo)(()=>m.some(e=>!!e.label),[m]),I=(0,o.useMemo)(()=>m.reduceRight((e,t,s)=>-1===e&&t.rewriters&&t.rewriters.length>0?s:e,-1),[m]),Z=(0,o.useMemo)(()=>a>=100,[a]),O=(0,o.useMemo)(()=>{let e=t&&(0,z.h)(t);return[{key:"understandProblem",text:k("step.understand_problem"),icon:ix.nj,component:()=>(0,l.jsx)("span",{className:"w-full flex flex-nowrap items-center justify-between gap-2 mr-10 overflow-hidden",children:(0,l.jsx)("span",{className:"leading-6 text-sm text-theme-font-500 dark:text-theme-font-dark-500 line-clamp-1",children:"".concat(e?"".concat(k(e)," "):"",'"').concat(s,'"')})})},{key:"tools",text:k("step.execute"),icon:iD,component:()=>(0,l.jsx)("span",{className:"leading-6 text-sm text-theme-font-500 dark:text-theme-font-dark-500",children:k("step.executing")})},{key:"searchNetwork",text:k("step.search_network"),icon:ik.Z,component:()=>(0,l.jsx)("span",{className:"leading-6 text-sm text-theme-font-500 dark:text-theme-font-dark-500",children:h.length?k("step.search_sources",{count:h.length}):d?k("step.searching"):k("no_sources")})},{key:"evaluateQuality",text:k("step.evaluate_quality"),icon:iz,component:()=>F?(0,l.jsx)(iG,{textArr:[k("step.relevance"),k("step.reliability"),k("step.timeliness")],errorStatus:!h.length}):(0,l.jsx)("span",{className:"leading-6 text-sm text-theme-font-500 dark:text-theme-font-dark-500",children:k("step.search_cannot_answer")})},{key:"deepSearch",text:L?k("deep_search"):k("step.deep_search"),icon:ix.fX,component:()=>(0,l.jsx)("span",{className:"leading-6 text-sm text-theme-font-500 dark:text-theme-font-dark-500",children:p.length?(0,l.jsx)("span",{className:"leading-6 text-sm text-theme-font-500 dark:text-theme-font-dark-500",dangerouslySetInnerHTML:{__html:k("step.search_sources_rewriters_done",{count2:'<span class="text-[#101828] dark:text-[#F5F5F6]">'.concat(m?m.map(e=>e.rewriters).flat().length:0,"</span>"),count:'<span class="text-[#101828] dark:text-[#F5F5F6]">'.concat(p.length,"</span>"),language:'<span class="text-[#101828] dark:text-[#F5F5F6]">'.concat(n,"</span>")})}}):Z?k("no_sources"):k("step.searching")})},{key:"introspection",text:k("step.introspection"),icon:iE,component:()=>(0,l.jsx)(l.Fragment,{})},{key:"reasoning",text:k("step.reasoning"),icon:iE,component:()=>(0,l.jsx)(l.Fragment,{})},{key:"answerQuestion",text:k(Z?"step.answer_done":"step.answer_question"),icon:ix.pi,component:()=>(0,l.jsx)("span",{className:"leading-6 text-sm text-theme-font-500 dark:text-theme-font-dark-500",children:k("step.answer_done_desc")})}]},[h,p,m,Z,F,L,x,r]),R=(0,o.useMemo)(()=>{let e=O.length;return(P&&e++,a>=100)?e-1:Math.floor(a/Math.ceil(100/e))},[a]);(0,o.useEffect)(()=>{let e=()=>{var e;if(!_.current)return;let t=document.documentElement.scrollTop;if(t<parseInt(_.current.getAttribute("data-last-scroll")||"0")){_.current.setAttribute("data-last-scroll",t.toString()),T(!1);return}(N?document.documentElement.scrollTop>(null===(e=_.current)||void 0===e?void 0:e.scrollHeight)-240:window.innerHeight+window.scrollY>=document.body.offsetHeight-50)&&a<90&&T(!0),_.current.setAttribute("data-last-scroll",t.toString())};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);let B=()=>{E&&_.current&&a<90&&setTimeout(()=>{var e;let t=document.documentElement.scrollHeight-window.innerHeight-200;(window.scrollY||document.documentElement.scrollTop)<(t=N?((null===(e=_.current)||void 0===e?void 0:e.scrollHeight)||0)-240:t)&&window.scrollTo({top:t,behavior:"smooth"})},100)};return(0,o.useEffect)(()=>{(null==y?void 0:y.length)!==0&&B()},[y]),(0,o.useEffect)(()=>{if(!x)return;let e=x.length,t=S.current;x.length>0&&e-t>=40&&(S.current=e,B())},[x]),(0,o.useEffect)(()=>{10===a&&(T(!0),S.current=0),a>=90&&T(!1)},[a]),(0,l.jsxs)("section",{className:"relative \n        rounded-xl overflow-hidden transition-[height] mb-4\n        border border-[#E4E7EC] dark:border-[#333741]\n        duration-500 ease-in-out ".concat(L?"":"bg-theme-bg-100 dark:bg-theme-bg-dark-100"),ref:_,children:[(0,l.jsx)("button",{className:(0,v.cn)("absolute right-2 p-2 cursor-pointer text-theme-font-500 dark:text-theme-font-dark-500",L?"top-3":"top-2"),onClick:f,children:(0,l.jsx)(iM.Z,{size:20})}),(0,l.jsxs)("div",{children:[L&&(0,l.jsxs)("section",{className:"flex flex-wrap items-center text-base p-4 bg-theme-bg-100 dark:bg-theme-bg-dark-100",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(iR.T,{size:24}),(0,l.jsx)("div",{className:"ml-3 mr-1 text-[#0080FF]",children:"Deep"}),(0,l.jsx)("div",{className:"text-[#101828] dark:text-[#F5F5F6]",children:"Research"})]}),100!==a&&(0,l.jsx)("div",{className:"w-full text-[#0080FF] dark:text-[#0694FF] mt-2 sm:w-auto sm:mt-0 sm:ml-auto sm:mr-8 text-sm flex items-center gap-1 py-1 px-2 rounded-lg",children:(0,l.jsxs)("span",{className:"inline-flex items-center h-4",children:[(0,l.jsx)("span",{className:"w-1 h-1 mx-0.5 rounded-full bg-current animate-loading-dot"}),(0,l.jsx)("span",{className:"w-1 h-1 mx-0.5 rounded-full bg-current animate-loading-dot delay-200"}),(0,l.jsx)("span",{className:"w-1 h-1 mx-0.5 rounded-full bg-current animate-loading-dot delay-400"})]})})]}),(0,l.jsx)("div",{className:"p-4",children:O.map((e,t)=>{if(t>R)return null;let s="searchNetwork"===e.key,n="evaluateQuality"===e.key,o="deepSearch"===e.key,d="reasoning"===e.key,c="introspection"===e.key,u="tools"===e.key;if(!M&&(s||n)||!A&&o||d&&!x||u&&!P||c&&(!y||0===y.length)&&(!i||0===i.length)&&!w)return null;let h=e.icon,p=e.component;return(0,l.jsxs)("section",{className:"flex mb-7 last:mb-0",children:[(0,l.jsx)("section",{className:"flex-none text-theme-blue-500",children:R>t||Z?(0,l.jsx)(h,{size:24}):(0,l.jsx)(tQ.c,{color:C?"white":"default",size:"sm"})}),(0,l.jsxs)("section",{className:"flex-1 flex flex-col min-w-0",children:[(0,l.jsxs)("div",{className:"ml-3 flex-none flex flex-col md:flex-row gap-x-3 gap-y-1",children:[(0,l.jsx)("span",{className:"text-theme-font-900 dark:text-theme-font-dark-900 font-semibold whitespace-nowrap",children:O[t].text}),p&&(0,l.jsx)(p,{})]}),x&&"reasoning"===e.key&&(0,l.jsx)(iL,{reasoningText:x,reasoningEnd:g,value:a,sources:b}),u&&(0,l.jsx)("section",{className:"ml-3 mt-3",children:(0,l.jsx)(iO,{activeIndex:(null==r?void 0:r.length)||-1,children:null==r?void 0:r.map((e,t)=>(0,l.jsx)(iO.Step,{label:(0,l.jsx)("p",{className:"mb-2 text-sm text-theme-font-500 dark:text-theme-font-dark-500",children:e})},t))})}),y&&"introspection"===e.key&&(0,l.jsx)(iq,{value:a,reflectionInfo:y}),(i||w)&&"introspection"===e.key&&(0,l.jsx)(iU,{tools:i,value:a,sources:b,reflectionAgentAnswer:w}),o&&(0,l.jsx)("section",{className:"ml-3 mt-3",children:(0,l.jsxs)(iO,{disabled:!L,activeIndex:I+1,children:[m.map((e,s)=>{let r=!!e.label&&I===s&&R===t&&!!e.rewriters.length;return(0,l.jsx)(iO.Step,{label:e.label&&(0,l.jsx)("p",{className:"mb-2 text-sm text-theme-font-500 dark:text-theme-font-dark-500",children:e.label}),content:(0,l.jsxs)("section",{children:[(0,l.jsx)("section",{className:(0,v.cn)("flex flex-wrap items-center gap-2",s===m.length-1?"mb-0":"mb-3"),children:(0,l.jsx)(iB,{items:e.rewriters,renderItem:e=>(0,l.jsx)("span",{className:"px-3 py-2 rounded-lg bg-theme-bg-300 dark:bg-theme-bg-dark-300 text-theme-font-600 dark:text-theme-font-dark-600 text-xs",children:e}),threshold:N?1:2})}),r&&(0,l.jsx)("section",{className:"text-sm my-3",children:(0,l.jsx)(iP,{label:k("step.reading"),labelClassName:"animate-[shimmer_2s_infinite_linear] bg-clip-text text-transparent bg-gradient-to-r from-theme-font-500 via-theme-font-900 to-theme-font-500 dark:from-theme-font-dark-500 dark:via-theme-font-dark-900 dark:to-theme-font-dark-500 bg-[length:200%_100%]",rewriters:e.rewriters})})]})},s)}),(null==j?void 0:j.length)>0&&(0,l.jsx)(iO.Step,{label:(0,l.jsx)("p",{className:"mb-2 text-sm text-theme-font-500 dark:text-theme-font-dark-500",children:k("step.tool.reading_done")}),content:(0,l.jsx)("section",{className:(0,v.cn)("flex text-theme-font-500 dark:text-theme-font-dark-500 flex-wrap items-center gap-2","mb-0"),children:(0,l.jsx)(iB,{items:j,renderItem:e=>(0,l.jsx)("div",{className:"text-theme-font-500 dark:text-theme-font-dark-500",children:(0,l.jsx)(iW,{url:e.link,sourceItem:e})},e.link),threshold:N?1:2})})})]})})]})]},t)})})]}),(0,l.jsx)("div",{className:"absolute left-0 bottom-0 w-full transition-[opacity] duration-800 ease-in-out ".concat(a>=100?"opacity-0":"opacity-1"),children:(0,l.jsx)(iZ.W,{"aria-label":"answerSteps",classNames:{base:"dark:bg-[#394860]",track:"dark:bg-[#394860]",indicator:"dark:bg-[#2468D8]"},size:"sm",value:a})})]})},iJ=e=>{let{defaultExpanded:t,defaultDiscoveryModeStyle:s,query:r,tools:i,category:n,languageCount:a,processValue:d,queryPlans:u,relevancyInfo:h,rewritersInfo:p,firstSources:m,secondSources:f,reasoningText:x,reasoningEnd:v,sources:g,reflectionInfo:b,reflectionAgentAnswer:y,qrInfoUrlExpands:w,topicTools:j}=e,k=(0,c.useTranslations)(),[C,_]=(0,o.useState)(!1),N=(0,o.useRef)(null),[S,E]=(0,o.useState)(!1),T=(0,o.useMemo)(()=>p&&0!==p.length?u.length>0?u.map(e=>{var t;return{label:e.query,rewriters:(null===(t=p.find(t=>t.plan_id===e.id))||void 0===t?void 0:t.rewriters)||[]}}):p.map(e=>({label:s?r:"",rewriters:e.rewriters})):[],[p,u]),P=(0,o.useMemo)(()=>j.filter(e=>"ppt_render"!==e.name).map(e=>{var t,s,r,i,n,a,l,o,d,c;switch(e.name){case"web_scraper":return k("step.tool.web_scraper",{urls:null===(s=e.params)||void 0===s?void 0:null===(t=s.urls)||void 0===t?void 0:t.join(",")});case"web_search":return k("step.tool.web_search",{queries:null===(i=e.params)||void 0===i?void 0:null===(r=i.search_queries)||void 0===r?void 0:r.join(",")});case"website_search":return k("step.tool.website_search",{sites:null===(a=e.params)||void 0===a?void 0:null===(n=a.sites)||void 0===n?void 0:n.join(","),queries:null===(o=e.params)||void 0===o?void 0:null===(l=o.search_queries)||void 0===l?void 0:l.join(",")});case"knowledge_base_retrieval":return k("step.tool.knowledge_base_retrieval",{queries:null===(c=e.params)||void 0===c?void 0:null===(d=c.search_queries)||void 0===d?void 0:d.join(",")});default:return""}}),[j,k]);return(0,o.useEffect)(()=>{t&&_(!0)},[t]),(0,o.useEffect)(()=>{(80===d||70===d)&&(_(!0),E(!0))},[d]),(0,o.useEffect)(()=>{S&&v&&(_(!1),E(!1),setTimeout(()=>{if(N.current){let e=N.current.getBoundingClientRect().top;if(e<0){let t=e+window.scrollY-window.innerHeight/2-100;window.scrollTo({top:t,behavior:"smooth"})}}},200))},[S,v]),(0,l.jsx)("div",{className:"mb-6",ref:N,children:C?(0,l.jsx)(iY,{query:r,method:n,languageCount:a,value:d,tools:i,toolsInfo:P,relevancyInfo:h,rewritersInfo:p,firstSources:m,secondSources:f,queryRewriters:T,onCollapse:()=>_(!1),reasoningText:x,reasoningEnd:v,sources:g,reflectionInfo:b,reflectionAgentAnswer:y,qrInfoUrlExpands:w}):(0,l.jsx)(iI,{query:r,method:n,tools:i,step:d,toolsInfo:P,rewriters:T,firstSourcesCount:m.length,secondSourcesCount:f.length,onExpand:()=>_(!0),reasoningText:x})})},iX=s(91980),iK=s(7363),iQ=s(44342),i0=s(51054),i1=s(45360),i2=s(24213),i3=e=>{var t,s,r,i;let{shortId:n}=e,a=(0,c.useTranslations)(),d=(0,w.useRouter)(),{isMobile:u}=(0,iQ.b)(),h=(0,tR.ZP)(e=>e.isLogin),{isMyThread:p,setIsShowPptModal:m,setCoverUrl:f,setBesinessId:x,setBusinessType:v,setPreviewPPTData:g}=(0,tN.Z)(),{pptDetail:b,setPptDetail:y,setPptStatus:j,pptModalType:k,setPptModalType:C,clearUpdateGeneratePptProgress:_,setGeneratePptProgress:N,generatePptProgress:S,isLoadingButton:E,setIsLoadingButton:T,pptGenerateStatusList:P}=(0,tT.Z)(),M=(0,tM.Z)(),F=async e=>{let{key:t}=e;if(console.log("handleBtnPress key",t),(0,st.Dt)()&&!(0,st.uv)(109)&&(M.default(a("ppt.generate_ppt_tip")),await (0,tP.gw)(3e3)),"generate"===t){if((0,H.fk)(q.U.GENERATE_PPT,{value:"generate"},!0),b&&(null==b?void 0:b.status)!==tP.nV.SUCCESS&&(null==b?void 0:b.status)!==tP.nV.TIMEOUT){M.default(a("ppt.generating_ppt_tip"));return}N(0),m(!0),x(n),C("generate"),j("init");return}if("preview"===t){if((0,H.fk)(q.U.PREVIEW_PPT,{value:"preview"},!0),(null==b?void 0:b.status)===tP.nV.TIMEOUT){M.default(a("ppt.generate_failure_tip"));return}if((null==b?void 0:b.status)!==tP.nV.SUCCESS){M.default(a("ppt.generating_ppt_tip"));return}N(100),j("preview"),x(n),v(tP.LB.THREAD),g(b),m(!0),_();return}},A=async()=>{var e;if(console.log("generate-ppt-mobile-button init",n),(0,tP.F_)(),y(null),N(0),m(!1),f(""),!n)return;let t=await (0,tP.OW)({threadId:n}),s=await (0,i1.AG)({threadId:n}),r=null==s?void 0:null===(e=s.data)||void 0===e?void 0:e.new_api_ppt;if(r){y({cover_url:(null==r?void 0:r.cover_url)||(null==t?void 0:t.coverUrl),ppt_url:(null==r?void 0:r.ppt_url)||(null==t?void 0:t.pptUrl),pdf_url:(null==r?void 0:r.pdf_url)||(null==t?void 0:t.pdfUrl),status:null==r?void 0:r.status}),(0,tP.bs)({threadId:n,isProgress:!0}),T(!1);return}let i=await (0,i1.TK)({threadId:n});if((0,tP.Qr)(i)){T(!1),y(null);return}if(!(null==i?void 0:i.pdf_url)){y({cover_url:(null==i?void 0:i.cover_url)||(null==t?void 0:t.coverUrl),ppt_url:(null==i?void 0:i.ppt_url)||(null==t?void 0:t.pptUrl),pdf_url:(null==i?void 0:i.pdf_url)||(null==t?void 0:t.pdfUrl),status:tP.nV.PROGRESS}),T(!1);return}(0,tP.bs)({threadId:n,expiryTime:Date.now()+348e4,pptUrl:null==i?void 0:i.ppt_url,pdfUrl:null==i?void 0:i.pdf_url,coverUrl:null==i?void 0:i.cover_url,progress:100}),y({cover_url:null==i?void 0:i.cover_url,ppt_url:null==i?void 0:i.ppt_url,pdf_url:null==i?void 0:i.pdf_url,status:tP.nV.SUCCESS}),T(!1)};return((0,o.useEffect)(()=>{p?(null==b?void 0:b.pdf_url)?C("preview"):C("generate"):(null==b?void 0:b.pdf_url)&&C("preview")},[p,b]),(0,o.useEffect)(()=>{A()},[n]),(0,o.useEffect)(()=>{let e=e=>{0!==S&&!(S>75)&&(e.preventDefault(),e.returnValue="",S<=75&&(0,tP.om)({threadId:n}))};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[S]),(0,o.useEffect)(()=>{let e=e=>{if(0!==S&&!(S>75)){if(!window.confirm(a("ppt.beforeunload_title")))throw d.events.emit("routeChangeError"),"cancal route change";S<=75&&(0,tP.om)({threadId:n})}};return d.events.on("routeChangeStart",e),()=>{d.events.off("routeChangeStart",e)}},[d.events,S]),E)?null:p&&h||(null==b?void 0:b.pdf_url)?(0,l.jsx)(l.Fragment,{children:(S>0&&S<100||(null==P?void 0:null===(t=P[n])||void 0===t?void 0:t.progress)&&(null==P?void 0:null===(s=P[n])||void 0===s?void 0:s.progress)>0&&(null==P?void 0:null===(r=P[n])||void 0===r?void 0:r.progress)<100)&&(null==b?void 0:b.status)&&(null==b?void 0:b.status)!==tP.nV.SUCCESS&&(null==b?void 0:b.status)!==tP.nV.TIMEOUT?(0,l.jsx)(i0.Z,{"aria-label":"Loading...",className:"mx-1",valueLabel:(0,l.jsx)(i2.$U,{className:"w-3.5 h-3.5"}),showValueLabel:!0,size:"sm",value:S||(null==P?void 0:null===(i=P[n])||void 0===i?void 0:i.progress)||0,onClick:()=>{F({key:k})}}):(0,l.jsx)(G.z,{id:"pptGenerate",variant:u?"ghost":"outline-primary",size:"icon-sm",onClick:()=>{F({key:k})},children:(0,l.jsx)(i2.$U,{className:"w-6 h-6"})})}):null},i5=s(29499),i7=s(88485),i6=s(12045),i4=e=>{var t;let{thread:s}=e,r=(0,c.useTranslations)(),i=(0,o.useMemo)(()=>{var e;return(null===(e=s.recall_contexts)||void 0===e?void 0:e.length)>0?s.recall_contexts[0]:null},[null===(t=s.recall_contexts)||void 0===t?void 0:t.length]);return i?(0,l.jsx)("section",{className:"flex mb-6",children:(0,l.jsxs)("div",{className:"flex items-center gap-2 bg-blue-50 dark:bg-sky-950 rounded-lg px-3 py-2 w-fit",onClick:()=>{(0,s9.ZB)({type:"audio",id:null==i?void 0:i.other_info.file_id})},children:[(0,l.jsx)(sN.p5,{className:"w-7 h-7 text-blue-500"}),(0,l.jsxs)("div",{className:"flex flex-col gap-1 text-sm ",children:[(0,l.jsxs)("span",{className:"text-gray-800 dark:text-gray-200",children:[i.title," ",r("record")]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[(0,l.jsx)(i7.Z,{className:"w-4 h-4"}),(0,l.jsx)("span",{className:"text-xs",children:(0,i6.t)(i.other_info.duration)})]})]})]})}):null},i8=s(70262),i9=s(57231),ne=s(4814),nt=s(42395),ns=e=>{let{query:t,canEdit:s,onEditClick:r}=e,i=(0,c.useTranslations)(),{copy:n,copied:a}=(0,tW.V)(),[d,u]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!1),m=(0,o.useRef)(null);return(0,o.useEffect)(()=>{let e=()=>{m.current&&p(m.current.scrollHeight>200)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),(0,l.jsx)("div",{className:"w-full mb-8",children:(0,l.jsx)("h1",{className:"flex group justify-end items-center gap-2 text-base dark:text-white",children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("div",{className:"bg-[#F6F7F9] dark:bg-[#353B46] rounded-xl overflow-hidden",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("pre",{ref:m,className:"m-4 whitespace-pre-wrap break-words text-inherit ".concat(d?"":"max-h-[196px] overflow-hidden"),children:t}),h&&!d&&(0,l.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-[48px] bg-[#F6F7F9]/70 dark:bg-[#353B46]/40 pointer-events-none"})]}),h&&(0,l.jsx)("div",{className:"px-4 pb-3",children:(0,l.jsx)("div",{onClick:()=>u(!d),className:"w-full cursor-pointer text-left text-sm text-[#0080FF] dark:text-[#0694FF] transition-colors flex items-center gap-1",children:i(d?"show_less":"show_more")})})]}),(0,l.jsxs)("div",{className:"absolute flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bottom-[-26px] right-0 rounded-xl",children:[s&&(0,l.jsx)(tU.e,{placement:"bottom",content:i("rewrite_query_desc"),children:(0,l.jsx)("div",{className:"pr-2 cursor-pointer",onClick:r,children:(0,l.jsx)(nt.Z,{size:16,className:"text-[#7F94B1] dark:text-[#B9BFCA]"})})}),(0,l.jsx)(tU.e,{content:i("copy"),placement:"bottom",children:(0,l.jsx)("div",{className:"pl-2 cursor-pointer",onClick:()=>{n(t)},children:a?(0,l.jsx)(t$.Z,{size:16,color:"#4ba570"}):(0,l.jsx)(tY.Z,{size:16,className:"text-[#7F94B1] dark:text-[#B9BFCA]"})})})]})]})})})},nr=s(2839),ni=s(41250),nn=s(82550),na=s(20271),nl=s(46264),no=s(13288),nd=s(57434),nc=s(75450),nu=s(6229),nh=s(77774),np=s(66336),nm=s(35030),nf=s(44634),nx=s(57937),nv=s(71887);let ng=(0,T.Z)("SquareMousePointer",[["path",{d:"M21 11V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6",key:"14rsvq"}],["path",{d:"m12 12 4 10 1.7-4.3L22 16Z",key:"64ilsv"}]]);var nb=s(21133),ny=s(1167),nw=s(13366),nj=e=>{let{thread:t,pptData:s,outline:r,autoShowPPT:i,setAutoShowPPT:n,template:a}=e,{isShowPptModal:d,setIsShowPptModal:u,setBesinessId:h,setAgentOutline:p,setIsGeneratedSuccess:m,isGeneratedSuccess:f,generateType:x,setUiModalType:v,setIsRegenerate:g,setBusinessType:b,setPreviewPPTData:y,businessId:w,setPptGenerateStep:j,setPPTLanguage:k}=(0,tN.Z)(),{threads:C,isMyThread:N}=(0,_.Z)(),{setPptStatus:S,pptStatus:E,pptDetail:T}=(0,tT.Z)(),P=(0,nf.Z)();(0,c.useLocale)();let M=(0,c.useTranslations)(),F=(0,tR.ZP)(e=>e.isLogin),[A,L]=(0,o.useState)(),{isMobile:I}=(0,tk.Z)(),Z=(0,tM.Z)(),D=(0,o.useRef)(null),z=(0,Y.GS)("pptUsage"),R=(0,Y.Oi)("pptUsage"),B=(0,o.useMemo)(()=>{var e,s;return t.id?(null==r?void 0:null===(s=r.match(/# (.*)/))||void 0===s?void 0:null===(e=s[0])||void 0===e?void 0:e.replace("# ",""))||"PPT":M("agentPPT.ppt_loading_tip")},[r,t.id]),{language:V}=(0,nw.Z)();(0,o.useEffect)(()=>{m(!1)},[]);let U=(0,o.useCallback)(async()=>{if(t.id)try{let e=await (0,i1.OQ)({thread_id:t.id,businessType:tP.LB.MESSAGE});L(e),!(null==e?void 0:e.cover_url)&&i&&t.answer&&setTimeout(()=>{X(),n(!1)},100)}catch(e){console.error("Failed to fetch PPT cache:",e),Z.error(M("error.fetch_failed"))}},[F,t.id,i,t.answer]);(0,o.useEffect)(()=>{U()},[U]),(0,o.useEffect)(()=>{F&&(m(!1),U())},[F,t.id]);let G=(0,o.useCallback)(()=>{var e;if(!(null==t?void 0:null===(e=t.template)||void 0===e?void 0:e.sub_topics))return!1;let s=t.template.sub_topics.find(e=>(null==e?void 0:e.title)==="ppt_generation");return null!=s&&!!s.tools&&s.tools.some(e=>(null==e?void 0:e.name)==="ppt_render")},[null==t?void 0:t.template]),J=async()=>{let{subscriptionInfo:e}=Y.ZP.getState();return!!e&&(!!R||!(!z||await (0,i1.jF)({threadId:t.id,businessType:tP.LB.MESSAGE})<=0)||($.$.publish("showSubscriptionPlan",void 0),!1))},X=(0,o.useCallback)(async()=>{let e=G();if(!r&&!e){Z.default(M("generating"));return}if(t.id){n(!1);try{if(!N){Z.default(M("agentPPT.ppt_not_generated_sharer"));return}if(!await J()){i_.Z.info(M("ppt.usage_limit")),Z.default(M("agentPPT.ppt_quota_used_up_upgrade_plan"));return}if(e){let e=_.Z.getState().threads,t=null==e?void 0:e.map(e=>{var t,s;return tP.OA.includes(null==e?void 0:e.category)||e.category===O.J5?"\n              Source:".concat(null==e?void 0:null===(s=e.recall_contexts)||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.snippet,"\n              Query:").concat(null==e?void 0:e.query,"\n              Answer:").concat(null==e?void 0:e.answer,"\n              "):"\n              Query:".concat(null==e?void 0:e.query,"\n              Answer:").concat(null==e?void 0:e.answer)}).join("\n");k((0,eh._p)(V)),j(1),p(t),console.log("\uD83C\uDF4E ~ openPPT ~ str:",t)}else j(2),p(r);b(tP.LB.MESSAGE),S("generate"),v("generate"),h(t.id),u(!0),(0,H.fk)(q.U.GENERATE_PPT,{value:"generate"},!0)}catch(e){}}},[t.id,r,N,a,C,t]);(0,o.useEffect)(()=>{t.id&&f&&t.id===tN.Z.getState().businessId&&(P.pollLastPpt({threadId:t.id,businessType:tP.LB.MESSAGE,onPollingResult:e=>{e&&L(e)}}).then(e=>{L(e)}).catch(e=>{console.error("Failed to poll PPT:",e),Z.error(M("error.poll_failed"))}),m(!1))},[f,t.id]);let K=(0,o.useCallback)(()=>{if(!A||2!==A.status){Z.default(M("ppt.generating_tip"));return}if(!N&&2!==A.status){Z.default(M("agentPPT.ppt_not_generated_sharer"));return}try{b(tP.LB.MESSAGE),S("preview"),v("preview"),y(A),g(!1),h(t.id),u(!0)}catch(e){console.error("Failed to preview PPT:",e),Z.error(M("error.preview_failed"))}},[t.id,A,N]),Q=async()=>{try{var e;null===(e=D.current)||void 0===e||e.openCanvaEditor()}catch(e){console.error("Failed to import to Canva:",e),Z.error(M("error.canva_import_failed"))}};return(null==A?void 0:A.cover_url)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"py-4",children:M("agentPPT.desc")}),(0,l.jsx)("div",{className:"flex flex-wrap gap-4 py-1 md:py-4 w-full",children:(0,l.jsxs)("div",{className:(0,np.cn)("flex-1 flex flex-col mb-8","border border-gray-200 dark:border-gray-800 rounded-lg","transition-all duration-300 hover:border-blue-300 dark:hover:border-blue-800"),children:[(0,l.jsxs)("div",{className:"flex-none flex items-center justify-between p-4",children:[(0,l.jsx)("div",{className:"text-xl font-medium",children:M("ppt.title")}),(0,l.jsxs)("div",{className:"flex items-center justify-around gap-2",children:[N&&(0,l.jsx)(ny.pn,{children:(0,l.jsxs)(ny.u,{children:[(0,l.jsx)(ny.aJ,{asChild:!0,children:(0,l.jsx)(W.A,{size:"sm",className:"bg-gray-100 dark:bg-gray-900 text-gray-500 dark:text-gray-400",onClick:()=>{if(!A){Z.default(M("ppt.generating_tip"));return}try{b(tP.LB.MESSAGE),y(A),S("preview"),v("edit"),g(!1),h(t.id),u(!0)}catch(e){console.error("Failed to edit PPT:",e),Z.error(M("error.edit_failed"))}},startContent:(0,l.jsx)(nx.Z,{size:16}),isIconOnly:!0})}),(0,l.jsx)(ny._v,{side:"top",children:(0,l.jsx)("p",{children:M("edit")})})]})}),(null==A?void 0:A.status)===2&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ny.pn,{children:(0,l.jsxs)(ny.u,{children:[(0,l.jsx)(ny.aJ,{asChild:!0,children:(0,l.jsx)(W.A,{size:"sm",className:"bg-gray-100 dark:bg-gray-900 text-gray-500 dark:text-gray-400",onClick:K,startContent:(0,l.jsx)(tg,{size:16}),isIconOnly:!0})}),(0,l.jsx)(ny._v,{side:"top",children:(0,l.jsx)("p",{children:M("preview_full_version")})})]})}),(0,l.jsx)(ny.pn,{children:(0,l.jsxs)(ny.u,{children:[(0,l.jsx)(ny.aJ,{asChild:!0,children:(0,l.jsx)(W.A,{size:"sm",className:"bg-gray-100 dark:bg-gray-900 text-gray-500 dark:text-gray-400",onClick:()=>{(null==A?void 0:A.ppt_url)?window.open(A.ppt_url):Z.default(M("ppt.generating_ppt_tip"))},startContent:(0,l.jsx)(nv.Z,{size:16}),isIconOnly:!0})}),(0,l.jsx)(ny._v,{side:"top",children:(0,l.jsx)("p",{children:M("ppt.download")})})]})}),N&&(0,l.jsx)(ny.pn,{children:(0,l.jsxs)(ny.u,{children:[(0,l.jsx)(ny.aJ,{asChild:!0,children:(0,l.jsx)(W.A,{size:"sm",className:"bg-gray-100 dark:bg-gray-900 text-gray-500 dark:text-gray-400",onClick:Q,startContent:(0,l.jsx)(nb.rc,{}),isIconOnly:!0})}),(0,l.jsx)(ny._v,{side:"top",children:(0,l.jsx)("p",{children:M("ppt.edit_in_canva")})})]})})]})]})]}),(0,l.jsx)("div",{className:"flex-1 overflow-hidden flex items-center justify-center px-4 pb-4",children:(0,l.jsx)("img",{src:A.cover_url,className:(0,np.cn)("flex-1 object-cover max-w-full rounded-lg cursor-pointer "),onClick:K})})]})}),(0,l.jsx)(nm.Z,{threadId:t.id,ref:D,businessType:tP.LB.MESSAGE})]}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"cursor-pointer",style:{cursor:t.id?"pointer":"not-allowed",opacity:t.id?1:.5},children:[(0,l.jsx)("div",{className:"py-4",children:M("agentPPT.desc")}),(0,l.jsxs)("div",{className:"relative p-4 flex rounded-xl overflow-hidden transition-[height] mb-4 border border-[#E4E7EC] dark:border-[#333741] duration-500 ease-in-out bg-theme-bg-100 dark:bg-theme-bg-dark-100",onClick:X,children:[(null==A?void 0:A.status)===3?(0,l.jsx)("div",{className:"flex items-center justify-center px-[16px] box-border",children:(0,l.jsx)(t6,{size:32})}):(0,l.jsx)("div",{className:"flex items-center justify-center px-[16px] box-border",children:t.id?(0,l.jsx)(ng,{size:32}):(0,l.jsx)(tQ.c,{})}),(0,l.jsxs)("div",{className:"ml-2",children:[(0,l.jsx)("div",{className:"text-[18px] font-bold",children:B}),(0,l.jsx)("div",{className:"text-[#0080FF] text-[16px] mt-[12px] underline",children:(null==A?void 0:A.status)===3?M("ppt.generate_failure_tip"):M("agentPPT.click")})]})]})]})})},nk=e=>{let{switchLabel:t,delay:s=500,type:r}=e,i=(0,c.useTranslations)(),[n,a]=(0,o.useState)(r?i("mcp"===r?"step.tool.invoke_mcp_tool":"sandbox"===r?"step.tool.invoke_code_sandbox_tool":"step.tool.invoking_tool"):t);return(0,o.useEffect)(()=>{let e=setTimeout(()=>{a(t)},s);return()=>clearTimeout(e)},[t,s]),(0,l.jsx)(iP,{label:n,labelClassName:"animate-[shimmer_2s_infinite_linear] text-sm bg-clip-text text-transparent bg-gradient-to-r from-theme-font-500 via-theme-font-900 to-theme-font-500 dark:from-theme-font-dark-500 dark:via-theme-font-dark-900 dark:to-theme-font-dark-500 bg-[length:200%_100%]",rewriters:[]})},nC=s(25339);let n_=e=>{let{isCompleted:t,toolName:s,searchItem:r}=e,i=(0,c.useTranslations)();return(0,l.jsxs)("div",{className:"text-[#98A2B3] flex items-center my-2",children:[t?(0,l.jsx)(ix.e,{className:"text-theme-font-400 flex-shrink-0 w-4 h-4 mt-[2px] mr-2"}):(0,l.jsx)("span",{className:"inline-flex flex-shrink-0 w-4 h-4 items-center justify-center mt-[2px] mr-2",children:(0,l.jsx)(iA,{})}),((e,t)=>{switch(e){case"web_search":default:return i("step.tool.web_search",{queries:t});case"knowledge_base_retrieval":return i("step.tool.knowledge_base_retrieval",{queries:t});case"web_scraper":case"web_reader":return i("step.tool.web_scraper",{urls:t});case"website_search":return i("step.tool.website_search",{sites:"",queries:t})}})(s,r)]})},nN=e=>{let{isCompleted:t,toolName:s,searchItem:r,sourcesHtml:i,isTemplate:n,sourceItem:a}=e,o=(0,c.useTranslations)(),{isMobile:d}=(0,tk.Z)(),{setSourcesHtml:u,setIsShowMobileSource:h,setIsShowAgentSources:p}=(0,F.Z)(),m=e=>{if((0,X.N0)()){(0,s9.oh)({url:e});return}window.open(e,"_blank")};return(0,l.jsxs)("div",{className:"text-[#98A2B3] w-full flex items-center my-2",children:[t?(0,l.jsx)(ix.e,{className:"text-theme-font-400 flex-shrink-0 w-4 h-4 mt-[2px] mr-2"}):(0,l.jsx)("span",{className:"inline-flex flex-shrink-0 w-4 h-4 items-center justify-center mt-[2px] mr-2",children:(0,l.jsx)(iA,{})}),(0,l.jsxs)("div",{className:"flex items-center gap-2 w-[calc(100%-30px)]",children:[(0,l.jsx)("span",{className:"flex-shrink-0",children:o(t?"step.tool.reading_webpage_done":"step.tool.reading_webpage")}),n?(0,l.jsx)("div",{onClick:()=>(0,eh.nG)(r),className:"flex-1 md:flex-none md:max-w-[60%] text-[#98A2B3] cursor-pointer underline hover:text-blue-500 overflow-hidden whitespace-nowrap text-ellipsis",children:r}):(0,l.jsx)(iV,{sourcesHtml:i,sourceItem:a,children:(0,l.jsx)("div",{className:"flex-1 md:flex-none md:max-w-[70%] text-[#98A2B3] cursor-pointer underline hover:text-blue-500 overflow-hidden whitespace-nowrap text-ellipsis",onClick:e=>{e.preventDefault(),e.stopPropagation(),m(r)},children:r})}),i&&n&&(0,l.jsx)("div",{onClick:()=>{u(i),d?h(!0):p(!0)},className:"flex-shrink-0 bg-[#E9EEFF] text-black dark:text-white p-1 text-xs dark:bg-gray-500 rounded-lg cursor-pointer text-sm ",children:o("step.tool.view_source")})]})]})},nS=e=>{var t,s,r,i,n,a,d,u,h,p,m;let{item:f,value:x,toolsLength:v,index:g,markdown:b}=e,y=(0,c.useTranslations)(),w=(e,t)=>{if(!t)return"";if(Array.isArray(t)){var s;return(null===(s=t.find(t=>t.link===e))||void 0===s?void 0:s.snippet)||""}return t},j=(e,t)=>{if(t&&Array.isArray(t))return t.find(t=>t.link===e)},k=(0,o.useMemo)(()=>e=>{var t,s,r;let{...i}=e,n=(0,tW.V)(),a=(0,o.useRef)(null),d=(null==i?void 0:null===(r=i.children)||void 0===r?void 0:null===(s=r.props)||void 0===s?void 0:null===(t=s.className)||void 0===t?void 0:t.replace("hljs language-",""))||"";return(0,l.jsxs)("pre",{ref:a,className:"w-full relative whitespace-break-spaces",children:[(0,l.jsxs)("div",{className:"text-bold text-sm ml-3 mb-2 flex items-center",children:[(0,l.jsx)(nb.pT,{className:"h-4 w-4 mr-2"}),d||""]}),(0,l.jsx)(W.A,{isIconOnly:!0,size:"sm",className:"absolute top-2 right-2 text-white",variant:"light",onPress:()=>{if(a.current){let e=a.current.innerText;n.copy(e)}},children:n.copied?(0,l.jsx)(t$.Z,{size:16,color:"#4ba570"}):(0,l.jsx)(tY.Z,{size:14})}),i.children]})},[]);return(0,l.jsxs)(l.Fragment,{children:[(null===(t=f.params)||void 0===t?void 0:t.search_queries)&&(null===(r=f.params)||void 0===r?void 0:null===(s=r.search_queries)||void 0===s?void 0:s.map((e,t)=>(0,l.jsx)(n_,{isCompleted:100===x||v>g+1||!!b,toolName:f.name,searchItem:e},t))),(null===(i=f.params)||void 0===i?void 0:i.urls)&&(null===(a=f.params)||void 0===a?void 0:null===(n=a.urls)||void 0===n?void 0:n.map((e,t)=>(0,l.jsx)(nN,{isCompleted:100===x||v>g+1||!!b,sourcesHtml:w(e.url,f.call_result),sourceItem:j(e.url,f.call_result),toolName:f.name,searchItem:e.url,isTemplate:!0},t))),(null===(d=f.params)||void 0===d?void 0:d.url)&&(0,l.jsx)(nN,{isCompleted:100===x||v>g+1||!!b,sourcesHtml:f.call_result,toolName:f.name,searchItem:null===(u=f.params)||void 0===u?void 0:u.url,isTemplate:!0}),"mcp"===f.tool_type&&f.name&&(0,l.jsxs)("div",{className:"text-[#98A2B3] flex items-center my-2",children:[100===x||v>g+1||b?(0,l.jsx)(ix.e,{className:"text-theme-font-400 mt-[2px] mr-2"}):(0,l.jsx)("span",{className:"inline-flex w-4 h-4 items-center justify-center mt-[2px] mr-2",children:(0,l.jsx)(iA,{})}),y("step.tool.fetching_data",{name:f.name})]}),(null===(h=f.params)||void 0===h?void 0:h.code)&&(0,l.jsx)(rA.U,{remarkPlugins:[nu.Z,nc.Z,nd.Z,ni.Z,nn.Z,na.Z],rehypePlugins:[nh.Z,no.Z,[nl.Z,{detect:!1,ignoreMissing:!0}],nr.Z],components:{pre:k},children:(e=>{try{let t=(0,sH.k5)((0,sH.SK)(e||""));return(t="".replace("",t)).replace(/^(\d+)\.(\s)/gm,"\n$1\\. ")}catch(t){return console.error("Error in escapedContent:",t),e||""}})("```".concat((null===(p=f.params)||void 0===p?void 0:p.language)||"","\n").concat(null===(m=f.params)||void 0===m?void 0:m.code,"\n```"))})]})};var nE=e=>{let{tools:t,value:s,markdown:r,thread:i,autoShowPPT:n,setAutoShowPPT:a,sources:d,isTemplate:u=!0}=e,h=(0,c.useTranslations)(),p=(0,_.Z)(e=>e.threads),m=(0,F.Z)(e=>e.extensionEnable),[f,x]=(0,o.useState)(t.map(()=>!1)),[g,b]=(0,o.useState)(!!r);(0,o.useEffect)(()=>{b(!!r)},[r]),(0,o.useEffect)(()=>{if(g||100===s){x(e=>{let s=[...e];return t.length>0&&(s[t.length-1]=!1),s});return}x(e=>{let s=[...e];return t.length>0&&(s[t.length-1]=!0,t.length>1&&(s[t.length-2]=!1)),s})},[t,s,g]);let y=(0,F.Z)(e=>e.legacyExtensionEnable),w=e=>{x(t=>{let s=[...t];return s[e]=!s[e],s})},j=(e,t)=>(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"my-2",children:[(0,l.jsx)("span",{className:"inline-flex w-4 h-4 items-center justify-center mt-[2px] mr-2",children:(0,l.jsx)(iA,{})}),(0,l.jsx)(nk,{switchLabel:e,type:t})]})}),k={knowledge_base_retrieval:h("step.tool.searching_knowledge_base"),web_search:h("step.tool.searching_network"),web_scraper:h("step.tool.reading_webpage"),website_search:h("step.tool.accessing_link"),web_reader:h("step.tool.reading_webpage")},C=e=>{try{let t=(0,sH.k5)((0,sH.SK)(e||""));return(t="".replace("",t)).replace(/^(\d+)\.(\s)/gm,"\n$1\\. ")}catch(t){return console.error("Error in escapedContent:",t),e||""}},N=(0,o.useMemo)(()=>e=>{let{node:t,...s}=e;if(!s.href)return null;let r=d?d[+s.href-1]:void 0,i=(null==r?void 0:r.url)||(null==r?void 0:r.link)||s.href,n=()=>{if((0,X.N0)()){(0,s9.oh)({url:i});return}m?window.open((0,eh.m1)(i),"_blank"):y?window.open((0,eh.m1)(i,!0),"_blank"):window.open(i,"_blank")};if(!r){let e=s.children||i||"";if(/^-?\d+(\.\d+)?$/.test(e))return;let t=e.length>200?/https?:\/\/[-a-zA-Z0-9@:%._+~#=]{2,256}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)/g:RegExp(nC.FK,"gi"),r=t.exec(e),a=[];for(;null!==r&&r&&r[0]!==r.input;){let[e,s]=r,i=r.input.substring(0,r.index),n=new nC.fh(e,s),l=r.input.substring(r.index+r[0].length);r=t.exec(l),a=[...a,{type:"text",content:i},{type:"link",content:n.getAnchorText(),href:n.getAnchorHref()},{type:"text",content:r?"":l}]}let o="inline cursor-pointer no-underline text-blue-500 dark:text-blue-500 hover:underline";return a.length?(0,l.jsx)(l.Fragment,{children:a.map((e,t)=>"link"===e.type?(0,l.jsx)("a",{href:e.href,target:"_blank",className:o,children:e.content},t):e.content)}):(0,l.jsx)("a",{href:i,target:"_blank",className:o,onClick:n,children:s.children})}return(0,l.jsx)("span",{className:"footnote-ref inline-block mx-[2px] my-0 select-none",children:(0,l.jsx)(tD.Z,{source:r,rid:"",children:(0,l.jsx)("a",{className:"inline-block leading-normal !text-inherit cursor-pointer no-underline font-medium bg-theme-bg-300 dark:bg-theme-bg-dark-300 min-w-4 h-4 text-center rounded-full align-top text-xs",href:i,target:"_blank",onClick:e=>{e.preventDefault(),n()},children:s.href})})})},[d]);return(0,l.jsxs)("div",{className:"prose prose-md dark:prose-invert max-w-full markdown_markdown__wTkaE",children:[0==t.length&&u&&100!==s&&!r&&j(h("step.tool.understanding_problem")),t.filter(e=>e.params).map((e,o)=>{var d,c,u,m,x,g,b,y,_;return(0,l.jsxs)("div",{className:"mt-2 mb-4",children:[e.content&&(0,l.jsxs)("span",{className:"mt-2 mb-4",children:[(0,l.jsx)("span",{className:"[&>*]:block [&>*:last-child]:contents [&>ol:last-child>li:last-child]:contents",children:(0,l.jsx)(rA.U,{remarkPlugins:[nu.Z,nc.Z,nd.Z,ni.Z,nn.Z,na.Z],rehypePlugins:[nh.Z,no.Z,[nl.Z,{detect:!1,ignoreMissing:!0}],nr.Z],components:{a:N},children:C(e.content)})}),e.params&&"ppt_render"!==e.name&&(0,l.jsx)("span",{className:"align-middle inline-flex",children:f[o]?(0,l.jsx)(ic.Z,{className:"cursor-pointer prose align-middle inline h-5 w-5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full p-0.5 transition-colors",onClick:()=>w(o)}):(0,l.jsx)(tv.Z,{className:"cursor-pointer group-hover:prose text-[#98A2B3] align-middle inline h-5 w-5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full p-0.5 transition-colors",onClick:()=>w(o)})})]}),!e.content&&(t.length>o+1||r)&&e.params&&"ppt_render"!==e.name&&(0,l.jsxs)("span",{className:"mt-2 mb-4",children:[(0,l.jsx)("span",{className:"text-[#7F94B1] dark:text-[#B9BFCA] [&>*]:block [&>*:last-child]:contents text-sm",children:h("step.tool.analysis_status")}),(0,l.jsx)("span",{className:"align-middle inline-flex",children:f[o]?(0,l.jsx)(ic.Z,{className:"cursor-pointer text-[#7F94B1] align-middle inline h-5 w-5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full p-0.5 transition-colors",onClick:()=>w(o)}):(0,l.jsx)(tv.Z,{className:"cursor-pointer group-hover:prose text-[#7F94B1] align-middle inline h-5 w-5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full p-0.5 transition-colors",onClick:()=>w(o)})})]}),!r&&100!==s&&t.length===o+1&&k[e.name]&&j(e.toolList&&e.toolList.length>0?k[e.toolList[e.toolList.length-1].name]:k[e.name],e.toolList&&e.toolList.length>0?e.toolList[e.toolList.length-1].name:e.name),"sandbox"===e.name&&!r&&100!==s&&t.length===o+1&&(null===(d=e.params)||void 0===d?void 0:d.code)&&j(h("step.tool.executing_command")),"mcp"===e.tool_type&&100!==s&&!r&&t.length===o+1&&j(h("step.tool.using_tool",{name:e.mcp_info.title}),e.tool_type),"ppt_render"===e.name&&!(0,st.s2)()&&(null===(c=e.params)||void 0===c?void 0:c.ppt_content)&&(0,l.jsx)(nj,{thread:i,setAutoShowPPT:e=>a(e),pptData:(null==t?void 0:null===(u=t.find(e=>{var t,s;return(null==e?void 0:e.name)==="ppt_render"&&(null===(s=e.params)||void 0===s?void 0:null===(t=s.ppt_content)||void 0===t?void 0:t.length)}))||void 0===u?void 0:u.params)||null,autoShowPPT:n,outline:(null==t?void 0:null===(x=t.find(e=>{var t,s;return(null==e?void 0:e.name)==="ppt_render"&&(null===(s=e.params)||void 0===s?void 0:null===(t=s.ppt_content)||void 0===t?void 0:t.length)}))||void 0===x?void 0:null===(m=x.params)||void 0===m?void 0:m.ppt_content)||(null==p?void 0:null===(g=p[p.length-2])||void 0===g?void 0:g.answer)}),(0,l.jsx)(ie.M,{children:f[o]&&(0,l.jsx)(tH.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"flex my-2 overflow-hidden w-full",children:(0,l.jsxs)("div",{className:"flex my-2 w-full",children:[!(null===(b=e.params)||void 0===b?void 0:b.code)&&(0,l.jsx)("div",{className:(0,v.cn)("bg-[#C9CFD8] flex-shrink-0 w-[2px] mr-4 ml-2 my-3.5","mcp"===e.tool_type||(null===(_=e.params)||void 0===_?void 0:null===(y=_.search_queries)||void 0===y?void 0:y.length)===1?"invisible":"")}),(0,l.jsx)("div",{className:"text-sm w-[calc(100%-30px)]",children:e.toolList&&e.toolList.length>0?e.toolList.map((i,n)=>(0,l.jsx)(nS,{item:i,value:s,toolsLength:t.length==o+1?e.toolList.length:e.toolList.length+1,index:n,markdown:r},n)):(0,l.jsx)(nS,{item:e,value:s,toolsLength:t.length,index:o,markdown:r})})]})},o)})]},o)})]})},nT=e=>{let{tools:t,value:s}=e,r=(0,c.useTranslations)();return(0,l.jsxs)("div",{className:"prose prose-md dark:prose-invert max-w-full markdown_markdown__wTkaE",children:[t.length>0&&"ppt_render"===t[t.length-1].name&&100!==s&&!t[t.length-1].params&&(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"my-2",children:[(0,l.jsx)("span",{className:"inline-flex w-4 h-4 items-center justify-center mt-[2px] mr-2",children:(0,l.jsx)(iA,{})}),(0,l.jsx)(nk,{switchLabel:r("step.tool.generating_ppt")})]})}),t.length>0&&"sandbox"===t[t.length-1].name&&100!==s&&!t[t.length-1].params&&(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"my-2",children:[(0,l.jsx)("span",{className:"inline-flex w-4 h-4 items-center justify-center mt-[2px] mr-2",children:(0,l.jsx)(iA,{})}),(0,l.jsx)(nk,{switchLabel:r("step.tool.generating_code"),type:"sandbox"})]})})]})},nP=e=>{let{index:t,thread:s,messageId:r,shortId:i,rid:n,query:a,answer:o,sources:d,canEdit:u,onEditQueryClick:h,onReanswer:p,isFirst:m,onDelete:f,hideRewriteModel:x,hideChat:g,relates:b,pptCover:y,images:w,category:j}=e,k=(0,c.useTranslations)(),C=(0,F.Z)(e=>e.loading);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("section",{className:"flex gap-5 mr-4",children:[(0,l.jsx)("section",{className:"flex flex-wrap -ml-3"}),(0,l.jsxs)("section",{className:"flex ",children:[(0,l.jsxs)(t2.F,{children:[(0,l.jsx)(tU.e,{delay:0,content:k("rewrite"),children:(0,l.jsx)("div",{className:"max-w-fit",children:(0,l.jsx)(t3.S,{className:(0,v.cn)(!(u&&!C)&&"hidden"),children:(0,l.jsx)(W.A,{size:"sm",radius:"full",className:"bg-transparent hover:bg-[#e9e9e9] dark:hover:bg-neutral-700 text-[#7F94B1] dark:text-[#B9BFCA]",isIconOnly:!0,children:(0,l.jsx)(t6,{size:16})})})})}),(0,l.jsxs)(t5.a,{"aria-label":"More actions",variant:"flat",children:[(0,l.jsx)(t7.W,{onPress:()=>h(!0),description:k("rewrite_query_desc"),children:k("edit_query")},"edit"),(0,l.jsx)(t7.W,{onPress:()=>p("pro"),endContent:(0,l.jsx)(t9,{className:"rounded bg-theme-bg-300 dark:bg-theme-bg-dark-300 px-2 py-0.5 text-xs text-nowrap"}),description:k("pro_search_description"),children:"Pro Search"},"pro")]})]}),(0,l.jsx)(sV,{shortId:i,rid:n,answer:o,sources:d,canEdit:u,isFirst:m,isLast:!1,relates:b,onDelete:f,isShowRelates:!1,setIsShowRelates:()=>{}})]})]})})},nM=s(64412);let nF=(0,T.Z)("ScanText",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 8h8",key:"1jbsf9"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M7 16h6",key:"1vyc9m"}]]);var nA=()=>{let e=(0,c.useTranslations)(),t=(0,tW.V)(),s=(0,tW.V)(),{isShowMobileSource:r,setIsShowMobileSource:i,sourceType:n,agentSources:a,sourcesHtml:o}=(0,F.Z)(),d=async()=>{s.copy(await (0,sH.h_)(o))};return(0,l.jsx)(h.Vq,{open:r,onOpenChange:()=>i(!1),children:(0,l.jsxs)(h.cZ,{className:"fixed bottom-0 top-auto translate-y-0",children:[(0,l.jsx)(h.fK,{children:(0,l.jsxs)(h.$N,{className:"text-2xl text-center",children:["sources"===n&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(iu.Z,{})," ",e("sources")]}),"html"===n&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(nF,{}),e("step.tool.reading_webpage_done_desc"),(0,l.jsxs)(t2.F,{placement:"top",offset:-2,children:[(0,l.jsx)(tU.e,{delay:0,content:e("copy_content"),children:(0,l.jsx)("div",{className:"absolute top-3 right-6 max-w-fit ml-auto mr-5",children:(0,l.jsx)(t3.S,{children:(0,l.jsx)(W.A,{size:"sm",radius:"full",className:"bg-transparent hover:text-gray-800 text-[#667085] dark:text-[#B9BFCA]",isIconOnly:!0,children:s.copied||t.copied?(0,l.jsx)(t$.Z,{size:20,color:"#4ba570"}):(0,l.jsx)(tY.Z,{size:18})})})})}),(0,l.jsxs)(t5.a,{"aria-label":"Topic actions",variant:"flat",children:[(0,l.jsx)(t7.W,{style:{position:"relative",pointerEvents:"auto"},className:"text-[#1D3C6D] hover:!bg-blue-100 hover:!text-[#1D3C6D] dark:text-[#EDF3FC] hover:dark:!bg-[#2E3643] hover:dark:!text-[#EDF3FC]",onPress:d,startContent:(0,l.jsx)(tZ.eC,{className:"h-5 w-5"}),children:e("textFormat")},"copyText"),(0,l.jsx)(t7.W,{className:"text-[#1D3C6D] hover:!bg-blue-100 hover:!text-[#1D3C6D] dark:text-[#EDF3FC] hover:dark:!bg-[#2E3643] hover:dark:!text-[#EDF3FC]",onPress:()=>{let e=o.replace(/^\n\n/,"");t.copy(e)},style:{position:"relative",pointerEvents:"auto"},startContent:(0,l.jsx)(tZ.WO,{className:"h-5 w-5"}),children:e("MarkdownFormat")},"copyMarkdown")]})]})]})]})}),(0,l.jsxs)(h.a7,{className:"w-full max-w-md mx-auto relative overflow-y-auto custom-scrollbar h-[80vh]",children:["sources"===n&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(id.o,{className:"p-6 custom-scrollbar overflow-x-hidden",children:(0,l.jsx)(rn.F,{sources:a,canEdit:!1,isDone:!0,isAll:!0,isVisible:!0,rid:""})})}),"html"===n&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(id.o,{className:"py-6 custom-scrollbar overflow-x-hidden",children:(0,l.jsx)("div",{className:(0,v.cn)("prose prose-md dark:prose-invert max-w-full flex justify-center",x().prose),children:(0,l.jsx)(g.Z,{sources:[],rid:"",loading:!1,isVisible:!0,className:"w-[80%] break-all",children:o})})})})]})]})})};let nL=e=>{let{className:t,isOpenEditQuery:s,query:r,markdown:i,autoShowPPT:n,setAutoShowPPT:a,sources:o,loading:d,isVisible:u,isDocument:h,setIsOpenEditQuery:p,canEdit:m,tools:f,thread:x,onSaveByQueryEditor:g,messageId:b,processValue:w,rid:j,pptCover:k,queryCategory:C,onDelete:_,shortId:N,threadIndex:S,isLast:E,images:T,hideRewriteModel:P,onReanswer:M,error:A,isAnswerDone:L,relates:I,template:Z,isChat:D}=e,z=(0,c.useTranslations)(),O=(0,tR.ZP)(e=>e.isLogin),{setAgentSources:R,setIsShowMobileSource:B,setIsShowAgentSources:q,isShowAgentSources:H,isShowMobileSource:V,sourceType:W}=(0,F.Z)(),{isMobile:U}=(0,tk.Z)();return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:(0,v.cn)("thread-item scroll-mt-28 mb-4 pt-4 flex justify-center gap-10 flex-col lg:flex-row break-words thread-container-".concat(b),t),style:{wordBreak:"break-word"},children:(0,l.jsxs)("div",{className:"flex-grow flex flex-col min-w-0 max-w-3xl",children:[s?(0,l.jsx)(tV,{initialQuery:r,onSave:e=>{g(e)},onCancel:()=>{p(!1)}}):(0,l.jsx)(ns,{query:r,canEdit:m,onEditClick:()=>{p(!s)}}),(0,l.jsxs)("div",{className:"py-2 px-4 rounded-xl",children:[(0,l.jsx)(nE,{tools:f,value:w,markdown:i,thread:x,autoShowPPT:n,setAutoShowPPT:a,sources:o}),(0,l.jsx)(y,{skeleton:D?"single":"multiple",markdown:i,sources:o,rid:j,loading:d,isVisible:u,messageId:b,isDocument:h,template:Z}),(0,l.jsx)(nT,{tools:f,value:w})]}),(0,l.jsxs)("div",{className:"flex items-center ml-2 mb-4",children:[o.length>0&&(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsxs)("div",{onClick:()=>{if("sources"!==W){R(o),U?B(!0):q(!0);return}R(o),U?B(!V):q(!H)},className:"cursor-pointer rounded-xl hover:bg-[#F6F6F6] hover:dark:bg-theme-border-dark-200 flex items-center p-2",children:[o.slice(0,3).map((e,t)=>(0,l.jsx)(l.Fragment,{children:(e.url||e.link||"").includes(".file")?(0,l.jsx)(nM.Z,{fileName:e.title,w:4,h:4}):(0,l.jsx)(tw.h,{src:"https://www.google.com/s2/favicons?domain=".concat(e.link,"&sz=",20),className:(0,v.cn)("w-5 h-5",0!==t?"-ml-2.5":""),size:"md"},t)})),o.length>0&&(0,l.jsx)("p",{className:"text-small text-[#5F7698] font-medium ms-2 dark:text-[#D0D4DC]",children:z("search_result.sources_count",{count:o.length})})]})}),(0,l.jsx)("div",{className:"ml-auto items-center",children:!A&&L&&(0,l.jsx)(nP,{id:x.id,index:S,thread:x,messageId:b,shortId:N,rid:j,query:r,answer:i,sources:o,canEdit:m,onEditQueryClick:p,onReanswer:M,isFirst:0===S,isLast:E,onDelete:_,hideRewriteModel:P,hideChat:!O,relates:I||[],pptCover:k,images:T,category:C||""})})]}),(0,l.jsx)(nA,{})]})})})};var nI=s(27934),nZ=e=>{let{thread:t}=e,s=(0,c.useTranslations)(),{mindmapList:r}=(0,_.Z)(),{currentData:i}=(0,tS.Z)(),{is_self:n}=(0,sq.Z)(),[a,d]=(0,o.useState)(0),u=(0,o.useMemo)(()=>r?(null==r?void 0:r.find(e=>e.message_id===t.id))?2:(null==i?void 0:i.status)==="succeed"?1:0:(null==i?void 0:i.status)==="succeed"?1:-1,[r,t.id,null==i?void 0:i.status]),h=async()=>{console.log("\uD83D\uDE80 ~ init ~ mindmapList:",r),console.log("\uD83D\uDE80 ~ init ~ is_self:",n),!n||[-1,1,2].includes(u)||(await (0,tP.gw)(3e3),d(1),tS.Z.getState().setCurrentData({query:null==t?void 0:t.query,threadId:null==t?void 0:t.short_id,messageId:null==t?void 0:t.id,status:"loading"}))};return((0,o.useEffect)(()=>{h()},[]),console.log("mindmapStatus",u),n&&2!==u&&-1!==a)?(0,l.jsxs)("div",{className:(0,ne.Z)("flex flex-col gap-2 my-3","text-[#30394A] dark:text-[#babdc5]"),children:[(0,l.jsx)("h4",{className:"text-lg font-medium",children:s("agentConfig.generate_mindmap_title")}),(0,l.jsxs)("div",{className:(0,ne.Z)("flex border-1 rounded-lg w-full p-4 items-center gap-x-3","bg-[#F7F7F9] border-[#EBEEF3]","dark:bg-[#353B47] dark:border-[#454F5D]"),children:[(0,l.jsx)(nI.Z,{className:"animate-spin text-primary"}),(0,l.jsxs)("div",{children:[(null==t?void 0:t.query)?(0,l.jsx)("h5",{className:"text-lg font-bold",children:null==t?void 0:t.query}):null,(0,l.jsx)(G.z,{variant:"link",className:"p-0 h-auto underline",disabled:u<1,onClick:()=>{tS.Z.getState().setCurrentData({query:null==t?void 0:t.query,threadId:null==t?void 0:t.short_id,messageId:null==t?void 0:t.id,status:"loading"})},children:s(u<1?"agentConfig.generating_mindmap_btn":"agentConfig.generate_mindmap_btn")})]})]})]}):null},nD=s(79057),nz=s(72696),nO=s(34097),nR=e=>{var t,s,r;let{thread:i,template:n,threadId:a,autoShowGraphic:d,setAutoShowGraphic:u}=e,{setShowGraphicModel:h,setGraphicQueryData:p,allGraphicData:m}=(0,nD.Z)(),{threads:f,isMyThread:x}=(0,_.Z)(),v=(0,c.useLocale)(),g=(0,c.useTranslations)(),b=(0,tR.ZP)(e=>e.isLogin),[y,j]=(0,o.useState)(null),{isMobile:k}=(0,tk.Z)(),C=(0,tM.Z)(),N=(0,w.useRouter)().query,{language:S}=(0,nw.Z)(),E=(0,o.useMemo)(()=>i.id?i.query:g("agentPPT.ppt_loading_tip"),[i]),T=(0,o.useCallback)(()=>{if(!i.id)return;let e=_.Z.getState().threads;console.log("\uD83C\uDF4E ~ openGraphic ~ threads:",e);let t=null==e?void 0:e.map(e=>"long_text"===e.category?"\n          Query:".concat(null==e?void 0:e.query,"\n          "):"\n          Query:".concat(null==e?void 0:e.query,"\n          Answer:").concat(null==e?void 0:e.answer)).join("\n");if(u(!1),!x&&!(null==y?void 0:y.smart_art_id)){C.default(g("graphic.sharer_not_generate"));return}p({messageId:i.id,threadId:a,language:S||"auto",inputText:t,query:i.query,canEdit:x,template:n,mode:"thread",smart_art_id:null==y?void 0:y.smart_art_id}),h(!0),(null==y?void 0:y.smart_art_id)||(0,H.fk)(q.U.SMARTART_CREATE,{messageId:i.id,threadId:a,query:i.query},!0)},[i,a,y,x,S,v,n,u,p,h,C]),P=(0,o.useCallback)(e=>{var t,s,r,n;if(i_.Z.info(g("drive.download_loading"),99999),"png"===e||"svg"===e)fetch((null==y?void 0:null===(s=y.images)||void 0===s?void 0:null===(t=s.find(t=>t.type===e))||void 0===t?void 0:t.path)||"").then(e=>e.blob()).then(t=>{i_.Z.close();let s=window.URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download="".concat(i.query,".").concat(e),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(s),document.body.removeChild(r)}).catch(e=>{i_.Z.close(),i_.Z.error("".concat(e),3e3)});else if("pdf"===e){let e=(null==y?void 0:null===(n=y.images)||void 0===n?void 0:null===(r=n.find(e=>"png"===e.type))||void 0===r?void 0:r.path)||"";(0,sX.zC)({file_type:"PDF",markdown:"![image](".concat(e,")")},()=>{i_.Z.close()})}},[i,y]),M=(0,o.useCallback)(async()=>{if(i.id&&a)try{var e;let t=await (0,nO.b4)({thread_id:a,message_id:i.id});j(t.data),!(null===(e=t.data)||void 0===e?void 0:e.content)&&i.answer&&d&&setTimeout(()=>{T(),null==u||u(!1)},100)}catch(e){console.error("Failed to fetch PPT cache:",e),C.error(g("error.fetch_failed"))}},[b,i.id,d,a,i.answer]);return((0,o.useEffect)(()=>{i.answer&&i.id&&M()},[i.id,i.answer]),(0,o.useEffect)(()=>{"1"===N.showGraphic&&i.id===N.message_id&&null!==y&&T()},[N.showGraphic,N.message_id,i.id,y]),(0,o.useEffect)(()=>{i.id&&(null==m?void 0:m[i.id])&&j(null==m?void 0:m[i.id])},[m,i,y]),null==y?void 0:null===(t=y.images)||void 0===t?void 0:t.length)?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"flex flex-wrap gap-4 py-1 md:py-4 w-full",children:(0,l.jsxs)("div",{className:(0,np.cn)("flex-1 flex flex-col mb-8","border border-gray-200 dark:border-gray-800 rounded-lg","transition-all duration-300 hover:border-blue-300 dark:hover:border-blue-800"),children:[(0,l.jsxs)("div",{className:"flex-none flex items-center justify-between p-4",children:[(0,l.jsx)("div",{className:"text-xl font-medium",children:g("graphic.graphic")}),(0,l.jsxs)("div",{className:"flex items-center justify-around gap-2",children:[(0,l.jsxs)(nz.h_,{children:[(0,l.jsx)(nz.$F,{asChild:!0,children:(0,l.jsx)("div",{className:"w-[32px] h-[32px] flex items-center rounded-[8px] justify-center cursor-pointer bg-gray-100 dark:bg-gray-900 text-gray-500 dark:text-gray-400",children:(0,l.jsx)(nv.Z,{size:16})})}),(0,l.jsxs)(nz.AW,{className:"z-50",children:[(0,l.jsx)(nz.Xi,{onClick:()=>P("svg"),children:"SVG"}),(0,l.jsx)(nz.Xi,{onClick:()=>P("png"),children:"PNG"}),(0,l.jsx)(nz.Xi,{onClick:()=>P("pdf"),children:"PDF"})]})]}),(0,l.jsx)(ny.pn,{children:(0,l.jsxs)(ny.u,{children:[(0,l.jsx)(ny.aJ,{asChild:!0,children:(0,l.jsx)(W.A,{size:"sm",className:"bg-gray-100 dark:bg-gray-900 text-gray-500 dark:text-gray-400",onClick:T,startContent:(0,l.jsx)(tg,{size:16}),isIconOnly:!0})}),(0,l.jsx)(ny._v,{side:"top",children:(0,l.jsx)("p",{children:g("preview_full_version")})})]})})]})]}),(0,l.jsx)("div",{className:"flex-1 overflow-hidden flex items-center justify-center px-4 pb-4",onClick:T,children:(0,l.jsx)("img",{src:null==y?void 0:null===(r=y.images)||void 0===r?void 0:null===(s=r.find(e=>"png"===e.type))||void 0===s?void 0:s.path,className:(0,np.cn)("flex-1 object-cover max-w-full rounded-lg cursor-pointer ")})})]})})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"cursor-pointer",style:{cursor:i.id?"pointer":"not-allowed",opacity:i.id?1:.5},children:[(0,l.jsx)("div",{className:"py-4",children:g("graphic.text")}),(0,l.jsxs)("div",{className:"relative p-4 flex rounded-xl overflow-hidden transition-[height] mb-4 border border-[#E4E7EC] dark:border-[#333741] duration-500 ease-in-out bg-theme-bg-100 dark:bg-theme-bg-dark-100",onClick:T,children:[(null==y?void 0:y.smart_art_id)?(0,l.jsx)("div",{className:"flex items-center justify-center px-[16px] box-border",children:(0,l.jsx)(t6,{size:32})}):(0,l.jsx)("div",{className:"flex items-center justify-center px-[16px] box-border",children:i.id?(0,l.jsx)(ng,{size:32}):(0,l.jsx)(tQ.c,{})}),(0,l.jsxs)("div",{className:"ml-2",children:[(0,l.jsx)("div",{className:"text-[18px] font-bold w-full max-w-[400px] line-clamp-2",children:E}),(0,l.jsx)("div",{className:"text-[#0080FF] text-[16px] mt-[12px] underline",children:i.id?g("graphic.click_text"):g("graphic.graphic_loading_tip")})]})]})]})})};let nB=e=>{var t,s,r,i,n,a,d,m,f,x,g,w,j,k,N,S,E,T,P,A,L,I,Z,D,R,B;let{className:V,queryCategory:W,rid:G,thread:ee,ssrShortId:et,shortId:es,fromShortId:ei,index:en=0,canEdit:ea,isLast:el,pptCover:ep,setThreadRid:em,documents:ev,showSteps:eg,documentAction:eb,firstIsDeep:ey,template:ew,ssrUid:ej}=e,ek=(0,c.useTranslations)(),eC=(0,c.useLocale)(),e_=new AbortController,{isApp:eN}=(0,iQ.b)(),eS=(0,tR.ZP)(e=>e.isLogin);(0,_.Z)(e=>e.threads);let{list:eE}=(0,tB.Z)(),{setCoverUrl:eT,isShowPptModal:eP}=(0,tN.Z)(),{setPptDetail:eM}=(0,tT.Z)(),eF=(0,ec.Z)(e=>e.documents),eA=(0,Y.GS)("used"),{clearPendingQueries:eL,addThread:eI,updateThread:eZ,resetThread:eD,deleteThread:ez,updateAnswerWordCount:eO}=(0,_.Z)(),{selectedSources:eR,setSecondSources:eB}=(0,iv.Z)(),eq=(0,o.useCallback)((e,t)=>{eZ(en,e,t)},[en]),{client:eH,isConnected:eV,publish:eW,connectionInfo:eU}=(0,o.useContext)(tO.M),[eG,e$]=(0,o.useState)(!1),[eY,eJ]=(0,o.useState)(!1),eX=!!ee&&!!ee.id,[eK,eQ]=(0,o.useState)((0,ib.eX)(ee.tools||[])),[e0,e1]=(0,o.useState)("discovery"===ee.mode?(ee.recall_contexts||[]).filter(e=>!1!==e.is_expanded):[]),[e2,e3]=(0,o.useState)(ee.mode||""),[e5,e7]=(0,o.useState)(G),[e6,e4]=(0,o.useState)([]),[e8,e9]=(0,o.useState)(["1",eX&&ee.expand_type&&"image"===ee.expand_type.source?"2":""]),[te,tt]=(0,o.useState)(!1),[ts,tr,ti]=(0,iw.Z)(ee.answer||""),[tn,ta,tl]=(0,iw.Z)(ee.reflection_agent_last_answer||""),[to,td]=(0,o.useState)(ee.reasoning||""),[tc,tu]=(0,o.useState)(!!ee.answer),[th,tp]=(0,o.useState)(""),[tm,tf,tx]=(0,iw.Z)(void 0),[tv,tg]=(0,o.useState)(ee.reflections||[]),[tb,ty,tw]=(0,iw.Z)([]),[tj,tk]=(0,o.useState)(ee.topic_tools||[]),tC=(0,o.useRef)(""),t_=ee.id||"",tS=ee.query||"",tE=ee.related_questions,tM=ee.relevancy_model_info,tF=ee.images||[],tL=(null==ee?void 0:ee.model)||"",tI=(null==ee?void 0:null===(t=ee.plan_info)||void 0===t?void 0:t.plans)||[],tZ=(0,o.useMemo)(()=>{var e;return(null==ee?void 0:null===(e=ee.recall_contexts)||void 0===e?void 0:e.map(e=>({...e,url:e.link})))||[]},[ee.recall_contexts]),tD=(0,o.useMemo)(()=>{var e,t,s,r;return(null===(e=(null==ee?void 0:null===(r=ee.template)||void 0===r?void 0:null===(s=r.sub_topics)||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.tools)||[])||void 0===e?void 0:e.findIndex(e=>["mindmap"].includes(null==e?void 0:e.name)))!==-1},[null==ee?void 0:null===(s=ee.template)||void 0===s?void 0:s.sub_topics]),tq=(0,o.useMemo)(()=>{var e,t,s,r;return(null===(e=(null==ee?void 0:null===(r=ee.template)||void 0===r?void 0:null===(s=r.sub_topics)||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.tools)||[])||void 0===e?void 0:e.findIndex(e=>["smart_graph"].includes(null==e?void 0:e.name)))!==-1},[null==ee?void 0:null===(r=ee.template)||void 0===r?void 0:r.sub_topics]),tH=(0,o.useMemo)(()=>{var e,t,s,r;return(null===(e=(null==ee?void 0:null===(r=ee.template)||void 0===r?void 0:null===(s=r.sub_topics)||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.tools)||[])||void 0===e?void 0:e.findIndex(e=>["mindmap","ppt_render"].includes(null==e?void 0:e.name)))!==-1},[null==ee?void 0:null===(i=ee.template)||void 0===i?void 0:i.sub_topics]);(0,o.useEffect)(()=>{if("web_summary"!==ee.category&&0===en){F.Z.getState().setWebSummarySources([]);return}let e=null==ee?void 0:ee.recall_contexts;if("web_summary"===ee.category&&0===en){let t=[];if(e&&e.length>0)for(let s of e)s.snippet&&t.push({link:s.link||"",title:s.title||"",snippet:s.snippet||"",engine_name:s.engine_name||"",source_type:"",is_expanded:!1,other_info:s.other_info});F.Z.getState().setWebSummarySources(t)}},[ee]),(0,o.useEffect)(()=>{eB(tZ)},[tZ]);let tW=(0,o.useCallback)(e=>{eq("relevancy_model_info",e)},[]),tU=(0,o.useCallback)(e=>{eq("plan_info.plans",e)},[]),tG=eX?null!==(B=null===(n=ee.plan_info)||void 0===n?void 0:n.qr_list)&&void 0!==B?B:[ee.query_rewriter_info].filter(Boolean):[],[t$,tY,tK]=(0,iw.Z)(tG),[tQ,t0]=(0,o.useState)(!1),[t1,t2,t3]=(0,iw.Z)(null==ee?void 0:ee.category),[t5,t7]=(0,o.useState)(null),[t6,t4]=(0,o.useState)(!1),[t8,t9]=(0,o.useState)(eX?100:0),se=tX(t8),ss=(0,F.Z)(e=>e.loading),sr=(0,F.Z)(e=>e.extensionEnable),si=(0,F.Z)(e=>e.setExtensionError),sn=(0,F.Z)(e=>e.isChat),sa=(0,F.Z)(e=>e.setIsChat),sl=(0,Y.ZP)(e=>e.reduceProTimes),so=(0,F.Z)(e=>e.startSearch),sd=(0,F.Z)(e=>e.endSearch),sc=(0,F.Z)(e=>e.startBeginAnswer),su=(0,F.Z)(e=>e.willBindTopicId),sh=(0,F.Z)(e=>e.isTopicReply),sp=(0,F.Z)(e=>e.isTopicSearchNetwork),sm=(0,o.useRef)({query:"",queryCategory:"",model:"",closeAutoRouting:!1,sources:void 0,documents:void 0}),[sf,sx]=(0,o.useState)(!1),sv=(0,Q.Z)(e=>e.updateItem),sg=(0,o.useRef)(null),[sb,sy]=(0,o.useState)(!1),[sw,sj]=(0,o.useState)(!1),[sk,sC]=(0,o.useState)(eX&&(null==ee?void 0:ee.category)==="chat"),[s_,sN]=(0,o.useState)(eX&&((null==ee?void 0:ee.category)===O.J5||(null==ee?void 0:ee.category)===O.Ys)),[sS,sE]=(0,o.useState)(!1),[sT,sP]=(0,o.useState)(!1),[sM,sA]=(0,o.useState)(!1),[sL,sI]=(0,o.useState)(el),sZ=(0,o.useRef)(null),[sD,sz]=(0,o.useState)(!0),sO=(0,o.useRef)(!1),sR=(0,o.useMemo)(()=>tZ.length>0?tZ:e6,[e6,tZ]),sB=(0,o.useMemo)(()=>[...new Set(sR.map(e=>(0,sG.P)(e.snippet)))].length,[sR]),sq=(0,o.useRef)(ee._local_id||""),{getSingleMetric:sH,startTimer:sV,resetTimers:sK}=(0,sU.q)(),sQ=(0,o.useRef)(G+"-"+en);(0,o.useEffect)(()=>{sQ.current=G+"-"+en},[G,en]);let s0=(0,o.useCallback)(e=>sH(e,sQ.current),[]),s1=(0,o.useCallback)(e=>{sV(e,sQ.current)},[sV]),s2=(0,o.useCallback)(()=>{s0("startSearchTime")&&!s0("getResultTime")&&(s1("getResultTime"),(0,s$.a)("user_event_answer_start"),sc(),(0,H.fk)(q.U.THREAD_FIRST_CHARACTER_OUTPUT,{query:ee.query}))},[sc,s0,s1,ee.query]),s3=()=>{s1("startSearchTime"),so(),(0,H.Fw)(tS),(0,s$.a)("user_event_query_submit")},s5=()=>{clearTimeout(sg.current||void 0),sd(),(0,H.uu)(G,tS),eq("_local_id",sq.current);let e=s0("getResultTime");if(e){var t;let s=(e-s0("startSearchTime"))/1e3;(0,ex.I)({eventName:"query_search_time",eventParams:{event_category:"customEvent",event_label:s.toString(),value:1}}),(0,H.fk)("query_search_time",{value:s.toString()});let r=null===(t=_.Z.getState().getThreadByIndex(en))||void 0===t?void 0:t.mode;(0,eh.f8)(()=>{let e=s0("startSearchTime"),t=s0("getMqttResultTime");if(!e||!t)return;let s=Math.max(Math.min((t-e)/1e3,300),0).toFixed();(0,s$.a)("user_event_answer_received",s);let i="user_event_answer_received_basic";switch(r){case O.NY:i="user_event_answer_received_pro";break;case O.iV:i="user_event_answer_received_discovery";break;default:i="user_event_answer_received_basic"}(0,s$.a)(i,s)})}},s7=(0,o.useMemo)(()=>!!(ea&&0===en&&el&&!et&&t1&&[O.me,O.gl].includes(t1))&&!!sk&&!ss,[en,el,ea,et,t1,sk,ss]),s6=e=>{"image"===e.source&&!e8.includes("2")&&(e9([...e8,"2"]),e.images&&e.images.length>0&&eq("images",e.images))},s4=e=>{e1(e.filter(e=>!1!==e.is_expanded))},s8=e=>{se.current<30&&t9(30),s1("firstSourcesTime"),e4(e)},s9=e=>{let t=tK.current||[];t.some(t=>JSON.stringify(t.rewriters)===JSON.stringify(e.rewriters))||(se.current<50&&t9(50),s1("queryRewriterTime"),tY([...t,e]))},re=e=>{se.current<55&&t9(55),s1("secondSourcesTime"),tx.current?eq("recall_contexts",[...tw.current||[],...e]):(ty(e),eq("recall_contexts",e))},rt=e=>{se.current<70&&t9(70),ta(e)},rs=e=>{s2(),se.current<95&&t9(95),t7(null),tx.current?tp(e):tr(e),tu(!0)},rr=e=>{se.current<80&&t9(80),t7(null),td(e)},ri=e=>{se.current<70&&t9(70),t7(null),tg(e)},rn=e=>{tf(e)};(0,o.useEffect)(()=>{if(0===_.Z.getState().pendingQueries.length)return;let e=ts.replace(/(`[\s\S]*?`|`.*?`)|\[(\d+)\]/g,(e,t,s)=>t||(s?"":e));eO(en,(e=(e=(0,i5.ZP)(e)).replace(/\n+/g,"\n")).length)},[ts]),(0,o.useEffect)(()=>{sI(el)},[el]);let ra=e=>{t9(100),eq("related_questions",e)},rl=e=>{e&&(sO.current=!0,"You are not allowed to access this resource"===e&&$.$.publish("showSubscriptionPlan",void 0)),t9(100),t7(e)},ro=e=>{if(!eV||!eH)return!1;let t={process_id:sq.current,...e},s=!1;if(!eU)return!1;try{let r=e.short_id,i=e.existing_uuid,n=JSON.stringify({event_name:r?i?"edit_question":"followup_question":"ask_question",data:t});console.log("params...",n),eW(n),s=!0}catch(e){console.log("Failed to send confirmation message1234:",e)}return s},rd=e=>{e7(e.rid),em(e.rid),eq("rid",e.rid)},rc=e=>{tk(e)},ru=e=>{try{se.current<70&&t9(70);for(var t=0;t<e.length;t++){let s=e[t];if(!s||!s.name)break;s.content===ti.current&&rs(""),s.content===tl.current&&rt(""),eQ(e=>{let t="ppt_render"===s.name||"sandbox"===s.name||"mcp"===s.tool_type;if(0===e.length){if(t)return[...e,s];if(!s.content&&s.params)return[{...s,toolList:[s]}]}if(e.length>0){let r=e[e.length-1];if(r.name===s.name&&!r.content&&!r.params)return[...e.slice(0,-1),s];if(t)return[...e,s];if(!s.content&&!r.content&&s.params&&r.params){let t={...r,toolList:[...r.toolList||[],s]};return[...e.slice(0,-1),t]}if(!s.content&&s.params&&r.content){let t={...s,toolList:[s]};return[...e,t]}}return[...e,s]})}e.length>0&&t0(!0),(null==e?void 0:e.findIndex(e=>"ppt_render"===e.name))!==-1&&e$(!0)}catch(t){console.error("onTools error:",t),eQ(t=>[...t,...e])}},rh=e=>{(null==e?void 0:e.length)>0&&eQ(t=>[...t,...e])},rp=e=>{if(e)try{let t=Array.isArray(e)?e:[e];eQ(e=>e.map(e=>{if(e.toolList&&e.toolList.length>0)return{...e,toolList:e.toolList.map(e=>{var s,r;return{...e,call_result:null!==(r=null===(s=t.find(t=>{var s;return(null===(s=t.tool_call)||void 0===s?void 0:s.id)===e.id||t.id===e.id}))||void 0===s?void 0:s.call_result)&&void 0!==r?r:e.call_result}})};let s=t.find(t=>{var s;return(null===(s=t.tool_call)||void 0===s?void 0:s.id)===e.id||t.id===e.id});return s?{...e,call_result:s.call_result}:e}))}catch(e){console.log("error",e)}},rm=()=>{eq("hide_reply",!0)},rf=e=>{if(e){switch(e&&eq("category",e),e){case"web_summary":break;case"document":sy(!0);break;case"scholar":sj(!0);break;case"chat":0==en&&(sC(!0),sa(!0));break;case O.J5:case O.Ys:sN(!0)}sP(!0),s1("threadTypeTime")}},rx=e=>{e&&eq("source",e)},rv=e=>{let t;if(!e)return;let{message_id:s,rid:r,query:i,deduction:n,thread_info:{short_id:a,thread_type:l}}=e;if(e7(r),t7(null),t4(!0),a){eq("short_id",a);let e=(0,sJ.lx)(window.location.href);e.search="",history.replaceState(null,document.title,(0,eh.XU)(e.toString(),a)),sessionStorage.removeItem(iN.o.FELO_ACTIVE_QUERY)}if(eq("id",s),su){let e=eE.findIndex(e=>e.short_id===su);-1!==e&&(t=eE[e])}!t_&&Q.Z.getState().inited&&Q.Z.getState().addItem({rid:a,query:i,topic:t,category:t3.current||O.gl,thread_type:l}),t&&$.$.publish("updateCurrentThreadTopic",{threadId:a,topic:t}),n&&(n.amount&&0===sl(n.amount)&&sE(!0),n.model&&eq("model",n.model))},rg=()=>{eq("answer",ti.current),s5(),t0(!1);let e=_.Z.getState().pendingQueries;if(e.length>0){if(en===e.length-1){eL();return}let t=en+1,s=e[t].query;if(!s)return;eI({_local_id:(0,C.x0)(),query:s,short_id:es||"",query_from:"agent",category:e[t].category,thread_type:ed.yG,topic_id:e[t].topic_id,template:_.Z.getState().threads[0].template})}},rb=()=>{eD(en),rs(""),t9(0),tY([]),sP(!1),t0(!1),e4([]),t4(!1),sx(!1),sy(!1),sj(!1),sN(!1),sK(),e9(["1"]),eQ([])},ry=async e=>{let{type:t,params:s}=e,{query:r="",mode:i,model:n="",queryCategory:a="",closeAutoRouting:l=!1,sources:o}=s;ss&&(e_.abort(),await (0,i9.jB)(ee.rid),F.Z.getState().endSearch(),tr(""),eq("related_questions",[]),sg.current&&(clearTimeout(sg.current),sg.current=null));let d="";switch(t){case"query":r&&eq("query",r),0===en&&sv({rid:es||et||G,query:r}),i===O.iV&&F.Z.getState().setIsDiscovery(!0),d=q.U.THREAD_REANSWER_QUERY;break;case"pro":d=q.U.THREAD_REANSWER_PRO;break;case"discovery":d=q.U.THREAD_REANSWER_DISCOVERY;break;case"model":eq("model",n),d=q.U.THREAD_REANSWER_4OMINI;break;case"category":d=q.U.THREAD_REANSWER_CHAT;break;case"routing":d=q.U.THREAD_REANSWER_FORCE_SEARCH;break;case"sources":d=q.U.THREAD_REANSWER_DELETE_SOURCES}(0,H.fk)(d,{query:r},!0),i===O.iV&&F.Z.getState().setIsDiscovery(!0),sm.current={query:r,mode:"basic"===t?O.R_:i,model:n,queryCategory:a,closeAutoRouting:l,sources:o,documents:tH?(null==ev?void 0:ev.length)?ev:eF:ev,..."pro"===t&&!i&&{mode:O.NY}};let c=document.querySelectorAll(".thread-item");window.requestAnimationFrame(()=>{c[en].scrollIntoView({behavior:"smooth"})}),rb(),e_&&ss&&e_.abort(),rj(e_),sm.current={query:"",mode:void 0,model:"",queryCategory:"",closeAutoRouting:!1,sources:void 0};let{setSelectedSources:u,setLastSelectedIndex:h}=iv.Z.getState();u([]),h(null)},rw=()=>{sg.current&&clearTimeout(sg.current),sg.current=setTimeout(()=>{sO.current||rl("Service not responding")},tC.current===O.iV||ew?18e4:6e4)},rj=async e=>{var t,s,r,i,n,a,l;let o;let d=Object.values(sm.current).some(Boolean),c=_.Z.getState().threads[en];if(c&&c.id){rf(c.category),t4(!0);return}s3(),t9(10);let u=(null==c?void 0:c.answer)?eu:sr?ef:eu,h=(()=>{if(sm.current.queryCategory)return sm.current.queryCategory;if(W)return W;if((0,X.N0)()||"default"===F.Z.getState().from)return"google";let e=sessionStorage.getItem(O.sd);return sr?e:e&&!["google","social","scholar","document"].includes(e)?"google":e||"google"})();t2(h),sC("chat"===h);let p=es||et;ei?p=en||d?p:ei:en||d||(p="");let m=h;0==en&&sa("chat"===h),0===en||sm.current.queryCategory||eg||("chat"!==h||sn||(m="google"),sC(sn),m=sn?"chat":m);let f=F.Z.getState().proSelected?O.NY:O.R_,{subscriptionInfo:x}=Y.ZP.getState(),{deviceUserInfo:v}=tR.ZP.getState(),g=v&&v.pro_count>0;if(x&&eA||g||(f=O.R_),f===O.NY){let e=F.Z.getState().isDiscovery;t0(e||(null==c?void 0:c.thread_type)===ed.yG),e&&m!==O.aI&&(f=O.iV)}en>0&&(f!==O.iV||ey?f===O.NY&&ey&&(f=O.iV):f=O.NY);let y=null==c?void 0:c.query,{sources:w,closeAutoRouting:j,model:k,mode:C}=sm.current,N=C||f,S="";c.template&&(S=(null===(i=c.template.sub_topics)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:r.llm_model)||"");let E=S||F.Z.getState().selectedModel,T=N===O.R_?"":E,P=k||T,M=localStorage.getItem(sF.J.GTAG_EVENT_ACTIVATION)||tR.ZP.getState().anonymousToken;e3(N),tC.current=N,c.template&&N===O.iV&&(N=O.NY),eq("mode",N),eq("model",P),eq("created_at",new Date().toISOString()),eq("device_id",M),eq("contexts_from",m),tu(!1),td(""),tf(void 0),tp(""),tu(!1),td(""),e1([]),tg([]),ty([]),ta(""),eQ([]),sh&&(o=sp);let A=c.thread_type;m===O.pN&&(A=ed.Ts),c.template&&(A=ed.yG),tu(!1),console.log("result init documents",ev),u({mqttConnected:eV,controller:e,query:y,category:m,thread_type:A,contexts:w&&w.length>0?[{query:y,contexts:w}]:void 0,existing_uuid:d?t_:"",search_uuid:G,originRid:es||et,query_from:null!==(n=null==c?void 0:c.query_from)&&void 0!==n?n:"default",topic_short_id:su||(null==c?void 0:c.topic_id),web_search:o,short_id:p,auto_routing:!j,onThreadHeaderInfo:rd,model:P,mode:N,preset_contexts:F.Z.getState().webSummarySources,device_id:M,documents:tH?(null==ev?void 0:ev.length)?ev:eF:ev,document_action:0===en&&eb||"",...c.template&&{agent_info:{agent_id:c.template.short_id||"",steps:(null===(t=c.template.sub_topics)||void 0===t?void 0:t.map(e=>e.title))||[],current_step:en,params:c.template.params}},onTools:ru,onHideReply:rm,onThreadType:rf,onQuery:rv,onMessageSource:rx,onRequestBefore:ro,onRequestStart:()=>{s1("requestStartTime")},onFirstSources:s8,onSenondSources:e=>{if(h===O.zA){let t=e.map(e=>({post_id:e.id,image_url:e.imageUrl})).flat().filter((e,t,s)=>t===s.findIndex(t=>t.post_id===e.post_id)&&!e.image_url.includes("search_result"));t.length>0&&(0,sX.Xs)(t,"XIAOHONGSHU")}re(e)},onExpandType:s6,onRelevancyModelInfo:tW,onQueryPlans:tU,onQueryRewritersInfo:s9,onMarkdown:rs,onRelates:ra,onDone:rg,onReasoningText:rr,onReflectionInfo:ri,onReflectionAnswer:rn,onReflectionAgentAnswer:rt,onQrInfoUrlExpands:s4,onTopicTools:rc,onError:e=>{rl(e),s5()},onSearchModeError:si,resetTimeout:rw,onPreTools:rh,onToolCallResult:rp}),y&&G&&!er.r8&&(0,ex.I)({eventName:"query_felo_search",eventParams:{event_category:"customEvent",event_label:y,value:1}}),y&&G&&(null===(a=(l=window).clarity)||void 0===a||a.call(l,"event","query_felo_search")),"chat"===h&&(0,H.fk)(q.U.FELO_SEARCH_CHAT,{query:y,shortId:es},!0),h===O.Ts&&(0,H.fk)(q.U.FELO_SEARCH_THREAD_VOICE,{query:y,shortId:es},!0),0!==en||d||(null===(s=c.template)||void 0===s?void 0:s.template_type)!==b.W.CUSTOM||(0,H.fk)(q.U.SEARCH_AGENT_SIDEBAR_USE_ISA,{value:1},!0);let L=localStorage.getItem(sF.J.GTAG_EVENT_ACTIVATION),I=await (0,iX.f)();L||(localStorage.setItem(sF.J.GTAG_EVENT_ACTIVATION,I),(0,ex.I)({eventName:"first_search_activation",eventParams:{event_category:"customEvent",event_label:"first_search_activation",value:I}}))},rk=()=>{ez(en),(0,sY.Kp)(es||et||"",t_)},rC=e=>{let t=tR.ZP.getState().isLogin,{isPro:s}=Y.ZP.getState();if(["pro","discovery"].includes(e)){if(!t){i_.Z.info(ek("please_login_first"));return}if(!eA){s?i_.Z.error(ek("pro_search_out_limit")):$.$.publish("showSubscriptionPlan",void 0);return}"pro"===e&&ry({type:"pro",params:{}}),"discovery"===e&&ry({type:"discovery",params:{mode:O.iV,queryCategory:O.gl,closeAutoRouting:!0}})}else if("chat"===e)ry({type:"category",params:{model:"gpt-4o",queryCategory:"chat"}});else{if("gpt-4o-mini"===e){ry({type:"basic",params:{}});return}if(!eA){s?i_.Z.error(ek("pro_search_out_limit")):$.$.publish("showSubscriptionPlan",void 0);return}ry({type:"model",params:{model:e,mode:O.NY}})}},r_=(0,o.useMemo)(()=>!(0,st.s2)()||t1!==O.Ys&&W!==O.Ys||!(0,st.s2)()||(null==tZ?void 0:tZ.length)>1,[W,null==tZ?void 0:tZ.length,t1]);return(0,o.useEffect)(()=>{if(!eH)return;let e=(e,t)=>{let s=JSON.parse(t.toString());if(s.process_id!==sq.current)return;if(!s){rl("Network Error"),s5();return}let{data:r,fail_reason:i,status:n}=s;if("complete"===n)return;if(i){rl("string"==typeof i?i:i.message||JSON.stringify(i)),s5();return}if(!r)return;s1("mqttRequestStartTime"),eo({message:JSON.stringify(r),callbackMethod:{onThreadHeaderInfo:rd,onTools:ru,onHideReply:rm,onThreadType:rf,onQuery:rv,onMessageSource:rx,onFirstSources:s8,onSenondSources:re,onExpandType:s6,onRelevancyModelInfo:tW,onQueryPlans:tU,onQueryRewritersInfo:s9,onMarkdown:rs,onReasoningText:rr,onReflectionInfo:ri,onReflectionAnswer:rn,onReflectionAgentAnswer:rt,onTopicTools:rc,onQrInfoUrlExpands:s4,onRelates:ra,onDone:rg,onError:e=>{rl(e),s5()},resetTimeout:rw,onPreTools:rh,onToolCallResult:rp}});let{type:a}=r;"answer"!==a&&"reasoning"!==a&&"tools"!==a||s0("getMqttResultTime")||s1("getMqttResultTime")};return eH.on("message",e),()=>{eH.off("message",e)}},[eH]),(0,o.useEffect)(()=>(rj(e_),()=>{clearTimeout(sg.current||void 0),null==e_||e_.abort(),sd()}),[]),(0,o.useEffect)(()=>()=>{0===en&&eT("")},[G]),(0,o.useEffect)(()=>{let e=new IntersectionObserver(t=>{let[s]=t;s.isIntersecting&&(sA(!0),e.disconnect())},{root:null,rootMargin:"0px",threshold:.1});return sZ.current&&e.observe(sZ.current),()=>{sZ.current&&e.unobserve(sZ.current)}},[]),(0,o.useEffect)(()=>{["en","ja","ko","zh-hant"].includes(null==eC?void 0:eC.toLocaleLowerCase())||eM({status:tP.nV.SUCCESS})},[eC]),(0,o.useEffect)(()=>{var e,t,s,r,i,n,a,l;(null==ee?void 0:null===(r=ee.template)||void 0===r?void 0:null===(s=r.sub_topics)||void 0===s?void 0:null===(t=s.find(e=>"ppt_generation"===e.title))||void 0===t?void 0:null===(e=t.tools)||void 0===e?void 0:e.find(e=>(null==e?void 0:e.name)==="ppt_render"))&&!ee.id?e$(!0):(null==ee?void 0:null===(l=ee.template)||void 0===l?void 0:null===(a=l.sub_topics)||void 0===a?void 0:null===(n=a.find(e=>"smart_graph"===e.title))||void 0===n?void 0:null===(i=n.tools)||void 0===i?void 0:i.find(e=>(null==e?void 0:e.name)==="smart_graph"))&&!ee.id&&eJ(!0)},[ee]),(0,l.jsxs)(l.Fragment,{children:[ew&&ew.template_type===b.W.CUSTOM?(0,l.jsx)(nL,{isOpenEditQuery:sf,query:tS,markdown:ts,autoShowPPT:eG,setAutoShowPPT:e$,sources:sR,loading:ss,isVisible:sM,isDocument:sb,onSaveByQueryEditor:e=>{ry({type:"query",params:{query:e}})},thread:ee,tools:eK,className:V,canEdit:ea,setIsOpenEditQuery:sx,messageId:t_,rid:(null==ee?void 0:ee.rid)||e5,processValue:t8,pptCover:ep,queryCategory:W,onDelete:rk,shortId:es||et,threadIndex:en,onReanswer:rC,isLast:el,images:tF,error:t5,isAnswerDone:t6,relates:tE,isChat:sk,template:ew,hideRewriteModel:![O.me,O.gl,O.V9].includes(t1||"")}):(0,l.jsxs)("div",{ref:sZ,className:(0,v.cn)("thread-item scroll-mt-28 mb-12 pt-12 flex justify-center gap-10 flex-col lg:flex-row break-words thread-container-".concat(t_),V),style:{wordBreak:"break-word"},children:[(0,l.jsxs)("div",{className:"flex-grow flex flex-col min-w-0 max-w-3xl 2xl:mr-auto",children:[(0,l.jsxs)("div",{className:"mb-6",children:[sf?(0,l.jsx)(tV,{initialQuery:tS,onSave:e=>{sq.current=(0,C.x0)(),ry({type:"query",params:{query:e}})},onCancel:()=>{sx(!1)}}):(0,l.jsx)(tJ,{query:tS,canEdit:ea,onEditClick:()=>{sx(!sf)}}),!sk&&(()=>{var e,t,s,r;let i="px-3 py-1 rounded-3xl bg-theme-bg-100 dark:bg-theme-bg-dark-100 text-theme-font-500 dark:text-theme-font-dark-700 text-xs";return(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 mt-4",children:[(null===(e=ee.source)||void 0===e?void 0:e.type)!==O.RQ&&ee.category&&ee.category!==O.RQ&&(0,l.jsx)("span",{className:i,children:ek((0,z.Y)(ee.category))}),(null===(t=ee.source)||void 0===t?void 0:t.type)===O.RQ&&(0,l.jsxs)("div",{className:i,children:[ek("topic.topic"),":",(0,l.jsx)("span",{className:"text-[#17aadf] ml-1",children:null===(r=ee.source)||void 0===r?void 0:null===(s=r.info)||void 0===s?void 0:s.name})]}),(0,l.jsx)("span",{className:(0,v.cn)(i,!sR.length&&"hidden"),children:ek("search_result.sources_count",{count:sR.length})}),(0,l.jsx)("span",{className:(0,v.cn)(i,!sB&&"hidden"),children:ek("search_result.languages_count",{count:sB})}),tL&&e2!==O.iV&&(0,l.jsx)("span",{className:i,children:(0,iS.y)(tL)}),e2===O.iV&&(0,l.jsx)("span",{className:i,children:"Research Agent"}),ee.thread_type===ed.yG&&(0,l.jsx)("span",{className:i,children:ek("extension.search_agent")}),er.r8&&tM&&tM.relevancy_model_use&&(0,l.jsxs)("span",{className:i,children:["RC: ",tM.relevancy_model_request]})]})})()]}),(0,st.s2)()&&t1===O.Ts&&(0,l.jsx)(i4,{thread:ee}),(0,st.s2)()&&t1===O.Ys&&(null==ee?void 0:null===(m=ee.recall_contexts)||void 0===m?void 0:null===(d=m[0])||void 0===d?void 0:null===(a=d.other_info)||void 0===a?void 0:a.file_id)&&(0,l.jsx)("div",{className:"mb-4 -mt-3 rounded-xl bg-[#E4E4E7] dark:bg-[#27272A]",children:(0,l.jsx)("img",{alt:(null==ee?void 0:null===(x=ee.recall_contexts)||void 0===x?void 0:null===(f=x[0])||void 0===f?void 0:f.title)||"image",src:(0,i8.UK)((null==ee?void 0:null===(j=ee.recall_contexts)||void 0===j?void 0:null===(w=j[0])||void 0===w?void 0:null===(g=w.other_info)||void 0===g?void 0:g.file_id)||""),className:"w-full h-[calc((100vw-40px)*0.8)] object-cover overflow-hidden border-1 rounded-xl cursor-pointer",onClick:()=>{tt(!0)}})}),(!t5||ts)&&(0,l.jsxs)(l.Fragment,{children:[(null==ew?void 0:ew.template_type)!==b.W.CUSTOM&&(0,l.jsx)(iJ,{defaultExpanded:tQ,defaultDiscoveryModeStyle:ee.thread_type===ed.yG&&[O.iV,O.NY].includes(ee.mode),query:tS,tools:eK.filter(e=>"TransferToWriteReportAgent"!==e.name),category:t1,languageCount:sB,processValue:t8,queryPlans:tI,relevancyInfo:tM,rewritersInfo:t$,firstSources:e6,secondSources:tZ,reasoningText:to,reasoningEnd:tc,sources:sR,reflectionInfo:tv,reflectionAgentAnswer:tn,qrInfoUrlExpands:e0,topicTools:tj},ee._local_id+"thread_stepper"),!tD&&t1&&(0,l.jsx)("div",{"data-id":t_,children:(0,l.jsx)(tA,{index:en,thread:ee,threadId:es||et,messageId:t_,sources:sR,pptCover:ep,threadTypeFrom:t1},ee._local_id)}),(0,l.jsx)(y,{skeleton:sk?"single":"multiple",markdown:ts,sources:sR,rid:(null==ee?void 0:ee.rid)||e5,loading:ss,isVisible:sM,messageId:t_,isDocument:sb,reflectionAnswer:th,reflectionAnswerStart:tm,template:ew}),ee.id&&(null==ee?void 0:null===(E=ee.template)||void 0===E?void 0:null===(S=E.sub_topics)||void 0===S?void 0:null===(N=S.find(e=>"ppt_generation"===e.title))||void 0===N?void 0:null===(k=N.tools)||void 0===k?void 0:k.find(e=>(null==e?void 0:e.name)==="ppt_render"))&&!(0,st.s2)()&&(0,l.jsx)(nj,{thread:ee,setAutoShowPPT:e=>e$(e),pptData:(null==eK?void 0:null===(T=eK.find(e=>{var t,s;return(null==e?void 0:e.name)==="ppt_render"&&(null===(s=e.params)||void 0===s?void 0:null===(t=s.ppt_content)||void 0===t?void 0:t.length)}))||void 0===T?void 0:T.params)||null,autoShowPPT:eG,outline:ts||""}),tq&&ee.id&&(0,l.jsx)(nR,{thread:ee,threadId:es||et,autoShowGraphic:eY,setAutoShowGraphic:eJ}),!ej&&!t5&&t6&&tD?(0,l.jsx)(nZ,{thread:ee}):null,tD&&t1&&(0,l.jsx)("div",{"data-id":t_,children:(0,l.jsx)(tA,{index:en,thread:ee,threadId:es||et,messageId:t_,sources:sR,pptCover:ep,threadTypeFrom:t1,isAgentMindmap:tD},ee._local_id)}),sw&&(0,l.jsx)("section",{className:"mb-8",children:(0,l.jsx)(tz,{sources:sR,processValue:t8,messageId:t_,thread:ee})}),sS&&(0,l.jsx)(J,{onClose:()=>sE(!1)}),!t5&&t6&&(0,l.jsx)(sW,{id:ee.id,index:en,thread:ee,messageId:t_,shortId:es||et,rid:eX?ee.rid:e5,query:tS,answer:th?"".concat(ts,"\n").concat(th):ts,sources:sR,canEdit:ea,onEditQueryClick:sx,onReanswer:rC,isFirst:0===en,isLast:el,mode:ee.mode||"",onDelete:rk,hideRewriteModel:![O.me,O.gl,O.V9].includes(t1||""),hideChat:!eS,relates:tE||[],isShowRelates:sL,setIsShowRelates:sI,pptCover:ep,images:tF,category:W||""}),s7&&(0,l.jsx)("section",{className:"mt-8",children:(0,l.jsx)(iC,{shouldUseDiscovery:tS.length>18,onSearch:()=>{ry({type:"routing",params:{queryCategory:O.gl,closeAutoRouting:!0}})},onDiscoverySearch:()=>{ry({type:"routing",params:{mode:O.iV,queryCategory:O.gl,closeAutoRouting:!0}})}})}),!tH&&!t5&&(es||et)&&sL&&tE&&tE.length>0&&(0,l.jsx)("div",{className:"mt-8 animate-[fadeIn_1s_ease-in-out]",children:(0,l.jsx)(M,{disabled:ss,shortId:es||et,relates:tE,isFollowUpNew:!ea,queryCategory:W})})]}),t5&&(0,l.jsx)(K,{content:t5||"",markdown:ts,retryGenerate:()=>{sz(!1),rl(null),ry({type:"query",params:{}})},isFirstRetry:sD})]}),(0,l.jsx)("div",{className:"flex-none w-full lg:w-[28%] ".concat(sw?/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?"w-full":"min-w-[424px]":"min-w-72"),children:(!t5||ts)&&sT&&r_&&(!sk||sk&&sR.length>0)&&(0,l.jsx)(iy,{query:tS,category:sb&&"document"||sw&&"scholar"||s_&&"file"||"",canEdit:ea,threadRid:(null==ee?void 0:ee.rid)||e5,processValue:t8,sources:sR,images:tF,defaultExpandKeys:e8,isDisabled:ss,isVisible:sM,onImagesClick:()=>{(0,H.fk)(q.U.THREAD_RELATED_IMAGES,{query:tS,shortId:es},!0)},onVideosClick:()=>{(0,H.fk)(q.U.THREAD_RELATED_VIDEOS,{query:tS,shortId:es},!0)},onDeleteAndRewrite:()=>{let e=[];sR.map((t,s)=>{eR.includes(s)||e.push(t)}),ry({type:"sources",params:{sources:e}})}})})]}),(0,l.jsxs)(h.Vq,{open:te,onOpenChange:()=>{tt(!1)},children:[(0,l.jsx)(p.T,{children:(0,l.jsx)(h.$N,{children:(null==ee?void 0:null===(A=ee.recall_contexts)||void 0===A?void 0:null===(P=A[0])||void 0===P?void 0:P.title)||"image"})}),(0,l.jsx)(h.cZ,{hideCloseButton:!0,"aria-describedby":void 0,className:(0,ne.Z)("max-w-screen-sm","bg-transparent border-none"),children:(0,l.jsxs)(h.a7,{className:"w-full max-w-md mx-auto relative",children:[(0,l.jsx)("div",{className:"absolute -top-8 right-2 z-20",children:(0,l.jsx)(h.GG,{className:"rounded-full p-1 bg-white/80 outline-none dark:bg-gray-700",children:(0,l.jsx)(U.Z,{size:20})})}),(0,l.jsx)("div",{className:"relative mb-4 -mt-3  flex justify-center z-0 min-h-[200px] rounded-xl bg-[#E4E4E7] dark:bg-[#27272A]",children:(0,l.jsx)(u.J,{classNames:{img:"max-h-[calc(100vh-160px)]"},radius:"sm",alt:(null==ee?void 0:null===(I=ee.recall_contexts)||void 0===I?void 0:null===(L=I[0])||void 0===L?void 0:L.title)||"image",src:(0,i8.UK)((null==ee?void 0:null===(R=ee.recall_contexts)||void 0===R?void 0:null===(D=R[0])||void 0===D?void 0:null===(Z=D.other_info)||void 0===Z?void 0:Z.file_id)||"")})})]})})]}),eN&&eP&&(es||et)?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(iK.Z,{shortId:es||et||""})}):null,(eN||(0,st.s2)())&&(es||et)&&(0,l.jsx)("div",{className:"!opacity-0 !pointer-events-none",children:(0,l.jsx)(i3,{shortId:es||et||""})})]})};var nq=s(75963),nH=s(93992),nV=s.n(nH),nW=s(87582),nU=s(29634);s(85625);var nG=s(77824);let n$=(0,T.Z)("Slash",[["path",{d:"M22 2 2 22",key:"y4kqgn"}]]),nY=(0,T.Z)("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);var nJ=s(39696);let nX=(0,T.Z)("FilePen",[["path",{d:"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v10",key:"x7tsz2"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10.4 12.6a2 2 0 1 1 3 3L8 21l-4 1 1-4Z",key:"o3xyfb"}]]),nK=(0,T.Z)("FolderMinus",[["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var nQ=s(72153),n0=s(40141),n1=s(19370),n2=e=>{let{positionX:t,loading:s,selectedTopic:r,isOpen:i,onClose:n,onCreateNew:a,onSelect:d,onCancel:u}=e,h=(0,c.useTranslations)(),{list:p}=(0,tB.Z)(),m=(0,o.useMemo)(()=>(null==r?void 0:r.short_id)||"",[r]);if(i)return(0,l.jsxs)("div",{className:(0,v.cn)("fixed z-20 top-20 bg-white dark:bg-theme-bg-dark-100 shadow-xl p-4 rounded-xl w-[23em] max-w-[90vw]",!t&&"right-4"),style:{left:t?"".concat(t,"px"):void 0},children:[(0,l.jsxs)("header",{className:"flex items-center",children:[(0,l.jsx)("h3",{className:"text-lg",children:h("topic.added_to_topic")}),(0,l.jsx)(U.Z,{className:"ml-auto cursor-pointer w-5 h-5",onClick:n})]}),(0,l.jsxs)("main",{children:[(0,l.jsxs)("div",{className:"flex items-center my-4",children:[(0,l.jsx)("span",{className:"flex-1 text-sm mr-4 whitespace-nowrap",children:h("topics")}),(0,l.jsxs)(n1.Ph,{value:m,onValueChange:e=>{if("create"===e){a();return}let t=p.find(t=>t.short_id===e);t&&d(t)},children:[(0,l.jsx)(n1.i4,{disabled:s,children:(0,l.jsx)(n1.ki,{placeholder:h("topics")})}),(0,l.jsxs)(n1.Bw,{children:[p.map(e=>(0,l.jsx)(n1.Ql,{value:e.short_id,children:e.name},e.short_id)),(0,l.jsx)(n1.U$,{}),(0,l.jsx)(n1.Ql,{value:"create",children:h("topic.create_new_theme")})]})]})]}),(0,l.jsxs)("footer",{className:"flex justify-end gap-2",children:[(0,l.jsx)(W.A,{variant:"light",className:"border border-theme-border-200 dark:border-theme-border-dark-200",disabled:s,onClick:u,children:h("remove")}),(0,l.jsx)(W.A,{color:"primary",disabled:s,onClick:n,children:h("complete")})]})]})]})},n3=s(89335),n5=function(e){let{defaultTopic:t,threadId:s}=e,r=(0,c.useTranslations)(),[i,n]=(0,o.useState)(t),[a,l]=(0,o.useState)(t),[d,u]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!1),m=async e=>{if(s){p(!0);try{(i?await (0,n3._j)({topicId:i.short_id,threadShortId:s,nextTopicId:e.short_id}):await (0,n3.EG)({topicId:e.short_id,threadShortId:s}))?n(e):i_.Z.error("Failed to bind topic")}catch(e){i_.Z.error("Failed to fetch topics")}finally{p(!1)}}},f=async()=>{if(s&&i){u(!0);try{await (0,n3.vU)({topicId:i.short_id,threadShortId:s})?n(void 0):i_.Z.error("Failed to unbind thread from topic")}catch(e){i_.Z.error("An error occurred while unbinding the thread")}finally{u(!1)}}},x=async()=>{let e={name:r("topic.default_topic"),description:r("topic.default_topic_desc"),instruction:"",icon:""};await (0,n3.HV)(e)&&await tB.Z.getState().getList().then(e=>{m(e[0]),l(e[0])})},v=async()=>{u(!0);let e=await tB.Z.getState().getList();try{0===e.length?await x():(await m(e[0]),l(e[0]))}catch(e){i_.Z.error("Create default collection failed")}u(!1)};return{topic:i,setTopic:n,selectedTopic:a,setSelectedTopic:l,topicLoading:d,bindLoading:h,checkCreateDefaultCollection:v,onBindTopic:m,onUnbindTopic:f}},n7=s(62167),n6=s(48482),n4=s(57546),n8=s(26077),n9=s(97308),ae=s(25034),at=e=>{let{text:t,color:s,classNames:r,onPress:i}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(W.A,{size:"sm",className:(0,ne.Z)(r||"","brorounded-sm","px-1 py-[1px] font-normal text-[11px]","min-w-0 h-auto","bg-black bg-opacity-70 text-white"),onPress:i,children:t})})},as=e=>{let{menuChange:t}=e,s=(0,c.useTranslations)(),{generateType:r,setGenerateType:i,pptBtnKey:n,generateKey:a}=(0,tN.Z)();return(0,l.jsxs)("div",{className:"px-3 py-4",children:[(0,l.jsx)("h3",{className:"text-small font-bold",children:s("ppt.select_generate_title")}),(0,l.jsx)("div",{className:"flex flex-col gap-2 my-4",children:(0,l.jsxs)(sc.X,{size:"sm",value:r,onValueChange:e=>i(e),children:[(0,l.jsx)(su.J,{value:"answer",children:(0,l.jsx)("span",{className:"text-xs",children:s("ppt.select_generate_answer")})}),(0,l.jsx)(su.J,{value:"file",children:(0,l.jsx)("span",{className:"text-xs",children:s("ppt.select_generate_file")})})]})}),(0,l.jsx)("div",{className:"flex",children:(0,l.jsx)(W.A,{className:"w-full",color:"primary",size:"sm",onPress:()=>{t({key:a||n})},children:s("ppt.generate_ppt_one_click")})})]})};let ar=e=>{var t;let{menuChange:s,setIsOpen:r}=e,i=(0,c.useTranslations)(),{isOpenCanvaEditorLoading:n,isMyThread:a}=(0,tN.Z)(),o=(0,_.Z)(e=>e.threads),{threadPPTCacheData:d,pptThreadBtnEntrance:h}=(0,tF.Z)();return(0,l.jsxs)("div",{className:"w-[300px] p-1",children:[(0,l.jsx)("h4",{className:"text-sm mb-3 mt-1",children:i("ppt.view_doc_title")}),(0,l.jsxs)("div",{className:(0,ne.Z)("border rounded-md border-slate-100 relative min-h-[160px] dark:border-slate-800","group"),children:[(null==d?void 0:d.cover_url)?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(u.J,{className:(0,ne.Z)("w-full max-w-full relative z-10 min-h-[160px] rounded-md opacity-100","group-hover:opacity-50 transition-opacity duration-300"),alt:"PPT",src:null==d?void 0:d.cover_url})}):(0,l.jsx)("div",{className:"w-full flex items-center justify-center bg-gray-100 h-[160px] dark:bg-gray-900",children:(0,l.jsx)("div",{className:"text-sm text-gray-500",children:i("ppt.generating_tip")})}),h.find(e=>"edit"===e.key)?(0,l.jsx)(at,{text:i("ppt.edit_ppt_btn"),color:"primary",classNames:"absolute top-2 right-2 z-20",onPress:()=>{s({key:"edit"}),r&&r(!1)}}):null,(0,l.jsxs)("div",{className:"absolute z-20 bottom-2 right-2",children:[h.find(e=>"preview"===e.key)?(0,l.jsx)(at,{text:i("ppt.preivew_ppt_btn_new"),classNames:"mr-2",color:"primary",onPress:()=>{s({key:"preview"}),r&&r(!1)}}):null,h.find(e=>"download"===e.key)?(0,l.jsx)(at,{text:i("ppt.download_ppt_btn"),color:"primary",onPress:()=>{s({key:"download"}),r&&r(!1)}}):null]})]}),h.find(e=>"regenerate"===e.key)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h4",{className:"text-sm my-3",children:i("ppt.control_title")}),(0,l.jsx)("div",{className:"my-3",children:(0,l.jsxs)(n8.j,{placement:"bottom",showArrow:!0,backdrop:"opaque",children:[(null==o?void 0:null===(t=o[0])||void 0===t?void 0:t.category)===O.J5?(0,l.jsx)(n9.b,{children:(0,l.jsx)(G.z,{color:"primary",size:"sm",className:"w-full",children:i("ppt.regenerate_btn")})}):(0,l.jsx)(G.z,{color:"primary",size:"sm",className:"w-full",onClick:()=>{s({key:"regenerate"}),r&&r(!1)},children:i("ppt.regenerate_btn")}),(0,l.jsx)(ae.g,{children:(0,l.jsx)(as,{menuChange:s})})]})})]}):null,h.find(e=>"generate"===e.key)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h4",{className:"text-sm my-3",children:i("ppt.control_title")}),(0,l.jsx)("div",{className:"my-3",children:(0,l.jsx)(G.z,{size:"sm",className:"w-full",onClick:()=>{s({key:"generate"}),r&&r(!1)},children:i("ppt.generate_ppt_btn")})})]}):null,a?(0,l.jsx)("div",{className:"my-3",children:(0,l.jsxs)(G.z,{size:"sm",className:(0,ne.Z)("w-full bg-[#8B3DFF] hover:bg-[#8B3DFF]",!h.find(e=>"connectCanva"===e.key)&&"opacity-60"),disabled:n||!h.find(e=>"connectCanva"===e.key),onClick:()=>{s({key:"connectCanva"})},children:[n&&(0,l.jsx)(nI.Z,{className:"animate-spin"}),i("ppt.edit_in_canva")]})}):null]})};var ai=e=>{let{menuChange:t}=e,s=(0,c.useTranslations)(),{isMobile:r}=(0,tk.Z)(),[i,n]=(0,o.useState)(!1);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(tU.e,{showArrow:!0,placement:"top-end",content:(0,l.jsx)(ar,{menuChange:t,setIsOpen:n}),children:(0,l.jsxs)(G.z,{id:"pptGenerate",className:"relative z-10 rounded-lg",variant:"outline-primary",onClick:()=>{n(!0)},children:[(0,l.jsx)(i2.$U,{className:"w-[24px]"}),(0,l.jsx)("span",{className:"lg:inline hidden",children:s("ppt.preview_ppt_btn")})]})}),(0,l.jsxs)(n8.j,{placement:"top-end",showArrow:!0,isOpen:i,onOpenChange:e=>n(e),children:[(0,l.jsx)(n9.b,{children:(0,l.jsxs)(G.z,{className:"absolute left-0 top-0 z-0 rounded-lg",variant:"outline-primary",children:[(0,l.jsx)(i2.$U,{className:"w-[24px]"}),(0,l.jsx)("span",{className:"lg:inline hidden",children:s("ppt.preview_ppt_btn")})]})}),(0,l.jsx)(ae.g,{children:(0,l.jsx)(ar,{menuChange:t,setIsOpen:n})})]})]})})},an=e=>{var t;let{btnPpt:s,login:r,menuChange:i}=e,n=(0,c.useTranslations)(),{threads:a}=(0,_.Z)(),{isMyThread:o,isShowSelectType:d,setIsShowSelectType:u}=(0,tN.Z)(),h=(0,tR.ZP)(e=>e.isLogin),p=(0,n4.Z)(e=>e.openThreadModal);return(0,l.jsx)(l.Fragment,{children:!o&&h?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(tU.e,{showArrow:!0,placement:"bottom-end",content:(0,l.jsxs)("div",{className:"flex items-center text-xs flex-wrap",children:[(0,l.jsx)("div",{className:"w-full mt-2",children:n("ppt.go_my_threads_generate_tip")}),(0,l.jsx)(tK.j,{className:"w-full my-3"}),(0,l.jsx)("div",{className:"w-full flex items-center text-xs",children:(0,l.jsx)("span",{className:"ml-1",children:(0,l.jsx)(W.A,{size:"sm",onPress:()=>{p(),n4.Z.getState().setSidebarVisible(!1)},className:"mx-1 px-2 py-1 h-6 min-w-0",color:"primary",children:n("ppt.new_thread")})})})]}),classNames:{base:"max-w-[360px] before:bg-white dark:before:bg-gray-800",content:["text-gray-800 bg-white  dark:text-white dark:bg-gray-800 p-3"]},children:s({})})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(n8.j,{placement:"bottom",showArrow:!0,onOpenChange:e=>{u(e)},onClose:()=>{u(!1)},children:[(0,l.jsx)(tU.e,{showArrow:!0,placement:"bottom-end",delay:0,isDisabled:d,content:(0,l.jsxs)("div",{className:"flex items-center text-xs flex-wrap",children:[(0,l.jsx)("div",{className:"w-full mt-2",children:n("ppt.generate_ppt_btn_tip")}),h?null:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(tK.j,{className:"w-full my-3"})," ",(0,l.jsxs)("div",{className:"w-full flex items-center text-xs",children:[(0,l.jsx)(s4.Z,{size:16}),(0,l.jsx)("span",{className:"ml-1",children:(0,l.jsx)(W.A,{size:"sm",onPress:r,className:"mx-1 px-2 py-1 h-6 min-w-0",color:"primary",children:n("ppt.login_expired")})})]})]})]}),classNames:{base:"max-w-[360px] before:bg-white dark:before:bg-gray-800",content:["text-gray-800 bg-white  dark:text-white dark:bg-gray-800 p-3"]},children:(null==a?void 0:null===(t=a[0])||void 0===t?void 0:t.category)===O.J5?(0,l.jsx)("div",{className:"max-w-fit",children:(0,l.jsx)(n9.b,{children:s({disableClick:!0})})}):s({})}),(0,l.jsx)(ae.g,{children:(0,l.jsx)(as,{menuChange:i})})]})})})},aa=e=>{let{shortId:t,isMyThread:s}=e,{isMobile:r}=(0,iQ.b)(),i=(0,F.Z)(e=>e.loading),{isShowPptModal:n,setIsShowPptModal:a,setIsShowPptBtnAnimate:d,isShowPptBtnAnimate:u,setIsRegenerate:h,setIsMyThread:p,setUiModalType:m,setSelectedOption:f,setIsPptGenerated:x,pptBtnKey:v,showPpt:g,setShowPpt:b,setIsShowSelectType:y,setGenerateKey:w,isGenerateLoading:j,setIsGenerateLoading:k,isGeneratedSuccess:C,setIsGeneratedSuccess:N,setCoverUrl:S,generateType:E,businessType:T,businessId:P,setBesinessId:M,setBusinessType:A,setPreviewPPTData:L}=(0,tN.Z)(),{setPptModalType:I,setPptDetail:Z,setGeneratePptProgress:D,setPptStatus:z}=(0,tT.Z)(),O=(0,tM.Z)(),R=(0,tR.ZP)(e=>e.isLogin),B=(0,tW.V)(),V=(0,o.useRef)(null),W=(0,c.useLocale)(),U=(0,c.useTranslations)(),J=(0,nf.Z)(),{threads:X}=(0,_.Z)(),[K,Q]=(0,o.useState)(!0),ee=()=>{n4.Z.getState().setLoginModalVisible(!0)},et=(0,Y.GS)("pptUsage"),es=(0,Y.Oi)("pptUsage"),{threadPPTCacheData:er,setThreadPPTCacheData:ei,pptThreadBtnEntrance:en,setThreadPptBtnEntrance:ea}=(0,tF.Z)(),el=async()=>{let{subscriptionInfo:e}=Y.ZP.getState();return!!e&&(!!es||!(!et||await (0,i1.jF)({threadId:t})<=0)||($.$.publish("showSubscriptionPlan",void 0),!1))},eo=async e=>{var i,n;let{key:a}=e;switch(f(new Set([a])),M(t),A(tP.LB.THREAD),a){case"generate":{if((0,H.fk)(q.U.GENERATE_PPT,{value:"generate"},!0),r){O.default(U("ppt.go_pc_generate_tip"));return}if(!R){ee();return}if(!s&&R){O.default(U("ppt.go_my_threads_generate_tip"));return}k(!0);let e=await el();if(k(!1),!e)return;m("generate"),ec();break}case"regenerate":if((0,H.fk)(q.U.REGENERATE_PPT,{value:"generate"},!0),r){O.default(U("ppt.go_pc_generate_tip"));return}if(!await el())return;m("regenerate"),ec();break;case"preview":if((0,H.fk)(q.U.PREVIEW_PPT,{value:"preview"},!0),!(null==er?void 0:er.ppt_url)&&!(null==er?void 0:er.pdf_url)){O.default(U("ppt.generating_ppt_tip"));return}m("preview"),L(er),ec();break;case"edit":(0,H.fk)(q.U.EDIT_PPT,{value:"edit"},!0),m("edit"),ec();break;case"download":(0,H.fk)(s?q.U.AUTHOR_DOWNLOAD_PPT:q.U.DOWNLOAD_PPT,{value:"download"},!0),(null==er?void 0:er.ppt_url)?window.open(null==er?void 0:er.ppt_url):O.default(U("ppt.generating_ppt_tip"));break;case"share":{(0,H.fk)(s?q.U.AUTHOR_SHARE_PPT:q.U.SHARE_PPT,{value:t},!0);let e=sB.Z.getState().current,r=new URL("".concat(location.origin,"/search/").concat(t));r.searchParams.append("showppt","1"),e&&r.searchParams.append("invite",e),B.copy(r.toString()),O.default(U("ppt.copied_url_success"));break}case"connectCanva":null===(i=V.current)||void 0===i||i.openCanvaEditor();break;case"revokeCanva":null===(n=V.current)||void 0===n||n.revokeCanva()}},ed=(0,o.useMemo)(()=>[1,2,3,4,5].includes((null==er?void 0:er.status)||-1)?U("ppt.edit_ppt_btn"):U("ppt.generate_ppt_btn"),[er]),ec=()=>{h(!1),a(!0),M(t)},eu=(0,o.useCallback)(async()=>{let e=(0,tP.qR)();if(Z(null),S(""),Q(!0),(0,st.s2)()){Q(!1);return}if(!W||t!==e)return;let s=await (0,i1.OQ)({thread_id:t,businessType:tP.LB.THREAD});s&&(null==s?void 0:s.status)&&(ei(s),x(!0)),Q(!1)},[W,s,t]);return(0,o.useEffect)(()=>{if(!u)return;let e=setTimeout(()=>{d(!1)},100);return()=>{clearTimeout(e)}},[u,d]),(0,o.useEffect)(()=>{p(null!=s&&s)},[s,p]),(0,o.useEffect)(()=>{eu();let e=(0,n6.E)("showppt",location.href);b(e||""),"1"===e&&(null==er?void 0:er.status)&&(null==er?void 0:er.status)>0&&(a(!0),M(t),A(tP.LB.THREAD),m("preview"),D(100),I("preview"),L(er),z("preview"),(0,H.fk)(s?q.U.AUTHOR_SHARE_PPT:q.U.SHARE_PPT,{value:t},!0))},[t,s,R,null==er?void 0:er.status]),(0,o.useEffect)(()=>{N(!1)},[]),(0,o.useEffect)(()=>{var e;let t=(0,tP.qR)()||(null==X?void 0:null===(e=X[0])||void 0===e?void 0:e.id);t&&C&&t===tN.Z.getState().businessId&&(J.pollLastPpt({threadId:t,businessType:tP.LB.THREAD,onPollingResult:e=>{e&&ei(e)}}).then(e=>{ei(e)}),N(!1))},[C]),(0,o.useEffect)(()=>{let e=[{key:"preview",value:"ppt.preview_ppt_btn"},{key:"edit",value:"ppt.edit_ppt_btn"},{key:"generate",value:"ppt.generate_ppt_btn"},{key:"regenerate",value:"ppt.regenerate_btn"},{key:"download",value:"ppt.download_ppt_btn"}];if(console.log("\uD83C\uDF4E ~ useEffect ~ threadPPTCacheData:",er),!(null==er?void 0:er.status)){ea([]);return}((null==er?void 0:er.status)===1||(null==er?void 0:er.status)===3||(null==er?void 0:er.status)===4||(null==er?void 0:er.status)===5)&&(e=(null==er?void 0:er.status)===4?[{key:"edit",value:"ppt.edit_ppt_btn"},{key:"regenerate",value:"ppt.regenerate_btn"},{key:"download",value:"ppt.download_ppt_btn"},{key:"connectCanva",value:"ppt.connect_to_canva"}]:[{key:"edit",value:"ppt.edit_ppt_btn"},{key:"regenerate",value:"ppt.regenerate_btn"}]),(null==er?void 0:er.status)===2&&(e=[{key:"preview",value:"ppt.preview_ppt_btn"},{key:"edit",value:"ppt.edit_ppt_btn"},{key:"regenerate",value:"ppt.regenerate_btn"},{key:"download",value:"ppt.download_ppt_btn"},{key:"connectCanva",value:"ppt.connect_to_canva"}]),s||(e=(e=R?[{key:"preview",value:"ppt.preview_ppt_btn"},{key:"download",value:"ppt.download_ppt_btn"}]:[{key:"preview",value:"ppt.preview_ppt_btn"},{key:"generate",value:"ppt.generate_ppt_btn"},{key:"download",value:"ppt.download_ppt_btn"}]).filter(e=>"regenerate"!==e.key)),(null==er?void 0:er.type)===1&&(e=e.filter(e=>"edit"!==e.key)),ea([...e])},[null==er?void 0:er.status]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(nm.Z,{threadId:t,ref:V}),"1"===g||["en","ja","ko","zh-hant"].includes(null==W?void 0:W.toLocaleLowerCase())?(0,l.jsx)(l.Fragment,{children:i||K?null:(0,l.jsx)(tH.E.div,{initial:{scale:1},animate:u?{scale:1.1}:{scale:1},children:r?(0,l.jsx)(i3,{shortId:t}):(null==en?void 0:en.length)<=0?(0,l.jsx)(an,{btnPpt:e=>{let{disableClick:t=!1,isShowSelectType:s}=e;return(0,l.jsxs)(G.z,{id:"pptGenerate",className:"rounded-lg",disabled:K,variant:r?"ghost":"outline-primary",size:r?"icon-sm":void 0,isLoading:j,onClick:t?void 0:()=>{if(s){w("generate"),y(!0);return}eo({key:(null==er?void 0:er.status)?"edit":"generate"})},children:[(0,l.jsx)(i2.$U,{className:"w-[24px]"}),ed]})},login:ee,menuChange:eo}):(0,l.jsx)(ai,{menuChange:eo})})}):null]})},al=s(14386),ao=s(48518),ad=s(22313),ac=e=>{var t,s,r;let{shortId:i,queryCategory:n,title:a,isMyThread:d,topicSource:u,threadUid:p,template:m}=e,f=(0,c.useTranslations)(),x=(0,c.useLocale)(),{isApp:v,isMobile:g}=(0,iQ.b)(),y=(0,Q.Z)(e=>e.deleteItem),w=(0,nq.useRouter)(),j=(0,tW.V)(),k=(0,tR.ZP)(e=>e.isLogin),[C,N]=(0,o.useState)(a),[S,E]=(0,o.useState)(!1),T=(0,Q.Z)(e=>e.UpdateList),P=(0,o.useRef)(null),M=(0,o.useRef)(null),A=(0,o.useRef)(null),{threads:L,mindmapList:I}=(0,_.Z)(),{getList:Z,list:D}=(0,tB.Z)(),{isOpen:z,onOpen:O,onClose:R}=(0,sL.q)(),{isOpen:B,onOpen:V,onClose:W}=(0,sL.q)(),{isOpen:U,onOpen:Y,onClose:J}=(0,sL.q)(),{shareStatus:X,setShowThreadModel:K,setShareThreadId:ee}=(0,sq.Z)(),et=(0,tR.ZP)(e=>e.userInfo),{setIsTopicReply:es}=(0,F.Z)(),er=(0,F.Z)(e=>e.loading),ei=(0,_.Z)(e=>e.isUpdateTitle),en=(0,_.Z)(e=>e.setIsUpdateTitle),ea=(0,Q.Z)(e=>e.list),{pptDetail:el,setPptStatus:eo,setPptModalType:ed,setGeneratePptProgress:ec}=(0,tT.Z)(),{setIsRegenerate:eu,setIsShowPptModal:eh,setBesinessId:ep,businessId:em,businessType:ef,showPpt:ex,isShowPptModal:ev,generateType:eg}=(0,tN.Z)(),eb=(0,tM.Z)(),ey=(0,o.useRef)(i),{topic:ew,setTopic:ej,selectedTopic:ek,setSelectedTopic:eC,topicLoading:e_,bindLoading:eN,checkCreateDefaultCollection:eS,onBindTopic:eE,onUnbindTopic:eT}=n5({threadId:i,defaultTopic:void 0}),eP=(0,tR.gQ)();(0,o.useEffect)(()=>{if(U){var e;null===(e=A.current)||void 0===e||e.focus()}},[U]),(0,o.useEffect)(()=>{if(void 0===k||!v||!i)return;let e=sB.Z.getState().current,t=new URL("".concat(location.origin,"/search/").concat(i));e&&t.searchParams.append("invite",e);let s=[{action:"share",params:{url:t.toString()}}];k&&(s.unshift({action:"bookmark",params:{type:"thread",topicId:(null==ew?void 0:ew.short_id)||"",threadId:i}}),s.push({action:"remove",params:{type:"thread",id:i},folded:!0}),["en","ja","ko","zh-hant"].includes(null==x?void 0:x.toLocaleLowerCase())&&s.push({action:"generatePPT",params:{threadId:i,status:(0,tP.nw)((null==el?void 0:el.status)||"")}})),console.log("updateTopBar options",x,s),(0,s9.rg)({title:C,options:s})},[ew,k,v,i,C,null==el?void 0:el.status,x]),(0,o.useEffect)(()=>(0,s9.j1)(e=>{if(console.log("item",e),"bookmark"===e.action)eF();else if("share"===e.action)K(!0);else if("generatePPT"===e.action){let{status:t}=e.params;switch(console.log("item status",t),t){case"progress":eb.default(f("ppt.generating_ppt_tip"));break;case"preview":eo("preview"),eu(!1),ep(i),eh(!0);break;default:console.log("item generate"),ec(0),ep(i),eh(!0),ed("generate"),eo("init")}}}),[ew,i]),(0,o.useEffect)(()=>{if(S){var e;null===(e=M.current)||void 0===e||e.focus()}},[S]),(0,o.useEffect)(()=>{if(ei){let e=ea.find(e=>e.short_id===i);e&&e.title&&N(e.title),en(!1)}},[ei]),(0,o.useMemo)(()=>{var e,t,s;return!eP||(null==et?void 0:null===(s=et.user_org_member)||void 0===s?void 0:null===(t=s.org_settings)||void 0===t?void 0:null===(e=t.share_permission_config)||void 0===e?void 0:e.personal_thread_share)},[null==et?void 0:null===(r=et.user_org_member)||void 0===r?void 0:null===(s=r.org_settings)||void 0===s?void 0:null===(t=s.share_permission_config)||void 0===t?void 0:t.personal_thread_share,eP]);let eM=async()=>{if(!i)return;let e=await (0,i9.V0)(i);if(!e)return;let{topic:t}=e;ey.current===i&&t&&ej(t)},eF=()=>{ew?eT().then(W):((0,H.fk)(q.U.THREAD_FAVORITE,{id:i},!0),eS().then(()=>{V()}))},eA=e=>{eC(e),D.some(t=>t.short_id===e.short_id)||Z(),eE(e).then(()=>{ej(e)})},eL=async()=>{i&&(await y(i),J(),v?(0,s9.WU)():w.push("/search"))},eI=async()=>{if(!C){eb.error(f("topic.title_empty"));return}if(C===a){E(!1);return}try{i&&C&&(await (0,i9.qk)(i,C)?(E(!1),T()):i_.Z.error(f("titleFailed")))}catch(e){}};(0,o.useEffect)(()=>{a&&N(a)},[a]),(0,o.useEffect)(()=>$.$.subscribe("updateCurrentThreadTopic",e=>{ej(e.topic)}),[]),(0,o.useEffect)(()=>{if(ey.current=i,!i){ej(void 0);return}eM()},[i]),(0,o.useEffect)(()=>{if(et){if(!ew&&"topic"===u&&!i){es(!0);return}ew&&p===(null==et?void 0:et.uid)&&"topic"===u?es(!0):es(!1)}},[ew,et,u,i,p]);let[eZ,eD]=(0,o.useState)(void 0);(0,o.useEffect)(()=>{i&&ee(i)},[i]);let ez=g?null:(0,l.jsxs)(l.Fragment,{children:[ew?(0,l.jsxs)(tI(),{href:"/topic/".concat(ew.short_id),className:"text-sm text-primary flex items-center truncate m-1",children:[(0,l.jsx)(nG.Z,{className:"mr-2",size:16}),ew.name]}):k?(0,l.jsx)(G.z,{variant:"outline-primary",disabled:!i,onClick:e=>{i&&(eF(),eD(e.target.getBoundingClientRect().left||void 0))},children:e_?(0,l.jsx)(nI.Z,{className:"animate-spin"}):f("topic.add_topic")}):null,k&&(0,l.jsx)("div",{className:"pl-2",children:(0,l.jsx)(n$,{size:14})}),(0,l.jsxs)("span",{className:"text-sm w-max truncate flex-grow max-w-[50%] sm:max-w-[50%] md:max-w-[50%] overflow-hidden",children:[!S&&(0,l.jsxs)("div",{className:"ml-2 flex items-center max-w-[90%] w-max",children:[(0,l.jsx)("div",{className:"min-w-0 flex-grow overflow-hidden whitespace-nowrap text-ellipsis",children:C}),d&&(0,l.jsx)(nt.Z,{size:16,className:"flex-shrink-0 ml-2 text-[#0080FF] dark:text-[#0694FF] cursor-pointer",onClick:()=>E(!0)})]}),S&&d&&(0,l.jsxs)("div",{ref:P,className:"flex dark:border-[#6D7276] items-center border border-gray-300 pl-2 rounded-md",children:[(0,l.jsx)("input",{value:C,ref:M,onChange:e=>N(e.target.value),onKeyDown:e=>{13==e.keyCode&&(e.preventDefault(),eI())},onBlur:eI,className:"flex-grow border-0 focus:outline-none my-1 mr-1"}),(0,l.jsx)("span",{className:"cursor-pointer",children:(0,l.jsx)("div",{className:"bg-[#0080FF] dark:text-[#0694FF] p-2 rounded-r-md",onClick:eI,children:(0,l.jsx)(t$.Z,{size:16,className:"text-white"})})})]})]})]});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n0.Z,{children:[(0,l.jsxs)("div",{className:"flex items-center space-x-1 flex-grow overflow-hidden",children:[ez,g&&!v&&(0,l.jsx)(n7.Z,{className:"mr-2",hideIcon:!0})]}),(0,l.jsxs)("div",{className:"flex items-center gap-0 md:gap-2 flex-shrink-0",children:[k&&g&&(0,l.jsx)(G.z,{className:"rounded-lg",variant:g?"ghost":"outline-primary",size:g?"icon-sm":void 0,onClick:()=>{i&&(eF(),eD(void 0))},children:e_?(0,l.jsx)(nI.Z,{className:"animate-spin w-4 h-4"}):ew?(0,l.jsx)(nY,{fill:"currentColor"}):(0,l.jsx)(nY,{})}),!er&&(0,l.jsxs)(l.Fragment,{children:[!g&&"PUBLIC"===X&&(0,l.jsx)(tU.e,{isOpen:j.copied,placement:"left",content:(0,l.jsx)("div",{className:"p-2 bg-black bg-opacity-70 text-white rounded-lg dark:bg-white dark:text-black",children:f("shareThread.copySuccess")}),classNames:{content:["p-0"]},children:(0,l.jsx)(G.z,{className:"rounded-lg",variant:"outline-primary",onClick:()=>{let e=sB.Z.getState().current,t=new URL("".concat(location.origin,"/search/").concat(i));e&&t.searchParams.append("invite",e),j.copy(t.toString()),(0,H.fk)(q.U.THREAD_COPYLINK,{id:i},!0)},children:j.copied?(0,l.jsx)(t$.Z,{}):(0,l.jsx)(nJ.Z,{})})}),(0,l.jsxs)(G.z,{className:"rounded-lg",variant:g?"ghost":"outline-primary",size:g?"icon-sm":void 0,onClick:()=>{v&&sf.Z.getState().features.includes("shareThread")?(0,s9.vg)({shortId:i}):K(!0),(0,H.fk)(q.U.THREAD_SHARE_CLICK,{id:i},!0)},children:["PRIVATE"===X?(0,l.jsx)(al.aL,{}):(0,l.jsx)(al.u_,{})," ",!g&&f("topic.share")]})]}),(null==m?void 0:m.template_type)!==b.W.CUSTOM&&(0,l.jsx)(aa,{shortId:i||"",isMyThread:d,type:"primary"}),"1"===ex||ev&&"agent"!==eg?g?(0,l.jsx)(iK.Z,{shortId:em}):(0,l.jsx)(ad.Z,{shortId:em,businessType:ef}):null,!er&&(0,l.jsxs)(nz.h_,{children:[(0,l.jsx)(nz.$F,{asChild:!0,children:(0,l.jsx)(G.z,{className:"rounded-lg",variant:g?"ghost":"outline-primary",size:g?"icon-sm":void 0,children:(0,l.jsx)(sD.Z,{})})}),(0,l.jsxs)(nz.AW,{align:"end",className:"rounded-2xl p-3",children:[!g&&(0,l.jsxs)(nz.Xi,{onClick:()=>{ao.Z.getState().setCurrentData({query:L[0].query,threadId:L[0].short_id,hasProSearchThread:!!L.find(e=>"concise"!==e.mode)})},children:[(0,l.jsx)(nX,{className:"w-4 h-4"}),f("rewrite_to_docs.title")]}),d&&ew&&k&&(0,l.jsxs)(nz.Xi,{onClick:eT,children:[(0,l.jsx)(nK,{className:"w-5 h-5"}),f("topic.move_out")]}),d&&(0,l.jsxs)(nz.Xi,{className:"text-[#F6465D]",onClick:Y,children:[(0,l.jsx)(tZ.vW,{className:"w-5 h-5"}),f("topic.delete_post")]})]})]})]})]}),ew&&(null==m?void 0:m.template_type)!==b.W.CUSTOM&&(0,l.jsx)("div",{className:"mx-auto max-w-7xl mt-8 -mb-4 px-5 w-full relative",children:(0,l.jsx)("span",{className:"inline-block px-3 py-1 rounded-2xl bg-theme-bg-400 text-sm text-theme-font-700",children:ew.name})}),(0,l.jsx)(h.Vq,{open:U,onOpenChange:J,children:(0,l.jsxs)(h.cZ,{onOpenAutoFocus:e=>e.preventDefault(),children:[(0,l.jsx)(h.fK,{children:(0,l.jsx)(h.$N,{children:f("topic.sure_delete_posts")})}),(0,l.jsx)(h.a7,{children:(null==ew?void 0:ew.name)?f("topic.delete_topic_prompt"):f("topic.delete_posts_tip")}),(0,l.jsxs)(h.cN,{children:[(0,l.jsx)(G.z,{variant:"secondary",onClick:J,children:f("cancel")}),(0,l.jsx)(G.z,{variant:"destructive",ref:A,onClick:eL,children:f("confirm")})]})]})}),(0,l.jsx)(n2,{positionX:eZ||0,loading:eN,selectedTopic:ek,isOpen:B,onClose:W,onCreateNew:O,onSelect:eA,onCancel:()=>{eT().then(W)}}),(0,l.jsx)(nQ.Z,{isOpen:z,onClose:R,onCreateSuccess:eA})]})};let au=(0,T.Z)("GitMerge",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]);var ah=e=>{let{threadId:t}=e,s=(0,c.useTranslations)(),r=(0,w.useRouter)(),[i,n]=(0,o.useState)();(0,o.useEffect)(()=>(a(),()=>{n(void 0)}),[t]);let a=async()=>{if(!t)return;let e=await (0,i9.KZ)(t);e&&n(e.messages[0])};return(0,l.jsxs)("section",{className:"transition-all bg-[#F9FAFB] hover:bg-[#f1f1f1] dark:bg-[#20232A] dark:hover:bg-[#31333a] border border-[#dbe2e9] dark:border-[#343b4d] rounded-xl p-4 my-6 cursor-pointer",onClick:()=>{i&&r.push((0,j.Y)(t),void 0,{scroll:!0})},children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,l.jsx)(au,{size:16}),(0,l.jsx)("span",{children:s("follow_up_to")})]}),(0,l.jsx)("div",{className:"mt-2 line-clamp-1 break-all light font-display text-lg font-medium text-textOff dark:text-textOffDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark",children:null==i?void 0:i.query})]})},ap=s(13990),am=s(37376),af=s(50726),ax=s(65130),av=s(73070),ag=e=>{let{className:t,showLabel:s,queryCategory:r}=e,i=(0,c.useTranslations)(),{isChat:n,setIsChat:a}=(0,F.Z)(),d={value:O.aI,title:i("extension.chat"),desc:i("extension.chat_desc"),icon:(0,l.jsx)(am.Z,{size:20}),visible:!0,disable:!1},u={value:O.gl,title:i("extension.all"),desc:i("extension.all_desc"),icon:(0,l.jsx)(ik.Z,{size:20}),visible:!0,disable:!1},[h,p]=(0,o.useState)(!1),[m,f]=(0,o.useState)(u),x=[{value:O.gl,title:i("extension.all"),desc:i("extension.all_desc"),icon:(0,l.jsx)(ik.Z,{size:20}),visible:!0,disable:!1},{value:O.V9,title:i("extension.all"),desc:i("extension.all_desc"),icon:(0,l.jsx)(ik.Z,{size:20}),visible:!0,disable:!1},{value:O.aI,title:i("extension.chat"),desc:i("extension.chat_desc"),icon:(0,l.jsx)(am.Z,{size:20}),visible:!0,disable:!1},{value:O.pN,title:i("extension.social"),desc:i("extension.social_desc"),icon:(0,l.jsx)(af.Z,{size:20}),visible:!0,disable:!1},{value:O.Kp,title:i("extension.academic"),desc:i("extension.academic_desc"),icon:(0,l.jsx)(tZ.Od,{className:"w-5 h-5"}),visible:!0,disable:!1},{value:O.zA,title:i("extension.xiaohongshu"),desc:i("extension.xiaohongshu_desc"),icon:(0,l.jsx)(ax.Z,{size:20}),visible:!0,disable:!1},{value:O.xn,title:i("extension.reddit"),desc:i("extension.reddit_desc"),icon:(0,l.jsx)(tZ.XQ,{className:"w-5 h-5"}),visible:!0,disable:!1},{value:O.X7,title:i("extension.twitter"),desc:i("extension.twitter_desc"),icon:(0,l.jsx)(tZ.iB,{className:"w-5 h-5"}),visible:!0,disable:!1},{value:O.hs,title:i("extension.document"),desc:i("extension.document_desc"),icon:(0,l.jsx)(av.Z,{size:20}),visible:!0,disable:!1}];return(0,o.useEffect)(()=>{if(r===O.aI)f(u);else{let e=x.find(e=>e.value===r);e&&f(e)}if(r===O.V9||r===O.aI){a(!0);return}a(!1)},[r]),(0,l.jsxs)(n8.j,{isOpen:h,onOpenChange:e=>p(e),placement:"bottom-start",children:[(0,l.jsx)(tU.e,{delay:0,closeDelay:0,content:i("changeResponseMode"),classNames:{content:["text-white bg-gray-600 dark:bg-[#353535]"]},children:(0,l.jsx)("div",{className:(0,v.cn)("max-w-fit",t),children:(0,l.jsx)(n9.b,{children:(0,l.jsxs)(W.A,{variant:"light",size:"sm",className:"text-inherit min-w-0 gap-1 pl-2 pr-1",isDisabled:!1,color:"default",children:[n?d.icon:(()=>{if(r===O.aI)return u.icon;let e=x.find(e=>e.value===r);return e?e.icon:null})(),s&&(()=>{if(n)return i("extension.chat");let e=x.find(e=>e.value===r);return e?e.title:null})(),(0,l.jsx)(ic.Z,{className:"opacity-60",size:16})]})})})}),(0,l.jsx)(ae.g,{className:"p-0",children:(0,l.jsxs)("section",{className:"p-2 w-60",children:[(0,l.jsxs)("button",{className:(0,v.cn)("rounded-lg p-4 text-left w-full","hover:bg-content2 cursor-pointer",!n&&"text-blue-500"),onClick:()=>{a(!1),p(!1)},children:[(0,l.jsxs)("span",{className:"flex font-medium mb-1",children:[m.icon,(0,l.jsx)("span",{className:"ml-2",children:m.title})]}),(0,l.jsx)("span",{className:"opacity-50",children:m.desc})]}),(0,l.jsxs)("button",{className:(0,v.cn)("rounded-lg p-4 text-left w-full","hover:bg-content2 cursor-pointer",n&&"text-blue-500"),onClick:()=>{a(!0),p(!1),(0,H.fk)(q.U.THREAD_FOLLOWUP_CHAT,{value:"chat"},!0)},children:[(0,l.jsxs)("span",{className:"flex font-medium mb-1",children:[d.icon,(0,l.jsx)("span",{className:"ml-2",children:d.title})]}),(0,l.jsx)("span",{className:"opacity-50",children:d.desc})]})]})})]})},ab=function(e){let{shortId:t,threadRid:s,loading:r,openInNewPage:i,queryCategory:n,onSubmitSucceed:a}=e,l=(0,w.useRouter)(),{pendingQueries:o,clearPendingQueries:d}=(0,_.Z)(),{isChat:c}=(0,F.Z)();return{startReply:(e,s)=>{let o=null==e?void 0:e.trim();t&&!r&&o&&(F.Z.getState().startSearch("form"),i?(l.push((0,j.M)({query:o,fromShortId:t,category:c?O.aI:n}),void 0,{scroll:!0}),(0,H.fk)(q.U.THREAD_FOLLOWUP_SHARE_SUBMIT,{shortId:t,query:o},!0)):(_.Z.getState().addThread({_local_id:(0,C.x0)(),query:o,short_id:t||"",query_from:"followup",template:s}),n&&"scholar"===n&&setTimeout(()=>{window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},600)),null==a||a())},stopReply:async()=>{o.length>0&&d(),s&&(await (0,i9.jB)(s),F.Z.getState().endSearch());let{threads:e}=_.Z.getState();(0,H.fk)(1===e.length?q.U.FIRST_ANSWER_PAUSED:q.U.THREAD_FOLLOWUP_ANSWER_PAUSE,{query:e[e.length-1].query},!0)}}},ay=s(2240);let aw=e=>(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",...e,children:[(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.99999 0.833374C8.15905 0.833374 6.66666 2.32576 6.66666 4.16671V10C6.66666 11.841 8.15905 13.3334 9.99999 13.3334C11.8409 13.3334 13.3333 11.841 13.3333 10V4.16671C13.3333 2.32576 11.8409 0.833374 9.99999 0.833374Z",fill:"currentColor"}),(0,l.jsx)("path",{d:"M4.99999 8.33337C4.99999 7.87314 4.6269 7.50004 4.16666 7.50004C3.70642 7.50004 3.33333 7.87314 3.33333 8.33337V10C3.33333 13.4003 5.87887 16.2059 9.16822 16.6153C9.16719 16.6323 9.16666 16.6494 9.16666 16.6667V17.5H6.66666C6.20642 17.5 5.83333 17.8731 5.83333 18.3334C5.83333 18.7936 6.20642 19.1667 6.66666 19.1667H13.3333C13.7936 19.1667 14.1667 18.7936 14.1667 18.3334C14.1667 17.8731 13.7936 17.5 13.3333 17.5H10.8333V16.6667C10.8333 16.6494 10.8328 16.6323 10.8318 16.6153C14.1211 16.2059 16.6667 13.4003 16.6667 10V8.33337C16.6667 7.87314 16.2936 7.50004 15.8333 7.50004C15.3731 7.50004 15 7.87314 15 8.33337V10C15 12.7615 12.7614 15 9.99999 15C7.23857 15 4.99999 12.7615 4.99999 10V8.33337Z",fill:"currentColor"})]});var aj=e=>{let{className:t,showLabel:s,queryCategory:r,onSelect:i}=e,n=(0,c.useTranslations)(),{isChat:a,setIsChat:d}=(0,F.Z)(),[u,h]=(0,o.useState)(!1),p={value:O.aI,title:n("extension.chat"),desc:n("extension.chat_desc"),icon:(0,l.jsx)(am.Z,{size:20})},m={value:O.gl,title:n("extension.all"),desc:n("extension.all_desc"),icon:(0,l.jsx)(ik.Z,{size:20})},[f,x]=(0,o.useState)(m),g=[m,p,{value:O.V9,title:n("extension.all"),desc:n("extension.all_desc"),icon:(0,l.jsx)(ik.Z,{size:20})},{value:O.pN,title:n("extension.social"),desc:n("extension.social_desc"),icon:(0,l.jsx)(af.Z,{size:20})},{value:O.Kp,title:n("extension.academic"),desc:n("extension.academic_desc"),icon:(0,l.jsx)(tZ.Od,{className:"w-5 h-5"})},{value:O.zA,title:n("extension.xiaohongshu"),desc:n("extension.xiaohongshu_desc"),icon:(0,l.jsx)(ax.Z,{size:20})},{value:O.xn,title:n("extension.reddit"),desc:n("extension.reddit_desc"),icon:(0,l.jsx)(tZ.XQ,{className:"w-5 h-5"})},{value:O.X7,title:n("extension.twitter"),desc:n("extension.twitter_desc"),icon:(0,l.jsx)(tZ.iB,{className:"w-5 h-5"})},{value:O.hs,title:n("extension.document"),desc:n("extension.document_desc"),icon:(0,l.jsx)(av.Z,{size:20})}];(0,o.useEffect)(()=>{if(r===O.aI)x(m);else{let e=g.find(e=>e.value===r);e&&x(e)}r===O.V9&&d(!0)},[r]),(0,o.useEffect)(()=>{r===O.aI&&d(!0)},[]);let b=e=>{d(e),h(!1),i(),e&&(0,H.fk)(q.U.THREAD_FOLLOWUP_CHAT,{value:"chat"},!0)};return(0,l.jsxs)("div",{className:(0,v.cn)("relative",t),children:[(0,l.jsxs)("button",{className:"flex items-center gap-1 text-sm",onClick:e=>{e.preventDefault(),h(!u)},children:[a?p.icon:(()=>{if(r===O.aI)return m.icon;let e=g.find(e=>e.value===r);return e?e.icon:null})(),s&&(()=>{if(a)return n("extension.chat");let e=g.find(e=>e.value===r);return e?e.title:null})(),(0,l.jsx)(ic.Z,{className:"opacity-60",size:16})]}),u&&(0,l.jsx)("div",{className:"fixed inset-0 z-40 bg-black opacity-70",onClick:()=>h(!1)}),u&&(0,l.jsx)("div",{className:"fixed top-auto inset-0 rounded-t-3xl bg-white dark:bg-theme-bg-dark-100 z-50 overflow-y-auto",children:(0,l.jsxs)("div",{className:"p-6 space-y-8",children:[(0,l.jsxs)("button",{className:(0,v.cn)("rounded-lg w-full text-left","hover:bg-content2 cursor-pointer",!a&&"text-blue-500"),onClick:()=>b(!1),children:[(0,l.jsxs)("span",{className:"flex items-center font-medium mb-1",children:[f.icon,(0,l.jsx)("span",{className:"ml-2",children:f.title})]}),(0,l.jsx)("span",{className:"opacity-50",children:f.desc})]}),(0,l.jsxs)("button",{className:(0,v.cn)("rounded-lg w-full text-left","hover:bg-content2 cursor-pointer",a&&"text-blue-500"),onClick:()=>b(!0),children:[(0,l.jsxs)("span",{className:"flex items-center font-medium mb-1",children:[p.icon,(0,l.jsx)("span",{className:"ml-2",children:p.title})]}),(0,l.jsx)("span",{className:"opacity-50",children:p.desc})]})]})})]})},ak=s(12490),aC=s(96156),a_=e=>{let{className:t,showLabel:s}=e,r=(0,c.useTranslations)(),{isImageChat:i,setIsImageChat:n}=(0,ec.Z)(),a={value:O.aI,title:r("extension.chat"),desc:r("extension.chat_desc"),icon:(0,l.jsx)(am.Z,{size:20}),visible:!0,disable:!1},d={value:O.gl,title:r("extension.all"),desc:r("extension.all_desc"),icon:(0,l.jsx)(ik.Z,{size:20}),visible:!0,disable:!1},[u,h]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{console.log("isImageChat",i);let e=i?O.Ys:"";F.Z.getState().setExtensionSelected(e)},[i]),(0,l.jsxs)(n8.j,{isOpen:u,onOpenChange:e=>h(e),placement:"bottom-start",children:[(0,l.jsx)(tU.e,{delay:0,closeDelay:0,content:r("changeResponseMode"),classNames:{content:["text-white bg-gray-600 dark:bg-[#353535]"]},children:(0,l.jsx)("div",{className:(0,v.cn)("max-w-fit",t),children:(0,l.jsx)(n9.b,{children:(0,l.jsxs)(W.A,{variant:"light",size:"sm",className:"text-inherit min-w-0 gap-1 pl-2 pr-1",isDisabled:!1,color:"default",children:[i?a.icon:i?a.icon:d.icon,s&&r(i?"extension.chat":"extension.all"),(0,l.jsx)(ic.Z,{className:"opacity-60",size:16})]})})})}),(0,l.jsx)(ae.g,{className:"p-0",children:(0,l.jsxs)("section",{className:"p-2 w-60",children:[(0,l.jsxs)("button",{className:(0,v.cn)("rounded-lg p-4 text-left w-full","hover:bg-content2 cursor-pointer",!i&&"text-blue-500"),onClick:()=>{n(!1),h(!1)},children:[(0,l.jsxs)("span",{className:"flex font-medium mb-1",children:[d.icon,(0,l.jsx)("span",{className:"ml-2",children:d.title})]}),(0,l.jsx)("span",{className:"opacity-50",children:d.desc})]}),(0,l.jsxs)("button",{className:(0,v.cn)("rounded-lg p-4 text-left w-full","hover:bg-content2 cursor-pointer",i&&"text-blue-500"),onClick:()=>{n(!0),h(!1),(0,H.fk)(q.U.THREAD_FOLLOWUP_CHAT,{value:"chat"},!0)},children:[(0,l.jsxs)("span",{className:"flex font-medium mb-1",children:[a.icon,(0,l.jsx)("span",{className:"ml-2",children:a.title})]}),(0,l.jsx)("span",{className:"opacity-50",children:a.desc})]})]})})]})},aN=s(87010),aS=s(26894),aE=s(88708),aT=s(95061),aP=s(42478),aM=s(30710),aF=s(929),aA=s(62271),aL=s(91714),aI=s(81100),aZ=s(8921),aD="Collapsible",[az,aO]=(0,aP.b)(aD),[aR,aB]=az(aD),aq=o.forwardRef((e,t)=>{let{__scopeCollapsible:s,open:r,defaultOpen:i,disabled:n,onOpenChange:a,...d}=e,[c=!1,u]=(0,aM.T)({prop:r,defaultProp:i,onChange:a});return(0,l.jsx)(aR,{scope:s,disabled:n,contentId:(0,aZ.M)(),open:c,onOpenToggle:o.useCallback(()=>u(e=>!e),[u]),children:(0,l.jsx)(aL.WV.div,{"data-state":a$(c),"data-disabled":n?"":void 0,...d,ref:t})})});aq.displayName=aD;var aH="CollapsibleTrigger",aV=o.forwardRef((e,t)=>{let{__scopeCollapsible:s,...r}=e,i=aB(aH,s);return(0,l.jsx)(aL.WV.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":a$(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:t,onClick:(0,aT.M)(e.onClick,i.onOpenToggle)})});aV.displayName=aH;var aW="CollapsibleContent",aU=o.forwardRef((e,t)=>{let{forceMount:s,...r}=e,i=aB(aW,e.__scopeCollapsible);return(0,l.jsx)(aI.z,{present:s||i.open,children:({present:e})=>(0,l.jsx)(aG,{...r,ref:t,present:e})})});aU.displayName=aW;var aG=o.forwardRef((e,t)=>{let{__scopeCollapsible:s,present:r,children:i,...n}=e,a=aB(aW,s),[d,c]=o.useState(r),u=o.useRef(null),h=(0,aA.e)(t,u),p=o.useRef(0),m=p.current,f=o.useRef(0),x=f.current,v=a.open||d,g=o.useRef(v),b=o.useRef();return o.useEffect(()=>{let e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,aF.b)(()=>{let e=u.current;if(e){b.current=b.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();p.current=t.height,f.current=t.width,g.current||(e.style.transitionDuration=b.current.transitionDuration,e.style.animationName=b.current.animationName),c(r)}},[a.open,r]),(0,l.jsx)(aL.WV.div,{"data-state":a$(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!v,...n,ref:h,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...e.style},children:v&&i})});function a$(e){return e?"open":"closed"}var aY=s(34276),aJ=o.memo(e=>{let{className:t,shortId:s,openInNewPage:r,threadRid:i,queryCategory:n,focus:a,template:d,mode:u}=e,h=(0,c.useTranslations)(),{isApp:p}=(0,iQ.b)(),m=(0,sf.Z)(e=>e.features),f=(0,tM.Z)(),{isDark:x}=(0,D.Z)(),{isMobile:g}=(0,tk.Z)(),[y,w]=(0,o.useState)(""),j=(0,F.Z)(e=>e.loading),k=(0,F.Z)(e=>e.setLoading),C=(0,F.Z)(e=>e.isBeginAnswer),[_,N]=(0,o.useState)(!1),[S,E]=(0,o.useState)(!1),{language:T,setLanguage:P}=(0,nw.Z)(),M=(0,tR.ZP)(e=>e.isLogin),A=(0,o.useRef)(null),L=(0,o.useRef)(null);(0,F.Z)(e=>e.extensionSelected);let I=(0,o.useRef)(0),Z=(0,o.useRef)(null),z=(0,ay.Z)(),{files:R,isUploading:B,setFiles:V,threadFiles:W,setHomeFiles:U}=(0,ec.Z)(),{willBindTopicId:J,setWillBindTopicId:X,isTopicReply:K,isTopicSearchNetwork:Q,isSingleAgentCanUse:ee}=(0,F.Z)(),{proUsageQuota:et}=(0,sm.I)(),es=(0,Y.Oi)("chatDocumentsUsage"),[er,ei]=(0,o.useState)(!1),en=(0,o.useMemo)(()=>g&&d,[g,d]),ea=(0,o.useMemo)(()=>en&&_,[en,_]);(0,o.useEffect)(()=>{K?X(J):X("")},[K]);let el=(0,o.useMemo)(()=>d&&(0,aE.el)(d),[d]),eo=(0,o.useMemo)(()=>!!d&&(0,aE.u1)(d),[d]),ed=(0,o.useMemo)(()=>{var e;return!!d&&(null===(e=d.params)||void 0===e?void 0:e.some(e=>(0,aE.Sc)(e.type)))},[d]),eu=(0,o.useMemo)(()=>d&&d.template_type===b.W.CUSTOM,[d]),eh=(0,o.useMemo)(()=>d&&(0,aE.qG)(d),[d]),{startReply:ep,stopReply:em}=ab({shortId:s,threadRid:i,loading:j,openInNewPage:r,onSubmitSucceed:()=>{w("")}}),ef=()=>{K&&(0,H.fk)(q.U.COLLECTION_THREAD_SUBMIT_FOLLOWUP,{query:y,webSearch:Q},!0)},ex=async()=>{var e;let{subscriptionInfo:t}=Y.ZP.getState();return!!t&&(!!es||!(0>=((null==t?void 0:null===(e=t.chatDocumentsUsage)||void 0===e?void 0:e.balance)||0))||($.$.publish("showSubscriptionPlan",void 0),!1))},ev=()=>{$.$.publish("showSubscriptionPlan",void 0)},eg=()=>{$.$.publish("showLogin",void 0)},eb=async e=>{if(e.preventDefault(),j||!await (0,aY.f)({query:null==y?void 0:y.trim(),setLoading:k})||n===O.J5&&!await ex())return;if(X(""),ef(),d&&(null==d?void 0:d.template_type)!==b.W.DEFAULT&&!eo&&(ee||0===et)){f.custom(M?h.rich("search_limit_tip_five",{highlight:e=>(0,l.jsx)("span",{onClick:e=>{e.preventDefault(),f.dismiss(),ev()},className:"text-[#0080FF] cursor-pointer font-medium mx-1 dark:text-[#2F95FB]",children:e})}):h.rich("search_limit_tip_six",{highlight:e=>(0,l.jsx)("span",{onClick:e=>{e.preventDefault(),f.dismiss(),eg()},className:"text-[#0080FF] cursor-pointer font-medium mx-1 dark:text-[#2F95FB]",children:e})}));return}let t=d;if(d&&el){var s;t={...d,params:null===(s=d.params)||void 0===s?void 0:s.map(e=>(0,aE.YX)(e.type)?{...e,value:T}:e)}}ep(y,t),g&&_&&N(!1)},ey=e=>{var t,s;("/"===e.key||""===e.key)&&(null===(t=document.activeElement)||void 0===t?void 0:t.tagName)!=="TEXTAREA"&&(e.preventDefault(),null===(s=L.current)||void 0===s||s.focus())},ew=(0,o.useMemo)(()=>{var e;return null==R||!R.length||!!((null==R?void 0:R.length)&&(null==R?void 0:null===(e=R.filter(e=>(null==e?void 0:e.status)==="completed"))||void 0===e?void 0:e.length))},[R]);(0,o.useEffect)(()=>(window.addEventListener("keydown",ey),()=>window.removeEventListener("keydown",ey)),[]),(0,o.useEffect)(()=>(0,s9.fu)(e=>{let{value:t}=e;ep(t)}),[s]),(0,o.useEffect)(()=>{if(!g)return;let e=e=>{A.current&&!A.current.contains(e.target)&&_&&!e.target.closest(".language-select-dropdown")&&N(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[_,g,el,j,S]),(0,o.useEffect)(()=>{if(!g){if(eu||el){N(!0);return}y.length>(g?0:20)?N(!0):N(!1)}},[y,g,el,eu]),(0,o.useEffect)(()=>{C&&(V([]),U([]))},[C]);let ej=(0,o.useMemo)(()=>n===O.J5,[n]);return(0,o.useEffect)(()=>{n===O.J5?V([...W]):V([])},[n,W]),(0,o.useEffect)(()=>{a&&L.current&&!j&&L.current.focus()},[a,j]),(0,l.jsxs)("form",{ref:A,className:(0,v.cn)("flex flex-wrap items-center justify-center gap-x-2 gap-y-4","rounded-xl w-full p-3 z-40","border-1 border-[#EBEEF3] dark:border-[#454E5D]","bg-white dark:bg-[#20232a] shadow-[0_4px_4px_rgba(0,0,0,0.08)]",!_&&"rounded-[4rem]",t),onSubmit:eb,onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),I.current+=1,1===I.current&&E(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),I.current-=1,0===I.current&&E(!1)},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{var t;if(e.preventDefault(),e.stopPropagation(),E(!1),I.current=0,ec.Z.getState().isUploading)return;let{files:s}=e.dataTransfer;console.log("files",s),(null==s?void 0:s.length)&&(null===(t=Z.current)||void 0===t||t.handleFiles(s))},children:[ea?(0,l.jsx)(l.Fragment,{}):d&&el?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(tU.e,{delay:0,closeDelay:0,content:d.title,classNames:{content:["text-white bg-gray-600 dark:bg-[#353535]"]},children:(0,l.jsx)(G.z,{size:"sm",variant:"secondary",className:(0,v.cn)("text-inherit","rounded-full","w-8 h-8","cursor-default"),children:(0,l.jsx)(nb.x0,{className:"w-4 h-4 text-[#4B5F7E] dark:text-[#F3F5F7]"})})})}):d&&d.template_type===b.W.CUSTOM?(0,l.jsx)(tU.e,{delay:0,closeDelay:0,content:d.title,classNames:{content:["text-white bg-gray-600 dark:bg-[#353535]"]},children:(0,l.jsx)("div",{className:"flex items-center justify-center rounded-full w-8 h-8 bg-theme-bg-300 dark:bg-theme-bg-dark-300",children:(0,l.jsx)(nb.x0,{className:"w-4 h-4"})})}):ej?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:(0,v.cn)("flex items-center justify-center rounded-xl h-full absolute top-0 left-0 right-0 bottom-0 gap-1 pointer-events-none z-50  text-primary border-2 border-dashed border-transparent opacity-100","bg-primary/90 dark:bg-black/90","border-dashed border-primary bg-sky-50/80",!B&&S?"":"hidden",!_&&"rounded-[4rem]"),children:[(0,l.jsx)(ap.Z,{size:22}),h("searchAddition.drop_your_file_here")]}),(0,l.jsx)(aC.Z,{isMini:!0,threadId:s,loading:j,ref:Z,type:"thread"})]}):(0,l.jsxs)(l.Fragment,{children:[K&&(0,l.jsx)(ak.Z,{isReply:!0}),!K&&(g&&n!==O.Ys?(0,l.jsx)(aj,{showLabel:_,queryCategory:n,onSelect:()=>{L.current&&L.current.focus()}}):n===O.Ys?(0,l.jsx)(a_,{showLabel:_}):(0,l.jsx)(ag,{showLabel:_,queryCategory:eh?O.V9:n}))]}),(0,l.jsxs)("div",{className:(0,v.cn)(_?"-order-1 w-full":"flex-1"),children:[ea&&(0,l.jsx)(()=>(0,l.jsx)(aq,{open:er,onOpenChange:ei,children:(0,l.jsxs)("div",{className:"flex flex-col gap-2 mb-3 pb-3 border-b border-theme-bg-300 dark:border-theme-bg-dark-300",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,l.jsx)("div",{className:"flex items-center justify-center gap-2",children:d&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(G.z,{size:"sm",variant:"secondary",className:(0,v.cn)("text-inherit","rounded-full","w-8 h-8","cursor-default"),children:d.template_type===b.W.DEFAULT?(0,l.jsx)(nb.WA,{className:"w-4 h-4 text-[#4B5F7E] dark:text-[#F3F5F7]"}):(0,l.jsx)(nb.x0,{className:"w-4 h-4 text-[#4B5F7E] dark:text-[#F3F5F7]"})}),(0,l.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:d.title})]})}),el&&(0,l.jsx)(aV,{asChild:!0,children:(0,l.jsx)(G.z,{size:"sm",variant:"ghost",className:"w-6 h-6",children:(0,l.jsx)(ic.Z,{size:12,className:(0,v.cn)("transition-transform duration-200",er&&"transform rotate-180")})})})]}),el&&(0,l.jsx)(aU,{children:(0,l.jsx)("div",{className:"flex items-center gap-2",children:(0,l.jsx)(aS.Z,{hideAutoDetect:ed,language:T,onChangeLanguage:P})})})]})}),{}),(0,l.jsxs)("div",{className:(0,v.cn)("relative flex items-center justify-center",_&&"px-2"),children:[(0,l.jsx)(tq.Z,{ref:L,className:(0,v.cn)("bg-inherit outline-none resize-none transition-height",y.length>O.N2&&"text-red-500","custom-scrollbar",g&&!_&&y&&"text-transparent overflow-hidden","w-full"),value:y,onChange:e=>w(e.target.value),onKeyDown:e=>{if(z.current&&13==e.keyCode&&"Enter"===e.key&&!e.shiftKey&&!g){var t;e.preventDefault(),null===(t=A.current)||void 0===t||t.requestSubmit()}},minRows:eu?2:1,maxRows:_?g?4:8:1,spellCheck:!1,onFocus:g?()=>{N(!0)}:void 0}),y?g&&!_&&(0,l.jsx)("div",{className:(0,v.cn)(_&&"px-2","absolute top-0 left-0 pointer-events-none","truncate max-w-full"),children:y}):(0,l.jsx)("div",{className:(0,v.cn)(_&&"px-2","absolute top-0 left-0 pointer-events-none","text-gray-400 dark:text-gray-500","truncate max-w-full"),children:h("new_thread_placeholder")})]})]}),el&&!g&&(0,l.jsx)("div",{className:"flex items-center gap-2",children:(0,l.jsx)(aS.Z,{hideAutoDetect:ed,language:T,onChangeLanguage:P})}),(0,l.jsxs)("div",{className:(0,v.cn)(_&&"ml-auto","flex items-center"),children:[y.length>O.N2&&(0,l.jsx)("div",{className:"flex text-sm text-red-600 ml-auto mr-2",children:O.N2-y.length}),(0,l.jsx)("div",{className:(0,v.cn)(_&&"ml-auto mr-4","flex items-center mr-4"),children:!eo&&(0,l.jsx)(aN.Z,{agentTemplate:d,isFollowUp:!0,mode:u})}),j?C?(0,l.jsx)(tU.e,{closeDelay:0,placement:"top",content:h("stopAnswering"),children:(0,l.jsx)("section",{onClick:em,className:"cursor-pointer text-[32px]",children:x?(0,l.jsx)(tZ.MT,{}):(0,l.jsx)(tZ.f$,{})})}):(0,l.jsx)(tQ.c,{className:"px-2 h-8",classNames:{circle1:"".concat(x?"border-b-white":"border-b-[#b3bcca]"),circle2:"".concat(x?"border-b-white":"border-b-[#b3bcca]")},size:"sm"}):!y&&p&&m.includes("topBar")?(0,l.jsx)("button",{className:(0,v.cn)("rounded-3xl px-2","w-8 h-8 bg-theme-bg-300 dark:bg-theme-bg-dark-300","active:opacity-50"),onClick:s9.Yr,children:(0,l.jsx)(aw,{className:"w-4 h-4"})}):(0,l.jsx)("button",{className:(0,v.cn)("rounded-3xl px-2","w-8 h-8",(null==y?void 0:y.trim())&&y.length<=O.N2&&!B&&ew?"bg-theme-blue-500 dark:bg-theme-blue-800 text-white":"bg-theme-bg-300 dark:bg-theme-bg-dark-300","active:opacity-50"),disabled:!(null==y?void 0:y.trim())||j||y.length>O.N2||B||!ew,children:(0,l.jsx)(s4.Z,{size:16})})]})]})}),aX=s(21959),aK=s(29847),aQ=s(20061),a0=s(67185),a1=s(57207);let a2=o.memo(e=>{let{children:t,sources:s,rid:r,loading:i,isVisible:n,getExpansionSources:a,isDocument:d}=e,c=(0,o.useRef)(""),[u,h]=(0,o.useState)(!1);(0,o.useRef)([]);let p=(0,o.useRef)(null),{sourceAllMatchList:m}=(0,iv.Z)();(0,o.useEffect)(()=>{let e=(null==s?void 0:s.some(e=>"scholar"===e.engine_name||"scholar"===e.engine))||!1;!i&&n&&(u||!a||e||(h(!0),(0,sH.LY)(r||"")))},[i,n,a,u]);let f=(0,o.useMemo)(()=>{let e=(0,sH.k5)((0,sH.SK)(t||""));return e="".replace("",e),c.current=e,e},[t]);return(0,o.useEffect)(()=>{let e=e=>{p.current&&p.current.contains(e.target)&&(e.preventDefault(),(0,sH.$5)(e))};return document.addEventListener("copy",e),()=>{document.removeEventListener("copy",e)}},[]),(0,l.jsx)("div",{ref:p,children:(0,l.jsx)(rA.U,{className:x().markdown,remarkPlugins:[nu.Z,nc.Z,nd.Z,ni.Z,nn.Z,na.Z],rehypePlugins:[nh.Z,no.Z,[nl.Z,{detect:!1,ignoreMissing:!0}],nr.Z],components:{p:e=>(0,l.jsx)("p",{...e,dir:"auto"})},children:f})})});var a3=s(55039),a5=e=>{var t;let{qrcodeData:s,threadList:r,threadData:i}=e,{cacheThreadImg:n,fontSize:a,backgroundTemplate:o,shareTemplate:d,typographyTheme:u}=(0,sq.Z)(),h=(0,c.useTranslations)();return(0,l.jsx)(l.Fragment,{children:0===r.length?(0,l.jsx)("div",{children:(0,l.jsx)(tQ.c,{})}):(0,l.jsxs)("div",{className:"threadMarkdownView ".concat(d.parentId),style:{width:"440px",padding:"48px 24px",boxSizing:"border-box",fontSize:"".concat(a0.jo*a,"px"),borderRadius:"12px",fontFamily:u.value,...o.styleObject,...null==o?void 0:null===(t=o.otherOptions)||void 0===t?void 0:t.styleDocument},children:[r.slice(0,3).map((e,t)=>{var s,r,n;let a=0===t?i.title:e.query,d=a.length>35?"".concat(a.slice(0,35),"..."):a;return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{fontSize:"1.71em",lineHeight:"1.83em",fontWeight:"bold",textAlign:"left",marginBottom:"24px",boxSizing:"border-box",overflowWrap:"anywhere",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden",textOverflow:"ellipsis",maxHeight:"4em",wordBreak:"auto-phrase",color:o.titleColor},className:"shareTitle overflow-hidden overflow-ellipsis line-clamp-2",children:d}),(0,l.jsx)("div",{style:{padding:"24px",borderRadius:"16px",color:"#323232",marginBottom:"24px",...o.bodyStyle,...null==o?void 0:null===(s=o.otherOptions)||void 0===s?void 0:s.styleDocument},className:"shareMarkdown",children:(0,l.jsxs)("div",{children:[0!==t&&(0,l.jsx)("div",{style:{lineHeight:"1.6em",height:"3.2em",paddingBottom:"8px",fontWeight:"bold",textAlign:"left",overflowWrap:"anywhere",...o.threadTitleStyle,color:o.titleColor},className:"shareThreadItemTitle overflow-hidden overflow-ellipsis line-clamp-2",children:e.query}),(null===(r=_.Z.getState().mindmapList.find(t=>t.message_id===e.id))||void 0===r?void 0:r.images)&&(0,l.jsx)("div",{className:"border border-gray-300 p-2 rounded-lg mb-4 bg-cover bg-center w-full pointer-events-none bg-white",children:(0,l.jsx)(a3.default,{content:(null===(n=e.mindmap)||void 0===n?void 0:n.content)||"",query:e.query,messageId:e.id,index:t,showDispose:!1})}),(0,l.jsx)("div",{className:(0,v.cn)("prose prose-md dark:prose-invert max-w-full",x().prose),style:{marginBottom:"24px",color:o.textColor},children:(0,l.jsx)(a2,{children:e.answer.replace(/\[\d+\]/g,"")})})]},e.id)})]},e.id)}),r.length>3&&(0,l.jsxs)("div",{style:{margin:"24px auto",fontSize:"12px",width:"90%",lineHeight:"20px"},children:[h("shareThread.moreThread")," "]}),(0,l.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,l.jsxs)("div",{className:"w-[calc(100%-100px)]",children:[(0,l.jsx)("div",{className:"flex gap-2 justify-end text-[24px] font-bold",children:(0,l.jsxs)("div",{className:"flex items-center relative h-[36px] leading-[36px]",children:[(0,l.jsx)("div",{className:"logoIcon mr-2 w-[34px] h-[34px] leading-[36px]",children:o.logoIcon}),(0,l.jsx)("div",{className:"h-[36px] leading-[36px]",children:h("shareThread.qrcodeTitle")})]})}),(0,l.jsx)("div",{className:"text-[12px] text-right mt-2 leading-[20px]",children:h("shareThread.qrcodeTip")})]}),(0,l.jsx)("div",{className:"border-[8px] border-white rounded-[12px] ml-4 w-[88px]",style:{background:o.qrcodeBg},children:(0,l.jsx)("img",{src:s,className:"w-[88px]",alt:""})})]})]})})},a7=s(98683);let a6=e=>{var t,s;let{threadData:r}=e,{shareStatus:i,setShareStatus:n,is_self:a,thread_id:d,showThreadModel:u}=(0,sq.Z)();console.log("\uD83C\uDF4E ~ ShareBody ~ is_self:",a,i);let h=(0,tR.ZP)(e=>e.isLogin),p=(0,tW.V)(),[m,f]=(0,o.useState)(!1),{isApp:x}=(0,iQ.b)(),v=(0,tR.gQ)(),g=(0,tR.ZP)(e=>e.userInfo),b=null==g?void 0:null===(s=g.user_org_member)||void 0===s?void 0:null===(t=s.org_settings)||void 0===t?void 0:t.share_permission_config.personal_thread_share,y=(0,c.useTranslations)(),w=e=>{(0,eh.eW)(e),"whatsapp"===e?(0,H.fk)(q.U.THREAD_SHARE_SHARE_WHATSAPP,{id:d},!0):"twitter"===e?(0,H.fk)(q.U.THREAD_SHARE_SHARE_X,{id:d},!0):"facebook"===e?(0,H.fk)(q.U.THREAD_SHARE_SHARE_FACEBOOK,{id:d},!0):"line"===e&&(0,H.fk)(q.U.THREAD_SHARE_SHARE_LINE,{id:d},!0)};(0,o.useEffect)(()=>{u&&j()},[u]);let j=()=>{f(!0);let e=sB.Z.getState().current,t=new URL("".concat(location.origin,"/search/").concat(d));e&&t.searchParams.append("invite",e),p.copy(t.toString()),(0,H.fk)(q.U.THREAD_SHARE_SHARE_COPYLINK,{id:d},!0),setTimeout(()=>{f(!1)},3e3)},k=e=>{a&&n(e)};return(0,l.jsxs)(l.Fragment,{children:[a&&h&&(0,l.jsx)("div",{className:"w-full cursor-pointer border rounded-[12px] p-[8px] [padding-left:24px] [padding-right:24px] box-border mb-[16px] ".concat("PRIVATE"===i?"border-[#0080FF]":"border-[#E4E7EC]"),onClick:()=>k("PRIVATE"),children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-[16px]",children:[(0,l.jsx)("div",{className:"w-[32px] text-[#475467] dark:text-white",children:(0,l.jsx)(al.aL,{})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-[16px] font-bold text-[#344054] dark:text-white",children:y("shareThread.secret")}),(0,l.jsx)("div",{className:"text-[12px] text-[#98A2B3]",style:{lineHeight:"18px"},children:y("shareThread.onlyAuthorCanView")})]})]}),(0,l.jsx)("div",{children:"PRIVATE"===i&&(0,l.jsx)(al.gw,{})})]})}),v&&(0,l.jsx)("div",{className:"w-full cursor-pointer border rounded-[12px] p-[8px] [padding-left:24px] [padding-right:24px] mb-[16px] box-border ".concat("PARTIAL_PUBLIC"===i?"border-[#0080FF]":"border-[#E4E7EC]"),onClick:()=>k("PARTIAL_PUBLIC"),style:{opacity:a?1:.3,cursor:a?"pointer":"not-allowed"},children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-[16px]",children:[(0,l.jsx)("div",{className:"w-[32px] text-[#475467] dark:text-white",children:(0,l.jsx)(a7.Z,{size:28})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-[16px] font-bold text-[#344054] dark:text-white",children:y("shareThread.enterprise_title")}),(0,l.jsx)("div",{className:"text-[12px] text-[#98A2B3] ",style:{lineHeight:"18px"},children:y("shareThread.enterprise_desc")})]})]}),(0,l.jsx)("div",{children:"PARTIAL_PUBLIC"===i&&(0,l.jsx)(al.gw,{})})]})}),(h&&a&&!v||b&&v&&h||"PUBLIC"===i)&&(0,l.jsx)("div",{className:"w-full cursor-pointer border rounded-[12px] p-[8px] [padding-left:24px] [padding-right:24px]  box-border ".concat("PUBLIC"===i?"border-[#0080FF]":"border-[#E4E7EC]"),onClick:()=>k("PUBLIC"),style:{opacity:a?1:.3,cursor:a?"pointer":"not-allowed"},children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-[16px]",children:[(0,l.jsx)("div",{className:"w-[32px] text-[#475467] dark:text-white",children:(0,l.jsx)(al.u_,{})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-[16px] font-bold text-[#344054] dark:text-white",children:y("shareThread.shareable")}),(0,l.jsx)("div",{className:"text-[12px] text-[#98A2B3] ",style:{lineHeight:"18px"},children:y("shareThread.anyoneWithLinkCanView")})]})]}),(0,l.jsx)("div",{children:"PUBLIC"===i&&(0,l.jsx)(al.gw,{})})]})}),"PRIVATE"!==i&&(0,l.jsxs)(l.Fragment,{children:[!x&&(0,l.jsxs)("div",{className:"flex items-center justify-between w-full mt-8 mx-2 shareSites",children:[(0,l.jsxs)("div",{onClick:()=>w("line"),className:"w-[48px] cursor-pointer flex flex-col items-center gap-2",children:[(0,l.jsx)("img",{className:"w-[48px]",src:"/shareThreadImg/line.png",alt:""}),(0,l.jsx)("div",{className:"text-[12px] text-[#98A2B3] dark:text-white",children:"LINE"})]}),(0,l.jsxs)("div",{onClick:()=>w("twitter"),className:"w-[48px] cursor-pointer flex flex-col items-center gap-2",children:[(0,l.jsx)("img",{className:"w-[48px]",src:"/shareThreadImg/twiterlogo.png",alt:""}),(0,l.jsx)("div",{className:"text-[12px] text-[#98A2B3] dark:text-white",children:"X/Twitter"})]}),(0,l.jsxs)("div",{onClick:()=>w("facebook"),className:"w-[48px] cursor-pointer flex flex-col items-center gap-2",children:[(0,l.jsx)("img",{className:"w-[48px]",src:"/shareThreadImg/fblogo.png",alt:""}),(0,l.jsx)("div",{className:"text-[12px] text-[#98A2B3] dark:text-white",children:"Facebook"})]}),(0,l.jsxs)("div",{onClick:()=>w("whatsapp"),className:"w-[48px] cursor-pointer flex flex-col items-center gap-2",children:[(0,l.jsx)("img",{className:"w-[48px]",src:"/shareThreadImg/whatsapp.png",alt:""}),(0,l.jsx)("div",{className:"text-[12px] text-[#98A2B3] dark:text-white",children:"WhatsApp"})]})]}),(0,l.jsx)("div",{className:"w-full mt-8",children:(0,l.jsx)(tU.e,{isOpen:m,content:(0,l.jsx)("div",{className:"p-2 bg-black bg-opacity-70 text-white rounded-lg dark:bg-white dark:text-black",children:y("shareThread.copySuccess")}),classNames:{content:["p-0"]},children:(0,l.jsx)(W.A,{className:"w-full h-[48px] rounded-[12px] text-[14px]",color:"primary",onClick:j,disabled:m,children:y("shareThread.copyLink")})})})]})]})};var a4=e=>{var t;let{qrcodeData:s,threadList:r,threadData:i}=e,{cacheThreadImg:n,fontSize:a,backgroundTemplate:o,shareTemplate:d,typographyTheme:u}=(0,sq.Z)(),h=(0,c.useTranslations)();return(0,l.jsx)(l.Fragment,{children:0===r.length?(0,l.jsx)("div",{children:(0,l.jsx)(tQ.c,{})}):(0,l.jsxs)("div",{className:"threadMarkdownView ".concat(d.parentId),style:{width:"440px",boxSizing:"border-box",fontSize:"".concat(a0.jo*a,"px"),borderRadius:"12px",fontFamily:u.value,...o.styleObject,...null==o?void 0:null===(t=o.otherOptions)||void 0===t?void 0:t.styleDocument},children:[(0,l.jsx)(al.y_,{}),r.slice(0,3).map((e,t)=>{var s,r;let n=0===t?i.title:e.query,a=n.length>35?"".concat(n.slice(0,35),"..."):n;return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{margin:"12px 48px",fontSize:"1.71em",lineHeight:"1.83em",fontWeight:"bold",textAlign:"left",marginBottom:"24px",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden",textOverflow:"ellipsis",wordBreak:"auto-phrase",color:o.titleColor,overflowWrap:"anywhere"},className:"shareTitle overflow-hidden overflow-ellipsis line-clamp-2",children:a}),(0,l.jsxs)("div",{style:{padding:"24px 48px",color:"#323232",boxSizing:"border-box",backgroundImage:"url(/shareThreadImg/gridBg.png)",...o.bodyStyle},className:"shareMarkdown",children:[(null===(s=_.Z.getState().mindmapList.find(t=>t.message_id===e.id))||void 0===s?void 0:s.images)&&(0,l.jsx)("div",{className:"border border-gray-300 p-2 rounded-lg mb-4 bg-cover bg-center w-full pointer-events-none bg-white",children:(0,l.jsx)(a3.default,{content:(null===(r=e.mindmap)||void 0===r?void 0:r.content)||"",query:e.query,messageId:e.id,index:t,showDispose:!1})}),(0,l.jsx)("div",{className:(0,v.cn)("prose prose-md dark:prose-invert max-w-full",x().prose),style:{marginBottom:"24px",color:o.textColor},children:(0,l.jsx)(a2,{children:e.answer.replace(/\[\d+\]/g,"")})})]})]},e.id)}),r.length>3&&(0,l.jsxs)("div",{style:{margin:"24px auto",fontSize:"12px",width:"90%",lineHeight:"20px"},children:[h("shareThread.moreThread")," "]}),(0,l.jsxs)("div",{className:"flex justify-between mt-6",style:{padding:"0 24px",boxSizing:"border-box"},children:[(0,l.jsxs)("div",{className:"w-[calc(100%-100px)]",children:[(0,l.jsx)("div",{className:"flex gap-2 justify-end text-[24px] font-bold",children:(0,l.jsxs)("div",{className:"flex items-center relative h-[36px] leading-[36px]",children:[(0,l.jsx)("div",{className:"logoIcon mr-2 w-[34px] h-[34px] leading-[36px]",children:o.logoIcon}),(0,l.jsx)("div",{className:"h-[36px] leading-[36px]",children:h("shareThread.qrcodeTitle")})]})}),(0,l.jsx)("div",{className:"text-[12px] text-right mt-2 leading-[20px]",children:h("shareThread.qrcodeTip")})]}),(0,l.jsx)("div",{className:"border-[8px] border-white rounded-[12px] ml-4 w-[88px]",style:{background:o.qrcodeBg},children:(0,l.jsx)("img",{src:s,className:"w-[88px]",alt:""})})]}),(0,l.jsx)(al.S9,{})]})})},a8=s(72135);let a9=s.n(a8)()(()=>Promise.resolve().then(s.bind(s,55039)),{loadableGenerated:{webpack:()=>[55039]},ssr:!1});var le=e=>{var t,s,r,i,n,a;let{qrcodeData:o,threadList:d,threadData:u}=e,{cacheThreadImg:h,fontSize:p,backgroundTemplate:m,shareTemplate:f,typographyTheme:g}=(0,sq.Z)(),b=(0,c.useTranslations)();return(0,l.jsx)(l.Fragment,{children:0===d.length?(0,l.jsx)("div",{children:(0,l.jsx)(tQ.c,{})}):(0,l.jsxs)("div",{className:"threadMarkdownView ".concat(f.parentId),style:{width:"440px",padding:"12px 24px",boxSizing:"border-box",fontSize:"".concat(a0.jo*p,"px"),borderRadius:"12px",fontFamily:g.value,...m.styleObject,...null===(t=m.otherOptions)||void 0===t?void 0:t.styleDocument},children:[(0,l.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",position:"relative",top:"26px"},children:(0,al.PW)({dotBg:(null==m?void 0:null===(s=m.otherOptions)||void 0===s?void 0:s.dotBg)||"#B3C3B9",lineBg:(null==m?void 0:null===(r=m.otherOptions)||void 0===r?void 0:r.lineBg)||"#EEE8E1",lineBorder:(null==m?void 0:null===(i=m.otherOptions)||void 0===i?void 0:i.lineBorder)||"#4A7B5D",dotBorder:(null==m?void 0:null===(n=m.otherOptions)||void 0===n?void 0:n.lineBorder)||(null==m?void 0:null===(a=m.otherOptions)||void 0===a?void 0:a.dotBg)||"#fff"})}),d.slice(0,3).map((e,t)=>{var s,r;let i=0===t?u.title:e.query,n=i.length>35?"".concat(i.slice(0,35),"..."):i;return(0,l.jsx)("div",{children:(0,l.jsxs)("div",{style:{padding:"24px",paddingTop:"40px",color:"#323232",marginBottom:"24px",backgroundImage:"url(/shareThreadImg/gridBg.png)",...m.bodyStyle},className:"shareMarkdown",children:[(0,l.jsx)("div",{style:{fontSize:"1.71em",lineHeight:"1.83em",fontWeight:"bold",textAlign:"left",marginBottom:"24px",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden",textOverflow:"ellipsis",overflowWrap:"anywhere",maxHeight:"4em",color:"#FFFFFF"===m.titleColor?m.textColor:m.titleColor},className:"shareTitle overflow-hidden overflow-ellipsis line-clamp-2",children:n}),(null===(s=_.Z.getState().mindmapList.find(t=>t.message_id===e.id))||void 0===s?void 0:s.images)&&(0,l.jsx)("div",{className:"border border-gray-300 p-2 rounded-lg mb-4 bg-cover bg-center w-full pointer-events-none bg-white",children:(0,l.jsx)(a9,{content:(null===(r=e.mindmap)||void 0===r?void 0:r.content)||"",query:e.query,messageId:e.id,index:t,showDispose:!1})}),(0,l.jsx)("div",{className:(0,v.cn)("prose prose-md dark:prose-invert max-w-full",x().prose),style:{marginBottom:"24px",color:m.textColor},children:(0,l.jsx)(a2,{children:e.answer.replace(/\[\d+\]/g,"")})})]})},e.id)}),d.length>3&&(0,l.jsxs)("div",{style:{margin:"24px auto",fontSize:"12px",width:"90%",lineHeight:"20px"},children:[b("shareThread.moreThread")," "]}),(0,l.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,l.jsxs)("div",{className:"w-[calc(100%-100px)]",children:[(0,l.jsx)("div",{className:"flex gap-2 justify-end text-[24px] font-bold",children:(0,l.jsxs)("div",{className:"flex items-center relative h-[36px] leading-[36px]",children:[(0,l.jsx)("div",{className:"logoIcon mr-2 w-[34px] h-[34px] leading-[36px]",children:m.logoIcon}),(0,l.jsx)("div",{className:"h-[36px] leading-[36px]",children:b("shareThread.qrcodeTitle")})]})}),(0,l.jsx)("div",{className:"text-[12px] text-right mt-2 leading-[20px]",children:b("shareThread.qrcodeTip")})]}),(0,l.jsx)("div",{className:"border-[8px] border-white rounded-[12px] ml-4 w-[88px]",style:{background:m.qrcodeBg},children:(0,l.jsx)("img",{src:o,className:"w-[88px]",alt:""})})]})]})})},lt=e=>{var t,s;let{qrcodeData:r,threadList:i,threadData:n}=e,{cacheThreadImg:a,fontSize:o,backgroundTemplate:d,shareTemplate:u,typographyTheme:h}=(0,sq.Z)(),p=(0,c.useTranslations)();return(0,l.jsx)(l.Fragment,{children:0===i.length?(0,l.jsx)("div",{children:(0,l.jsx)(tQ.c,{})}):(0,l.jsxs)("div",{className:"threadMarkdownView ".concat(u.parentId),style:{position:"relative",width:"440px",padding:"48px 24px",boxSizing:"border-box",fontSize:"".concat(a0.jo*o,"px"),borderRadius:"12px",fontFamily:h.value,...d.styleObject,...null==d?void 0:null===(t=d.otherOptions)||void 0===t?void 0:t.styleDocument},children:[(0,l.jsx)("div",{style:{fontSize:"1.6em",lineHeight:"1.8",fontWeight:"bold",textAlign:"center",alignItems:"center",marginBottom:"34px",overflowWrap:"anywhere",transform:"rotate(-3.52deg)",position:"relative",marginLeft:"12px",marginRight:"24px",zIndex:"2",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden",textOverflow:"ellipsis",wordBreak:"auto-phrase",backgroundImage:"url(/shareThreadImg/advancedTag.png)",backgroundSize:"cover",color:d.titleColor},className:"shareTitle overflow-hidden overflow-ellipsis line-clamp-2",children:n.title.length>35?"".concat(n.title.slice(0,35),"..."):n.title}),(0,l.jsx)("div",{style:{position:"absolute",top:"68px",right:"5px"},children:(0,l.jsx)("img",{src:"/shareThreadImg/FloretsSvg.png",alt:""})}),(0,l.jsx)("div",{style:{padding:"24px",borderRadius:"16px",color:"#323232",backgroundImage:"url(/shareThreadImg/gridBg.png)",...d.bodyStyle,...null==d?void 0:null===(s=d.otherOptions)||void 0===s?void 0:s.styleDocument},className:"shareMarkdown",children:i.slice(0,3).map((e,t)=>{var s,r;let i=e.query,n=i.length>35?"".concat(i.slice(0,35),"..."):i;return(0,l.jsxs)("div",{children:[0!==t&&(0,l.jsx)("div",{style:{fontSize:"20px",lineHeight:"1.6em",height:"3.2em",paddingBottom:"8px",fontWeight:"bold",textAlign:"left",overflowWrap:"anywhere",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden",textOverflow:"ellipsis",maxHeight:"4em",wordBreak:"auto-phrase",...d.threadTitleStyle,color:d.titleColor},className:"shareThreadItemTitle overflow-hidden overflow-ellipsis line-clamp-2",children:n}),(null===(s=_.Z.getState().mindmapList.find(t=>t.message_id===e.id))||void 0===s?void 0:s.images)&&(0,l.jsx)("div",{className:"border border-gray-300 p-2 rounded-lg mb-4 bg-cover bg-center w-full pointer-events-none bg-white",children:(0,l.jsx)(a3.default,{content:(null===(r=e.mindmap)||void 0===r?void 0:r.content)||"",query:e.query,messageId:e.id,index:t,showDispose:!1})}),(0,l.jsx)("div",{className:(0,v.cn)("prose prose-md dark:prose-invert max-w-full",x().prose),style:{marginBottom:"24px",color:d.textColor},children:(0,l.jsx)(a2,{children:e.answer.replace(/\[\d+\]/g,"")})})]},e.id)})}),i.length>3&&(0,l.jsxs)("div",{style:{margin:"24px auto",fontSize:"12px",width:"90%",lineHeight:"20px"},children:[p("shareThread.moreThread")," "]}),(0,l.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,l.jsxs)("div",{className:"w-[calc(100%-100px)]",children:[(0,l.jsx)("div",{className:"flex gap-2 justify-end text-[24px] font-bold",children:(0,l.jsxs)("div",{className:"flex items-center relative h-[36px] leading-[36px]",children:[(0,l.jsx)("div",{className:"logoIcon mr-2 w-[34px] h-[34px] leading-[36px]",children:d.logoIcon}),(0,l.jsx)("div",{className:"h-[36px] leading-[36px]",children:p("shareThread.qrcodeTitle")})]})}),(0,l.jsx)("div",{className:"text-[12px] text-right mt-2 leading-[20px]",children:p("shareThread.qrcodeTip")})]}),(0,l.jsx)("div",{className:"border-[8px] border-white rounded-[12px] ml-4 w-[88px]",style:{background:d.qrcodeBg},children:(0,l.jsx)("img",{src:r,className:"w-[88px]",alt:""})})]})]})})},ls=e=>{var t;let{qrcodeData:s,threadList:r,threadData:i,baseImgUrl:n}=e,{cacheThreadImg:a,fontSize:o,backgroundTemplate:d,shareTemplate:u,typographyTheme:h}=(0,sq.Z)(),p=(0,c.useTranslations)();return(0,l.jsx)(l.Fragment,{children:0===r.length?(0,l.jsx)("div",{children:(0,l.jsx)(tQ.c,{})}):(0,l.jsx)("div",{className:"threadMarkdownView ".concat(u.parentId),style:{width:"440px",padding:"48px 24px",boxSizing:"border-box",fontSize:"".concat(a0.jo*o,"px"),borderRadius:"12px",fontFamily:h.value,backgroundSize:"contain",backgroundImage:"".concat(n),...null==d?void 0:d.styleObject,...null==d?void 0:null===(t=d.otherOptions)||void 0===t?void 0:t.styleDocument},children:(0,l.jsxs)("div",{style:{paddingTop:"24px",padding:"24px",color:"#323232",borderRadius:"16px",...d.bodyStyle},className:"shareMarkdown",children:[r.slice(0,3).map((e,t)=>{var s,r;let n=0===t?i.title:e.query,a=n.length>35?"".concat(n.slice(0,35),"..."):n;return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{fontSize:"1.71em",lineHeight:"1.83em",fontWeight:"bold",textAlign:"left",marginBottom:"24px",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden",textOverflow:"ellipsis",wordBreak:"auto-phrase",color:d.threadTitleStyle.color,overflowWrap:"anywhere"},className:"shareTitle overflow-hidden overflow-ellipsis line-clamp-2",children:a}),(null===(s=_.Z.getState().mindmapList.find(t=>t.message_id===e.id))||void 0===s?void 0:s.images)&&(0,l.jsx)("div",{className:"border border-gray-300 p-2 rounded-lg mb-4 bg-cover bg-center w-full pointer-events-none bg-white",children:(0,l.jsx)(a3.default,{content:(null===(r=e.mindmap)||void 0===r?void 0:r.content)||"",query:e.query,messageId:e.id,index:t,showDispose:!1})}),(0,l.jsx)("div",{className:(0,v.cn)("prose prose-md dark:prose-invert max-w-full",x().prose),style:{marginBottom:"24px",color:d.textColor},children:(0,l.jsx)(a2,{children:e.answer.replace(/\[\d+\]/g,"")})})]},e.id)}),r.length>3&&(0,l.jsxs)("div",{style:{margin:"24px auto",fontSize:"14px",width:"90%",lineHeight:"20px"},children:[p("shareThread.moreThread")," "]}),(0,l.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,l.jsxs)("div",{className:"w-[calc(100%-100px)]",children:[(0,l.jsx)("div",{className:"flex gap-2 justify-end text-[24px] font-bold",children:(0,l.jsxs)("div",{className:"flex items-center relative h-[36px] leading-[36px]",children:[(0,l.jsx)("div",{className:"logoIcon mr-2 w-[34px] h-[34px] leading-[36px]",children:d.logoIcon}),(0,l.jsx)("div",{className:"h-[36px] leading-[36px]",children:p("shareThread.qrcodeTitle")})]})}),(0,l.jsx)("div",{className:"text-[12px] text-right mt-2 leading-[20px]",children:p("shareThread.qrcodeTip")})]}),(0,l.jsx)("div",{className:"border-[8px] border-white rounded-[12px] ml-4 w-[88px]",style:{background:d.qrcodeBg},children:(0,l.jsx)("img",{src:s,className:"w-[88px]",alt:""})})]})]})})})},lr=e=>{var t;let{qrcodeData:s,threadList:r,threadData:i}=e,{cacheThreadImg:n,fontSize:a,backgroundTemplate:o,shareTemplate:d,typographyTheme:u}=(0,sq.Z)(),h=(0,c.useTranslations)();return(0,l.jsx)(l.Fragment,{children:0===r.length?(0,l.jsx)("div",{children:(0,l.jsx)(tQ.c,{})}):(0,l.jsxs)("div",{className:"threadMarkdownView ".concat(d.parentId),style:{width:"440px",padding:"12px 24px",boxSizing:"border-box",fontSize:"".concat(a0.jo*a,"px"),borderRadius:"12px",fontFamily:u.value,paddingTop:"48px",...o.styleObject,...null==o?void 0:null===(t=o.otherOptions)||void 0===t?void 0:t.styleDocument},children:[r.slice(0,3).map((e,t)=>{var s,r;let n=0===t?i.title:e.query,a=n.length>35?"".concat(n.slice(0,35),"..."):n;return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{style:{position:"relative"},children:[(0,l.jsx)("div",{style:{width:"372px",fontSize:"1.71em",lineHeight:"66px",fontWeight:"bold",textAlign:"left",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:o.titleColor,zIndex:"2",position:"absolute",top:"-82px",padding:"0 24px",left:"0px"},className:"shareTitle",children:a}),(0,l.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",padding:"0 12px",top:"-92px",zIndex:0},children:(0,l.jsx)(al.WD,{})})]}),(0,l.jsx)("div",{style:{border:"3px solid #86BFF5",borderRadius:"12px",padding:"12px",marginTop:"104px"},children:(0,l.jsxs)("div",{style:{padding:"24px",paddingTop:"40px",color:"#323232",marginBottom:"24px",border:"2px dashed #86BFF5",borderRadius:"12px",...o.bodyStyle},className:"shareMarkdown",children:[(null===(s=_.Z.getState().mindmapList.find(t=>t.message_id===e.id))||void 0===s?void 0:s.images)&&(0,l.jsx)("div",{className:"border border-gray-300 p-2 rounded-lg mb-4 bg-cover bg-center w-full pointer-events-none bg-white",children:(0,l.jsx)(a3.default,{content:(null===(r=e.mindmap)||void 0===r?void 0:r.content)||"",query:e.query,messageId:e.id,index:t,showDispose:!1})}),(0,l.jsx)("div",{className:(0,v.cn)("prose prose-md dark:prose-invert max-w-full",x().prose),style:{marginBottom:"24px",color:o.textColor},children:(0,l.jsx)(a2,{children:e.answer.replace(/\[\d+\]/g,"")})})]})},e.id)]},t)}),r.length>3&&(0,l.jsxs)("div",{style:{margin:"24px auto",fontSize:"12px",width:"90%",lineHeight:"20px"},children:[h("shareThread.moreThread")," "]}),(0,l.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,l.jsxs)("div",{className:"w-[calc(100%-100px)]",children:[(0,l.jsx)("div",{className:"flex gap-2 justify-end text-[24px] font-bold",children:(0,l.jsxs)("div",{className:"flex items-center relative h-[36px] leading-[36px]",children:[(0,l.jsx)("div",{className:"logoIcon mr-2 w-[34px] h-[34px] leading-[36px]",children:o.logoIcon}),(0,l.jsx)("div",{className:"h-[36px] leading-[36px]",children:h("shareThread.qrcodeTitle")})]})}),(0,l.jsx)("div",{className:"text-[12px] text-right mt-2 leading-[20px]",children:h("shareThread.qrcodeTip")})]}),(0,l.jsx)("div",{className:"border-[8px] border-white rounded-[12px] ml-4 w-[88px]",style:{background:o.qrcodeBg},children:(0,l.jsx)("img",{src:s,className:"w-[88px]",alt:""})})]})]})})},li=e=>{var t;let{qrcodeData:s,threadList:r,threadData:i}=e,{cacheThreadImg:n,fontSize:a,backgroundTemplate:o,shareTemplate:d,typographyTheme:u}=(0,sq.Z)(),h=(0,c.useTranslations)();return(0,l.jsx)(l.Fragment,{children:0===r.length?(0,l.jsx)("div",{children:(0,l.jsx)(tQ.c,{})}):(0,l.jsxs)("div",{className:"threadMarkdownView ".concat(d.parentId),style:{width:"440px",padding:"32px 12px",boxSizing:"border-box",fontSize:"".concat(a0.jo*a,"px"),borderRadius:"12px",fontFamily:u.value,...o.styleObject,...null==o?void 0:null===(t=o.otherOptions)||void 0===t?void 0:t.styleDocument},children:[r.slice(0,3).map((e,t)=>{var s,r,n,a;let d=0===t?i.title:e.query,c=d.length>35?"".concat(d.slice(0,35),"..."):d;return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{height:"36px",borderRadius:"999px",zIndex:"0",...null===(s=o.otherOptions)||void 0===s?void 0:s.headerLineStyle},children:" "}),(0,l.jsxs)("div",{style:{position:"relative",margin:"0 24px",marginTop:"-16px",padding:"24px",paddingTop:"40px",color:"#323232",marginBottom:"0px",zIndex:"1",...o.bodyStyle},className:"shareMarkdown",children:[(0,l.jsx)("div",{style:{position:"absolute",top:"0",right:"0",width:"100%",height:"10px",background:null==o?void 0:null===(r=o.otherOptions)||void 0===r?void 0:r.headerBg}}),(0,l.jsx)("div",{style:{fontSize:"1.71em",lineHeight:"1.83em",fontWeight:"bold",textAlign:"left",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden",textOverflow:"ellipsis",overflowWrap:"anywhere",wordBreak:"auto-phrase",marginBottom:"24px",color:"#FFFFFF"===o.titleColor?o.textColor:o.titleColor},className:"shareTitle overflow-hidden overflow-ellipsis line-clamp-2",children:c}),(null===(n=_.Z.getState().mindmapList.find(t=>t.message_id===e.id))||void 0===n?void 0:n.images)&&(0,l.jsx)("div",{className:"border border-gray-300 p-2 rounded-lg mb-4 bg-cover bg-center w-full pointer-events-none bg-white",children:(0,l.jsx)(a3.default,{content:(null===(a=e.mindmap)||void 0===a?void 0:a.content)||"",query:e.query,messageId:e.id,index:t,showDispose:!1})}),(0,l.jsx)("div",{className:(0,v.cn)("prose prose-md dark:prose-invert max-w-full",x().prose),style:{marginBottom:"24px",color:o.textColor},children:(0,l.jsx)(a2,{children:e.answer.replace(/\[\d+\]/g,"")})})]})]},e.id)}),(0,l.jsx)("img",{src:"/shareThreadImg/emailTag.png",alt:"",style:{width:"100%",padding:"0px 24px"}}),(0,l.jsxs)("div",{style:{margin:"0px 24px",background:" linear-gradient(180deg, #eee 0%, #FFF 17.36%)"},children:[r.length>3&&(0,l.jsxs)("div",{style:{margin:"24px auto",fontSize:"12px",width:"90%",lineHeight:"20px"},children:[h("shareThread.moreThread")," "]}),(0,l.jsxs)("div",{className:"flex justify-between",style:{padding:"24px"},children:[(0,l.jsxs)("div",{className:"w-[calc(100%-100px)]",children:[(0,l.jsx)("div",{className:"flex gap-2 justify-end text-[24px] font-bold",children:(0,l.jsxs)("div",{className:"flex items-center relative h-[36px] leading-[36px]",children:[(0,l.jsx)("div",{className:"logoIcon mr-2 w-[34px] h-[34px] leading-[36px]",children:o.logoIcon}),(0,l.jsx)("div",{className:"h-[36px] leading-[36px]",children:h("shareThread.qrcodeTitle")})]})}),(0,l.jsx)("div",{className:"text-[12px] text-right mt-2 leading-[20px]",children:h("shareThread.qrcodeTip")})]}),(0,l.jsx)("div",{className:"border-[8px] border-white rounded-[12px] ml-4 w-[88px]",style:{background:o.qrcodeBg},children:(0,l.jsx)("img",{src:s,className:"w-[88px]",alt:""})})]})]})]})})},ln=e=>{var t;let{qrcodeData:s,threadList:r,threadData:i}=e,{cacheThreadImg:n,fontSize:a,backgroundTemplate:o,shareTemplate:d,typographyTheme:u}=(0,sq.Z)(),h=(0,c.useTranslations)();return(0,l.jsx)(l.Fragment,{children:0===r.length?(0,l.jsx)("div",{children:(0,l.jsx)(tQ.c,{})}):(0,l.jsx)("div",{className:"threadMarkdownView ".concat(d.parentId),style:{width:"440px",padding:"48px 24px",boxSizing:"border-box",borderRadius:"12px",fontSize:"".concat(a0.jo*a,"px"),fontFamily:u.value,...o.styleObject,...null==o?void 0:null===(t=o.otherOptions)||void 0===t?void 0:t.styleDocument},children:r.slice(0,3).map((e,t)=>{var n,a,d,c;let u=0===t?i.title:e.query,p=u.length>35?"".concat(u.slice(0,35),"..."):u;return(0,l.jsxs)("div",{style:{position:"relative"},children:[(0,l.jsx)("div",{style:{position:"absolute",width:"100%",top:"8px",bottom:"-8px",right:"-8px",border:"3px solid #0865AA",background:null===(n=o.otherOptions)||void 0===n?void 0:n.collisionBg}}),(0,l.jsxs)("div",{style:{position:"relative",zIndex:"10"},children:[(0,l.jsx)("div",{style:{fontSize:"1.71em",lineHeight:"1.83",fontWeight:"bold",textAlign:"left",boxSizing:"border-box",overflowWrap:"anywhere",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden",textOverflow:"ellipsis",wordBreak:"auto-phrase",padding:"8px 24px",border:"3px solid #0865AA",color:o.titleColor,background:null===(a=o.otherOptions)||void 0===a?void 0:a.collisionBg},className:"shareTitle overflow-hidden overflow-ellipsis line-clamp-2",children:p}),(0,l.jsxs)("div",{style:{padding:"24px",color:"#323232",marginBottom:"24px",border:"3px solid #0865AA",borderTop:"none",...o.bodyStyle},className:"shareMarkdown",children:[(0,l.jsxs)("div",{children:[0!==t&&(0,l.jsx)("div",{style:{fontSize:"20px",lineHeight:"1.6em",height:"3.2em",paddingBottom:"8px",fontWeight:"bold",textAlign:"left",overflowWrap:"anywhere",...o.threadTitleStyle,color:o.titleColor},className:"shareThreadItemTitle overflow-hidden overflow-ellipsis line-clamp-2",children:e.query}),(null===(d=_.Z.getState().mindmapList.find(t=>t.message_id===e.id))||void 0===d?void 0:d.images)&&(0,l.jsx)("div",{className:"border border-gray-300 p-2 rounded-lg mb-4 bg-cover bg-center w-full pointer-events-none bg-white",children:(0,l.jsx)(a3.default,{content:(null===(c=e.mindmap)||void 0===c?void 0:c.content)||"",query:e.query,messageId:e.id,index:t,showDispose:!1})}),(0,l.jsx)("div",{className:(0,v.cn)("prose prose-md dark:prose-invert max-w-full",x().prose),style:{marginBottom:"24px",color:o.textColor},children:(0,l.jsx)(a2,{children:e.answer.replace(/\[\d+\]/g,"")})})]},e.id),(2==t||t+1===r.length)&&(0,l.jsxs)(l.Fragment,{children:[" ",r.length>3&&(0,l.jsxs)("div",{style:{margin:"24px auto",fontSize:"12px",width:"90%",lineHeight:"20px"},children:[h("shareThread.moreThread")," "]}),(0,l.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,l.jsxs)("div",{className:"w-[calc(100%-100px)]",children:[(0,l.jsx)("div",{className:"flex gap-2 justify-end text-[24px] font-bold",children:(0,l.jsxs)("div",{className:"flex items-center relative h-[36px] leading-[36px]",children:[(0,l.jsx)("div",{className:"logoIcon mr-2 w-[34px] h-[34px] leading-[36px]",children:o.logoIcon}),(0,l.jsx)("div",{className:"h-[36px] leading-[36px]",children:h("shareThread.qrcodeTitle")})]})}),(0,l.jsx)("div",{className:"text-[12px] text-right mt-2 leading-[20px]",children:h("shareThread.qrcodeTip")})]}),(0,l.jsx)("div",{className:"border-[8px] border-white rounded-[12px] ml-4 w-[88px]",style:{background:o.qrcodeBg},children:(0,l.jsx)("img",{src:s,className:"w-[88px]",alt:""})})]})]})]})]})]},e.id)})})})},la=e=>{var t,s,r;let{threadList:i,threadData:n,dataLoading:a}=e,{shareStatus:d,cacheThreadImg:u,setCacheThreadImg:h,fontSize:p,setFontSize:m,typographyTheme:f,backgroundTemplate:x,setBackgroundTemplate:v,setTypographyTheme:g,thread_id:b,shareTemplate:y,setShareTemplate:w}=(0,sq.Z)(),[j,k]=(0,o.useState)(""),{isMobile:C}=(0,tk.Z)(),_=(0,c.useTranslations)(),[N,S]=(0,o.useState)(!1),E=()=>{let e=sB.Z.getState().current,t=new URL("".concat(location.origin,"/search/").concat(b));e&&t.searchParams.append("invite",e),aQ.toDataURL(t.toString(),{width:256,errorCorrectionLevel:"H",margin:0,color:{dark:"#0080ff00",light:"#F4F4F4FF"}}).then(e=>{k(e)}).catch(e=>{console.error(e)})},T=e=>{S(!0);let t=document.querySelector(".threadMarkdownView");i_.Z.info(_("ppt.generating"),999999),(0,eh.hh)(t,e).then(t=>{i_.Z.close(),S(!1),t&&"img"===e&&i_.Z.success(_("shareThread.copyImgSuccess"))}).catch(e=>{S(!1),i_.Z.close(),e&&i_.Z.error("Error")}).finally(()=>{i_.Z.close()}),(0,H.fk)("link"===e?q.U.THREAD_SHARE_DOWNLOAD_IMG:q.U.THREAD_SHARE_COPY_IMG,{id:b},!0)};return(0,o.useEffect)(()=>{E()},[]),(0,l.jsxs)("div",{className:"flex h-[740px] shareThread ",children:[!C&&(0,l.jsx)(l.Fragment,{children:a?(0,l.jsx)("div",{className:"flex flex-col w-[600px] shareThreadMarkdown",children:(0,l.jsx)(tQ.c,{})}):(0,l.jsxs)("div",{className:"flex flex-col w-[600px] shareThreadMarkdown",children:[(0,l.jsxs)("div",{id:"threadMarkdown",style:{"--blodtitle-color":x.threadTitleStyle.color},className:"flex flex-col items-center h-full overflow-auto share-scrollbar p-[32px] [padding-left:56px] [padding-right:56px]",children:["shareTemplate1"===y.parentId&&(0,l.jsx)(a5,{qrcodeData:j,threadList:i,threadData:n}),"shareTemplate2"===y.parentId&&(0,l.jsx)(a4,{qrcodeData:j,threadList:i,threadData:n}),"shareTemplate3"===y.parentId&&(0,l.jsx)(le,{qrcodeData:j,threadList:i,threadData:n}),"shareTemplate4"===y.parentId&&(0,l.jsx)(lt,{qrcodeData:j,threadList:i,threadData:n}),["shareTemplate5","shareTemplate6","shareTemplate7","shareTemplate8","shareTemplate9","shareTemplate10"].includes(y.parentId)&&(0,l.jsx)(ls,{qrcodeData:j,threadList:i,threadData:n,baseImgUrl:(null===a0.jW||void 0===a0.jW?void 0:null===(r=a0.jW.find(e=>e.id===y.defaultBgID))||void 0===r?void 0:null===(s=r.otherOptions)||void 0===s?void 0:null===(t=s.styleDocument)||void 0===t?void 0:t.backgroundImage)||""}),"shareTemplate15"===y.parentId&&(0,l.jsx)(lr,{qrcodeData:j,threadList:i,threadData:n}),["shareTemplate16","shareTemplate17"].includes(y.parentId)&&(0,l.jsx)(li,{qrcodeData:j,threadList:i,threadData:n}),"shareTemplate18"===y.parentId&&(0,l.jsx)(ln,{qrcodeData:j,threadList:i,threadData:n})]}),(0,l.jsxs)("div",{className:"flex items-center justify-around w-full p-[20px] [padding-left:24px] [padding-right:24px] box-border h-[124px] border-t border-[#ECEFF4] dark:border-[#2F333B]",children:[(0,l.jsx)("div",{children:(0,l.jsxs)(a1.J2,{modal:!0,onOpenChange:e=>{e&&(0,H.fk)(q.U.THREAD_SHARE_SHARE_CHANGE_IMG,{id:b},!0)},children:[(0,l.jsx)(a1.xo,{asChild:!0,children:(0,l.jsxs)("div",{className:"flex flex-col items-center gap-[16px] cursor-pointer text-[14px] text-[#475467] hover:text-[#FA7931] dark:text-white",children:[(0,l.jsx)(al.X4,{}),_("shareThread.customSnapshot")]})}),(0,l.jsx)(a1.yk,{className:"w-[376px]",children:(0,l.jsxs)(aX.n,{"aria-label":"Options",variant:"underlined",color:"primary",children:[(0,l.jsx)(aK.r,{title:_("shareThread.selectTemplate"),className:"w-full",children:(0,l.jsx)("div",{className:"h-[420px]  overflow-auto mx-auto  share-scrollbar relative",children:(0,l.jsx)("div",{className:"flex items-center flex-wrap gap-[8px] box-border mx-auto",style:{width:"100%"},children:a0.Qz.map((e,t)=>(0,l.jsx)("img",{onClick:()=>{w(e),v(a0.jW.find(t=>t.id===e.defaultBgID))},alt:"templateImg",src:e.templateImg,width:98,height:130,className:"flex items-center justify-center w-[98px] h-[130px] border rounded-[4px] ".concat(e.parentId===y.parentId?"border-[#1890FF]":"border-[#E4E7EC]")},"".concat(e.parentId,"-").concat(t)))})})},"template"),(0,l.jsx)(aK.r,{title:_("shareThread.customize"),children:(0,l.jsxs)("div",{className:"h-[420px] w-[340px] [padding-left:8px]  overflow-auto share-scrollbar",children:[(0,l.jsx)("div",{className:"text-[#98A2B3] dark:text-white",style:{marginBottom:"8px",lineHeight:"20px"},children:_("shareThread.customizeDescription")}),(0,l.jsx)("div",{className:"font-bold text-[14px] text-[#475467] dark:text-white",style:{lineHeight:"24px"},children:_("shareThread.background")}),(0,l.jsxs)("div",{className:"flex items-center flex-wrap w-full gap-[8px] my-[16px]",children:[(0,l.jsx)("div",{onClick:()=>{v(y.defaultBg)},className:"w-[32px] h-[32px] rounded-[4px] mb-[8px] border ".concat(y.defaultBg.id===(null==x?void 0:x.id)?"border-[#1890FF]":"border-[#E4E7EC]"),style:{...y.defaultBg.styleObject,backgroundImage:"url(".concat(y.defaultBg.previewImg,")"),backgroundSize:"cover",borderRadius:"50%"}},y.defaultBg.id),a0.jW.filter(e=>e.id!=y.defaultBg.id).slice(0,23).map(e=>(0,l.jsx)("div",{onClick:()=>{v(e)},className:"w-[32px] h-[32px] rounded-[4px] mb-[8px] border ".concat(e.id===(null==x?void 0:x.id)?"border-[#1890FF]":"border-[#E4E7EC]"),style:{...e.styleObject,backgroundImage:"url(".concat(e.previewImg,")"),backgroundSize:"cover",borderRadius:"50%"}},e.id))]}),(0,l.jsx)("div",{className:"font-bold text-[14px] text-[#475467] dark:text-white",style:{lineHeight:"24px"},children:_("shareThread.typographyTheme")}),(0,l.jsx)("div",{className:"flex items-center gap-[8px] mt-[16px]",children:a0.Oq.map(e=>(0,l.jsx)("div",{className:"p-[12px] box-border text-center text-[14px] leading-[20px] border min-w-[98px] cursor-pointer rounded-[4px] ".concat(e===f?"border-[#1890FF]":"border-[#E4E7EC]"),onClick:()=>g(e),children:_("shareThread.".concat(e.id))},e.id))}),(0,l.jsxs)("div",{className:"flex items-center mt-[16px] text-[#475467] dark:text-white ",children:[(0,l.jsx)("div",{className:"font-bold text-[14px] mr-[32px] ",children:_("shareThread.fontSize")}),(0,l.jsx)("div",{className:"flex items-center gap-[8px]",children:a0.TE.map((e,t)=>(0,l.jsx)("div",{className:"p-[12px] box-border text-center border rounded-[4px] cursor-pointer ".concat(e===p?"border-[#1890FF]":"border-[#E4E7EC]"),style:{fontSize:a0.jo*e+"px",width:"44px",height:"44px"},onClick:()=>m(e),children:_("shareThread.font")},t))})]})]})},"custom")]})})]})}),!(0,eh.zc)()&&(0,l.jsxs)("div",{className:"flex flex-col items-center gap-[16px] cursor-pointer text-[14px] text-[#475467] hover:text-[#FA7931] dark:text-white",onClick:()=>T("img"),children:[(0,l.jsx)(al.Hg,{}),_("shareThread.copySnapshot")]}),(0,l.jsxs)("div",{className:"flex flex-col items-center gap-[16px] cursor-pointer text-[14px] text-[#475467] hover:text-[#FA7931] dark:text-white",onClick:()=>T("link"),children:[(0,l.jsx)(al.fR,{}),_("shareThread.downloadSnapshot")]})]})]})}),(0,l.jsxs)("div",{className:"flex flex-col items-center w-full max-w-[396px] p-[24px] box-border border-l border-[#ECEFF4] shareContainer dark:border-[#2F333B]",children:[(0,l.jsx)("div",{className:"text-[20px] font-bold mb-[24px] text-[#475467] overflow-hidden overflow-ellipsis line-clamp-2 dark:text-white",style:{wordBreak:"keep-all",lineHeight:"28px",height:"56px",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden",textOverflow:"ellipsis",overflowWrap:"anywhere"},children:(null==n?void 0:n.title)||""}),(0,l.jsx)(a6,{threadData:n}),"PRIVATE"!==d&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"mt-[48px] mb-[8px] border-[12px] border-[#F5F7F9] rounded-[12px]",style:{background:"linear-gradient(to right bottom, rgb(36, 171, 247), rgb(40, 121, 251))"},children:(0,l.jsx)("img",{src:j,alt:"",className:"w-[108px]"})}),(0,l.jsx)("div",{className:"text-[#98A2B3] dark:text-white text-[12px]",style:{marginTop:"8px"},children:_("shareThread.lineMobileScanToShare")})]})]}),N&&(0,l.jsx)("div",{className:"shareLoading bg-white  dark:bg-black",style:{position:"absolute",top:"0",left:"0",bottom:"0",width:"100%",height:"100%",opacity:"0.5"}})]})},ll=s(86811),lo=()=>{let{showThreadModel:e,setShowThreadModel:t,setShareStatus:s,setIsSelf:r,thread_id:i}=(0,sq.Z)(),{isMobile:n}=(0,iQ.b)(),a=(0,c.useTranslations)(),d=(0,tR.gQ)(),[u,p]=(0,o.useState)([]),[m,f]=(0,o.useState)(),[x,v]=(0,o.useState)(!1),{userInfo:g}=(0,tR.ZP)(),b=(0,tR.ZP)(e=>e.isLogin),y=(0,o.useCallback)(async()=>{v(!0);try{var e;let t=await function(e,t){let s;let r=Date.now(),i=fetch(e,t);return s=setTimeout(()=>{let t=Date.now()-r;!function(e,t){console.log(" ".concat(e,"  ").concat(t,"ms1"));let s=JSON.stringify({report_application:"glaritySearch",browser_language:"",browser_version:"",device_id:"",browser_type:"nodejs",os_type:"nodejs",event_time:new Date().getTime(),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,ext:JSON.stringify({event_type:"fetch_history_slow",log_type:"api",data:{url:e,duration:t}})});fetch("".concat("https://log.felo.ai","/api/data"),{method:"POST",body:s})}(e.toString(),t)},1e3),i.then(e=>(clearTimeout(s),e)).catch(t=>{throw clearTimeout(s),console.log(" ".concat(e.toString()," ")),t})}("".concat(er.XJ,"/search/threads/").concat(i),{method:"GET",headers:{Authorization:b?(0,sX.LP)():""},credentials:"include"});if(!t.ok){let e=await t.json().catch(()=>({}));if(403===t.status)throw Error("notAllowed");throw Error(e.message||"Failed to fetch data, status: ".concat(t.status))}let n=await t.json();f(n);let a=null==n?void 0:null===(e=n.permission)||void 0===e?void 0:e.is_self;r(a),a&&(d?s("PARTIAL_PUBLIC"):s("PUBLIC")),p(n.messages),v(!1)}catch(e){v(!1),i_.Z.error(e.toString())}},[i]);return((0,o.useEffect)(()=>{i&&e&&y()},[i,e]),n)?(0,l.jsx)(ll.yo,{open:e,onOpenChange:t,children:(0,l.jsxs)(ll.ue,{side:"bottom",children:[(0,l.jsx)(ll.Tu,{className:"flex justify-between items-center",children:(0,l.jsx)(ll.bC,{className:"text-left text-lg w-full",children:a("shareThread.shareThread")})}),(0,l.jsx)("div",{className:"py-6 px-2",children:(0,l.jsx)(a6,{threadData:m})})]})}):(0,l.jsx)(h.Vq,{open:e,onOpenChange:t,children:(0,l.jsxs)(h.cZ,{className:"max-w-[1000px]",children:[(0,l.jsx)(h.fK,{className:"flex justify-between items-center pb-0",children:(0,l.jsx)(h.$N,{className:"text-lg font-medium w-full",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-5",children:(0,l.jsx)(al.u_,{})}),a("shareThread.shareThread")]})})}),(0,l.jsx)(la,{threadData:m,threadList:u,dataLoading:x})]})})},ld=s(74926);let lc=async(e,t)=>{let s=await fetch(t);return fetch(e,{method:"PUT",body:await s.blob()})},lu=e=>{let{canEdit:t}=e,s=(0,c.useTranslations)(),r=(0,c.useLocale)(),{isDark:i}=(0,D.Z)(),n=(0,tW.V)(),a=(0,ld.Z)(e=>e.template),d=(0,o.useRef)(null),u=(0,o.useRef)(null),{currentData:p,clearCurrentData:m}=(0,tS.Z)(),f=(0,tR.gQ)(),{language:x}=(0,nw.Z)(),v=()=>{let e=(null==p?void 0:p.threadId)?"".concat(location.origin,"/search/").concat(p.threadId):location.href;history.replaceState({},"",e),m()},g=(0,o.useRef)(void 0),y=(0,o.useMemo)(()=>!!a&&(0,aE.el)(a),[a]),w=tX(t);(0,o.useEffect)(()=>{let e=e=>{var t,s,r,i,n,l;if(e.data.type){if("mindmap:init"===e.data.type){let{anonymousToken:e}=tR.ZP.getState(),{currentData:r}=tS.Z.getState();console.log("\uD83D\uDE80 ~ onMessage ~ currentData:",r),null===(s=u.current)||void 0===s||null===(t=s.contentWindow)||void 0===t||t.postMessage({type:"mindmap:init",value:{tokens:{login:(0,en.Nh)(),anonymous:e,visitor:(0,en.Kd)()},options:{canEdit:w.current,mode:"thread",thread:null==r?void 0:r.threadId,message:null==r?void 0:r.messageId,language:(null==a?void 0:a.template_type)===b.W.DIRECT_DUTY&&y?x:null}}},"*")}if("mindmap:data"===e.data.type)g.current=e.data.value;else if("mindmap:themeChange"===e.data.type)(0,H.fk)(q.U.MINDMAP_THEME_CHANGE,{value:e.data.value},!0);else if("mindmap:layoutChange"===e.data.type)(0,H.fk)(q.U.MINDMAP_LAYOUT_CHANGE,{value:e.data.value},!0);else if("mindmap:setting"===e.data.type)(0,H.fk)(q.U.MINDMAP_SETTING_CLICK,{value:e.data.value},!0);else if("mindmap:retry"===e.data.type)(0,H.fk)(q.U.MINDMAP_RETRY,{},!0);else if("mindmap:download"===e.data.type){let{currentData:t}=tS.Z.getState();(0,s9.DB)({type:"image/png",filename:"".concat(null==t?void 0:t.query,".png"),data:e.data.value.replace("data:image/png;base64,","")})}else if("mindmap:share"===e.data.type)j(),k(!1),null===(i=u.current)||void 0===i||null===(r=i.contentWindow)||void 0===r||r.postMessage({type:"mindmap:shareSucceed"},"*");else if("mindmap:status"===e.data.type){let{currentData:t}=tS.Z.getState();console.log("mindmap:status",e.data),t&&tS.Z.getState().setCurrentData({...t,status:null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(n=l.value)||void 0===n?void 0:n.status})}}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[x]);let j=()=>{let{currentData:e}=tS.Z.getState();if(!e)return;let t=sB.Z.getState().current,s=new URL("".concat(location.origin,"/search/").concat(e.threadId));s.searchParams.append("showMindmap",e.messageId),t&&s.searchParams.append("invite",t),n.copy(s.toString()),f?sq.Z.getState().setShareStatus("PARTIAL_PUBLIC"):sq.Z.getState().setShareStatus("PUBLIC"),(0,H.fk)(q.U.THREAD_MINDMAP_SHARE,{id:e.threadId},!0)},k=function(){var e,t;let s=!(arguments.length>0)||void 0===arguments[0]||arguments[0];null===(t=u.current)||void 0===t||null===(e=t.contentWindow)||void 0===e||e.postMessage({type:"mindmap:requestData"},"*");let r=window.setTimeout(()=>{if(console.log("\uD83C\uDF4E ~ timeout ~ currentData:",p),p&&g.current&&g.current.svg){var e,t;console.log("getted mindmap close data",g.current);let{threadId:s,messageId:r}=p;(0,sX.KC)({message_id:r,suffix:["png","svg"]}).then(e=>{let t=e.data.images;200===e.status&&Promise.all(t.map(e=>g.current?lc(e.path,g.current[e.type]):void 0)).then(e=>{var i,n,a;console.log("upload mindmap succeed",e);let l={type:(null===(i=g.current)||void 0===i?void 0:i.layout)||"",thread_id:s,message_id:r,covers:t,content:{config:{layout:(null===(n=g.current)||void 0===n?void 0:n.layout)||"",theme:(null===(a=g.current)||void 0===a?void 0:a.theme)||""}}};(0,sX.pK)(l).then(e=>{200===e.status&&(g.current=void 0,_.Z.getState().updateMindMapItem(s,r,{...l,...e.data}))})})}),(0,sX.M)({thread_id:s,message_id:r,seq:g.current.seq||void 0}),(0,s9.HF)({type:"image/png",filename:"".concat(null==p?void 0:p.query,".png"),data:null===(t=g.current)||void 0===t?void 0:null===(e=t.png)||void 0===e?void 0:e.replace("data:image/png;base64,",""),thread_id:s,message_id:r})}s&&v(),window.clearTimeout(r)},200)};return(0,l.jsx)(h.Vq,{open:!!p,onOpenChange:()=>{let{currentData:e}=tS.Z.getState();if(!["loading","generate","answering"].includes((null==e?void 0:e.status)||"")){if(!t){v();return}k()}},children:(0,l.jsxs)(h.cZ,{className:"max-w-screen-xl overflow-hidden",ref:d,onOpenAutoFocus:e=>e.preventDefault(),"aria-describedby":void 0,hideCloseButton:["loading","generate","answering"].includes((null==p?void 0:p.status)||""),children:[(0,l.jsx)(h.fK,{className:"relative z-10 pointer-events-none",children:(0,l.jsx)(h.$N,{children:s("mindmap")})}),(0,l.jsx)("iframe",{ref:u,allow:"clipboard-write",className:(0,ne.Z)("-mt-[3.75rem] flex-1 min-h-[80vh] w-full"),src:(()=>{if(!p)return;let e=new URL("https://mindmap.felo.ai");return e.searchParams.append("locale",r),e.searchParams.append("theme",i?"dark":"light"),e.toString()})(),style:{visibility:"hidden"},onLoad:()=>u.current&&(u.current.style.visibility="visible")})]})})};var lh=s(3488);let lp=e=>{let{shouldPreventNavigation:t,confirmMessage:s,onConfirm:r}=e,i=(0,nq.useRouter)(),n=(0,w.useRouter)(),a=e=>{if(t){if(!window.confirm(s))throw window.history.pushState(null,"",window.location.href),n.events.emit("routeChangeError",Error("Route Cancelled"),e,{shallow:!1}),"Route Cancelled";null==r||r()}},l=e=>{if(t)return e.preventDefault(),e.returnValue=s,s};(0,o.useEffect)(()=>(window.addEventListener("beforeunload",l),n.events.on("routeChangeStart",a),()=>{window.removeEventListener("beforeunload",l),n.events.off("routeChangeStart",a)}),[t,s,r,i])};var lm=s(20434),lf=e=>{var t;let{steps:s,onClose:r}=e,i=(0,c.useTranslations)(),{isDark:n}=(0,D.Z)(),{isMobile:a}=(0,tk.Z)(),{threads:d,pendingQueries:u,answerWordCount:h,clearPendingQueries:p}=(0,_.Z)(),{isBeginAnswer:m}=(0,F.Z)(),f=(0,o.useMemo)(()=>Math.max(0,d.length-1),[d.length]),x=s[f],g=(0,o.useMemo)(()=>{var e;return null===(e=d[f])||void 0===e?void 0:e.rid},[d,f]),b=(0,o.useMemo)(()=>!m||!g,[m,g]),y=(0,o.useMemo)(()=>u.length>0,[u]),w=(0,o.useMemo)(()=>{var e;return(null===(e=d[0])||void 0===e?void 0:e.category)===O.J5},[d.length]),j=(0,o.useMemo)(()=>d.reduce((e,t)=>{var s;return e+((null==t?void 0:null===(s=t.recall_contexts)||void 0===s?void 0:s.length)||0)},0),[d]),k=(0,o.useMemo)(()=>h.reduce((e,t)=>e+t,0),[h]),C=(0,o.useCallback)(async()=>{p(),g&&(await (0,i9.jB)(g),F.Z.getState().endSearch())},[g]);return lp({shouldPreventNavigation:y,confirmMessage:i("agent.confirm_leave_step"),onConfirm:()=>{r(),C()}}),(0,o.useEffect)(()=>()=>{r(),C(),ao.Z.getState().clearTemplateData(),ld.Z.getState().clearTemplate()},[]),(0,l.jsx)(ty.w,{className:"px-6 py-4 border-2 dark:border-none dark:bg-[#353B46]",children:(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsxs)("div",{className:(0,v.cn)("flex items-center justify-between gap-2"),children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[y?(0,l.jsx)(tQ.c,{size:"sm",className:"text-primary"}):(0,l.jsx)(nb.Ps,{className:"w-5 h-5 dark:text-white flex-shrink-0"}),(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-wrap min-w-0 flex-1",children:[(0,l.jsx)("span",{className:"text-gray-600 dark:text-white text-base font-semibold whitespace-nowrap flex-shrink-0",children:i.rich("agent.research_step",{current:d.length||1,total:s.length||1,strong:e=>(0,l.jsx)("span",{className:"font-semibold text-blue-500",children:e})})}),!a&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"h-4 border-l border-gray-200 flex-shrink-0"}),(0,l.jsx)("div",{className:"min-w-0 flex-1",children:(0,l.jsx)("span",{className:"text-sm text-[#7f94b1] dark:text-gray-400 truncate block",children:x})})]})]})]}),y?(0,l.jsxs)("button",{className:(0,v.cn)("flex items-center justify-center cursor-pointer gap-1","disabled:opacity-50 disabled:cursor-not-allowed text-primary text-sm"),onClick:()=>{b||C()},disabled:b,children:[(0,l.jsx)(nb.xn,{}),i(b?"step.searching":"stopAnswering")]}):(0,l.jsx)(G.z,{variant:"ghost",size:"icon",onClick:r,className:"flex-shrink-0 h-8 w-8",children:(0,l.jsx)(U.Z,{className:"h-4 w-4 font-bold"})})]}),a&&y&&(0,l.jsxs)("div",{className:"p-2 bg-[#fdf5ef] dark:bg-[#3c110e] text-[#d14625] dark:text-[#e68054] rounded-lg flex justify-start items-start gap-2 mt-2",children:[(0,l.jsx)("div",{className:"flex-none",children:(0,l.jsx)(lh.Z,{className:"w-4 h-4 mt-0.5"})}),(0,l.jsx)("div",{className:"flex-1 justify-start text-sm",children:i("stop_reply_warning_modal_description")})]}),(0,l.jsxs)("div",{className:(0,v.cn)("relative text-sm rounded-lg text-gray-400 dark:text-white","p-3 text-[#30394A] bg-theme-bg-100 dark:bg-theme-bg-dark-100","bg-[#f6f7f9] dark:bg-[#20232A] p-3 mt-4","overflow-hidden"),children:[(0,l.jsx)("span",{children:w?i.rich("agent.sites_researched_file",{count:(null===(t=d[0].recall_contexts)||void 0===t?void 0:t.length)||0,strong:e=>(0,l.jsx)("span",{className:"font-medium text-blue-500 mx-1",children:e})}):i.rich("agent.sites_researched",{count:j,strong:e=>(0,l.jsx)("span",{className:"font-medium text-blue-500 mx-1",children:e})})}),(0,l.jsx)("span",{children:i.rich("agent.creating_report",{count:k,strong:e=>(0,l.jsx)("span",{className:"font-medium text-blue-500 mx-1",children:e})})}),y&&(0,l.jsx)(lm.E,{value:d.length/s.length*100,className:"absolute bottom-0 left-0 right-0 h-1"})]}),(0,l.jsx)("div",{className:"flex items-center justify-end gap-2 text-sm text-gray-500 mt-4",children:!y&&(0,l.jsxs)(G.z,{size:"sm",onClick:()=>{var e;(null===(e=d[0])||void 0===e?void 0:e.short_id)&&((0,H.fk)(q.U.AGENT_SEARCH_THREAD_REWRITE,{threadId:d[0].short_id},!0),(0,X.N0)()?(0,s9.Te)({threads:d}):ao.Z.getState().setCurrentData({query:d[0].query,threadId:d[0].short_id,hasProSearchThread:!!d.find(e=>"concise"!==e.mode)}))},className:(0,v.cn)(a&&"w-full"),children:[(0,l.jsx)(nX,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:i("agent.open_document_in_editor")})]})})]})})},lx=function(e){let{threadId:t,templateData:s,onCompleted:r,onError:i}=e,[n,a]=(0,o.useState)(!1),[l,d]=(0,o.useState)(!1),[c,u]=(0,o.useState)(void 0),[h,p]=(0,o.useState)("gpt-4o"),[m,f]=(0,o.useState)(""),[x,v]=(0,o.useState)([]),g=(0,o.useRef)();return{loading:n,hasContent:l,start:async()=>{g.current&&g.current.abort(),a(!0),f(""),v([]);let e=!1;g.current=new AbortController;try{let{templateQuery:n,template:l}=s||{},o=await (0,i9.eB)(g.current,t,{model:h,style:c,query:n||"",template_id:(null==l?void 0:l.id)||""});if("application"===o.headers.get("content-type")){let e=await o.json();if("You exceeded your current quota"===e.detail){i("exceedQuota"),a(!1);return}}for await(let t of("gpt-4o"===h&&Y.ZP.getState().reduceProTimes(1),(0,el.U)(o,g.current.signal))){if(!t.data)return;let s=JSON.parse(t.data);"integration_outline"===s.type?f(s.data.text):"answer"===s.type?(e=!0,f(s.data.text)):"final_contexts"===s.type?v(s.data.sources):"completed"===s.type&&r(s.data.text)}}catch(e){console.log("error",e)}console.log("end"),g.current=void 0,a(!1),d(e)},stop:()=>{var e;null===(e=g.current)||void 0===e||e.abort(),a(!1)},reset:()=>{a(!1),f(""),v([])},content:m,sources:x,model:h,setModel:p,style:c,setStyle:u}},lv=s(50403),lg=s(11333),lb=s.n(lg);let ly=(e,t)=>e.map(e=>{var s,r,i,n;let a=e.answer;a=(a="".replace("",a)).replace(/((\[\d+\][ \t]*)+)/g,e=>{let t=e.match(/\[\d+\]/g);return t&&t.length>3?t.slice(0,3).join(""):e});let l=t?null===(n=t.find(t=>t.message_id===e.id))||void 0===n?void 0:null===(i=n.images)||void 0===i?void 0:null===(r=i.covers)||void 0===r?void 0:null===(s=r.find(e=>"png"===e.type))||void 0===s?void 0:s.path:"";return"# ".concat(e.query,"\n\n").concat(l?"![mindmap](".concat(l,")"):"","\n\n").concat(a.replace(/\[\d+\]\(\d+\)/g,""),"\n\n\n ").concat(e.recall_contexts.length>0?':sourceButton{sourcesId="'.concat(e.id,'" count="').concat(e.recall_contexts.length,'"}'):"","\n      ")}).join("\n\n"),lw=(e,t)=>e+='\n\n:sourceButton{count="'.concat(t.length,'"}'),lj=e=>{var t;let s=(0,w.useRouter)(),r=tX(e.threadId),[i,n]=(0,o.useState)(!1),{threads:a,mindmapList:l}=(0,_.Z)(),d=(0,c.useTranslations)(),u=e.title||(null===(t=a[0])||void 0===t?void 0:t.query);return{loading:i,convertToNote:async function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];try{n(!0),i_.Z.info(d("drive.importing"));let t=ly(a,l),i=a.map(e=>({id:e.id,sourceList:e.recall_contexts})),o=await (0,lv.SB)({thread_id:r.current,title:u+" - "+lb()().format("YYYY-MM-DD HH:mm:ss")||"",content:t,other:{sources:i}});200===o.status&&(e?(i_.Z.success(d("drive.import_successful")),window.open("/docs/".concat(o.data.note_id),"_blank")):s.push("/docs/".concat(o.data.note_id)))}catch(e){console.error("Failed to convert thread to note:",e),i_.Z.error(d("drive.import_failed")+e)}finally{n(!1)}(0,H.fk)(q.U.DOCS_CREATE,{thread_id:r.current},!0)},convertSummaryToNote:async(e,t)=>{try{n(!0),i_.Z.info(d("drive.importing"));let s=await (0,lv.SB)({thread_id:r.current,title:u+" - "+lb()().format("YYYY-MM-DD HH:mm:ss")||"",content:lw(e,t),other:{sources:t}});200===s.status&&(window.open("/docs/".concat(s.data.note_id),"_blank"),i_.Z.success(d("drive.import_successful")))}catch(e){console.error("Failed to convert thread to note:",e),i_.Z.error(d("drive.import_failed")+e)}finally{n(!1)}}}};var lk=s(93586);let lC=(0,T.Z)("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]);var l_=s(76983),lN=s.n(l_),lS=function(e){let{className:t}=e;return(0,l.jsxs)("div",{className:(0,iF.cn)(lN().spinner,t),children:[(0,l.jsx)("span",{}),(0,l.jsx)("span",{}),(0,l.jsx)("span",{})]})};let lE=()=>{var e;let t=(0,c.useTranslations)(),{proUsageQuota:s,isLogin:r,isPro:i}=(0,sm.I)();tX(s);let{currentData:n,clearCurrentData:a,templateData:d}=(0,ao.Z)(),{convertToNote:u,convertSummaryToNote:p}=lj({threadId:(null==n?void 0:n.threadId)||""}),m=(0,o.useRef)(null),[f,x]=(0,o.useState)(0),{loading:v,hasContent:b,content:y,sources:w,start:j,stop:k,model:C,setModel:_,style:N,setStyle:S,reset:E}=lx({threadId:null==n?void 0:n.threadId,templateData:d,onCompleted:e=>{M(e)},onError:e=>{x(0),$.$.publish("showSubscriptionPlan",void 0)}}),T=tX(y),P=tX(w);(0,o.useEffect)(()=>{0===f?k():1===f&&j()},[f]),(0,o.useEffect)(()=>{n&&(E(),x(0))},[n]);let M=e=>{p(e||T.current,P.current).then(()=>{(0,H.fk)(q.U.AGENT_SEARCH_THREAD_REWRITE_DOC,{threadId:null==n?void 0:n.threadId},!0),a()})};return(0,o.useEffect)(()=>{m.current&&m.current.scrollTo({top:m.current.scrollHeight})},[y]),(0,l.jsx)(h.Vq,{open:!!n,onOpenChange:()=>a(),children:(0,l.jsxs)(h.cZ,{className:(0,iF.cn)("flex flex-col overflow-hidden px-0",0===f?"max-w-3xl":"max-w-7xl h-[calc(100%-4em)]","dark:bg-[#464E5D]"),"aria-describedby":void 0,onOpenAutoFocus:e=>e.preventDefault(),children:[(0,l.jsx)(h.fK,{className:"relative z-10 pointer-events-none pb-2",children:(0,l.jsxs)(h.$N,{className:"text-base font-bold",children:[0===f?t("rewrite_to_docs.select_title"):1===f?t("rewrite_to_docs.generating_title"):null,v&&(0,l.jsx)(lS,{className:"ml-2 inline-block"})]})}),0===f&&(0,l.jsxs)(h.a7,{className:"pb-6",children:[(0,l.jsxs)("section",{className:"px-0 py-0 mb-4",children:[(0,l.jsx)("div",{className:"space-y-2 border-b-1 border-b-gray-100 pb-4 dark:border-b-[#5C667A]",children:(0,l.jsxs)("button",{className:(0,iF.cn)("flex w-full","justify-between items-center","p-2 px-4 rounded-lg","disabled:opacity-60","bg-[#F6F7F9] dark:bg-[#353B46]",void 0===N&&"text-primary-500 bg-theme-blue-100 dark:bg-[#25364d]"),disabled:v,onClick:()=>S(void 0),children:[(0,l.jsxs)("div",{className:"text-left",children:[(0,l.jsx)("span",{className:"text-base",children:t("rewrite_to_docs.original")}),(0,l.jsx)("p",{className:"text-[12px]",children:t("rewrite_to_docs.original_tips")})]}),void 0===N&&(0,l.jsx)("div",{children:(0,l.jsx)(t$.Z,{size:14})})]})}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("h3",{className:(0,iF.cn)("font-bold text-lg my-5",""),children:t("rewrite_to_docs.ai_title")}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[{value:void 0,label:"rewrite_to_docs.original",desc:"rewrite_to_docs.original_tips"},{value:"workplace",label:"rewrite_to_docs.workplace"},{value:"academic",label:"rewrite_to_docs.academic"},{value:"news_release",label:"rewrite_to_docs.news_release"},{value:"speech_script",label:"rewrite_to_docs.speech_script"}].filter(e=>e.value).map(e=>(0,l.jsxs)("button",{className:(0,iF.cn)("flex w-full","justify-between items-center","bg-[#F6F7F9] text-current dark:bg-[#353B46]","p-2 px-4 rounded-lg","disabled:opacity-60",e.value===N&&"text-primary-500 bg-theme-blue-100 dark:bg-[#25364d]"),disabled:v,onClick:()=>S(e.value),children:[(0,l.jsx)("div",{className:"text-left",children:(0,l.jsx)("span",{className:"text-base",children:t(e.label)})}),e.value===N&&(0,l.jsx)("div",{children:(0,l.jsx)(t$.Z,{size:14})})]},e.value))})]})]}),N&&(0,l.jsxs)("div",{className:"h-[42px] box-border border-[#D3D9E4] border-1 rounded-[12px] flex items-center justify-center mb-4 w-full",children:[t("model"),":",(null===(e=[{value:"gpt-4o",label:"GPT-4o",isPro:!0}].find(e=>e.value===C))||void 0===e?void 0:e.label)||"",(0,l.jsx)("span",{className:"ml-2 rounded text-orange-500 bg-orange-200 dark:bg-theme-bg-dark-300 px-2 py-0.5 text-xs",children:"Pro"})]}),(0,l.jsx)(G.z,{className:"mx-auto block w-full",onClick:()=>{if(void 0===N){u(!0),a();return}if(0===s){if(!r){$.$.publish("showLogin",void 0);return}$.$.publish("showSubscriptionPlan",void 0);return}x(f+1)},children:t("rewrite_to_docs.next")}),N&&(0,l.jsx)("div",{className:"text-center mt-2 w-full text-[14px] flex items-center justify-center",children:r?s?(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[t("rewrite_to_docs.rewriting_use")," "]}):(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[t("rewrite_to_docs.rewriting_Upgrade")," ",(0,l.jsx)(G.z,{variant:"link",className:"px-0 py-0 text-[14px] ml-1",onClick:()=>$.$.publish("showSubscriptionPlan",void 0),children:t("subscription.upgrade_pro_now")})," "]}):(0,l.jsxs)("div",{className:"flex items-center ",children:[t("rewrite_to_docs.rewriting_login")," ",(0,l.jsx)(G.z,{variant:"link",className:"px-0 py-0 text-[14px] ml-1",onClick:()=>$.$.publish("showLogin",void 0),children:t("extension.login")})," "]})})]}),1===f&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.a7,{className:"flex flex-col flex-1 min-h-0",children:y?(0,l.jsxs)("div",{ref:m,className:"flex-1 p-6 rounded-lg bg-theme-bg-100 dark:bg-theme-bg-dark-100 overflow-auto custom-scrollbar prose prose-md dark:prose-invert max-w-full",children:[(0,l.jsx)(g.Z,{sources:w,children:y}),(0,l.jsx)(lS,{className:"ml-2"})]}):v?(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("div",{className:"animate-pulse rounded-md h-5 w-96 max-w-full bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-4"}),(0,l.jsx)("div",{className:"animate-pulse rounded-md h-5 w-[80%] bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-4"}),(0,l.jsx)("div",{className:"animate-pulse rounded-md h-5 w-[60%] bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-4"}),(0,l.jsx)("div",{className:"animate-pulse rounded-md h-5 w-[40%] bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-4"}),(0,l.jsx)("div",{className:"animate-pulse rounded-md h-5 bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-4"}),(0,l.jsx)("div",{className:"animate-pulse rounded-md h-5 bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-4"}),(0,l.jsx)("div",{className:"animate-pulse rounded-md h-5 w-[80%] bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-4"}),(0,l.jsx)("div",{className:"animate-pulse rounded-md h-5 w-[50%] bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-4"})]}):null}),(0,l.jsxs)(h.cN,{className:"gap-4",children:[(0,l.jsxs)(G.z,{variant:"outline",className:"mr-auto dark:bg-transparent dark:border-[#5C667A]",onClick:()=>x(f-1),children:[(0,l.jsx)(lk.Z,{}),t("rewrite_to_docs.back")]}),v&&(0,l.jsxs)(G.z,{onClick:k,children:[(0,l.jsx)(lC,{}),t("rewrite_to_docs.stop")]}),!v&&b&&(0,l.jsxs)(G.z,{variant:"outline-primary",onClick:()=>M(),children:[(0,l.jsx)(nX,{}),t("note.convert")]})]})]})]})})};var lT=s(28485),lP=s.n(lT),lM=e=>{let{open:t,onOpenChange:s}=e,r=(0,c.useTranslations)();return(0,l.jsx)(h.Vq,{open:t,onOpenChange:s,children:(0,l.jsxs)(h.cZ,{className:"sm:max-w-[425px] rounded-lg w-[calc(100%-4rem)]",hideCloseButton:!0,children:[(0,l.jsxs)(h.fK,{className:"text-center",children:[(0,l.jsx)(h.$N,{className:"text-lg font-medium mb-4",children:r("stop_reply_warning_modal_title")}),(0,l.jsx)(h.Be,{className:"text-base text-left",children:r("stop_reply_warning_modal_description")})]}),(0,l.jsx)(h.cN,{className:"flex flex-row gap-3 mt-4",children:(0,l.jsx)(G.z,{variant:"outline",className:"flex-1 rounded-md bg-primary hover:bg-primary/80 text-white text-base py-6",onClick:()=>s(!1),tabIndex:-1,children:r("searchAddition.to_web_use_file_upload_btn")})})]})})},lF=s(15893);let lA=(0,T.Z)("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);var lL=s(34095),lI=s(95191),lZ=s(59892),lD=e=>{let{template:t}=e,s=(0,c.useTranslations)(),{isMyThread:r}=(0,_.Z)(),i=(0,nq.useRouter)(),n=async()=>{let e=await (0,lI.Y)(t.title),s=(0,lZ.b)(e);i.push("/agents/".concat(s,"-").concat(t.short_id)),r||(0,H.fk)(q.U.SIDEBAR_AGENT_SHARE_NEW_CHAT,{},!0)};return(0,l.jsxs)("div",{className:"px-6 py-6 mb-6 border border-[#EBEEF3] bg-white dark:border-[#454E5D] shadow-[0_8px_8px_rgba(0,0,0,0.08)] rounded-2xl border-[#E5E4E3] dark:bg-[#353B46] flex flex-col md:flex-row items-center",children:[(0,l.jsxs)("div",{className:"flex-1 flex flex-col items-center md:items-start",children:[(0,l.jsxs)("div",{className:"flex items-center flex-col md:flex-row",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(nb.x0,{className:"w-6 h-6 text-[#30394A] dark:text-[#FFFFFF]"}),(0,l.jsx)("div",{className:"text-[#30394A] text-bold text-lg ml-2 dark:text-[#FFFFFF]",style:{wordBreak:"break-word",display:"block",overflowWrap:"break-word"},children:t.title})]}),(0,l.jsxs)("div",{className:"flex items-center whitespace-nowrap mt-2 md:mt-0",children:[(0,l.jsx)("div",{className:"text-[#ACB9CD] dark:text-[#737F96] hidden md:block",children:(0,l.jsx)(lA,{className:"w-5 h-5"})}),(0,l.jsx)("div",{className:"text-xs text-[#ACB9CD] dark:text-[#737F96]",children:s("agent.created_by",{name:(0,lF.D)(t)})})]})]}),(0,l.jsx)("div",{className:"mt-3 text-[#5F7698] text-center md:text-left dark:text-[#D0D4DC] text-xs",children:t.introduction})]}),(0,l.jsxs)(G.z,{onClick:n,variant:"outline",className:"mt-6 md:mt-0 ml-0 border-0 text-[#0080FF] dark:text-[#0694FF] md:ml-6 flex rounded-2xl bg-[#EDFAFF] dark:bg-[#25364DCC] hover:bg-[#EDFAFF] hover:text-[#0080FF]",children:[(0,l.jsx)(lL.Z,{className:"w-5 h-5"}),s("new_chat")]})]})},lz=e=>{let{visible:t,closeDrawer:s,children:r}=e,i=(0,o.useRef)(null),n=(0,o.useRef)(null),{isDark:a}=(0,D.Z)(),{sourceType:d}=(0,F.Z)();return((0,o.useEffect)(()=>{function e(){let e=window.innerHeight;i.current&&(i.current.style.height="".concat(e,"px"))}return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,o.useEffect)(()=>{if(t){document.body.style.overflow="hidden";let e=setTimeout(()=>{var e;null===(e=n.current)||void 0===e||e.focus()},100);return()=>clearTimeout(e)}document.body.style.overflow=""},[t]),t)?(0,l.jsx)(l.Fragment,{children:t&&(0,l.jsxs)("div",{ref:i,className:"bg-[#F8F8F8] min-w-[300px] overflow-y-auto custom-scrollbar \n           \n            h-[100vh] flex flex-col ".concat(a?"dark":""," transition-all ").concat(t?"":" opacity-0 invisible"),children:[(0,l.jsx)("button",{onClick:s,ref:n,className:"absolute z-10 text-[#667085] dark:text-[#B9BFCA] top-5 right-4 hover:text-gray-800",children:(0,l.jsx)(U.Z,{className:"cursor-pointer",size:22})}),r]})}):null},lO=()=>{let e=(0,c.useTranslations)(),t=(0,tW.V)(),s=(0,tW.V)(),{isShowAgentSources:r,setIsShowAgentSources:i,sourceType:n,agentSources:a,sourcesHtml:o}=(0,F.Z)(),d=async()=>{s.copy(await (0,sH.h_)(o))};return(0,l.jsxs)(lz,{visible:r,closeDrawer:()=>i(!1),children:["sources"===n&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("header",{className:"sticky top-0 px-6 flex-initial text-large font-semibold border-b border-slate-200 dark:border-[#6D7276] flex flex-col gap-1",children:(0,l.jsxs)("div",{className:"flex items-center gap-2 h-[62px]",children:[(0,l.jsx)(iu.Z,{})," ",e("sources")]})}),(0,l.jsx)(id.o,{className:"p-6 custom-scrollbar overflow-x-hidden",children:(0,l.jsx)(rn.F,{sources:a,canEdit:!1,isDone:!0,isAll:!0,isVisible:!0,rid:""})})]}),"html"===n&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("header",{className:"sticky top-0 px-6 flex-initial text-base font-semibold border-b border-slate-200 dark:border-[#6D7276] flex flex-col gap-1",children:(0,l.jsxs)("div",{className:"flex items-center gap-2 h-[62px]",children:[(0,l.jsx)(nF,{size:18})," ",e("step.tool.reading_webpage_done_desc"),(0,l.jsxs)(t2.F,{placement:"top",offset:-2,children:[(0,l.jsx)(tU.e,{delay:0,content:e("copy_content"),children:(0,l.jsx)("div",{className:"max-w-fit ml-auto mr-5",children:(0,l.jsx)(t3.S,{children:(0,l.jsx)(W.A,{size:"sm",radius:"full",className:"bg-transparent hover:text-gray-800 text-[#667085] dark:text-[#B9BFCA]",isIconOnly:!0,children:s.copied||t.copied?(0,l.jsx)(t$.Z,{size:20,color:"#4ba570"}):(0,l.jsx)(tY.Z,{size:18})})})})}),(0,l.jsxs)(t5.a,{"aria-label":"Topic actions",variant:"flat",children:[(0,l.jsx)(t7.W,{className:"text-[#1D3C6D] hover:!bg-blue-100 hover:!text-[#1D3C6D] dark:text-[#EDF3FC] hover:dark:!bg-[#2E3643] hover:dark:!text-[#EDF3FC]",onPress:d,startContent:(0,l.jsx)(tZ.eC,{className:"h-5 w-5"}),children:e("textFormat")},"copyText"),(0,l.jsx)(t7.W,{className:"text-[#1D3C6D] hover:!bg-blue-100 hover:!text-[#1D3C6D] dark:text-[#EDF3FC] hover:dark:!bg-[#2E3643] hover:dark:!text-[#EDF3FC]",onPress:()=>{let e=o.replace(/^\n\n/,"");t.copy(e)},startContent:(0,l.jsx)(tZ.WO,{className:"h-5 w-5"}),children:e("MarkdownFormat")},"copyMarkdown")]})]})]})}),(0,l.jsx)(id.o,{className:"py-6 custom-scrollbar overflow-x-hidden",children:(0,l.jsx)("div",{className:(0,v.cn)("prose prose-md dark:prose-invert max-w-full flex justify-center",x().prose),children:(0,l.jsx)(g.Z,{sources:[],rid:"",loading:!1,isVisible:!0,className:"w-[80%] break-all",children:o})})})]})]})};let{createElement:lR,createContext:lB,createRef:lq,forwardRef:lH,useCallback:lV,useContext:lW,useEffect:lU,useImperativeHandle:lG,useLayoutEffect:l$,useMemo:lY,useRef:lJ,useState:lX}=d,lK=d[`useId${Math.random()}`.slice(0,5)],lQ=lB(null);lQ.displayName="PanelGroupContext";let l0="function"==typeof lK?lK:()=>null,l1=0;function l2(e=null){let t=l0(),s=lJ(e||t||null);return null===s.current&&(s.current=""+l1++),null!=e?e:s.current}function l3({children:e,className:t="",collapsedSize:s,collapsible:r,defaultSize:i,forwardedRef:n,id:a,maxSize:l,minSize:o,onCollapse:d,onExpand:c,onResize:u,order:h,style:p,tagName:m="div",...f}){let x=lW(lQ);if(null===x)throw Error("Panel components must be rendered within a PanelGroup container");let{collapsePanel:v,expandPanel:g,getPanelSize:b,getPanelStyle:y,groupId:w,isPanelCollapsed:j,reevaluatePanelConstraints:k,registerPanel:C,resizePanel:_,unregisterPanel:N}=x,S=l2(a),E=lJ({callbacks:{onCollapse:d,onExpand:c,onResize:u},constraints:{collapsedSize:s,collapsible:r,defaultSize:i,maxSize:l,minSize:o},id:S,idIsFromProps:void 0!==a,order:h});lJ({didLogMissingDefaultSizeWarning:!1}),l$(()=>{let{callbacks:e,constraints:t}=E.current,n={...t};E.current.id=S,E.current.idIsFromProps=void 0!==a,E.current.order=h,e.onCollapse=d,e.onExpand=c,e.onResize=u,t.collapsedSize=s,t.collapsible=r,t.defaultSize=i,t.maxSize=l,t.minSize=o,(n.collapsedSize!==t.collapsedSize||n.collapsible!==t.collapsible||n.maxSize!==t.maxSize||n.minSize!==t.minSize)&&k(E.current,n)}),l$(()=>{let e=E.current;return C(e),()=>{N(e)}},[h,S,C,N]),lG(n,()=>({collapse:()=>{v(E.current)},expand:e=>{g(E.current,e)},getId:()=>S,getSize:()=>b(E.current),isCollapsed:()=>j(E.current),isExpanded:()=>!j(E.current),resize:e=>{_(E.current,e)}}),[v,g,b,j,S,_]);let T=y(E.current,i);return lR(m,{...f,children:e,className:t,id:a,style:{...T,...p},"data-panel":"","data-panel-collapsible":r||void 0,"data-panel-group-id":w,"data-panel-id":S,"data-panel-size":parseFloat(""+T.flexGrow).toFixed(1)})}let l5=lH((e,t)=>lR(l3,{...e,forwardedRef:t}));l3.displayName="Panel",l5.displayName="forwardRef(Panel)";let l7=null,l6=null;function l4(e,t){let s=function(e,t){if(t){let e=(t&ol)!=0,s=(t&oo)!=0,r=(t&od)!=0,i=(t&oc)!=0;if(e)return r?"se-resize":i?"ne-resize":"e-resize";if(s)return r?"sw-resize":i?"nw-resize":"w-resize";if(r)return"s-resize";if(i)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}(e,t);l7!==s&&(l7=s,null===l6&&(l6=document.createElement("style"),r&&l6.setAttribute("nonce",r),document.head.appendChild(l6)),l6.innerHTML=`*{cursor: ${s}!important;}`)}function l8(e){return"keydown"===e.type}function l9(e){return e.type.startsWith("pointer")}function oe(e){return e.type.startsWith("mouse")}function ot(e){if(l9(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(oe(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}let os=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function or(e){let t=e.length;for(;t--;){let s=e[t];if(oC(s,"Missing node"),function(e){let t=getComputedStyle(e);return!!("fixed"===t.position||"auto"!==t.zIndex&&("static"!==t.position||function(e){var t;let s=getComputedStyle(null!==(t=oa(e))&&void 0!==t?t:e).display;return"flex"===s||"inline-flex"===s}(e))||1>+t.opacity||"transform"in t&&"none"!==t.transform||"webkitTransform"in t&&"none"!==t.webkitTransform||"mixBlendMode"in t&&"normal"!==t.mixBlendMode||"filter"in t&&"none"!==t.filter||"webkitFilter"in t&&"none"!==t.webkitFilter||"isolation"in t&&"isolate"===t.isolation||os.test(t.willChange))||"touch"===t.webkitOverflowScrolling}(s))return s}return null}function oi(e){return e&&Number(getComputedStyle(e).zIndex)||0}function on(e){let t=[];for(;e;)t.push(e),e=oa(e);return t}function oa(e){let{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}let ol=1,oo=2,od=4,oc=8,ou="coarse"===function(){if("function"==typeof matchMedia)return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}(),oh=[],op=!1,om=new Map,of=new Map,ox=new Set;function ov(e){let{target:t}=e,{x:s,y:r}=ot(e);op=!0,oy({target:t,x:s,y:r}),oj(),oh.length>0&&(ok("down",e),e.preventDefault(),e.stopPropagation())}function og(e){let{x:t,y:s}=ot(e);if(op&&0===e.buttons&&(op=!1,ok("up",e)),!op){let{target:r}=e;oy({target:r,x:t,y:s})}ok("move",e),ow(),oh.length>0&&e.preventDefault()}function ob(e){let{target:t}=e,{x:s,y:r}=ot(e);of.clear(),op=!1,oh.length>0&&e.preventDefault(),ok("up",e),oy({target:t,x:s,y:r}),ow(),oj()}function oy({target:e,x:t,y:s}){oh.splice(0);let r=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(r=e),ox.forEach(e=>{let{element:i,hitAreaMargins:n}=e,a=i.getBoundingClientRect(),{bottom:l,left:o,right:d,top:c}=a,u=ou?n.coarse:n.fine;if(t>=o-u&&t<=d+u&&s>=c-u&&s<=l+u){if(null!==r&&document.contains(r)&&i!==r&&!i.contains(r)&&!r.contains(i)&&function(e,t){let s;if(e===t)throw Error("Cannot compare node with itself");let r={a:on(e),b:on(t)};for(;r.a.at(-1)===r.b.at(-1);)e=r.a.pop(),t=r.b.pop(),s=e;oC(s,"Stacking order can only be calculated for elements with a common ancestor");let i={a:oi(or(r.a)),b:oi(or(r.b))};if(i.a===i.b){let e=s.childNodes,t={a:r.a.at(-1),b:r.b.at(-1)},i=e.length;for(;i--;){let s=e[i];if(s===t.a)return 1;if(s===t.b)return -1}}return Math.sign(i.a-i.b)}(r,i)>0){let e=r,t=!1;for(;e;){var h;if(e.contains(i))break;if((h=e.getBoundingClientRect()).x<a.x+a.width&&h.x+h.width>a.x&&h.y<a.y+a.height&&h.y+h.height>a.y){t=!0;break}e=e.parentElement}if(t)return}oh.push(e)}})}function ow(){let e=!1,t=!1;oh.forEach(s=>{let{direction:r}=s;"horizontal"===r?e=!0:t=!0});let s=0;of.forEach(e=>{s|=e}),e&&t?l4("intersection",s):e?l4("horizontal",s):t?l4("vertical",s):null!==l6&&(document.head.removeChild(l6),l7=null,l6=null)}function oj(){om.forEach((e,t)=>{let{body:s}=t;s.removeEventListener("contextmenu",ob),s.removeEventListener("pointerdown",ov),s.removeEventListener("pointerleave",og),s.removeEventListener("pointermove",og)}),window.removeEventListener("pointerup",ob),window.removeEventListener("pointercancel",ob),ox.size>0&&(op?(oh.length>0&&om.forEach((e,t)=>{let{body:s}=t;e>0&&(s.addEventListener("contextmenu",ob),s.addEventListener("pointerleave",og),s.addEventListener("pointermove",og))}),window.addEventListener("pointerup",ob),window.addEventListener("pointercancel",ob)):om.forEach((e,t)=>{let{body:s}=t;e>0&&(s.addEventListener("pointerdown",ov,{capture:!0}),s.addEventListener("pointermove",og))}))}function ok(e,t){ox.forEach(s=>{let{setResizeHandlerState:r}=s;r(e,oh.includes(s),t)})}function oC(e,t){if(!e)throw console.error(t),Error(t)}function o_(e,t,s=10){return e.toFixed(s)===t.toFixed(s)?0:e>t?1:-1}function oN(e,t,s=10){return 0===o_(e,t,s)}function oS(e,t,s){return 0===o_(e,t,s)}function oE({panelConstraints:e,panelIndex:t,size:s}){let r=e[t];oC(null!=r,`Panel constraints not found for index ${t}`);let{collapsedSize:i=0,collapsible:n,maxSize:a=100,minSize:l=0}=r;return 0>o_(s,l)&&(s=n&&0>o_(s,(i+l)/2)?i:l),s=parseFloat((s=Math.min(a,s)).toFixed(10))}function oT({delta:e,initialLayout:t,panelConstraints:s,pivotIndices:r,prevLayout:i,trigger:n}){if(oS(e,0))return t;let a=[...t],[l,o]=r;oC(null!=l,"Invalid first pivot index"),oC(null!=o,"Invalid second pivot index");let d=0;if("keyboard"===n){{let r=e<0?o:l,i=s[r];oC(i,`Panel constraints not found for index ${r}`);let{collapsedSize:n=0,collapsible:a,minSize:d=0}=i;if(a){let s=t[r];if(oC(null!=s,`Previous layout not found for panel index ${r}`),oS(s,n)){let t=d-s;o_(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}{let r=e<0?l:o,i=s[r];oC(i,`No panel constraints found for index ${r}`);let{collapsedSize:n=0,collapsible:a,minSize:d=0}=i;if(a){let s=t[r];if(oC(null!=s,`Previous layout not found for panel index ${r}`),oS(s,d)){let t=s-n;o_(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}}{let r=e<0?1:-1,i=e<0?o:l,n=0;for(;;){let e=t[i];if(oC(null!=e,`Previous layout not found for panel index ${i}`),n+=oE({panelConstraints:s,panelIndex:i,size:100})-e,(i+=r)<0||i>=s.length)break}let a=Math.min(Math.abs(e),Math.abs(n));e=e<0?0-a:a}{let r=e<0?l:o;for(;r>=0&&r<s.length;){let i=Math.abs(e)-Math.abs(d),n=t[r];oC(null!=n,`Previous layout not found for panel index ${r}`);let l=oE({panelConstraints:s,panelIndex:r,size:n-i});if(!oS(n,l)&&(d+=n-l,a[r]=l,d.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?r--:r++}}if(function(e,t,s){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(!oS(e[s],t[s],void 0))return!1;return!0}(i,a))return i;{let r=e<0?o:l,i=t[r];oC(null!=i,`Previous layout not found for panel index ${r}`);let n=i+d,c=oE({panelConstraints:s,panelIndex:r,size:n});if(a[r]=c,!oS(c,n)){let t=n-c,r=e<0?o:l;for(;r>=0&&r<s.length;){let i=a[r];oC(null!=i,`Previous layout not found for panel index ${r}`);let n=oE({panelConstraints:s,panelIndex:r,size:i+t});if(oS(i,n)||(t-=n-i,a[r]=n),oS(t,0))break;e>0?r--:r++}}}return oS(a.reduce((e,t)=>t+e,0),100)?a:i}function oP(e,t=document){return Array.from(t.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${e}"]`))}function oM(e,t,s=document){let r=oP(e,s).findIndex(e=>e.getAttribute("data-panel-resize-handle-id")===t);return null!=r?r:null}function oF(e,t,s){let r=oM(e,t,s);return null!=r?[r,r+1]:[-1,-1]}function oA(e,t=document){var s;return t instanceof HTMLElement&&(null==t?void 0:null===(s=t.dataset)||void 0===s?void 0:s.panelGroupId)==e?t:t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`)||null}function oL(e,t=document){return t.querySelector(`[data-panel-resize-handle-id="${e}"]`)||null}function oI(e,t){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}function oZ(e,t){let{x:s,y:r}=ot(t);return"horizontal"===e?s:r}function oD(e,t,s){t.forEach((t,r)=>{let i=e[r];oC(i,`Panel data not found for index ${r}`);let{callbacks:n,constraints:a,id:l}=i,{collapsedSize:o=0,collapsible:d}=a,c=s[l];if(null==c||t!==c){s[l]=t;let{onCollapse:e,onExpand:r,onResize:i}=n;i&&i(t,c),d&&(e||r)&&(r&&(null==c||oN(c,o))&&!oN(t,o)&&r(),e&&(null==c||!oN(c,o))&&oN(t,o)&&e())}})}function oz(e,t){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!=t[s])return!1;return!0}function oO(e){try{if("undefined"!=typeof localStorage)e.getItem=e=>localStorage.getItem(e),e.setItem=(e,t)=>{localStorage.setItem(e,t)};else throw Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function oR(e){return`react-resizable-panels:${e}`}function oB(e){return e.map(e=>{let{constraints:t,id:s,idIsFromProps:r,order:i}=e;return r?s:i?`${i}:${JSON.stringify(t)}`:JSON.stringify(t)}).sort((e,t)=>e.localeCompare(t)).join(",")}function oq(e,t){try{let s=oR(e),r=t.getItem(s);if(r){let e=JSON.parse(r);if("object"==typeof e&&null!=e)return e}}catch(e){}return null}function oH(e,t,s,r,i){var n;let a=oR(e),l=oB(t),o=null!==(n=oq(e,i))&&void 0!==n?n:{};o[l]={expandToSizes:Object.fromEntries(s.entries()),layout:r};try{i.setItem(a,JSON.stringify(o))}catch(e){console.error(e)}}function oV({layout:e,panelConstraints:t}){let s=[...e],r=s.reduce((e,t)=>e+t,0);if(s.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${s.map(e=>`${e}%`).join(", ")}`);if(!oS(r,100)&&s.length>0)for(let e=0;e<t.length;e++){let t=s[e];oC(null!=t,`No layout data found for index ${e}`);let i=100/r*t;s[e]=i}let i=0;for(let e=0;e<t.length;e++){let r=s[e];oC(null!=r,`No layout data found for index ${e}`);let n=oE({panelConstraints:t,panelIndex:e,size:r});r!=n&&(i+=r-n,s[e]=n)}if(!oS(i,0))for(let e=0;e<t.length;e++){let r=s[e];oC(null!=r,`No layout data found for index ${e}`);let n=oE({panelConstraints:t,panelIndex:e,size:r+i});if(r!==n&&(i-=n-r,s[e]=n,oS(i,0)))break}return s}let oW={getItem:e=>(oO(oW),oW.getItem(e)),setItem:(e,t)=>{oO(oW),oW.setItem(e,t)}},oU={};function oG({autoSaveId:e=null,children:t,className:s="",direction:r,forwardedRef:i,id:n=null,onLayout:a=null,keyboardResizeBy:l=null,storage:o=oW,style:d,tagName:c="div",...u}){let h=l2(n),p=lJ(null),[m,f]=lX(null),[x,v]=lX([]),g=function(){let[e,t]=lX(0);return lV(()=>t(e=>e+1),[])}(),b=lJ({}),y=lJ(new Map),w=lJ(0),j=lJ({autoSaveId:e,direction:r,dragState:m,id:h,keyboardResizeBy:l,onLayout:a,storage:o}),k=lJ({layout:x,panelDataArray:[],panelDataArrayChanged:!1});lJ({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),lG(i,()=>({getId:()=>j.current.id,getLayout:()=>{let{layout:e}=k.current;return e},setLayout:e=>{let{onLayout:t}=j.current,{layout:s,panelDataArray:r}=k.current,i=oV({layout:e,panelConstraints:r.map(e=>e.constraints)});oI(s,i)||(v(i),k.current.layout=i,t&&t(i),oD(r,i,b.current))}}),[]),l$(()=>{j.current.autoSaveId=e,j.current.direction=r,j.current.dragState=m,j.current.id=h,j.current.onLayout=a,j.current.storage=o}),function({committedValuesRef:e,eagerValuesRef:t,groupId:s,layout:r,panelDataArray:i,panelGroupElement:n,setLayout:a}){lJ({didWarnAboutMissingResizeHandle:!1}),l$(()=>{if(!n)return;let e=oP(s,n);for(let t=0;t<i.length-1;t++){let{valueMax:s,valueMin:n,valueNow:a}=function({layout:e,panelsArray:t,pivotIndices:s}){let r=0,i=100,n=0,a=0,l=s[0];return oC(null!=l,"No pivot index found"),t.forEach((e,t)=>{let{constraints:s}=e,{maxSize:o=100,minSize:d=0}=s;t===l?(r=d,i=o):(n+=d,a+=o)}),{valueMax:Math.min(i,100-n),valueMin:Math.max(r,100-a),valueNow:e[l]}}({layout:r,panelsArray:i,pivotIndices:[t,t+1]}),l=e[t];if(null==l);else{let e=i[t];oC(e,`No panel data found for index "${t}"`),l.setAttribute("aria-controls",e.id),l.setAttribute("aria-valuemax",""+Math.round(s)),l.setAttribute("aria-valuemin",""+Math.round(n)),l.setAttribute("aria-valuenow",null!=a?""+Math.round(a):"")}}return()=>{e.forEach((e,t)=>{e.removeAttribute("aria-controls"),e.removeAttribute("aria-valuemax"),e.removeAttribute("aria-valuemin"),e.removeAttribute("aria-valuenow")})}},[s,r,i,n]),lU(()=>{if(!n)return;let e=t.current;oC(e,"Eager values not found");let{panelDataArray:i}=e;oC(null!=oA(s,n),`No group found for id "${s}"`);let l=oP(s,n);oC(l,`No resize handles found for group id "${s}"`);let o=l.map(e=>{let t=e.getAttribute("data-panel-resize-handle-id");oC(t,"Resize handle element has no handle id attribute");let[l,o]=function(e,t,s,r=document){var i,n,a,l;let o=oL(t,r),d=oP(e,r),c=o?d.indexOf(o):-1;return[null!==(i=null===(n=s[c])||void 0===n?void 0:n.id)&&void 0!==i?i:null,null!==(a=null===(l=s[c+1])||void 0===l?void 0:l.id)&&void 0!==a?a:null]}(s,t,i,n);if(null==l||null==o)return()=>{};let d=e=>{if(!e.defaultPrevented&&"Enter"===e.key){e.preventDefault();let o=i.findIndex(e=>e.id===l);if(o>=0){let e=i[o];oC(e,`No panel data found for index ${o}`);let l=r[o],{collapsedSize:d=0,collapsible:c,minSize:u=0}=e.constraints;if(null!=l&&c){let e=oT({delta:oS(l,d)?u-d:d-l,initialLayout:r,panelConstraints:i.map(e=>e.constraints),pivotIndices:oF(s,t,n),prevLayout:r,trigger:"keyboard"});r!==e&&a(e)}}}};return e.addEventListener("keydown",d),()=>{e.removeEventListener("keydown",d)}});return()=>{o.forEach(e=>e())}},[n,e,t,s,r,i,a])}({committedValuesRef:j,eagerValuesRef:k,groupId:h,layout:x,panelDataArray:k.current.panelDataArray,setLayout:v,panelGroupElement:p.current}),lU(()=>{let{panelDataArray:t}=k.current;if(e){if(0===x.length||x.length!==t.length)return;let s=oU[e];null==s&&(s=function(e,t=10){let s=null;return(...r)=>{null!==s&&clearTimeout(s),s=setTimeout(()=>{e(...r)},t)}}(oH,100),oU[e]=s),s(e,[...t],new Map(y.current),x,o)}},[e,x,o]),lU(()=>{});let C=lV(e=>{let{onLayout:t}=j.current,{layout:s,panelDataArray:r}=k.current;if(e.constraints.collapsible){let i=r.map(e=>e.constraints),{collapsedSize:n=0,panelSize:a,pivotIndices:l}=oJ(r,e,s);if(oC(null!=a,`Panel size not found for panel "${e.id}"`),!oN(a,n)){y.current.set(e.id,a);let o=oT({delta:oY(r,e)===r.length-1?a-n:n-a,initialLayout:s,panelConstraints:i,pivotIndices:l,prevLayout:s,trigger:"imperative-api"});oz(s,o)||(v(o),k.current.layout=o,t&&t(o),oD(r,o,b.current))}}},[]),_=lV((e,t)=>{let{onLayout:s}=j.current,{layout:r,panelDataArray:i}=k.current;if(e.constraints.collapsible){let n=i.map(e=>e.constraints),{collapsedSize:a=0,panelSize:l=0,minSize:o=0,pivotIndices:d}=oJ(i,e,r),c=null!=t?t:o;if(oN(l,a)){let t=y.current.get(e.id),a=null!=t&&t>=c?t:c,o=oT({delta:oY(i,e)===i.length-1?l-a:a-l,initialLayout:r,panelConstraints:n,pivotIndices:d,prevLayout:r,trigger:"imperative-api"});oz(r,o)||(v(o),k.current.layout=o,s&&s(o),oD(i,o,b.current))}}},[]),N=lV(e=>{let{layout:t,panelDataArray:s}=k.current,{panelSize:r}=oJ(s,e,t);return oC(null!=r,`Panel size not found for panel "${e.id}"`),r},[]),S=lV((e,t)=>{let{panelDataArray:s}=k.current,r=oY(s,e);return function({defaultSize:e,dragState:t,layout:s,panelData:r,panelIndex:i,precision:n=3}){let a=s[i];return{flexBasis:0,flexGrow:null==a?void 0!=e?e.toPrecision(n):"1":1===r.length?"1":a.toPrecision(n),flexShrink:1,overflow:"hidden",pointerEvents:null!==t?"none":void 0}}({defaultSize:t,dragState:m,layout:x,panelData:s,panelIndex:r})},[m,x]),E=lV(e=>{let{layout:t,panelDataArray:s}=k.current,{collapsedSize:r=0,collapsible:i,panelSize:n}=oJ(s,e,t);return oC(null!=n,`Panel size not found for panel "${e.id}"`),!0===i&&oN(n,r)},[]),T=lV(e=>{let{layout:t,panelDataArray:s}=k.current,{collapsedSize:r=0,collapsible:i,panelSize:n}=oJ(s,e,t);return oC(null!=n,`Panel size not found for panel "${e.id}"`),!i||o_(n,r)>0},[]),P=lV(e=>{let{panelDataArray:t}=k.current;t.push(e),t.sort((e,t)=>{let s=e.order,r=t.order;return null==s&&null==r?0:null==s?-1:null==r?1:s-r}),k.current.panelDataArrayChanged=!0,g()},[g]);l$(()=>{if(k.current.panelDataArrayChanged){k.current.panelDataArrayChanged=!1;let{autoSaveId:s,onLayout:r,storage:i}=j.current,{layout:n,panelDataArray:a}=k.current,l=null;if(s){var e,t;let r=null!==(t=(null!==(e=oq(s,i))&&void 0!==e?e:{})[oB(a)])&&void 0!==t?t:null;r&&(y.current=new Map(Object.entries(r.expandToSizes)),l=r.layout)}null==l&&(l=function({panelDataArray:e}){let t=Array(e.length),s=e.map(e=>e.constraints),r=0,i=100;for(let n=0;n<e.length;n++){let e=s[n];oC(e,`Panel constraints not found for index ${n}`);let{defaultSize:a}=e;null!=a&&(r++,t[n]=a,i-=a)}for(let n=0;n<e.length;n++){let a=s[n];oC(a,`Panel constraints not found for index ${n}`);let{defaultSize:l}=a;if(null!=l)continue;let o=i/(e.length-r);r++,t[n]=o,i-=o}return t}({panelDataArray:a}));let o=oV({layout:l,panelConstraints:a.map(e=>e.constraints)});oI(n,o)||(v(o),k.current.layout=o,r&&r(o),oD(a,o,b.current))}}),l$(()=>{let e=k.current;return()=>{e.layout=[]}},[]);let M=lV(e=>{let t=!1,s=p.current;return s&&"rtl"===window.getComputedStyle(s,null).getPropertyValue("direction")&&(t=!0),function(s){s.preventDefault();let r=p.current;if(!r)return()=>null;let{direction:i,dragState:n,id:a,keyboardResizeBy:l,onLayout:o}=j.current,{layout:d,panelDataArray:c}=k.current,{initialLayout:u}=null!=n?n:{},h=oF(a,e,r),m=function(e,t,s,r,i,n){if(l8(e)){let t="horizontal"===s,r=0;r=e.shiftKey?100:null!=i?i:10;let n=0;switch(e.key){case"ArrowDown":n=t?0:r;break;case"ArrowLeft":n=t?-r:0;break;case"ArrowRight":n=t?r:0;break;case"ArrowUp":n=t?0:-r;break;case"End":n=100;break;case"Home":n=-100}return n}return null==r?0:function(e,t,s,r,i){let n="horizontal"===s,a=oL(t,i);oC(a,`No resize handle element found for id "${t}"`);let l=a.getAttribute("data-panel-group-id");oC(l,"Resize handle element has no group id attribute");let{initialCursorPosition:o}=r,d=oZ(s,e),c=oA(l,i);oC(c,`No group element found for id "${l}"`);let u=c.getBoundingClientRect();return(d-o)/(n?u.width:u.height)*100}(e,t,s,r,n)}(s,e,i,n,l,r),f="horizontal"===i;f&&t&&(m=-m);let x=oT({delta:m,initialLayout:null!=u?u:d,panelConstraints:c.map(e=>e.constraints),pivotIndices:h,prevLayout:d,trigger:l8(s)?"keyboard":"mouse-or-touch"}),g=!oz(d,x);if((l9(s)||oe(s))&&w.current!=m){var y,C;(w.current=m,g||0===m)?of.set(e,0):f?(y=m<0?ol:oo,of.set(e,y)):(C=m<0?od:oc,of.set(e,C))}g&&(v(x),k.current.layout=x,o&&o(x),oD(c,x,b.current))}},[]),F=lV((e,t)=>{let{onLayout:s}=j.current,{layout:r,panelDataArray:i}=k.current,n=i.map(e=>e.constraints),{panelSize:a,pivotIndices:l}=oJ(i,e,r);oC(null!=a,`Panel size not found for panel "${e.id}"`);let o=oT({delta:oY(i,e)===i.length-1?a-t:t-a,initialLayout:r,panelConstraints:n,pivotIndices:l,prevLayout:r,trigger:"imperative-api"});oz(r,o)||(v(o),k.current.layout=o,s&&s(o),oD(i,o,b.current))},[]),A=lV((e,t)=>{let{layout:s,panelDataArray:r}=k.current,{collapsedSize:i=0,collapsible:n}=t,{collapsedSize:a=0,collapsible:l,maxSize:o=100,minSize:d=0}=e.constraints,{panelSize:c}=oJ(r,e,s);null!=c&&(n&&l&&oN(c,i)?oN(i,a)||F(e,a):c<d?F(e,d):c>o&&F(e,o))},[F]),L=lV((e,t)=>{let{direction:s}=j.current,{layout:r}=k.current;if(!p.current)return;let i=oL(e,p.current);oC(i,`Drag handle element not found for id "${e}"`);let n=oZ(s,t);f({dragHandleId:e,dragHandleRect:i.getBoundingClientRect(),initialCursorPosition:n,initialLayout:r})},[]),I=lV(()=>{f(null)},[]),Z=lV(e=>{let{panelDataArray:t}=k.current,s=oY(t,e);s>=0&&(t.splice(s,1),delete b.current[e.id],k.current.panelDataArrayChanged=!0,g())},[g]),D=lY(()=>({collapsePanel:C,direction:r,dragState:m,expandPanel:_,getPanelSize:N,getPanelStyle:S,groupId:h,isPanelCollapsed:E,isPanelExpanded:T,reevaluatePanelConstraints:A,registerPanel:P,registerResizeHandle:M,resizePanel:F,startDragging:L,stopDragging:I,unregisterPanel:Z,panelGroupElement:p.current}),[C,m,r,_,N,S,h,E,T,A,P,M,F,L,I,Z]);return lR(lQ.Provider,{value:D},lR(c,{...u,children:t,className:s,id:n,ref:p,style:{display:"flex",flexDirection:"horizontal"===r?"row":"column",height:"100%",overflow:"hidden",width:"100%",...d},"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":h}))}let o$=lH((e,t)=>lR(oG,{...e,forwardedRef:t}));function oY(e,t){return e.findIndex(e=>e===t||e.id===t.id)}function oJ(e,t,s){let r=oY(e,t),i=r===e.length-1,n=s[r];return{...t.constraints,panelSize:n,pivotIndices:i?[r-1,r]:[r,r+1]}}function oX({children:e=null,className:t="",disabled:s=!1,hitAreaMargins:r,id:i,onBlur:n,onDragging:a,onFocus:l,style:o={},tabIndex:d=0,tagName:c="div",...u}){var h,p;let m=lJ(null),f=lJ({onDragging:a});lU(()=>{f.current.onDragging=a});let x=lW(lQ);if(null===x)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");let{direction:v,groupId:g,registerResizeHandle:b,startDragging:y,stopDragging:w,panelGroupElement:j}=x,k=l2(i),[C,_]=lX("inactive"),[N,S]=lX(!1),[E,T]=lX(null),P=lJ({state:C});l$(()=>{P.current.state=C}),lU(()=>{if(s)T(null);else{let e=b(k);T(()=>e)}},[s,k,b]);let M=null!==(h=null==r?void 0:r.coarse)&&void 0!==h?h:15,F=null!==(p=null==r?void 0:r.fine)&&void 0!==p?p:5;return lU(()=>{if(s||null==E)return;let e=m.current;return oC(e,"Element ref not attached"),function(e,t,s,r,i){var n;let{ownerDocument:a}=t,l={direction:s,element:t,hitAreaMargins:r,setResizeHandlerState:i},o=null!==(n=om.get(a))&&void 0!==n?n:0;return om.set(a,o+1),ox.add(l),oj(),function(){var t;of.delete(e),ox.delete(l);let s=null!==(t=om.get(a))&&void 0!==t?t:1;if(om.set(a,s-1),oj(),1===s&&om.delete(a),oh.includes(l)){let e=oh.indexOf(l);e>=0&&oh.splice(e,1),ow(),i("up",!0,null)}}}(k,e,v,{coarse:M,fine:F},(e,t,s)=>{if(t)switch(e){case"down":{_("drag"),oC(s,'Expected event to be defined for "down" action'),y(k,s);let{onDragging:e}=f.current;e&&e(!0);break}case"move":{let{state:e}=P.current;"drag"!==e&&_("hover"),oC(s,'Expected event to be defined for "move" action'),E(s);break}case"up":{_("hover"),w();let{onDragging:e}=f.current;e&&e(!1)}}else _("inactive")})},[M,v,s,F,b,k,E,y,w]),!function({disabled:e,handleId:t,resizeHandler:s,panelGroupElement:r}){lU(()=>{if(e||null==s||null==r)return;let i=oL(t,r);if(null==i)return;let n=e=>{if(!e.defaultPrevented)switch(e.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":e.preventDefault(),s(e);break;case"F6":{e.preventDefault();let s=i.getAttribute("data-panel-group-id");oC(s,`No group element found for id "${s}"`);let n=oP(s,r),a=oM(s,t,r);oC(null!==a,`No resize element found for id "${t}"`);let l=e.shiftKey?a>0?a-1:n.length-1:a+1<n.length?a+1:0;n[l].focus()}}};return i.addEventListener("keydown",n),()=>{i.removeEventListener("keydown",n)}},[r,e,t,s])}({disabled:s,handleId:k,resizeHandler:E,panelGroupElement:j}),lR(c,{...u,children:e,className:t,id:i,onBlur:()=>{S(!1),null==n||n()},onFocus:()=>{S(!0),null==l||l()},ref:m,role:"separator",style:{touchAction:"none",userSelect:"none",...o},tabIndex:d,"data-panel-group-direction":v,"data-panel-group-id":g,"data-resize-handle":"","data-resize-handle-active":"drag"===C?"pointer":N?"keyboard":void 0,"data-resize-handle-state":C,"data-panel-resize-handle-enabled":!s,"data-panel-resize-handle-id":k})}oG.displayName="PanelGroup",o$.displayName="forwardRef(PanelGroup)",oX.displayName="PanelResizeHandle";let oK=e=>{let{className:t,...s}=e;return(0,l.jsx)(o$,{className:(0,iF.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...s})},oQ=e=>{let{withHandle:t,className:s,...r}=e;return(0,l.jsx)(oX,{className:(0,iF.cn)("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",s),...r,children:t&&(0,l.jsx)("div",{className:"z-10 flex px-1 py-[14px] items-center justify-center rounded-sm border bg-gray-200 dark:bg-gray-300"})})};var o0=s(57527),o1=!0,o2=e=>{var t,s,r,i,n,a,d,u,h,p,m,f,x,g,y,j,k,N,S,E,T,P,M,A;let{url:L,threads:I,shareImg:Z,shortId:D,uid:z,visitorId:R,threadQueryUuid:B,queryCategory:V,queryType:W,fromShortId:U,title:G,pptCover:$,isSelf:J,permission:K,thread_type:Q,mindMapList:ee,topicSource:et,documents:es,documentAction:er,replyFocus:ei,replyQuery:ea,isNewThread:el}=e,eo=(0,c.useTranslations)(),eu=(0,c.useLocale)(),{pendingQueries:ep,threads:em,initThreads:ef,addThreads:ex,initPendingQuery:ev,clearThreads:eg,setMindmapList:eb}=(0,_.Z)(),ey=(0,tR.ZP)(e=>e.userInfo),ew=(0,tR.ZP)(e=>e.isLogin),{setShareThreadId:ej,setIsSelf:ek}=(0,sq.Z)(),{isMobile:eC,isReady:e_}=(0,tk.Z)(),{clearItem:eN}=(0,iv.Z)(),eS=(0,F.Z)(e=>e.extensionEnable),eE=(0,F.Z)(e=>e.extensionSelected),eT=(0,ao.Z)(e=>e.clearTemplateData),eP=(0,ld.Z)(e=>e.template),eM=(0,ld.Z)(e=>e.clearTemplate),{language:eF}=(0,nw.Z)(),[eA,eL]=(0,o.useState)(!1),{setThreadPPTCacheData:eI,setThreadPptBtnEntrance:eZ}=(0,tF.Z)(),{setIsShowAgentSources:eD,setIsShowMobileSource:ez,setClearSources:eO,sourceType:eR,isShowAgentSources:eB}=(0,F.Z)();(0,Y.ZP)(e=>e.isPro);let{isApp:eq}=(0,iQ.b)(),{files:eH,setThreadFiles:eV,setDocuments:eW}=(0,ec.Z)(),eU=()=>e$.push("/search");(0,o.useEffect)(()=>{var e,t;if(1===em.length||(null===(e=em[em.length-1])||void 0===e?void 0:e.id)||(null===(t=em[em.length-1])||void 0===t?void 0:t.query_from)==="agent")return;let s=document.querySelectorAll(".thread-item");s.length>1&&window.requestAnimationFrame(()=>{s[s.length-1].scrollIntoView({behavior:"smooth"})})},[em.length]);let eG=(()=>{let e=(0,sJ.lx)(L);return"".concat(e.origin).concat(e.pathname)})(),e$=(0,w.useRouter)(),{query:eY,answer:eJ}=I[0],eX=eY||eo("page_title"),eK=(eJ||eo("page_desc")).slice(0,160),eQ=(0,nq.useSearchParams)(),e0=e$.query.rid,e1=e$.query.template_id,e2=e0||(0,C.x0)(),[e3,e5]=(0,o.useState)(""),[e7,e6]=(0,o.useState)([]),[e4,e8]=(0,o.useState)(!1),{isMyThread:e9,setIsMyThread:te}=(0,_.Z)(),[tt,ts]=(0,o.useState)(!1),tr=(0,F.Z)(e=>e.loading),ti=(0,o.useRef)(z||R||""),tn=(0,o.useRef)(new Set),ta=null===(t=em[0])||void 0===t?void 0:t.id,tl=null===(s=em[0])||void 0===s?void 0:s._local_id,to=null===(r=em[0])||void 0===r?void 0:r.short_id,td=(0,o.useMemo)(()=>{var e,t;return null!=es&&!!es.length&&(null===(t=em[0])||void 0===t||null===(e=t.recall_contexts)||void 0===e||!e.length)},[null==es?void 0:es.length,em]);(0,o.useEffect)(()=>{eD(!1),ez(!1),eO()},[ta]);let tc=(0,o.useMemo)(()=>{var e,t,s;return ep.length>0?(null===(s=em[em.length-1])||void 0===s?void 0:s.category)||"google":"recommend"===W?(null===(e=em[0])||void 0===e?void 0:e.category)||"":V||(null===(t=em[0])||void 0===t?void 0:t.category)||eE},[em]),tu=(0,o.useMemo)(()=>{if(![O.J5,O.Ys,O.Ts].includes(tc)||_.Z.getState().pendingQueries.length>0)return es||[];let e=ec.Z.getState().documents;if(tc===O.Ys)return Array.from(new Set(td?[...es||[]]:[...es||[],...e]));let t=eH.map(e=>e.id);return Array.from(new Set((0,X.N0)()?[...es||[],...e,...t]:td?[...es||[]]:[...t]))},[tc,eH,es,td]),th=(0,o.useMemo)(()=>em.some(e=>e.hide_reply),[em]);(0,o.useEffect)(()=>{ee&&eb(ee)},[ee]),(0,o.useEffect)(()=>{ep.length>0&&e8(!0)},[ep.length]),(0,o.useEffect)(()=>{K&&(sq.Z.getState().setShowLimitModal(!1),sq.Z.getState().setShareStatus(K,!1),sq.Z.getState().setIsSelf(!!J)),eI(void 0),eZ([])},[e]),(0,o.useEffect)(()=>{var e,t,s;if(void 0===ew)return;I&&I.length||te(!1);let r=(null==ey?void 0:null===(t=ey.user_org_member)||void 0===t?void 0:null===(e=t.org_member)||void 0===e?void 0:e.member_id)||ey.uid,i=nU.Z.get("visitor_id"),n="visitor_id";if(!i){let e=localStorage.getItem(n);e||(e=(0,C.x0)(),localStorage.setItem(n,e)),i=e}(null===(s=em[0])||void 0===s?void 0:s.id)||!tl||tn.current.has(tl)||(ti.current=ew?r:i,tn.current.add(tl)),ew?te(ti.current==r):te(ti.current==i)},[ew,ta,tl]),(0,o.useEffect)(()=>{I&&I.length&&!I[0].id&&(eb([]),eI(void 0),eZ([]),ew?(sq.Z.getState().setShareStatus("PRIVATE",!1),ek(!0)):(sq.Z.getState().setShareStatus("PUBLIC",!1),ek(!1)))},[ew,I]),(0,o.useEffect)(()=>{let e=em.flatMap(e=>{var t,s;return(null==e?void 0:null===(s=e.recall_contexts)||void 0===s?void 0:null===(t=s.filter(e=>{var t;return null==e?void 0:null===(t=e.other_info)||void 0===t?void 0:t.file_id}))||void 0===t?void 0:t.map(t=>{var s,r,i,n,a,l,o,d,c,u,h;return{id:null==t?void 0:null===(s=t.other_info)||void 0===s?void 0:s.file_id,title:null==t?void 0:t.title,size:(null==t?void 0:null===(r=t.other_info)||void 0===r?void 0:r.size)||0,token:(null==t?void 0:null===(i=t.other_info)||void 0===i?void 0:i.token)||0,pages:(null==t?void 0:null===(n=t.other_info)||void 0===n?void 0:n.pages)||0,progress:(null==t?void 0:null===(a=t.other_info)||void 0===a?void 0:a.progress)||100,status:(null==t?void 0:null===(l=t.other_info)||void 0===l?void 0:l.status)||"completed",type:(null==t?void 0:null===(o=t.other_info)||void 0===o?void 0:o.type)||"",created_at:(null==t?void 0:null===(d=t.other_info)||void 0===d?void 0:d.created_at)||"",modified_at:(null==t?void 0:null===(c=t.other_info)||void 0===c?void 0:c.modified_at)||"",length:(null==t?void 0:null===(u=t.other_info)||void 0===u?void 0:u.length)||0,words:(null==t?void 0:null===(h=t.other_info)||void 0===h?void 0:h.words)||0,threadId:(null==e?void 0:e.short_id)||""}}))||[]}).reduce((e,t)=>{let s=e.find(e=>e.id===t.id);return s?t.words>s.words&&(s.words=t.words):e.push(t),e},[]);eV(e),eW(e.map(e=>e.id))},[eW,eV,em]),(0,o.useEffect)(()=>{F.Z.getState().setExtensionSelected(tc)},[tc]),(0,o.useEffect)(()=>{to&&(ej(to),(0,s9.xT)({threadId:to}))},[to]),(0,o.useEffect)(()=>()=>{eg()},[]),(0,o.useEffect)(()=>{eN(),ec.Z.getState().setFiles([]),ec.Z.getState().setHomeFiles([]),ec.Z.getState().setHomeImages([]),ec.Z.getState().setIsGoToSearch(!1),ec.Z.getState().setHomeImagesQustions([])},[]),(0,o.useEffect)(()=>{!(!D||(0,en.Nh)()&&!ey.uid)&&(void 0===e9||e9||(0,H.fk)(q.U.THREAD_SHARE_VIEW,{url:L},!0))},[e9,ey]),(0,o.useEffect)(()=>{ti.current=z||R||"",e8(!1)},[e$.query.rid,z,R]),(0,o.useEffect)(()=>{if(!(0,X.N0)())return;let e=()=>{"visible"===document.visibilityState&&_.Z.getState().pendingQueries.length>0&&ts(!0)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[]),(0,o.useEffect)(()=>{void 0!==ew&&void 0!==eS&&tm()},[ew,eS,I]);let tp=async()=>{try{var e;if(!D){eL(!0);return}eL(!1);let t=await (0,i9.kY)(D);(null===(e=t.items)||void 0===e?void 0:e.length)>0&&(t.items.forEach(e=>{e._local_id||(e._local_id=(0,C.x0)())}),ex(t.items))}catch(e){console.log("error:",e)}finally{eL(!0)}},tm=async()=>{let e=(0,en.a_)();if(eQ&&"true"===eQ.get("requiresLogin")&&!e){n4.Z.getState().setLoginModalVisible(!0);return}let t=sessionStorage.getItem(iN.o.FELO_ACTIVE_QUERY),s=eP;if(e1&&(0,X.N0)()){(0,s9.eo)();let e=await (0,s9.C1)({type:"onGetMultiAgentPlan"});e&&(s=e.template,t=JSON.stringify(e))}if(el){let e=t?JSON.parse(t):{};if((0,X.N0)()&&B){(0,s9.Lk)({id:B||""});let t=await (0,s9.C1)({type:"onGetThreadQuery"});t&&t.query&&(e.rawQuery=t.query)}if(e.threadQueryUuid&&e.threadQueryUuid!==B){eU();return}I[0].query||(I[0].query=e.rawQuery);let s=e.multiQuery;s&&s.length&&(I[0]={...I[0],query:s[0].query,category:s[0].category,topic_id:s[0].category===O.RQ?s[0].source_id:""},e6(s.map(e=>e.query)),ev(s.map(e=>({query:e.query,category:e.category,topic_id:e.category===O.RQ?e.source_id:void 0}))))}I.map(e=>{if(e._local_id||(e._local_id=(0,C.x0)()),D&&(e.short_id=D),Q?e.thread_type=Q:s&&(e.thread_type=ed.yG),e.template&&(0,aE.el)(e.template)){var t;e.template.params=null===(t=e.template.params)||void 0===t?void 0:t.map(e=>(e.value||(e.value=eF),e))}}),e1&&s&&I[0]&&!I[0].id&&(I[0].template=s,eT(),eM()),ea&&setTimeout(()=>{(0,eh.f8)(()=>{_.Z.getState().addThread({_local_id:(0,C.x0)(),query:ea,short_id:D||"",query_from:"followup"})})},1e3),eN(),eg(),ef(I),tp()};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(nV(),{children:[(0,l.jsx)("title",{children:eX})," ",(0,l.jsx)("meta",{name:"description",content:eK}),(0,l.jsx)("meta",{property:"og:type",content:"website"}),(0,l.jsx)("meta",{property:"og:site_name",content:sO.rZ}),(0,l.jsx)("meta",{property:"og:title",content:eX}),(0,l.jsx)("meta",{property:"og:description",content:eK}),(0,l.jsx)("meta",{property:"og:image",content:Z||nW.VI}),(0,l.jsx)("meta",{property:"og:url",content:eG}),(0,l.jsx)("meta",{property:"og:locale",content:eu}),(0,l.jsx)("meta",{name:"twitter:card",content:Z?"summary_large_image":"summary"}),(0,l.jsx)("meta",{name:"twitter:title",content:eX}),(0,l.jsx)("meta",{name:"twitter:description",content:eK}),(0,l.jsx)("meta",{name:"twitter:site",content:"@felo_ai"}),(0,l.jsx)("meta",{name:"twitter:creator",content:"@felo_ai"}),(0,l.jsx)("meta",{name:"twitter:image",content:Z||nW.VI})]}),(0,l.jsxs)(oK,{className:"flex max-w-full",style:{overflow:"visible"},direction:"horizontal",children:[(0,l.jsx)(l5,{style:{overflow:"visible"},className:"min-w-[30vw]",children:(0,l.jsxs)("div",{className:"flex-1 min-w-[30vw]",children:[(0,l.jsx)(ac,{queryCategory:tc,shortId:to,title:G||(null===(i=em[0])||void 0===i?void 0:i.query),isMyThread:e9,topicSource:et,threadUid:(null===(n=em[0])||void 0===n?void 0:n.uid)||(null==ey?void 0:ey.uid),template:(null===(a=em[0])||void 0===a?void 0:a.template)||null},D),(0,l.jsxs)("div",{className:(null===(u=em[0])||void 0===u?void 0:null===(d=u.template)||void 0===d?void 0:d.template_type)===b.W.CUSTOM?"h-[calc(100vh-64px)] overflow-y-auto custom-scrollbar":"",children:[(0,l.jsxs)("div",{className:"mx-auto max-w-7xl mt-8 px-5 relative",children:[U&&(0,l.jsx)(ah,{threadId:U}),(0,l.jsx)("div",{className:(0,v.cn)("overflow-y-auto scrollbar divide-theme-border-200 dark:divide-theme-border-dark-200 pb-24 lg:pb-16",(null===(p=em[0])||void 0===p?void 0:null===(h=p.template)||void 0===h?void 0:h.template_type)===b.W.CUSTOM?"min-h-[calc(100vh-1.5rem-78px)] mb-[130px] md:mb-[0px]":"divide-y"),children:em.length>0?em.map((e,t)=>{var s,r;let i=e.short_id||D;return(0,l.jsx)(nB,{className:(0,v.cn)("last:mb-0 first:pt-0",e9&&em.length<=1&&"min-h-[calc(100vh-1.5rem-78px)]"),query:e.query,queryCategory:tc,rid:e2,thread:e,ssrShortId:i,shortId:to,fromShortId:U,index:t,canEdit:e9||!1,isLast:t===em.length-1,setThreadRid:e5,pptCover:t?void 0:$,documents:tu,showSteps:ep.length>0,documentAction:er,firstIsDeep:(null===(s=em[0])||void 0===s?void 0:s.mode)==="discovery",template:(null===(r=em[0])||void 0===r?void 0:r.template)||null,ssrUid:z},e._local_id)}):(0,l.jsxs)("div",{className:"max-w-3xl min-h-[calc(100vh-1.5rem-78px)]",children:[(0,l.jsx)("div",{className:"animate-pulse rounded-md h-8 w-96 max-w-full bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-3"}),(0,l.jsx)("div",{className:"animate-pulse rounded-md h-5 w-40 max-w-full bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-8"}),(0,l.jsx)("div",{className:"animate-pulse rounded-md h-14 w-48 max-w-full bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-6"}),(0,l.jsx)("div",{className:"animate-pulse rounded-md h-40 bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-4"}),(0,l.jsx)("div",{className:"animate-pulse rounded-md h-40 bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-4"}),(0,l.jsx)("div",{className:"animate-pulse rounded-md h-40 bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-4"})]})}),!eA&&(0,l.jsx)("div",{className:"flex items-center justify-center h-full w-full",children:(0,l.jsx)(tQ.c,{label:eo("topic.loading"),size:"sm"})}),(0,l.jsx)("div",{className:(0,v.cn)("fixed md:sticky left-2 right-2 bottom-0","lg:left-0 lg:right-auto lg:mx-auto","scholar"===tc?"lg:mr-[424px]":"lg:mr-[390px]",(null===(f=em[0])||void 0===f?void 0:null===(m=f.template)||void 0===m?void 0:m.template_type)===b.W.CUSTOM&&"flex justify-center lg:mr-[0px]","z-20"),children:(0,l.jsx)("div",{className:(0,v.cn)("w-full max-w-3xl px-3 md:px-0 md:pt-5 pb-4 md:pb-8","bg-gradient-to-t from-background via-background/80 to-transparent"),children:em.length>0&&(0,l.jsxs)(tH.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"override-will-change",transition:{type:"spring",bounce:.4,duration:.8,delay:.5},children:[e4?(0,l.jsx)(lf,{steps:e7,onClose:()=>e8(!1)}):th||(null===(x=em[0])||void 0===x?void 0:x.template)&&(null===(y=em[0])||void 0===y?void 0:null===(g=y.template)||void 0===g?void 0:g.template_type)===b.W.DIRECT_DUTY||!e9&&(null===(j=em[0])||void 0===j?void 0:j.template)&&(null===(N=em[0])||void 0===N?void 0:null===(k=N.template)||void 0===k?void 0:k.template_type)!==b.W.DEFAULT?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(aJ,{focus:!!ei||e_&&!eC,shortId:to,threadRid:e3,queryCategory:tc,openInNewPage:!e9,mode:null===(S=em[0])||void 0===S?void 0:S.mode,template:0===em.length?void 0:(null===(E=em[0])||void 0===E?void 0:E.template)||null}),!eq&&!tr&&(th||!e9)&&(null===(T=em[0])||void 0===T?void 0:T.template)&&(null===(M=em[0])||void 0===M?void 0:null===(P=M.template)||void 0===P?void 0:P.template_type)!==b.W.DEFAULT&&(0,l.jsx)(lD,{template:null===(A=em[0])||void 0===A?void 0:A.template})]})})}),(0,l.jsx)(lo,{}),(0,l.jsx)(lu,{canEdit:e9||!1}),(0,l.jsx)(lE,{}),(0,l.jsx)(lM,{open:tt,onOpenChange:ts})]}),(0,l.jsx)(lo,{}),(0,l.jsx)(lu,{canEdit:e9||!1}),(0,l.jsx)(lE,{}),(0,l.jsx)(lM,{open:tt,onOpenChange:ts}),(0,l.jsx)(o0.C,{type:"thread"})]})]})}),eB&&(0,l.jsx)(oQ,{withHandle:!0,className:"ml-2"}),eB&&(0,l.jsx)(l5,{minSize:25,className:"".concat("html"===eR?"w-[60vw]":"w-[25vw]"),children:(0,l.jsx)(lO,{})})]}),(0,l.jsx)(lP(),{src:"https://aippt-international-api-static.aippt.cn/aippt-iframe-sdk.js"})]})}},50403:function(e,t,s){"use strict";s.d(t,{Dz:function(){return o},Jd:function(){return c},SB:function(){return n},W:function(){return p},f_:function(){return l},gs:function(){return d},kL:function(){return a},ke:function(){return h},t1:function(){return m},yt:function(){return u}});var r=s(27976),i=s(13263);let n=(e,t)=>fetch("".concat(r.Ez,"/note/save"),{method:"POST",headers:(0,i.Fe)(),body:JSON.stringify(e),signal:t?t.signal:void 0}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>e),a=(e,t)=>fetch("".concat(r.Ez,"/note/query?noteId=").concat(e),{method:"GET",headers:(0,i.Fe)()}).then(async e=>200!==e.status?Promise.reject(e):await e.json()),l=e=>fetch("".concat(r.Ez,"/note/delete"),{method:"POST",headers:(0,i.Fe)(),body:JSON.stringify({note_id:e})}).then(async e=>200!==e.status?Promise.reject(e):await e.json()),o=(e,t)=>fetch("".concat(r.Ez,"/note/ai/expand"),{method:"POST",headers:(0,i.Fe)(),signal:e.signal,body:JSON.stringify({content:t})}),d=(e,t)=>fetch("".concat(r.Ez,"/note/ai/abbreviation"),{method:"POST",headers:(0,i.Fe)(),signal:e.signal,body:JSON.stringify({content:t})}),c=(e,t)=>{let s=new FormData;return s.append("note_id",t||""),s.append("file",e),fetch("".concat(r.Ez,"/note/uploadImage"),{method:"POST",body:s}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>e)},u=e=>fetch("".concat(r.Ez,"/ai/image/generate.id"),{method:"POST",headers:(0,i.Fe)(),body:JSON.stringify(e)}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>e),h=e=>fetch("".concat(r.Ez,"/ai/image/url?image_id=").concat(e),{method:"GET",headers:(0,i.Fe)()}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>e),p=e=>fetch("".concat(r.Ez,"/api/auth/google/refresh/token?refresh_token=").concat(e),{method:"GET"}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>e),m=async(e,t)=>{try{let s=await fetch("".concat(r.Ez,"/file/convert"),{method:"POST",headers:(0,i.Fe)(),body:JSON.stringify(e)});if(200!==s.status)throw Error("Error: ".concat(s.status));let n=await s.blob(),a=URL.createObjectURL(n),l=document.createElement("a");l.href=a,l.download="exported_file.".concat(e.file_type.toLowerCase()),null==t||t({status:"success"}),document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}catch(e){throw null==t||t({status:"error"}),Error("Error: ".concat(e))}}},79057:function(e,t,s){"use strict";let r=(0,s(75910).Ue)(e=>({showGraphicModel:!1,setShowGraphicModel:t=>e({showGraphicModel:t}),graphicQueryData:{},setGraphicQueryData:t=>e({graphicQueryData:t}),allGraphicData:{},setAllGraphicData:t=>e({allGraphicData:t})}));t.Z=r},15893:function(e,t,s){"use strict";s.d(t,{D:function(){return r}});let r=e=>{var t,s,r;return(null===(t=e.creator)||void 0===t?void 0:t.name)||(e.system?"Felo.ai":(null==e?void 0:null===(s=e.user)||void 0===s?void 0:s.name)?null==e?void 0:null===(r=e.user)||void 0===r?void 0:r.name:"")}},14059:function(e,t,s){"use strict";s.d(t,{y:function(){return i}});var r=s(31022);let i=e=>{var t;return"gpt-4o-mini"===e?"Felo Basic":(null===(t=r.Z.getState().allModelList.find(t=>t.value===e))||void 0===t?void 0:t.label)||e}},12045:function(e,t,s){"use strict";s.d(t,{l:function(){return r},t:function(){return n}});let r=(e,t)=>{if(!e)return"";let s=new Date(e);if(isNaN(s.getTime()))return"";let r=(new Date(i().replace(" ","T")).getTime()-s.getTime())/1e3;return r<0?(console.warn("Future date detected. Returning empty string."),""):r<60?t("time.just_now"):r<3600?t("time.minutes_ago",{minutes:Math.floor(r/60)}):r<=86400?t("time.hours_ago",{hours:Math.floor(r/3600)}):r<=604800?t("time.days_ago",{days:Math.floor(r/86400)}):r<=2592e3?t("time.weeks_ago",{weeks:Math.floor(r/604800)}):r<=31536e3?t("time.months_ago",{months:Math.floor(r/2592e3)}):t("time.years_ago",{years:Math.floor(r/31536e3)})},i=()=>{let e=new Date,t=e.getUTCFullYear(),s=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0"),i=String(e.getUTCHours()).padStart(2,"0"),n=String(e.getUTCMinutes()).padStart(2,"0"),a=String(e.getUTCSeconds()).padStart(2,"0");return"".concat(t,"-").concat(s,"-").concat(r," ").concat(i,":").concat(n,":").concat(a)},n=e=>"".concat(String(Math.floor(e/60)).padStart(2,"0"),":").concat(String(e%60).padStart(2,"0"))},85625:function(){},96594:function(){},41282:function(){},12767:function(){},36512:function(){},76983:function(e){e.exports={spinner:"spinner_spinner__c_Sj1",updown:"spinner_updown__1pZcz"}},21241:function(e){"use strict";var t;t=function(){var e={},t={};return e.on=function(e,s){var r={name:e,handler:s};return t[e]=t[e]||[],t[e].unshift(r),r},e.off=function(e){var s=t[e.name].indexOf(e);-1!==s&&t[e.name].splice(s,1)},e.trigger=function(e,s){var r,i=t[e];if(i)for(r=i.length;r--;)i[r].handler(s)},e},e.exports=t},56644:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=s(69e3))&&r.__esModule?r:{default:r};t.default={pauseVideo:{acceptableStates:[i.default.ENDED,i.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[i.default.ENDED,i.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[i.default.ENDED,i.default.PLAYING,i.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},e.exports=t.default},78868:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(s(27185)),i=l(s(38078)),n=l(s(2732)),a=l(s(56644));function l(e){return e&&e.__esModule?e:{default:e}}var o=(0,r.default)("youtube-player"),d={};d.proxyEvents=function(e){var t={},s=function(s){var r="on"+s.slice(0,1).toUpperCase()+s.slice(1);t[r]=function(t){o('event "%s"',r,t),e.trigger(s,t)}},r=!0,i=!1,a=void 0;try{for(var l,d=n.default[Symbol.iterator]();!(r=(l=d.next()).done);r=!0){var c=l.value;s(c)}}catch(e){i=!0,a=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw a}}return t},d.promisifyPlayer=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s={},r=function(r){t&&a.default[r]?s[r]=function(){for(var t=arguments.length,s=Array(t),i=0;i<t;i++)s[i]=arguments[i];return e.then(function(e){var t=a.default[r],i=e.getPlayerState(),n=e[r].apply(e,s);return t.stateChangeRequired||Array.isArray(t.acceptableStates)&&-1===t.acceptableStates.indexOf(i)?new Promise(function(s){e.addEventListener("onStateChange",function r(){var i=e.getPlayerState(),n=void 0;"number"==typeof t.timeout&&(n=setTimeout(function(){e.removeEventListener("onStateChange",r),s()},t.timeout)),Array.isArray(t.acceptableStates)&&-1!==t.acceptableStates.indexOf(i)&&(e.removeEventListener("onStateChange",r),clearTimeout(n),s())})}).then(function(){return n}):n})}:s[r]=function(){for(var t=arguments.length,s=Array(t),i=0;i<t;i++)s[i]=arguments[i];return e.then(function(e){return e[r].apply(e,s)})}},n=!0,l=!1,o=void 0;try{for(var d,c=i.default[Symbol.iterator]();!(n=(d=c.next()).done);n=!0){var u=d.value;r(u)}}catch(e){l=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(l)throw o}}return s},t.default=d,e.exports=t.default},69e3:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},e.exports=t.default},2732:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],e.exports=t.default},38078:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],e.exports=t.default},70905:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=l(s(21241)),n=l(s(32425)),a=l(s(78868));function l(e){return e&&e.__esModule?e:{default:e}}var o=void 0;t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=(0,i.default)();if(o||(o=(0,n.default)(l)),t.events)throw Error("Event handlers cannot be overwritten.");if("string"==typeof e&&!document.getElementById(e))throw Error('Element "'+e+'" does not exist.');t.events=a.default.proxyEvents(l);var d=new Promise(function(s){(void 0===e?"undefined":r(e))==="object"&&e.playVideo instanceof Function?s(e):o.then(function(r){var i=new r.Player(e,t);return l.on("ready",function(){s(i)}),null})}),c=a.default.promisifyPlayer(d,s);return c.on=l.on,c.off=l.off,c},e.exports=t.default},32425:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=s(27499))&&r.__esModule?r:{default:r};t.default=function(e){return new Promise(function(t){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function){t(window.YT);return}var s="http:"===window.location.protocol?"http:":"https:";(0,i.default)(s+"//www.youtube.com/iframe_api",function(t){t&&e.trigger("error",t)});var r=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){r&&r(),t(window.YT)}})},e.exports=t.default},11122:function(e,t,s){"use strict";s.d(t,{w:function(){return C}});var r=s(92909),i=s(38946),n=s(91988),a=(0,i.tv)({slots:{base:["flex","flex-col","relative","overflow-hidden","h-auto","outline-none","text-foreground","box-border","bg-content1",...n.Dh],header:["flex","p-3","z-10","w-full","justify-start","items-center","shrink-0","overflow-inherit","color-inherit","subpixel-antialiased"],body:["relative","flex","flex-1","w-full","p-3","flex-auto","flex-col","place-content-inherit","align-items-inherit","h-auto","break-words","text-left","overflow-y-auto","subpixel-antialiased"],footer:["p-3","h-auto","flex","w-full","items-center","overflow-hidden","color-inherit","subpixel-antialiased"]},variants:{shadow:{none:{base:"shadow-none"},sm:{base:"shadow-small"},md:{base:"shadow-medium"},lg:{base:"shadow-large"}},radius:{none:{base:"rounded-none",header:"rounded-none",footer:"rounded-none"},sm:{base:"rounded-small",header:"rounded-t-small",footer:"rounded-b-small"},md:{base:"rounded-medium",header:"rounded-t-medium",footer:"rounded-b-medium"},lg:{base:"rounded-large",header:"rounded-t-large",footer:"rounded-b-large"}},fullWidth:{true:{base:"w-full"}},isHoverable:{true:{base:"data-[hover=true]:bg-content2 dark:data-[hover=true]:bg-content2"}},isPressable:{true:{base:"cursor-pointer"}},isBlurred:{true:{base:["bg-background/80","dark:bg-background/20","backdrop-blur-md","backdrop-saturate-150"]}},isFooterBlurred:{true:{footer:["bg-background/10","backdrop-blur","backdrop-saturate-150"]}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:"",false:{base:"transition-transform-background motion-reduce:transition-none"}}},compoundVariants:[{isPressable:!0,class:"data-[pressed=true]:scale-[0.97] tap-highlight-transparent"}],defaultVariants:{radius:"lg",shadow:"md",fullWidth:!1,isHoverable:!1,isPressable:!1,isDisabled:!1,isFooterBlurred:!1}}),l=s(75271),o=s(20805),d=s(49336),c=s(36064),u=s(41721),h=s(2909),p=s(15832),m=s(82664),f=s(85151),x=s(65052),v=s(49975),g=s(7909),b=s(48824),y=s(69087),w=s(32117),j=s(52676),k=(0,m.Gp)((e,t)=>{let{children:s,context:i,Component:n,isPressable:k,disableAnimation:C,disableRipple:_,getCardProps:N,getRippleProps:S}=function(e){var t,s,r,i;let n=(0,p.w)(),[w,j]=(0,m.oe)(e,a.variantKeys),{ref:k,as:C,children:_,onClick:N,onPress:S,autoFocus:E,className:T,classNames:P,allowTextSelectionOnPress:M=!0,...F}=w,A=(0,b.gy)(k),L=C||(e.isPressable?"button":"div"),I="string"==typeof L,Z=null!=(s=null!=(t=e.disableAnimation)?t:null==n?void 0:n.disableAnimation)&&s,D=null!=(i=null!=(r=e.disableRipple)?r:null==n?void 0:n.disableRipple)&&i,z=(0,f.W)(null==P?void 0:P.base,T),{onClick:O,onClear:R,ripples:B}=(0,y.i)(),q=e=>{Z||D||!A.current||O(e)},{buttonProps:H,isPressed:V}=(0,h.j)({onPress:S,elementType:C,isDisabled:!e.isPressable,onClick:(0,o.t)(N,q),allowTextSelectionOnPress:M,...F},A),{hoverProps:W,isHovered:U}=(0,u.X)({isDisabled:!e.isHoverable,...F}),{isFocusVisible:G,isFocused:$,focusProps:Y}=(0,c.F)({autoFocus:E}),J=(0,l.useMemo)(()=>a({...j,disableAnimation:Z}),[(0,x.Xx)(j),Z]),X=(0,l.useMemo)(()=>({slots:J,classNames:P,disableAnimation:Z,isDisabled:e.isDisabled,isFooterBlurred:e.isFooterBlurred,fullWidth:e.fullWidth}),[J,P,e.isDisabled,e.isFooterBlurred,Z,e.fullWidth]),K=(0,l.useCallback)((t={})=>({ref:A,className:J.base({class:z}),tabIndex:e.isPressable?0:-1,"data-hover":(0,v.PB)(U),"data-pressed":(0,v.PB)(V),"data-focus":(0,v.PB)($),"data-focus-visible":(0,v.PB)(G),"data-disabled":(0,v.PB)(e.isDisabled),...(0,d.d)(e.isPressable?{...H,...Y,role:"button"}:{},e.isHoverable?W:{},(0,g.z)(F,{enabled:I}),(0,g.z)(t))}),[A,J,z,I,e.isPressable,e.isHoverable,e.isDisabled,U,V,G,H,Y,W,F]),Q=(0,l.useCallback)(()=>({ripples:B,onClear:R}),[B,R]);return{context:X,domRef:A,Component:L,classNames:P,children:_,isHovered:U,isPressed:V,disableAnimation:Z,isPressable:e.isPressable,isHoverable:e.isHoverable,disableRipple:D,handleClick:q,isFocusVisible:G,getCardProps:K,getRippleProps:Q}}({...e,ref:t});return(0,j.jsxs)(n,{...N(),children:[(0,j.jsx)(r.k,{value:i,children:s}),k&&!C&&!_&&(0,j.jsx)(w.L,{...S()})]})});k.displayName="NextUI.Card";var C=k},92909:function(e,t,s){"use strict";s.d(t,{R:function(){return i},k:function(){return r}});var[r,i]=(0,s(95374).k)({name:"CardContext",strict:!0,errorMessage:"useCardContext: `context` is undefined. Seems you forgot to wrap component within <Card />"})},33935:function(e,t,s){"use strict";s.d(t,{W:function(){return v}});var r=s(15832),i=s(82664),n=(0,s(38946).tv)({slots:{base:"flex flex-col gap-2 w-full",label:"",labelWrapper:"flex justify-between",value:"",track:"z-0 relative bg-default-300/50 overflow-hidden",indicator:"h-full"},variants:{color:{default:{indicator:"bg-default-400"},primary:{indicator:"bg-primary"},secondary:{indicator:"bg-secondary"},success:{indicator:"bg-success"},warning:{indicator:"bg-warning"},danger:{indicator:"bg-danger"}},size:{sm:{label:"text-small",value:"text-small",track:"h-1"},md:{label:"text-medium",value:"text-medium",track:"h-3"},lg:{label:"text-large",value:"text-large",track:"h-5"}},radius:{none:{track:"rounded-none",indicator:"rounded-none"},sm:{track:"rounded-small",indicator:"rounded-small"},md:{track:"rounded-medium",indicator:"rounded-medium"},lg:{track:"rounded-large",indicator:"rounded-large"},full:{track:"rounded-full",indicator:"rounded-full"}},isStriped:{true:{indicator:"bg-stripe-gradient bg-[length:1.25rem_1.25rem]"}},isIndeterminate:{true:{indicator:["absolute","w-full","origin-left","animate-indeterminate-bar"]}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:{},false:{indicator:"transition-transform !duration-500"}}},defaultVariants:{color:"primary",size:"md",radius:"full",isStriped:!1,isIndeterminate:!1,isDisabled:!1},compoundVariants:[{disableAnimation:!0,isIndeterminate:!1,class:{indicator:"!transition-none motion-reduce:transition-none"}}]},{twMerge:!0}),a=s(48824),l=s(85151),o=s(65052),d=s(42473),c=s(49975),u=s(49336),h=s(75271),p=s(91252),m=s(9874),f=s(52676),x=(0,i.Gp)((e,t)=>{let{Component:s,slots:x,classNames:v,label:g,percentage:b,showValueLabel:y,getProgressBarProps:w,getLabelProps:j}=function(e){var t,s;let f=(0,r.w)(),[x,v]=(0,i.oe)(e,n.variantKeys),{ref:g,as:b,id:y,className:w,classNames:j,label:k,valueLabel:C,value:_=0,minValue:N=0,maxValue:S=100,showValueLabel:E=!1,formatOptions:T={style:"percent"},...P}=x,M=(0,a.gy)(g),F=(0,l.W)(null==j?void 0:j.base,w),[,A]=(0,p.t)({rerender:!0,delay:100}),L=e.isIndeterminate,I=null!=(s=null!=(t=e.disableAnimation)?t:null==f?void 0:f.disableAnimation)&&s,{progressBarProps:Z,labelProps:D}=(0,m.D)({id:y,label:k,value:_,minValue:N,maxValue:S,valueLabel:C,formatOptions:T,isIndeterminate:L,"aria-labelledby":e["aria-labelledby"],"aria-label":e["aria-label"]}),z=(0,h.useMemo)(()=>n({...v,disableAnimation:I}),[(0,o.Xx)(v),I]),O=!!I||A,R=(0,h.useMemo)(()=>L||!O?void 0:(0,d.Ez)((_-N)/(S-N)*100),[O,L,_,N,S]),B=(0,h.useCallback)((t={})=>({ref:M,"data-indeterminate":(0,c.PB)(L),"data-disabled":(0,c.PB)(e.isDisabled),className:z.base({class:F}),...(0,u.d)(Z,P,t)}),[M,z,L,e.isDisabled,F,Z,P]),q=(0,h.useCallback)((e={})=>({className:z.label({class:null==j?void 0:j.label}),...(0,u.d)(D,e)}),[z,j,D]);return{Component:b||"div",domRef:M,slots:z,classNames:j,label:k,percentage:R,showValueLabel:E,getProgressBarProps:B,getLabelProps:q}}({...e,ref:t}),k=w(),C=g||y;return(0,f.jsxs)(s,{...k,children:[C?(0,f.jsxs)("div",{className:x.labelWrapper({class:null==v?void 0:v.labelWrapper}),children:[g&&(0,f.jsx)("span",{...j(),children:g}),y&&(0,f.jsx)("span",{className:x.value({class:null==v?void 0:v.value}),children:k["aria-valuetext"]})]}):null,(0,f.jsx)("div",{className:x.track({class:null==v?void 0:v.track}),children:(0,f.jsx)("div",{className:x.indicator({class:null==v?void 0:v.indicator}),style:{transform:`translateX(-${100-(b||0)}%)`}})})]})});x.displayName="NextUI.Progress";var v=x},72404:function(e,t,s){"use strict";s.d(t,{D:function(){return i}});var r=s(52676),i=e=>(0,r.jsx)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:(0,r.jsx)("path",{d:"M15.5 19l-7-7 7-7",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})})},66336:function(e,t,s){"use strict";s.d(t,{cn:function(){return a}});var r=s(36573),i=function(){for(var e,t,s=0,r="";s<arguments.length;)(e=arguments[s++])&&(t=function e(t){var s,r,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t){if(Array.isArray(t))for(s=0;s<t.length;s++)t[s]&&(r=e(t[s]))&&(i&&(i+=" "),i+=r);else for(s in t)t[s]&&(i&&(i+=" "),i+=s)}return i}(e))&&(r&&(r+=" "),r+=t);return r},n=(0,s(51297).q)(r.B);function a(...e){return n(i(e))}},48482:function(e,t,s){"use strict";s.d(t,{E:function(){return a}});let r="u">typeof window,i="u">typeof globalThis?globalThis:window,n=()=>r?i.location.href:"";function a(e,t){t=t||n();let s=RegExp("[?&#]"+e+"=([^&#]*)","i"),r=t.match(s);if(r)try{return decodeURIComponent(r[1])||""}catch{}return""}}},function(e){e.O(0,[5140,8846,8201,306,4578,5244,3635,8471,8669,4049,6164,7595,7260,4180,1054,2313,9491,4282,678,589,7774,6317,9829,8188,2858,573,3527,8246,5568,4781,9176,4659,9905,1501,3706,2888,9774,179],function(){return e(e.s=17948)}),_N_E=e.O()}]);