"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2504],{12504:function(e,t,a){a.r(t),a.d(t,{default:function(){return N}});var r=a(52676),i=a(75271),n=a(26595),l=a(7717),s=a(57546),o=a(51131),c=a(48958),d=a(81492),u=a(65819),p=a(25794),v=a(78423);async function m(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("")}async function f(e){return m("".concat(e,"randomSalt123"))}var g=a(41847),h=a(31063),x=a(60161),_=a(77844),w=function(e){let{email:t,onSucceed:a}=e,[r,n]=(0,i.useState)(""),[l,s]=(0,i.useState)(""),[o,c]=(0,i.useState)(!1),[m,w]=(0,i.useState)(!1),y=async e=>{let t=_.Z.getState().firstFrom,{anonymousToken:r}=u.ZP.getState(),i=null==e?void 0:e.callbackUri;return n("email"),(0,d.xJ)({...e,password:await f(e.password),app_id:"glaritySearch",client_type:"WEB",device_id:r,invitation_code:t}).then(e=>{if(200!==e.status){s("server.".concat(e.code));return}a(),(0,p.F_)(e.data.token.token_value),(0,v.bf)(),(0,h.fk)(x.U.LOGIN,{uid:e.data.user.uid,inviteCode:t}),i&&(window.location.href=i)}).finally(()=>{n("")})};return{loading:r,register:async e=>{n("email");let{email:t,password:a}=e,r=_.Z.getState().firstFrom,{anonymousToken:i}=u.ZP.getState();return(0,d.IU)({email:t,password:await f(a),app_id:"glaritySearch",device_id:i,client_type:"WEB",invitation_code:r}).then(e=>{var i,n;200===e.status&&e.data.uid?y({email:t,password:a}):s("server.".concat(e.code)),(0,h.fk)(x.U.REGISTER,{uid:e.data.uid,inviteCode:r}),(0,g.I)({eventName:"user_register_success",eventParams:{event_category:"customEvent",event_label:"user_register_success",value:1}}),null===(i=(n=window).clarity)||void 0===i||i.call(n,"event","felo_search_register")}).catch(e=>{s(e.message)}).finally(()=>{n("")})},login:y,loginByApple:e=>{n("apple"),(0,d.Zf)({clientType:"WEB",appId:"glaritySearch",redirectUri:"".concat(window.location.origin,"/callback"),state:e?"redirect=".concat(e):void 0}).then(e=>{let{location:t}=e.data;t&&(window.location.href=t)}).finally(()=>{n("")})},loginByGoogle:e=>{n("google"),(0,d.u9)({clientType:"WEB",appId:"glaritySearch",redirectUri:"".concat(window.location.origin,"/callback"),state:e?"redirect=".concat(e):void 0}).then(e=>{let{location:t}=e.data;t&&(window.location.href=t)}).finally(()=>{n("")})},validateEmail:()=>{t&&(s(""),n("validate"),(0,d.ri)(t).then(e=>{if("USER_NOT_FOUND"===e.code){c(!0),w(!0);return}c(!1),w(!0)}).catch(e=>{s(e.message)}).finally(()=>{n("")}))},reset:()=>{s(""),c(!1),w(!1)},error:l,setError:s,isRegisterMode:o,showPasswordInput:m}},y=a(89254),j=a(67241),b=a(43378),N=()=>{let e=(0,l.useTranslations)(),t=(0,s.Z)(e=>e.loginModalVisible),a=async()=>{s.Z.getState().setLoginModalVisible(!1),await new Promise(e=>setTimeout(e,300)),s.Z.getState().setIsEnterpriseLogin(!1)},d=(0,s.Z)(e=>e.callbackUri),u=(0,s.Z)(e=>e.isEnterpriseLogin),[p,v]=(0,i.useState)(""),[m,f]=(0,i.useState)(""),g=(0,i.useRef)(null),h=(0,i.useRef)(null);(0,i.useEffect)(()=>{t&&(v(""),f(""),z())},[t]);let{error:x,setError:_,loading:N,isRegisterMode:S,showPasswordInput:k,validateEmail:E,register:Z,login:A,loginByGoogle:I,loginByApple:U,reset:z}=w({email:p,onSucceed:()=>{v(""),f(""),a()}});return(0,i.useEffect)(()=>{var e;k&&(null===(e=h.current)||void 0===e||e.focus())},[k]),(0,r.jsx)(b.Vq,{open:t,onOpenChange:a,children:(0,r.jsxs)(b.cZ,{className:"max-w-screen-sm",children:[(0,r.jsxs)(b.fK,{children:[(0,r.jsx)(b.$N,{className:"text-2xl text-center",children:e(u?"enterprise.welcome_to_felo_enterprise":"login.title")}),(0,r.jsx)(b.Be,{className:"text-lg text-center",children:e(u?"enterprise.welcome_to_felo_enterprise_desc":"login.desc")})]}),(0,r.jsxs)(b.a7,{className:"w-full max-w-md mx-auto",children:[(0,r.jsxs)(n.A,{className:"w-full rounded-xl mb-4",variant:"bordered",disabled:!!N,isLoading:"google"===N,onClick:()=>I(u?d||"/enterprise":void 0),children:[(0,r.jsx)(j._$,{className:"w-6 h-6"}),e("login.use_google_login")]}),(0,r.jsxs)(n.A,{className:"w-full rounded-xl mb-4",variant:"bordered",disabled:!!N,isLoading:"apple"===N,onClick:()=>U(u?d||"/enterprise":void 0),children:[(0,r.jsx)(j.nz,{className:"w-6 h-6"}),e("login.use_apple_login")]}),(0,r.jsx)(o.j,{className:"mb-4"}),(0,r.jsxs)("form",{onSubmit:e=>{var t,a;if(e.preventDefault(),p&&!N){if(!(null===(t=g.current)||void 0===t?void 0:t.validity.valid)){_("login.email_incorrect");return}if(!k){E();return}if(!(null===(a=h.current)||void 0===a?void 0:a.validity.valid)){_("login.password_incorrect");return}if(S){Z({email:p,password:m});return}A({email:p,password:m,callbackUri:d})}},noValidate:!0,children:[(0,r.jsx)(c.Y,{ref:g,className:"mb-4",type:"email",value:p,onChange:e=>v(e.target.value),variant:"bordered",required:!0,pattern:"^[a-zA-Z0-9._%+\\-]+@[a-zA-Z0-9.\\-]+\\.[a-zA-Z]{2,}$",onBlur:()=>{k&&E()},placeholder:e("login.enter_email")}),k&&(0,r.jsx)(c.Y,{ref:h,className:"mb-4",type:"password",value:m,onChange:e=>f(e.target.value),variant:"bordered",required:!0,pattern:S?"^(?=.*[a-zA-Z]).{8,}$":void 0,placeholder:e("login.enter_password")}),x&&(0,r.jsx)("p",{className:"text-sm text-red-500 mb-4",children:e(x)}),k&&!S&&(0,r.jsx)("p",{className:"text-sm opacity-60 text-right mb-4",children:(0,r.jsx)("a",{href:"".concat(y.I2,"/account/reset-password"),target:"_blank",onClick:e=>{e.preventDefault(),window.open("".concat(y.I2,"/account/reset-password?email=").concat(p))},children:e("login.forgot_password")})}),(0,r.jsx)(n.A,{className:"w-full",type:"submit",variant:"solid",color:"primary",isDisabled:!p,children:e(k?S?"login.email_register":"login.email_login":"login.use_email_login")})]})]})]})})}},51131:function(e,t,a){a.d(t,{j:function(){return c}});var r=a(7909),i=(0,a(38946).tv)({base:"shrink-0 bg-divider border-none",variants:{orientation:{horizontal:"w-full h-divider",vertical:"h-full w-divider"}},defaultVariants:{orientation:"horizontal"}}),n=a(75271),l=a(82664),s=a(52676),o=(0,l.Gp)((e,t)=>{let{Component:a,getDividerProps:l}=function(e){var t;let a,l;let{as:s,className:o,orientation:c,...d}=e,u=s||"hr";"hr"===u&&"vertical"===c&&(u="div");let{separatorProps:p}=(t={elementType:"string"==typeof u?u:"hr",orientation:c},l=(0,r.z)(t,{enabled:"string"==typeof t.elementType}),("vertical"===t.orientation&&(a="vertical"),"hr"!==t.elementType)?{separatorProps:{...l,role:"separator","aria-orientation":a}}:{separatorProps:l}),v=(0,n.useMemo)(()=>i({orientation:c,className:o}),[c,o]);return{Component:u,getDividerProps:(0,n.useCallback)((e={})=>({className:v,role:"separator","data-orientation":c,...p,...d,...e}),[v,c,p,d])}}({...e});return(0,s.jsx)(a,{ref:t,...l()})});o.displayName="NextUI.Divider";var c=o},48958:function(e,t,a){a.d(t,{Y:function(){return c}});var r=a(98945),i=a(83608),n=a(75271),l=a(82664),s=a(52676),o=(0,l.Gp)((e,t)=>{let{Component:a,label:l,description:o,isClearable:c,startContent:d,endContent:u,labelPlacement:p,hasHelper:v,isOutsideLeft:m,shouldLabelBeOutside:f,errorMessage:g,isInvalid:h,getBaseProps:x,getLabelProps:_,getInputProps:w,getInnerWrapperProps:y,getInputWrapperProps:j,getMainWrapperProps:b,getHelperWrapperProps:N,getDescriptionProps:S,getErrorMessageProps:k,getClearButtonProps:E}=(0,r.G)({...e,ref:t}),Z=l?(0,s.jsx)("label",{..._(),children:l}):null,A=(0,n.useMemo)(()=>c?(0,s.jsx)("span",{...E(),children:u||(0,s.jsx)(i.f,{})}):u,[c,E]),I=(0,n.useMemo)(()=>v?(0,s.jsx)("div",{...N(),children:h&&g?(0,s.jsx)("div",{...k(),children:g}):o?(0,s.jsx)("div",{...S(),children:o}):null}):null,[v,h,g,o,N,k,S]),U=(0,n.useMemo)(()=>(0,s.jsxs)("div",{...y(),children:[d,(0,s.jsx)("input",{...w()}),A]}),[d,A,w,y]),z=(0,n.useMemo)(()=>f?(0,s.jsxs)("div",{...b(),children:[(0,s.jsxs)("div",{...j(),children:[m?null:Z,U]}),I]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{...j(),children:[Z,U]}),I]}),[p,I,f,Z,U,g,o,b,j,k,S]);return(0,s.jsxs)(a,{...x(),children:[m?Z:null,z]})});o.displayName="NextUI.Input";var c=o},83608:function(e,t,a){a.d(t,{f:function(){return i}});var r=a(52676),i=e=>(0,r.jsx)("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:(0,r.jsx)("path",{d:"M12 2a10 10 0 1010 10A10.016 10.016 0 0012 2zm3.36 12.3a.754.754 0 010 1.06.748.748 0 01-1.06 0l-2.3-2.3-2.3 2.3a.748.748 0 01-1.06 0 .754.754 0 010-1.06l2.3-2.3-2.3-2.3A.75.75 0 019.7 8.64l2.3 2.3 2.3-2.3a.75.75 0 011.06 1.06l-2.3 2.3z",fill:"currentColor"})})}}]);